import{c as ee,a as ae,b as te,d as oe,p as le,e as re,f as se,g as de,h as ue,u as ne,i as V,j as x,k as w,l as ie,m as ce,n as me,o as ge,q as ve}from"./VDataTable-dTHO6c6d.js";import{g as be,aw as pe,bS as Pe,bx as o,d as Se,by as ye,e as s,f as i,a5 as fe,F as B,m as g,A as v,p as he,cH as De}from"./index-C30_-gqw.js";import{V as I}from"./VTable-CTtmLOzN.js";const Te=he({itemsLength:{type:[Number,String],required:!0},...ge(),...me(),...ce()},"VDataTableServer"),Be=be()({name:"VDataTableServer",props:Te(),emits:{"update:modelValue":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:expanded":e=>!0,"update:groupBy":e=>!0},setup(e,k){let{attrs:F,slots:a}=k;const{groupBy:d}=ee(e),{initialSortOrder:H,sortBy:l,multiSort:R,mustSort:G}=ae(e),{page:u,itemsPerPage:c}=te(e),{disableSort:E}=pe(e),N=v(()=>parseInt(e.itemsLength,10)),{columns:b,headers:_}=oe(e,{groupBy:d,showSelect:o(()=>e.showSelect),showExpand:o(()=>e.showExpand)}),{items:n}=ve(e,b),{toggleSort:p}=le({initialSortOrder:H,sortBy:l,multiSort:R,mustSort:G,page:u}),{opened:C,isGroupOpen:L,toggleGroup:O,extractRows:q}=re({groupBy:d,sortBy:l,disableSort:E}),{pageCount:A,setItemsPerPage:j}=se({page:u,itemsPerPage:c,itemsLength:N}),{flatItems:P}=ie(n,d,C,()=>!!a["group-summary"]),{isSelected:W,select:z,selectAll:J,toggleSelect:K,someSelected:M,allSelected:Q}=de(e,{allItems:n,currentPage:n}),{isExpanded:U,toggleExpand:X}=ue(e),S=v(()=>q(n.value));ne({page:u,itemsPerPage:c,sortBy:l,groupBy:d,search:o(()=>e.search)}),De("v-data-table",{toggleSort:p,sortBy:l}),Pe({VDataTableRows:{hideNoData:o(()=>e.hideNoData),noDataText:o(()=>e.noDataText),loading:o(()=>e.loading),loadingText:o(()=>e.loadingText)}});const t=v(()=>({page:u.value,itemsPerPage:c.value,sortBy:l.value,pageCount:A.value,toggleSort:p,setItemsPerPage:j,someSelected:M.value,allSelected:Q.value,isSelected:W,select:z,selectAll:J,toggleSelect:K,isExpanded:U,toggleExpand:X,isGroupOpen:L,toggleGroup:O,items:S.value.map(m=>m.raw),internalItems:S.value,groupedItems:P.value,columns:b.value,headers:_.value}));Se(()=>{const m=V.filterProps(e),Y=x.filterProps(ye(e,["multiSort"])),Z=w.filterProps(e),$=I.filterProps(e);return s(I,g({class:["v-data-table",{"v-data-table--loading":e.loading},e.class],style:e.style},$,{fixedHeader:e.fixedHeader||e.sticky}),{top:()=>{var r;return(r=a.top)==null?void 0:r.call(a,t.value)},default:()=>{var r,y,f,h,D,T;return a.default?a.default(t.value):i(B,null,[(r=a.colgroup)==null?void 0:r.call(a,t.value),!e.hideDefaultHeader&&i("thead",{key:"thead",class:"v-data-table__thead",role:"rowgroup"},[s(x,g(Y,{multiSort:!!e.multiSort}),a)]),(y=a.thead)==null?void 0:y.call(a,t.value),!e.hideDefaultBody&&i("tbody",{class:"v-data-table__tbody",role:"rowgroup"},[(f=a["body.prepend"])==null?void 0:f.call(a,t.value),a.body?a.body(t.value):s(w,g(F,Z,{items:P.value}),a),(h=a["body.append"])==null?void 0:h.call(a,t.value)]),(D=a.tbody)==null?void 0:D.call(a,t.value),(T=a.tfoot)==null?void 0:T.call(a,t.value)])},bottom:()=>a.bottom?a.bottom(t.value):!e.hideDefaultFooter&&i(B,null,[s(fe,null,null),s(V,m,{prepend:a["footer.prepend"]})])})})}});export{Be as V};
