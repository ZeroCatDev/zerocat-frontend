import{_ as f}from"./ProjectCard-A0KyBsIC.js";import{_ as g,Z as n,o as s,N as r,c as j,F as C,W as x,S as w,e as o,R as y,a6 as k,f as h,j as T,a0 as B,T as d,L as p,P as m,Y as _,bA as A,i as N}from"./index-BhZBrlGg.js";const I={components:{ProjectCard:f},props:{projects:{type:Array,required:!0,default:()=>[]},showAuthor:{type:Boolean,default:!1}}};function b(u,t,l,P,e,i){const c=f;return s(),n(y,null,{default:r(()=>[(s(!0),j(C,null,x(l.projects,a=>(s(),n(w,{key:a.id,cols:"12",lg:"3",md:"4",sm:"6",xl:"2",xs:"12",xxl:"2"},{default:r(()=>[o(c,{author:a.author,project:a,"show-author":l.showAuthor},null,8,["author","project","show-author"])]),_:2},1024))),128))]),_:1})}const V=g(I,[["render",b]]),F={components:{showProjects:V},props:{url:{type:String,required:!0},showAuthor:{type:Boolean,default:!0}},data(){return{projects:[],page:1,limit:20,totalPage:1,totalCount:0,loading:!1,loadTime:0}},computed:{hasTotalCount(){return this.totalCount>0}},methods:{async fetchProjects(){this.loading=!0;const u=performance.now();try{const t=(await k.get(`${this.url}&curr=${this.page}&limit=${this.limit}`)).data;t.totalCount?(this.projects=t.projects,this.totalCount=t.totalCount,this.totalPage=Math.ceil(this.totalCount/this.limit)):this.projects=[...this.projects,...t.projects]}catch(t){console.error("Failed to fetch projects:",t)}finally{this.loading=!1,this.loadTime=performance.now()-u}},loadMore(){this.page++,this.fetchProjects()}},watch:{url:{handler(){this.page=1,this.fetchProjects()},immediate:!0},page:{handler(){this.fetchProjects()}}}},L={class:"mt-2 text-medium-emphasis"};function M(u,t,l,P,e,i){const c=V;return s(),j(C,null,[o(T,{active:e.loading,color:"primary",height:"4",indeterminate:""},null,8,["active"]),o(y,null,{default:r(()=>[o(w,{cols:"12"},{default:r(()=>[h("p",L,[o(d,null,{default:r(()=>[o(m,{icon:"mdi-timer",start:""}),p(" 加载耗时: "+_(e.loadTime)+" ms ",1)]),_:1}),e.totalCount?(s(),n(d,{key:0},{default:r(()=>[o(m,{icon:"mdi-counter",start:""}),p(" 总作品数量: "+_(e.totalCount),1)]),_:1})):B("",!0)])]),_:1})]),_:1}),o(c,{projects:e.projects,"show-author":l.showAuthor},null,8,["projects","show-author"]),t[2]||(t[2]=h("br",null,null,-1)),i.hasTotalCount?(s(),n(A,{key:0,modelValue:e.page,"onUpdate:modelValue":t[0]||(t[0]=a=>e.page=a),length:e.totalPage,rounded:"circle",onInput:i.fetchProjects},null,8,["modelValue","length","onInput"])):(s(),n(N,{key:1,color:"primary",onClick:i.loadMore},{default:r(()=>t[1]||(t[1]=[p("继续加载",-1)])),_:1,__:[1]},8,["onClick"])),t[3]||(t[3]=h("br",null,null,-1))],64)}const v=g(F,[["render",M]]);export{v as _};
