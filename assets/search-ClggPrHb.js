var Et=Object.defineProperty;var pt=s=>{throw TypeError(s)};var Vt=(s,t,e)=>t in s?Et(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var T=(s,t,e)=>Vt(s,typeof t!="symbol"?t+"":t,e),it=(s,t,e)=>t.has(s)||pt("Cannot "+e);var n=(s,t,e)=>(it(s,t,"read from private field"),e?e.call(s):t.get(s)),_=(s,t,e)=>t.has(s)?pt("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(s):t.set(s,e),k=(s,t,e,i)=>(it(s,t,"write to private field"),i?i.call(s,e):t.set(s,e),e),E=(s,t,e)=>(it(s,t,"access private method"),e);import{_ as vt,ag as B,X as C,o as $,P as g,h as m,ap as Dt,aF as Ht,eg as rt,Z as N,a2 as gt,Q as ft,bd as Mt,U as yt,a1 as Nt,a as Y,i as tt,ef as mt,F as nt,T as at,S as et,N as P,W as V,$ as jt,m as Ot,t as Ut,aw as Kt,ax as Lt,ay as Qt,k as zt,O as Bt}from"./index-BctWDPHB.js";import{_ as Jt}from"./43-lazyload-CBkwrR6M.js";import{V as Gt}from"./VForm-Cn_R_Pyx.js";import{V as Wt}from"./VTextField-qJ1QuwJY.js";import{V as ut,a as bt}from"./VRow-CrlTTS1d.js";import{V as Zt}from"./VHover-BYje6C3p.js";import{V as Xt}from"./VPagination-tbeDfVTh.js";import{V as Yt}from"./VAlert-BLYmCKPz.js";import{V as te}from"./VSnackbar-BQ_ogNyf.js";import{V as ee}from"./VContainer-WSyDFs_B.js";import"./VInput-CTxpQVcW.js";/* empty css                   */import"./VField-D6j28sJF.js";/* empty css              */const se={INDEX_NOT_FOUND:"index_not_found"};class L extends Error{constructor(){super(...arguments);T(this,"name","MeiliSearchError")}}class ie extends L{constructor(e,i){super((i==null?void 0:i.message)??`${e.status}: ${e.statusText}`);T(this,"name","MeiliSearchApiError");T(this,"cause");T(this,"response");this.response=e,i!==void 0&&(this.cause=i)}}class re extends L{constructor(e,i){super(`Request to ${e} has failed`,{cause:i});T(this,"name","MeiliSearchRequestError")}}class ne extends L{constructor(e,i){super(`request timed out after ${e}ms`);T(this,"name","MeiliSearchRequestTimeOutError");T(this,"cause");this.cause={timeout:e,requestInit:i}}}class ae extends L{constructor(e,i){super(`timeout of ${i}ms has exceeded on task ${e} when waiting for it to be resolved.`);T(this,"name","MeiliSearchTaskTimeOutError");T(this,"cause");this.cause={taskUid:e,timeout:i}}}const ue="0.50.0";function oe(s){return s.startsWith("https://")||s.startsWith("http://")?s:`http://${s}`}function ce(s){return s.endsWith("/")||(s+="/"),s}function he(s,t){for(const[e,i]of Object.entries(t))i!=null&&s.set(e,Array.isArray(i)?i.join():i instanceof Date?i.toISOString():String(i))}function de(s,t){const e="X-Meilisearch-Client",i=`Meilisearch JavaScript (v${ue})`,r="Content-Type",a="Authorization",u=new Headers(t);if(s.apiKey&&!u.has(a)&&u.set(a,`Bearer ${s.apiKey}`),u.has(r)||u.set(r,"application/json"),s.clientAgents!==void 0){const p=s.clientAgents.concat(i);u.set(e,p.join(" ; "))}else u.set(e,i);return u}const ot={};function le(s,t){const{signal:e}=s,i=new AbortController;if(e!=null){let r=null;if(e.aborted)i.abort(e.reason);else{const a=()=>i.abort(e.reason);e.addEventListener("abort",a,{once:!0}),r=()=>e.removeEventListener("abort",a),i.signal.addEventListener("abort",r,{once:!0})}return()=>{if(e.aborted)return;const a=setTimeout(()=>i.abort(ot),t),u=()=>{clearTimeout(a),r!==null&&i.signal.removeEventListener("abort",r)};return e.addEventListener("abort",u,{once:!0}),()=>{e.removeEventListener("abort",u),u()}}}return s.signal=i.signal,()=>{const r=setTimeout(()=>i.abort(ot),t);return()=>clearTimeout(r)}}var J,D,O,H,A,_t,j;class ct{constructor(t){_(this,A);_(this,J);_(this,D);_(this,O);_(this,H);var i;const e=ce(oe(t.host));try{k(this,J,new URL(e))}catch(r){throw new L("The provided host is not valid",{cause:r})}k(this,D,{...t.requestInit,headers:de(t,(i=t.requestInit)==null?void 0:i.headers)}),k(this,O,t.httpClient),k(this,H,t.timeout)}get(t){return E(this,A,j).call(this,t)}post(t){return E(this,A,j).call(this,{...t,method:"POST"})}put(t){return E(this,A,j).call(this,{...t,method:"PUT"})}patch(t){return E(this,A,j).call(this,{...t,method:"PATCH"})}delete(t){return E(this,A,j).call(this,{...t,method:"DELETE"})}}J=new WeakMap,D=new WeakMap,O=new WeakMap,H=new WeakMap,A=new WeakSet,_t=function(t,e){if(t===void 0&&e===void 0)return n(this,D).headers;const i=new Headers(t);e!==void 0&&!i.has("Content-Type")&&i.set("Content-Type",e);for(const[r,a]of n(this,D).headers)i.has(r)||i.set(r,a);return i},j=async function({path:t,method:e,params:i,contentType:r,body:a,extraRequestInit:u}){const p=new URL(t,n(this,J));i!==void 0&&he(p.searchParams,i);const l={method:e,body:r===void 0||typeof a!="string"?JSON.stringify(a):a,...u,...n(this,D),headers:E(this,A,_t).call(this,u==null?void 0:u.headers,r)},b=n(this,H)!==void 0?le(l,n(this,H)):null,x=b==null?void 0:b();let d,f;try{if(n(this,O)!==void 0)return await n(this,O).call(this,p,l);d=await fetch(p,l),f=await d.text()}catch(S){throw new re(p.toString(),Object.is(S,ot)?new ne(n(this,H),l):S)}finally{x==null||x()}const w=f===""?void 0:JSON.parse(f);if(!d.ok)throw new ie(d,w);return w};const xt={};function kt(s){return function(t){return Object.defineProperty(t,"waitTask",{async value(e){return await s.waitForTask(await t,e)}})}}const pe=s=>typeof s=="number"?s:s.taskUid;var I,G,W,U;class ht{constructor(t,e){_(this,I);_(this,G);_(this,W);_(this,U);k(this,I,t),k(this,G,(e==null?void 0:e.timeout)??5e3),k(this,W,(e==null?void 0:e.interval)??50),k(this,U,kt(this))}async getTask(t,e){return await n(this,I).get({path:`tasks/${t}`,extraRequestInit:e})}async getTasks(t){return await n(this,I).get({path:"tasks",params:t})}async waitForTask(t,e){const i=pe(t),r=(e==null?void 0:e.timeout)??n(this,G),a=(e==null?void 0:e.interval)??n(this,W),u=r>0?new AbortController:null,p=u!==null?setTimeout(()=>void u.abort(xt),r):void 0;try{for(;;){const l=await this.getTask(i,{signal:u==null?void 0:u.signal});if(l.status!=="enqueued"&&l.status!=="processing")return clearTimeout(p),l;a>0&&await new Promise(b=>setTimeout(b,a))}}catch(l){throw Object.is(l.cause,xt)?new ae(i,r):l}}async*waitForTasksIter(t,e){for await(const i of t)yield await this.waitForTask(i,e)}async waitForTasks(...t){const e=[];for await(const i of this.waitForTasksIter(...t))e.push(i);return e}cancelTasks(t){return n(this,U).call(this,n(this,I).post({path:"tasks/cancel",params:t}))}deleteTasks(t){return n(this,U).call(this,n(this,I).delete({path:"tasks",params:t}))}}I=new WeakMap,G=new WeakMap,W=new WeakMap,U=new WeakMap;function dt(s,t){const e=kt(t);return{post:(...i)=>e(s.post(...i)),put:(...i)=>e(s.put(...i)),patch:(...i)=>e(s.patch(...i)),delete:(...i)=>e(s.delete(...i))}}var o;class v{constructor(t,e,i){T(this,"uid");T(this,"primaryKey");T(this,"createdAt");T(this,"updatedAt");T(this,"httpRequest");T(this,"tasks");_(this,o);this.uid=e,this.primaryKey=i,this.httpRequest=new ct(t),this.tasks=new ht(this.httpRequest,t.defaultWaitOptions),k(this,o,dt(this.httpRequest,this.tasks))}async search(t,e,i){return await this.httpRequest.post({path:`indexes/${this.uid}/search`,body:{q:t,...e},extraRequestInit:i})}async searchGet(t,e,i){var u,p,l,b,x,d,f;const a={q:t,...e,filter:(w=>{if(typeof w=="string")return w;if(Array.isArray(w))throw new L("The filter query parameter should be in string format when using searchGet")})(e==null?void 0:e.filter),sort:(u=e==null?void 0:e.sort)==null?void 0:u.join(","),facets:(p=e==null?void 0:e.facets)==null?void 0:p.join(","),attributesToRetrieve:(l=e==null?void 0:e.attributesToRetrieve)==null?void 0:l.join(","),attributesToCrop:(b=e==null?void 0:e.attributesToCrop)==null?void 0:b.join(","),attributesToHighlight:(x=e==null?void 0:e.attributesToHighlight)==null?void 0:x.join(","),vector:(d=e==null?void 0:e.vector)==null?void 0:d.join(","),attributesToSearchOn:(f=e==null?void 0:e.attributesToSearchOn)==null?void 0:f.join(",")};return await this.httpRequest.get({path:`indexes/${this.uid}/search`,params:a,extraRequestInit:i})}async searchForFacetValues(t,e){return await this.httpRequest.post({path:`indexes/${this.uid}/facet-search`,body:t,extraRequestInit:e})}async searchSimilarDocuments(t){return await this.httpRequest.post({path:`indexes/${this.uid}/similar`,body:t})}async getRawInfo(){const t=await this.httpRequest.get({path:`indexes/${this.uid}`});return this.primaryKey=t.primaryKey,this.updatedAt=new Date(t.updatedAt),this.createdAt=new Date(t.createdAt),t}async fetchInfo(){return await this.getRawInfo(),this}async fetchPrimaryKey(){return this.primaryKey=(await this.getRawInfo()).primaryKey,this.primaryKey}static create(t,e={},i){const r=new ct(i);return dt(r,new ht(r)).post({path:"indexes",body:{...e,uid:t}})}update(t){return n(this,o).patch({path:`indexes/${this.uid}`,body:t})}delete(){return n(this,o).delete({path:`indexes/${this.uid}`})}async getStats(){return await this.httpRequest.get({path:`indexes/${this.uid}/stats`})}async getDocuments(t){const e=`indexes/${this.uid}/documents`;return(t==null?void 0:t.filter)!==void 0?await this.httpRequest.post({path:`${e}/fetch`,body:t}):await this.httpRequest.get({path:e,params:t})}async getDocument(t,e){const i=Array.isArray(e==null?void 0:e.fields)?e.fields.join():void 0;return await this.httpRequest.get({path:`indexes/${this.uid}/documents/${t}`,params:{...e,fields:i}})}addDocuments(t,e){return n(this,o).post({path:`indexes/${this.uid}/documents`,params:e,body:t})}addDocumentsFromString(t,e,i){return n(this,o).post({path:`indexes/${this.uid}/documents`,body:t,params:i,contentType:e})}addDocumentsInBatches(t,e=1e3,i){const r=[];for(let a=0;a<t.length;a+=e)r.push(this.addDocuments(t.slice(a,a+e),i));return r}updateDocuments(t,e){return n(this,o).put({path:`indexes/${this.uid}/documents`,params:e,body:t})}updateDocumentsInBatches(t,e=1e3,i){const r=[];for(let a=0;a<t.length;a+=e)r.push(this.updateDocuments(t.slice(a,a+e),i));return r}updateDocumentsFromString(t,e,i){return n(this,o).put({path:`indexes/${this.uid}/documents`,body:t,params:i,contentType:e})}deleteDocument(t){return n(this,o).delete({path:`indexes/${this.uid}/documents/${t}`})}deleteDocuments(t){const i=!Array.isArray(t)&&typeof t=="object"?"documents/delete":"documents/delete-batch";return n(this,o).post({path:`indexes/${this.uid}/${i}`,body:t})}deleteAllDocuments(){return n(this,o).delete({path:`indexes/${this.uid}/documents`})}updateDocumentsByFunction(t){return n(this,o).post({path:`indexes/${this.uid}/documents/edit`,body:t})}async getSettings(){return await this.httpRequest.get({path:`indexes/${this.uid}/settings`})}updateSettings(t){return n(this,o).patch({path:`indexes/${this.uid}/settings`,body:t})}resetSettings(){return n(this,o).delete({path:`indexes/${this.uid}/settings`})}async getPagination(){return await this.httpRequest.get({path:`indexes/${this.uid}/settings/pagination`})}updatePagination(t){return n(this,o).patch({path:`indexes/${this.uid}/settings/pagination`,body:t})}resetPagination(){return n(this,o).delete({path:`indexes/${this.uid}/settings/pagination`})}async getSynonyms(){return await this.httpRequest.get({path:`indexes/${this.uid}/settings/synonyms`})}updateSynonyms(t){return n(this,o).put({path:`indexes/${this.uid}/settings/synonyms`,body:t})}resetSynonyms(){return n(this,o).delete({path:`indexes/${this.uid}/settings/synonyms`})}async getStopWords(){return await this.httpRequest.get({path:`indexes/${this.uid}/settings/stop-words`})}updateStopWords(t){return n(this,o).put({path:`indexes/${this.uid}/settings/stop-words`,body:t})}resetStopWords(){return n(this,o).delete({path:`indexes/${this.uid}/settings/stop-words`})}async getRankingRules(){return await this.httpRequest.get({path:`indexes/${this.uid}/settings/ranking-rules`})}updateRankingRules(t){return n(this,o).put({path:`indexes/${this.uid}/settings/ranking-rules`,body:t})}resetRankingRules(){return n(this,o).delete({path:`indexes/${this.uid}/settings/ranking-rules`})}async getDistinctAttribute(){return await this.httpRequest.get({path:`indexes/${this.uid}/settings/distinct-attribute`})}updateDistinctAttribute(t){return n(this,o).put({path:`indexes/${this.uid}/settings/distinct-attribute`,body:t})}resetDistinctAttribute(){return n(this,o).delete({path:`indexes/${this.uid}/settings/distinct-attribute`})}async getFilterableAttributes(){return await this.httpRequest.get({path:`indexes/${this.uid}/settings/filterable-attributes`})}updateFilterableAttributes(t){return n(this,o).put({path:`indexes/${this.uid}/settings/filterable-attributes`,body:t})}resetFilterableAttributes(){return n(this,o).delete({path:`indexes/${this.uid}/settings/filterable-attributes`})}async getSortableAttributes(){return await this.httpRequest.get({path:`indexes/${this.uid}/settings/sortable-attributes`})}updateSortableAttributes(t){return n(this,o).put({path:`indexes/${this.uid}/settings/sortable-attributes`,body:t})}resetSortableAttributes(){return n(this,o).delete({path:`indexes/${this.uid}/settings/sortable-attributes`})}async getSearchableAttributes(){return await this.httpRequest.get({path:`indexes/${this.uid}/settings/searchable-attributes`})}updateSearchableAttributes(t){return n(this,o).put({path:`indexes/${this.uid}/settings/searchable-attributes`,body:t})}resetSearchableAttributes(){return n(this,o).delete({path:`indexes/${this.uid}/settings/searchable-attributes`})}async getDisplayedAttributes(){return await this.httpRequest.get({path:`indexes/${this.uid}/settings/displayed-attributes`})}updateDisplayedAttributes(t){return n(this,o).put({path:`indexes/${this.uid}/settings/displayed-attributes`,body:t})}resetDisplayedAttributes(){return n(this,o).delete({path:`indexes/${this.uid}/settings/displayed-attributes`})}async getTypoTolerance(){return await this.httpRequest.get({path:`indexes/${this.uid}/settings/typo-tolerance`})}updateTypoTolerance(t){return n(this,o).patch({path:`indexes/${this.uid}/settings/typo-tolerance`,body:t})}resetTypoTolerance(){return n(this,o).delete({path:`indexes/${this.uid}/settings/typo-tolerance`})}async getFaceting(){return await this.httpRequest.get({path:`indexes/${this.uid}/settings/faceting`})}updateFaceting(t){return n(this,o).patch({path:`indexes/${this.uid}/settings/faceting`,body:t})}resetFaceting(){return n(this,o).delete({path:`indexes/${this.uid}/settings/faceting`})}async getSeparatorTokens(){return await this.httpRequest.get({path:`indexes/${this.uid}/settings/separator-tokens`})}updateSeparatorTokens(t){return n(this,o).put({path:`indexes/${this.uid}/settings/separator-tokens`,body:t})}resetSeparatorTokens(){return n(this,o).delete({path:`indexes/${this.uid}/settings/separator-tokens`})}async getNonSeparatorTokens(){return await this.httpRequest.get({path:`indexes/${this.uid}/settings/non-separator-tokens`})}updateNonSeparatorTokens(t){return n(this,o).put({path:`indexes/${this.uid}/settings/non-separator-tokens`,body:t})}resetNonSeparatorTokens(){return n(this,o).delete({path:`indexes/${this.uid}/settings/non-separator-tokens`})}async getDictionary(){return await this.httpRequest.get({path:`indexes/${this.uid}/settings/dictionary`})}updateDictionary(t){return n(this,o).put({path:`indexes/${this.uid}/settings/dictionary`,body:t})}resetDictionary(){return n(this,o).delete({path:`indexes/${this.uid}/settings/dictionary`})}async getProximityPrecision(){return await this.httpRequest.get({path:`indexes/${this.uid}/settings/proximity-precision`})}updateProximityPrecision(t){return n(this,o).put({path:`indexes/${this.uid}/settings/proximity-precision`,body:t})}resetProximityPrecision(){return n(this,o).delete({path:`indexes/${this.uid}/settings/proximity-precision`})}async getEmbedders(){return await this.httpRequest.get({path:`indexes/${this.uid}/settings/embedders`})}updateEmbedders(t){return n(this,o).patch({path:`indexes/${this.uid}/settings/embedders`,body:t})}resetEmbedders(){return n(this,o).delete({path:`indexes/${this.uid}/settings/embedders`})}async getSearchCutoffMs(){return await this.httpRequest.get({path:`indexes/${this.uid}/settings/search-cutoff-ms`})}updateSearchCutoffMs(t){return n(this,o).put({path:`indexes/${this.uid}/settings/search-cutoff-ms`,body:t})}resetSearchCutoffMs(){return n(this,o).delete({path:`indexes/${this.uid}/settings/search-cutoff-ms`})}async getLocalizedAttributes(){return await this.httpRequest.get({path:`indexes/${this.uid}/settings/localized-attributes`})}updateLocalizedAttributes(t){return n(this,o).put({path:`indexes/${this.uid}/settings/localized-attributes`,body:t})}resetLocalizedAttributes(){return n(this,o).delete({path:`indexes/${this.uid}/settings/localized-attributes`})}async getFacetSearch(){return await this.httpRequest.get({path:`indexes/${this.uid}/settings/facet-search`})}updateFacetSearch(t){return n(this,o).put({path:`indexes/${this.uid}/settings/facet-search`,body:t})}resetFacetSearch(){return n(this,o).delete({path:`indexes/${this.uid}/settings/facet-search`})}async getPrefixSearch(){return await this.httpRequest.get({path:`indexes/${this.uid}/settings/prefix-search`})}updatePrefixSearch(t){return n(this,o).put({path:`indexes/${this.uid}/settings/prefix-search`,body:t})}resetPrefixSearch(){return n(this,o).delete({path:`indexes/${this.uid}/settings/prefix-search`})}}o=new WeakMap;var K;class ge{constructor(t){_(this,K);k(this,K,t)}async getBatch(t){return await n(this,K).get({path:`batches/${t}`})}async getBatches(t){return await n(this,K).get({path:"batches",params:t})}}K=new WeakMap;var Z,X,M;class fe{constructor(t){T(this,"config");T(this,"httpRequest");_(this,Z);_(this,X);_(this,M);this.config=t,this.httpRequest=new ct(t),k(this,Z,new ht(this.httpRequest,t.defaultWaitOptions)),k(this,X,new ge(this.httpRequest)),k(this,M,dt(this.httpRequest,this.tasks))}get tasks(){return n(this,Z)}get batches(){return n(this,X)}index(t){return new v(this.config,t)}async getIndex(t){return new v(this.config,t).fetchInfo()}async getRawIndex(t){return new v(this.config,t).getRawInfo()}async getIndexes(t){const e=await this.getRawIndexes(t),i=e.results.map(r=>new v(this.config,r.uid,r.primaryKey));return{...e,results:i}}async getRawIndexes(t){return await this.httpRequest.get({path:"indexes",params:t})}createIndex(t,e){return v.create(t,e,this.config)}updateIndex(t,e){return new v(this.config,t).update(e)}deleteIndex(t){return new v(this.config,t).delete()}async deleteIndexIfExists(t){var e;try{return await this.deleteIndex(t),!0}catch(i){if(((e=i==null?void 0:i.cause)==null?void 0:e.code)===se.INDEX_NOT_FOUND)return!1;throw i}}swapIndexes(t){return n(this,M).post({path:"/swap-indexes",body:t})}async multiSearch(t,e){return await this.httpRequest.post({path:"multi-search",body:t,extraRequestInit:e})}async getNetwork(){return await this.httpRequest.get({path:"network"})}async updateNetwork(t){return await this.httpRequest.patch({path:"network",body:t})}async getKeys(t){const e=await this.httpRequest.get({path:"keys",params:t});return e.results=e.results.map(i=>({...i,createdAt:new Date(i.createdAt),updatedAt:new Date(i.updatedAt)})),e}async getKey(t){return await this.httpRequest.get({path:`keys/${t}`})}async createKey(t){return await this.httpRequest.post({path:"keys",body:t})}async updateKey(t,e){return await this.httpRequest.patch({path:`keys/${t}`,body:e})}async deleteKey(t){await this.httpRequest.delete({path:`keys/${t}`})}async health(){return await this.httpRequest.get({path:"health"})}async isHealthy(){try{const{status:t}=await this.health();return t==="available"}catch{return!1}}async getStats(){return await this.httpRequest.get({path:"stats"})}async getVersion(){return await this.httpRequest.get({path:"version"})}createDump(){return n(this,M).post({path:"dumps"})}createSnapshot(){return n(this,M).post({path:"snapshots"})}}Z=new WeakMap,X=new WeakMap,M=new WeakMap;function $t(s){return typeof s=="object"&&!Array.isArray(s)&&s!==null}function ye(s){return{...{placeholderSearch:!0,keepZeroFacets:!1,clientAgents:[],finitePagination:!1},...s}}function me(s){if(typeof s=="function"){const t=s();if(typeof t!="string")throw new TypeError("Provided apiKey function (2nd parameter) did not return a string, expected string");return t}return s}function be(s,t,e){const{requestInit:i,httpClient:r}=e;if(typeof t!="string"&&typeof t!="function")throw new TypeError("Provided apiKey value (2nd parameter) is not a string or a function, expected string or function");if(i!==void 0&&!$t(i))throw new TypeError("Provided requestInit should be an object");if(r&&typeof r!="function")throw new TypeError("Provided custom httpClient should be a function")}function xe(s,t){return{multiSearch:async function(e,i){const r=t.formatKey([e]),a=t.getEntry(r);if(a)return a;const p=(await s.multiSearch({queries:e})).results.map((l,b)=>({...l,pagination:i[b]||{}}));return t.setEntry(r,p),p}}}function we({insideBoundingBox:s,aroundLatLng:t,aroundRadius:e,minimumAroundRadius:i}){let r,a,u;if(t){const[p,l]=t.split(",").map(b=>Number.parseFloat(b).toFixed(5));r=[p,l]}if((e!=null||i!=null)&&(e==="all"?console.warn("instant-meilisearch is not compatible with the `all` value on the aroundRadius parameter"):e!=null?a=e:a=i),s&&typeof s=="string"){const[p,l,b,x]=s.split(",").map(d=>parseFloat(d));u=`_geoBoundingBox([${p}, ${l}], [${b}, ${x}])`}else if(r!=null&&a!=null){const[p,l]=r;u=`_geoRadius(${p}, ${l}, ${a})`}return u}const Se=/([\\"])/g;function At(s){return s.replace(Se,"\\$1")}function Te(s){const t=At(s),e=t.indexOf(":"),i=t.slice(0,e),r=t.slice(e+1);return`"${i}"="${r}"`}function Re(s){const t=()=>{const u=s.match(/^([^<!>:=]*)([<!>:=]+)(.*)$/);if(u){const[p,l,b]=u.slice(1),x=l.match(/^([<!>]?=|<|>|:){1}(.*)/)||["",""],[d,f]=x.slice(1),w=f+b;return[p,d,w]}return[s,"",""]},[e,i,r]=t();return`"${At(e).trim()}"${i===":"?" ":i}${r.trim()}`}function wt(s,t){return typeof t=="string"?s(t):t.map(e=>typeof e=="string"?s(e):e.map(i=>s(i)))}function St(s){return typeof s=="string"?[s]:s}function _e(s,t,e){const i=St(t),r=St(e),a=[];return s!==void 0&&a.push(s),i!==void 0&&a.push(...i),r!==void 0&&a.push(...r),a}function ke(s,t,e){const i=t!==void 0?wt(Re,t):t,r=e!==void 0?wt(Te,e):e;return _e(s,i,r)}function $e(s,t,e){return!(!e&&!t&&(!s||s.length===0))}function Ae(s,t){const{page:e,hitsPerPage:i}=s;return t?{limit:i+1,offset:e*i}:{limit:0,offset:0}}function Ce(s,t){const{page:e,hitsPerPage:i}=s;return t?{hitsPerPage:i,page:e+1}:{hitsPerPage:0,page:e+1}}function Ct(s){const{query:t,indexUid:e,facets:i,attributesToSnippet:r,snippetEllipsisText:a,filters:u,numericFilters:p,facetFilters:l,attributesToRetrieve:b,attributesToHighlight:x,highlightPreTag:d,highlightPostTag:f,placeholderSearch:w,pagination:S,sort:R,restrictSearchableAttributes:q,meiliSearchParams:c}=s,y={indexUid:e},F=ke(u,p,l);return{getParams(){return y},addQuery(){y.q=t},addFacets(){const h=i;h!==void 0&&(y.facets=typeof h=="string"?[h]:h)},addAttributesToCrop(){const h=(c==null?void 0:c.attributesToCrop)??r;h!==void 0&&(y.attributesToCrop=h)},addCropLength(){const h=c==null?void 0:c.cropLength;h!==void 0&&(y.cropLength=h)},addCropMarker(){const h=(c==null?void 0:c.cropMarker)??a;h!==void 0&&(y.cropMarker=h)},addFilters(){F.length&&(y.filter=F)},addAttributesToRetrieve(){const h=(c==null?void 0:c.attributesToRetrieve)??b;h!==void 0&&(y.attributesToRetrieve=h)},addAttributesToHighlight(){y.attributesToHighlight=(c==null?void 0:c.attributesToHighlight)??x??["*"]},addPreTag(){y.highlightPreTag=(c==null?void 0:c.highlightPreTag)??d??"__ais-highlight__"},addPostTag(){y.highlightPostTag=(c==null?void 0:c.highlightPostTag)??f??"__/ais-highlight__"},addPagination(){const h=$e(F,t,w);if(S.finite){const{hitsPerPage:Q,page:z}=Ce(S,h);y.hitsPerPage=Q,y.page=z}else{const{limit:Q,offset:z}=Ae(S,h);y.limit=Q,y.offset=z}},addSort(){R!=null&&R.length&&(y.sort=Array.isArray(R)?R:[R])},addGeoSearchFilter(){const{insideBoundingBox:h,aroundLatLng:Q,aroundRadius:z,minimumAroundRadius:It}=s,st=we({insideBoundingBox:h,aroundLatLng:Q,aroundRadius:z,minimumAroundRadius:It});st!==void 0&&(Array.isArray(y.filter)?y.filter.unshift(st):y.filter=[st])},addShowMatchesPosition(){const h=c==null?void 0:c.showMatchesPosition;h!==void 0&&(y.showMatchesPosition=h)},addMatchingStrategy(){const h=c==null?void 0:c.matchingStrategy;h!==void 0&&(y.matchingStrategy=h)},addShowRankingScore(){const h=c==null?void 0:c.showRankingScore;h!==void 0&&(y.showRankingScore=h)},addAttributesToSearchOn(){const h=(c==null?void 0:c.attributesToSearchOn)!==void 0?c.attributesToSearchOn:q;h!==void 0&&(y.attributesToSearchOn=h)},addHybridSearch(){const h=c==null?void 0:c.hybrid;h!==void 0&&(y.hybrid=h)},addVector(){const h=c==null?void 0:c.vector;h!==void 0&&(y.vector=h)},addDistinct(){const h=c==null?void 0:c.distinct;h!==void 0&&(y.distinct=h)},addRankingScoreThreshold(){const h=c==null?void 0:c.rankingScoreThreshold;h!==void 0&&(y.rankingScoreThreshold=h)}}}function Tt(s){const t=Ct(s);return t.addQuery(),t.addFacets(),t.addAttributesToCrop(),t.addCropLength(),t.addCropMarker(),t.addFilters(),t.addAttributesToRetrieve(),t.addAttributesToHighlight(),t.addPreTag(),t.addPostTag(),t.addPagination(),t.addSort(),t.addGeoSearchFilter(),t.addShowMatchesPosition(),t.addMatchingStrategy(),t.addShowRankingScore(),t.addAttributesToSearchOn(),t.addHybridSearch(),t.addVector(),t.addDistinct(),t.addRankingScoreThreshold(),t.getParams()}function Pe(s){const t=[];return e=>t.includes(e[s])?!1:(t.push(e[s]),!0)}function qe(s){return s.reduce((t,e)=>t+=JSON.stringify(e),"")}function Fe(s){return typeof s=="string"?s:JSON.stringify(s===void 0?null:s)}function lt(s){return Array.isArray(s)?s.map(t=>lt(t)):$t(s)?Object.keys(s).reduce((t,e)=>(t[e]=lt(s[e]),t),{}):{value:Fe(s)}}function Ie(s){if(!s)return{};const t=lt(s);return{_highlightResult:t,_snippetResult:t}}function Ee(s){var t;for(let e=0;e<s.length;e++){const i=`${e+Math.random()*1e6}`;s[e]._geo&&(s[e]._geoloc=s[e]._geo,s[e].objectID||(s[e].objectID=i)),(t=s[e]._formatted)!=null&&t._geo&&(s[e]._formatted._geoloc=s[e]._formatted._geo,s[e]._formatted.objectID||(s[e]._formatted.objectID=i))}return s}function Ve(s,t){const{hits:e}=s,{hitsPerPage:i}=s.pagination,{finitePagination:r,primaryKey:a}=t;!r&&e.length>i&&e.splice(e.length-1,1);let u=e.map(p=>{var l;if(Object.keys(p).length>0){const{_formatted:b,_matchesPosition:x,...d}=p,f=Object.assign(d,Ie(b));return(l=t==null?void 0:t.meiliSearchParams)!=null&&l.showMatchesPosition&&(f._matchesPosition=x),a&&(f.objectID=p[a]),f}return p});return u=Ee(u),u}function ve(s){const{hitsPerPage:t=0,totalPages:e=0,estimatedTotalHits:i,totalHits:r}=s;return i??r??t*e}function De(s,t){if(s.totalPages!=null)return s.totalPages;if(t===0)return 0;const{limit:e=20,offset:i=0,hits:r}=s,a=r.length>=e?1:0;return i/t+1+a}function He(s,t){const{hitsPerPage:e,page:i}=t,r=De(s,e);return{page:i,nbPages:r,hitsPerPage:e}}function Me(s){if(s){if(typeof s=="string")return[s]}else return[];return s}function Ne(s,t,e){const i=Me(s),r={};for(const a of i)for(const u in t[a])r[a]||(r[a]=e[a]||{}),r[a][u]?r[a][u]=e[a][u]:r[a][u]=0;return r}function je(s,t,e,i){return s?(i=i||{},Ne(t,e,i)):i}function Oe(s){return Object.keys(s).reduce((e,i)=>(e[i]={...s[i],avg:0,sum:0},e),{})}function Ue(s,t,e){return{results:s.map(r=>Ke(r,t[r.indexUid],e))}}function Ke(s,t,e){const{processingTimeMs:i,query:r,indexUid:a,facetDistribution:u={},facetStats:p={}}=s,l=Object.keys(u),{hitsPerPage:b,page:x,nbPages:d}=He(s,s.pagination),f=Ve(s,e),w=ve(s),S=je(e.keepZeroFacets,l,t,u);return{index:a,hitsPerPage:b,page:x,facets:S,nbPages:d,nbHits:w,processingTimeMS:i,query:r,hits:f,params:"",exhaustiveNbHits:!1,facets_stats:Oe(p)}}function Pt(s){if(!s)return[];const t=/[^:]+:(?:asc|desc)/g,e=[];let i;for(;(i=t.exec(s))!==null;)e.push(i[0]);return e.map(r=>r.replace(/^,+|,+$/,""))}function qt(s,t,e){return{hitsPerPage:t===void 0?20:t,page:e||0,finite:!!s}}function Ft(s){const t=s.indexOf(":");return t===-1?{indexUid:s,sortBy:""}:{indexUid:s.substring(0,t),sortBy:s.substring(t+1)}}function Le(s,t){const{query:e,indexName:i,params:r}=s,{indexUid:a,sortBy:u}=Ft(i),p=qt(t.finitePagination,r==null?void 0:r.hitsPerPage,r==null?void 0:r.page);return{...t,query:e,...r,sort:Pt(u),indexUid:a,pagination:p,placeholderSearch:t.placeholderSearch!==!1,keepZeroFacets:!!t.keepZeroFacets}}function Qe(s,t){const{indexUid:e,sortBy:i}=Ft(s.indexName),{params:r}=s,a=qt(t.finitePagination,r==null?void 0:r.hitsPerPage,r==null?void 0:r.page);return{...t,...r,sort:Pt(i),indexUid:e,pagination:a,placeholderSearch:t.placeholderSearch!==!1,keepZeroFacets:!!t.keepZeroFacets}}function ze(s={}){let t=s;return{getEntry:function(e){if(t[e])try{return JSON.parse(t[e])}catch{return}},formatKey:function(e){return qe(e)},setEntry:function(e,i){t[e]=JSON.stringify(i)},clearCache:function(){t={}}}}function Be(s){const t={...s,placeholderSearch:!0,query:""},e=Ct(t);return e.addFacets(),e.addPagination(),e.getParams()}async function Je(s,t,e){const i=Pe("indexUid"),r=t.filter(i).filter(({indexUid:u})=>!Object.keys(e).includes(u));if(r.length===0)return e;const a=await s.multiSearch(r,[]);for(const u of a)e[u.indexUid]=u.facetDistribution||{};return e}function Ge(s,t){for(const e of t)s[e.indexUid]={...e.facetDistribution||{},...s[e.indexUid]||{}};return s}const We="0.26.0",Ze=(s=[])=>{const t=`Meilisearch instant-meilisearch (v${We})`;return s.concat(t)};function Xe(s,t="",e={}){be(s,t,e),t=me(t);const i=Ze(e.clientAgents),r={host:s,apiKey:t,clientAgents:i};e.httpClient!==void 0&&(r.httpClient=e.httpClient),e.requestInit!==void 0&&(r.requestInit=e.requestInit);const a=new fe(r),u=ze(),p=xe(a,u);let l={};const b=ye(e);return{meiliSearchInstance:a,setMeiliSearchParams:x=>{const{meiliSearchParams:d}=e;e.meiliSearchParams=d===void 0?x:{...d,...x}},searchClient:{clearCache:()=>u.clearCache(),search:async function(x){try{const d=[],f=[],w=[];for(const q of x){const c=Le(q,e),y=Tt(c);d.push(y);const F=Be(c);w.push(F),f.push(c.pagination)}l=await Je(p,w,l);const S=await p.multiSearch(d,f);return l=Ge(l,S),Ue(S,l,b)}catch(d){throw console.error(d),new Error(d)}},searchForFacetValues:async function(x){const d=[];for(const f of x){const w=Qe(f,e),R={...Tt(w),facetQuery:f.params.facetQuery,facetName:f.params.facetName};delete R.indexUid;const q=await a.index(w.indexUid).searchForFacetValues(R),y={facetHits:q.facetHits.map(F=>({...F,highlighted:F.value})),exhaustiveFacetsCount:!1,processingTimeMS:q.processingTimeMs};d.push(y)}return d}}}}const Rt="search_history",Ye=10,ts={setup(){Bt({title:"搜索 - ZeroCat"})},data(){return{searchClient:Xe("https://search-1.192325.xyz","34ab22b5131cebd1e2a2459fec77c1b50bfb67560a7cdaf7774d5545c16e6a1c").searchClient,VITE_APP_MEILISEARCH_INDEX:"zerocat",VITE_APP_S3_BUCKET:"https://zerocat-bitiful.houlangs.com",searchQuery:"",showSuggestions:!0,searchHistory:[],showError:!1,errorMessage:"",hotSearches:["Scratch","游戏","动画","音乐","艺术","编程"],searchDebounce:null}},created(){this.loadSearchHistory()},methods:{handleInput(s){this.searchDebounce&&clearTimeout(this.searchDebounce),this.searchDebounce=setTimeout(()=>{const t=s.target.value;this.showSuggestions=!t,t&&this.refine(t)},300)},handleSearch(){this.searchQuery.trim()&&(this.addToSearchHistory(this.searchQuery.trim()),this.showSuggestions=!1)},handleHistoryClick(s){this.searchQuery=s,this.handleSearch()},loadSearchHistory(){try{const s=localStorage.getItem(Rt);this.searchHistory=s?JSON.parse(s):[]}catch(s){console.error("Failed to load search history:",s),this.showError=!0,this.errorMessage="加载搜索历史失败"}},addToSearchHistory(s){try{const t=this.searchHistory.indexOf(s);t>-1&&this.searchHistory.splice(t,1),this.searchHistory.unshift(s),this.searchHistory.length>Ye&&this.searchHistory.pop(),localStorage.setItem(Rt,JSON.stringify(this.searchHistory))}catch(t){console.error("Failed to save search history:",t),this.showError=!0,this.errorMessage="保存搜索历史失败"}}}},es={key:0},ss={class:"text-center"};function is(s,t,e,i,r,a){const u=B("ais-search-box"),p=B("ais-hits"),l=B("ais-pagination"),b=B("ais-stats"),x=B("ais-instant-search");return $(),C(ee,null,{default:g(()=>[m(x,{"search-client":r.searchClient,"index-name":r.VITE_APP_MEILISEARCH_INDEX},{default:g(()=>[m(u,null,{default:g(({isSearchStalled:d,refine:f,currentRefinement:w})=>[m(Gt,{onSubmit:Dt(a.handleSearch,["prevent"])},{default:g(()=>[m(Wt,{modelValue:r.searchQuery,"onUpdate:modelValue":t[0]||(t[0]=S=>r.searchQuery=S),clearable:"",label:"键入以搜索",variant:"solo-filled",loading:d,"hide-details":"",onInput:a.handleInput,onKeyup:Ht(a.handleSearch,["enter"]),class:"mb-2"},{"prepend-inner":g(()=>[m(ft,{icon:"mdi-magnify"})]),append:g(()=>[m(rt,{"leave-absolute":""},{default:g(()=>[d?($(),C(gt,{key:0,size:"24",color:"primary",indeterminate:""})):N("",!0)]),_:2},1024)]),_:2},1032,["modelValue","loading","onInput","onKeyup"])]),_:2},1032,["onSubmit"]),m(Mt,null,{default:g(()=>[r.showSuggestions&&!w?($(),C(yt,{key:0,flat:"",class:"mb-3"},{default:g(()=>[m(Nt,null,{default:g(()=>[r.searchHistory.length>0?($(),Y("div",es,[t[3]||(t[3]=tt("div",{class:"text-subtitle-2 mb-2"},"搜索历史",-1)),m(mt,null,{default:g(()=>[($(!0),Y(nt,null,at(r.searchHistory,(S,R)=>($(),C(et,{key:R,size:"small",onClick:q=>a.handleHistoryClick(S)},{default:g(()=>[P(V(S),1)]),_:2},1032,["onClick"]))),128))]),_:1})])):N("",!0),r.searchHistory.length>0?($(),C(jt,{key:1,class:"my-3"})):N("",!0),tt("div",null,[t[4]||(t[4]=tt("div",{class:"text-subtitle-2 mb-2"},"热门搜索",-1)),m(mt,null,{default:g(()=>[($(!0),Y(nt,null,at(r.hotSearches,(S,R)=>($(),C(et,{key:R,size:"small",onClick:q=>a.handleHistoryClick(S)},{default:g(()=>[P(V(S),1)]),_:2},1032,["onClick"]))),128))]),_:1})])]),_:1})]),_:1})):N("",!0)]),_:2},1024)]),_:1}),m(p,null,{default:g(({items:d})=>[m(rt,{group:""},{default:g(()=>[m(ut,null,{default:g(()=>[($(!0),Y(nt,null,at(d,f=>($(),C(bt,{cols:"12",xs:"12",sm:"6",md:"4",lg:"3",xl:"2",xxl:"2",key:f.objectID},{default:g(()=>[m(Zt,null,{default:g(({isHovering:w,props:S})=>[m(yt,Ot({ref_for:!0},S,{to:`/app/link/project/?id=${f.id}`,elevation:w?8:2,style:{"aspect-ratio":"4/3"},rounded:"lg",class:"transition-swing"}),{default:g(()=>[m(Ut,{src:r.VITE_APP_S3_BUCKET+"/scratch_slt/"+f.id,class:"align-end","lazy-src":Jt,height:"100%",gradient:"to bottom, rgba(0,0,0,.1), rgba(0,0,0,.5)",cover:""},{placeholder:g(()=>[m(ut,{class:"fill-height ma-0",align:"center",justify:"center"},{default:g(()=>[m(gt,{indeterminate:"",color:"primary"})]),_:1})]),default:g(()=>[m(Kt,null,{default:g(()=>[m(et,{size:"small",color:"primary",variant:"tonal"},{default:g(()=>[P(V(f.type),1)]),_:2},1024),f.license!="no"?($(),C(et,{key:0,size:"small",color:"primary",variant:"tonal"},{default:g(()=>[P(V(f.license),1)]),_:2},1024)):N("",!0),m(Lt,{class:"text-white"},{default:g(()=>[P(V(f.title),1)]),_:2},1024),m(Qt,{class:"text-white"},{default:g(()=>[P(V(f.description),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["src"])]),_:2},1040,["to","elevation"])]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)]),_:1}),m(ut,{class:"mt-4"},{default:g(()=>[m(bt,null,{default:g(()=>[m(l,null,{default:g(({currentRefinement:d,nbPages:f,refine:w})=>[tt("div",ss,[m(Xt,{length:f,"total-visible":7,rounded:"circle","model-value":d,"onUpdate:modelValue":S=>w(S)},null,8,["length","model-value","onUpdate:modelValue"])])]),_:1})]),_:1})]),_:1}),m(b,null,{default:g(({nbHits:d})=>[m(rt,null,{default:g(()=>[d===0?($(),C(Yt,{key:0,type:"info",variant:"tonal",class:"mt-4"},{prepend:g(()=>[m(ft,{icon:"mdi-information"})]),default:g(()=>[t[5]||(t[5]=P(" 未找到相关结果，请尝试其他关键词 "))]),_:1,__:[5]})):N("",!0)]),_:2},1024)]),_:1})]),_:1},8,["search-client","index-name"]),m(te,{modelValue:r.showError,"onUpdate:modelValue":t[2]||(t[2]=d=>r.showError=d),color:"error",timeout:"3000"},{actions:g(()=>[m(zt,{color:"white",variant:"text",onClick:t[1]||(t[1]=d=>r.showError=!1)},{default:g(()=>t[6]||(t[6]=[P(" 关闭 ")])),_:1,__:[6]})]),default:g(()=>[P(V(r.errorMessage)+" ",1)]),_:1},8,["modelValue"])]),_:1})}const xs=vt(ts,[["render",is],["__scopeId","data-v-3da68664"]]);export{xs as default};
