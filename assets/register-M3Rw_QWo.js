import{_ as z}from"./LoadingDialog-DNwE8jJl.js";import{_ as O}from"./Recaptcha-CVynk2LY.js";import{f as N,p as F,ar as H,as as Z,at as q,au as g,R as D,a6 as m,i as G,ag as U,a as l,av as L,aw as M,ax as W,_ as E,r as j,e as K,o as J,G as i,w as r,a4 as k,K as S,a3 as Q,H as n,af as C,I as u,a5 as X,M as Y,S as T,T as _}from"./index-DrlbN7FI.js";import{r as $}from"./accountService-B6r0Ld5B.js";import{V as A,a as d}from"./VRow-kHQKy685.js";import{V as ee}from"./VForm-BjvAn3xm.js";import{V as te}from"./VDialog-B6Ym2h-g.js";import{V as w}from"./VCheckbox-D5V5ra26.js";import{V as le}from"./VSpacer-rZfYglwH.js";import"https://static.geetest.com/v4/gt4.js";/* empty css              */import"./VCheckboxBtn-B7M1GmTc.js";import"./VSelectionControl-BIZOklTK.js";const re=F({id:String,text:String,...M(W({closeOnBack:!1,location:"end",locationStrategy:"connected",eager:!0,minWidth:0,offset:10,openOnClick:!1,openOnHover:!0,origin:"auto",scrim:!1,scrollStrategy:"reposition",transition:!1}),["absolute","persistent"])},"VTooltip"),h=N()({name:"VTooltip",props:re(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:p}=e;const v=H(t,"modelValue"),{scopeId:a}=Z(),c=q(),f=g(()=>t.id||`v-tooltip-${c}`),V=D(),b=g(()=>t.location.split(" ").length>1?t.location:t.location+" center"),s=g(()=>t.origin==="auto"||t.origin==="overlap"||t.origin.split(" ").length>1||t.location.split(" ").length>1?t.origin:t.origin+" center"),o=g(()=>t.transition?t.transition:v.value?"scale-transition":"fade-transition"),B=g(()=>m({"aria-describedby":f.value},t.activatorProps));return G(()=>{const I=U.filterProps(t);return l(U,m({ref:V,class:["v-tooltip",t.class],style:t.style,id:f.value},I,{modelValue:v.value,"onUpdate:modelValue":y=>v.value=y,transition:o.value,absolute:!0,location:b.value,origin:s.value,persistent:!0,role:"tooltip",activatorProps:B.value,_disableGlobalStack:!0},a),{activator:p.activator,default:function(){var P;for(var y=arguments.length,R=new Array(y),x=0;x<y;x++)R[x]=arguments[x];return((P=p.default)==null?void 0:P.call(p,...R))??t.text}})}),L({},V)}}),ae={components:{LoadingDialog:z,Recaptcha:O},data(){return{BASE_API:"https://zerocat-api.houlangs.com",email:"",username:"",password:"",tryinguser:{},loading:!1,agreement:{privacy:!1,terms:!1,rules:!1,datadelete:!1},emailRules:[t=>t?!0:"必须填写邮箱",t=>/.+@.+\..+/.test(t)?!0:"不符合格式"],usernameRules:[t=>t?!0:"必须填写用户名"],passwordRules:[t=>t?!0:"必须填写密码",t=>/^(?:\d+|[a-zA-Z]+|[!@#$%^&*]+){6,16}$/.test(t)?!0:"不符合格式"]}},created(){T.isLogin.value==!0&&this.$router.push("/")},setup(){_({title:"注册"})},methods:{async register(){for(const t in this.agreement)if(this.agreement[t]===!1){this.$toast.add({severity:"info",summary:"info",detail:"请先阅读并同意有关协议",life:3e3});return}this.loading=!0;try{const t=await $({captcha:this.$refs.recaptcha.getResponse(),username:this.username,password:this.password,email:this.email});this.tryinguser=t.data,this.tryinguser.status=="success"?this.$toast.add({severity:"success",summary:"注册成功",detail:this.tryinguser.message,life:3e3}):this.$toast.add({severity:"info",summary:"info",detail:this.tryinguser.msg||this.tryinguser.message,life:3e3})}catch(t){this.$toast.add({severity:"error",summary:"错误",detail:t.message,life:3e3})}finally{this.loading=!1}},registerWithOAuth(t){const e=T.getToken();window.location.href=`https://zerocat-api.houlangs.com/account/oauth/${t}?token=${e}`}}},oe={class:"auth-wrapper d-flex align-center justify-center pa-4"};function se(t,e,p,v,a,c){const f=j("v-cardtext"),V=O,b=z;return J(),K(Y,null,[i("div",oe,[l(S,{class:"auth-card pa-4 pt-7","max-width":"448",border:"",rounded:"lg"},{default:r(()=>[l(A,null,{default:r(()=>[l(d,{cols:"12"},{default:r(()=>[l(f,null,{default:r(()=>e[11]||(e[11]=[i("h5",{class:"text-h5 font-weight-semibold mb-1"}," 欢迎来到ZeroCatNext！ 👋🏻 ",-1),i("p",{class:"mb-0"},"创建你的账户",-1)])),_:1})]),_:1})]),_:1}),l(f,null,{default:r(()=>[l(ee,null,{default:r(()=>[l(A,null,{default:r(()=>[l(d,{cols:"12"},{default:r(()=>[l(k,{label:"邮箱",type:"email",modelValue:a.email,"onUpdate:modelValue":e[0]||(e[0]=s=>a.email=s),variant:"outlined",required:"",rules:a.emailRules},null,8,["modelValue","rules"]),l(k,{label:"用户名",type:"text",modelValue:a.username,"onUpdate:modelValue":e[1]||(e[1]=s=>a.username=s),variant:"outlined",required:"",rules:a.usernameRules},null,8,["modelValue","rules"]),l(k,{label:"密码",type:"text",modelValue:a.password,"onUpdate:modelValue":e[2]||(e[2]=s=>a.password=s),variant:"outlined",required:"",rules:a.passwordRules},null,8,["modelValue","rules"])]),_:1}),l(d,{cols:"9"},{default:r(()=>[l(V,{ref:"recaptcha",recaptchaId:"recaptcha-div"},null,512)]),_:1}),l(d,{cols:"12"},{default:r(()=>[l(te,{persistent:""},{activator:r(({props:s})=>[l(u,m(s,{class:"text-none",color:"primary",rounded:"xl",text:"注册",variant:"flat",size:"large","append-icon":"mdi-arrow-right"}),null,16)]),default:r(({isActive:s})=>[l(S,{title:`您正在使用由厚浪(及孙悟元)提供的服务
`},{default:r(()=>[l(Q,null,{default:r(()=>[e[19]||(e[19]=n(" 我们可能会收集您的个人信息,具体参见 ")),l(h,{location:"bottom"},{activator:r(({props:o})=>[i("a",m({href:"https://wuyuan.dev/privacy-policy/privacy-policy.html",target:"_blank"},o,{onClick:e[3]||(e[3]=C(()=>{},["stop"]))})," 隐私策略 ",16)]),default:r(()=>[e[12]||(e[12]=n(" 孙悟元网站与服务隐私策略 "))]),_:1}),l(w,{modelValue:a.agreement.privacy,"onUpdate:modelValue":e[4]||(e[4]=o=>a.agreement.privacy=o)},{label:r(()=>e[13]||(e[13]=[i("div",null,"我已阅读并同意隐私策略",-1)])),_:1},8,["modelValue"]),e[20]||(e[20]=n("我们将在中国大陆安全的存储您的数据，我们暂不提供自助删除您的个人数据，如果您希望删除您的数据，您需要优先选择联系我们 ")),l(w,{modelValue:a.agreement.datadelete,"onUpdate:modelValue":e[5]||(e[5]=o=>a.agreement.datadelete=o)},{label:r(()=>e[14]||(e[14]=[i("div",null," 我理解并同意我无法自助删除我的个人数据，在需要时我会主动联系管理员删除 ",-1)])),_:1},8,["modelValue"]),e[21]||(e[21]=n(" 在 ZeroCatNext 上,你需要遵守 ")),l(h,{location:"bottom"},{activator:r(({props:o})=>[i("a",m({href:"https://scratch.mit.edu/community_guidelines",target:"_blank"},o,{onClick:e[6]||(e[6]=C(()=>{},["stop"]))})," 社区行为准则(第三方站点) ",16)]),default:r(()=>[e[15]||(e[15]=n(" 你的当前地区可能无法访问此网站 "))]),_:1}),l(w,{modelValue:a.agreement.rules,"onUpdate:modelValue":e[7]||(e[7]=o=>a.agreement.rules=o)},{label:r(()=>e[16]||(e[16]=[i("div",null,"我已阅读并同意将会遵守社区行为准则",-1)])),_:1},8,["modelValue"]),e[22]||(e[22]=n(" 你需要同意")),l(h,{location:"bottom"},{activator:r(({props:o})=>[i("a",m({href:"https://wuyuan.dev/privacy-policy/terms-of-service.html",target:"_blank"},o,{onClick:e[8]||(e[8]=C(()=>{},["stop"]))})," 用户协议 ",16)]),default:r(()=>[e[17]||(e[17]=n(" 孙悟元网站与服务用户协议 "))]),_:1}),l(w,{modelValue:a.agreement.terms,"onUpdate:modelValue":e[9]||(e[9]=o=>a.agreement.terms=o)},{label:r(()=>e[18]||(e[18]=[i("div",null,"我已阅读并同意用户协议",-1)])),_:1},8,["modelValue"]),l(u,{class:"text-none",color:"primary",rounded:"xl",text:"注册",variant:"flat",size:"large",onClick:c.register,"append-icon":"mdi-arrow-right"},null,8,["onClick"]),e[23]||(e[23]=i("br",null,null,-1)),e[24]||(e[24]=i("br",null,null,-1)),e[25]||(e[25]=n(' 对于技术手段绕过此页面的行为视为对 ZeroCat 的基础设施进行攻击，涉嫌非法入侵计算机系统，我们将保留追究法律责任的权利，违规获得的账户不被授权访问网站，账户将不受保护，如果您同意以上内容，请点击"复选框"以完成注册流程. '))]),_:1}),l(X,null,{default:r(()=>[l(le),l(u,{text:"取消",onClick:o=>{s.value=!1,a.agreement={privacy:!1,terms:!1,rules:!1,datadelete:!1}}},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:1})]),_:1}),l(d,{cols:"12"},{default:r(()=>[l(u,{class:"text-none",color:"white",rounded:"xl",text:"登录",variant:"text",size:"large","append-icon":"mdi-arrow-right",to:"/app/account/login"}),l(u,{class:"text-none",color:"white",rounded:"xl",text:"找回密码",variant:"text",size:"large","append-icon":"mdi-arrow-right",to:"/app/account/retrieve"})]),_:1}),l(d,{cols:"12"},{default:r(()=>[l(u,{onClick:e[10]||(e[10]=s=>c.registerWithOAuth("github")),color:"black"},{default:r(()=>e[26]||(e[26]=[n("使用 GitHub 注册")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),l(b,{show:a.loading,text:"正在注册"},null,8,["show"])],64)}const we=E(ae,[["render",se]]);export{we as default};
