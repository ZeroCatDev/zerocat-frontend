import{_ as c,c as v,o as m,w as l,a as t,G as g,e as C,I as r,H as s,ae as u,af as E,M as b,N as S,K as f,a7 as D,O as k,ah as w,a6 as x,a8 as V,$ as U,ac as I,a1 as K,L as T,Q as p}from"./index-DhXuRan5.js";import{V as A}from"./VSelect-D9rHMrlS.js";import{V as L}from"./VSpacer-isRjaQj0.js";import{V as y}from"./VDialog-DNFoXVck.js";import{V as P}from"./VContainer-CPEWPjzm.js";import"./VCheckboxBtn-TrmoJWrj.js";import"./VSelectionControl-DYW0yaeb.js";import"./VChip-Qn5ojB0u.js";/* empty css              */const R={data(){return{configs:[],searchKey:"",createDialog:!1,deleteDialog:!1,editItemData:{},newConfig:{key:"",value:""},deleteItemData:{},deleteItemId:null,loading:!1,infomation:{"s3.bucket":"S3桶名称","s3.region":"S3地区","s3.endpoint":"S3端点","s3.AWS_ACCESS_KEY_ID":"S3访问密钥ID","s3.AWS_SECRET_ACCESS_KEY":"S3访问秘钥","s3.staticurl":"S3静态文件路径",cors:"跨域","mail.from":"发件人","mail.host":"SMTP主机","mail.port":"SMTP端口","mail.user":"SMTP用户名","mail.pass":"SMTP密码","mail.service":"SMTP服务商","mail.fromname":"发件人名称","site.tos":"用户服务协议","site.privacy":"隐私政策","site.name":"网站名称","site.email":"网站邮箱","site.domain":"网站域名","site.slogan":"网站标语","urls.editor":"编辑器URL","urls.static":"静态文件URL","waline.url":"Waline URL","captcha.GEE_API_SERVER":"极验API服务端","captcha.GEE_CAPTCHA_ID":"极验验证码 ID","captcha.GEE_CAPTCHA_KEY":"极验验证码 KEY","feedback.txcid":"兔小巢ID","feedback.txckey":"兔小巢KEY","security.jwttoken":"令牌签发密钥","security.SessionSecret":"保持与令牌签发密钥相同","security.adminuser":"管理员邮箱(无效)","urls.frontend":"前端URL","urls.backend":"后端URL","feedback.qq.link":"QQ群链接","feedback.qq.group":"QQ群号","feedback.qq.description":"QQ群描述","theme.mdui.color.primary":"MDUI主题颜色"}}},computed:{filteredConfigs(){const i=this.searchKey.toLowerCase();return this.configs.filter(e=>e.key.toLowerCase().includes(i))}},methods:{async loadData(){try{const i=await p.get("/api/admin/config/all");i.data.status==="success"&&(this.configs=i.data.data)}catch(i){console.error("加载配置失败",i)}},toggleEdit(i){this.editItemData.id===i.id?this.editItemData={}:this.editItemData={...i}},async saveEdit(){try{(await p.put(`/api/admin/config/${this.editItemData.id}`,this.editItemData)).data.status==="success"&&(this.loadData(),this.editItemData={})}catch(i){console.error("保存配置失败",i)}},cancelEdit(){this.editItemData={}},confirmDeleteItem(i){this.deleteItemId=i.id,this.deleteItemData=i,this.deleteDialog=!0},async deleteItem(i){try{(await p.delete(`/api/admin/config/${i}`)).data.status==="success"&&(this.loadData(),this.deleteDialog=!1)}catch(e){console.error("删除配置失败",e)}},openCreateDialog(){this.newConfig={key:"",value:""},this.createDialog=!0},async createConfig(){try{(await p.post("/api/admin/config",this.newConfig)).data.status==="success"&&(this.loadData(),this.createDialog=!1)}catch(i){console.error("创建配置失败",i)}}},created(){this.loadData()}},M={class:"d-flex align-center"},Q={key:0};function q(i,e,B,N,a,n){return m(),v(P,null,{default:l(()=>[t(r,{onClick:n.loadData},{default:l(()=>e[12]||(e[12]=[s("刷新")])),_:1},8,["onClick"]),t(r,{onClick:n.openCreateDialog},{default:l(()=>e[13]||(e[13]=[s("创建配置")])),_:1},8,["onClick"]),e[24]||(e[24]=g("br",null,null,-1)),e[25]||(e[25]=g("br",null,null,-1)),t(u,{modelValue:a.searchKey,"onUpdate:modelValue":e[0]||(e[0]=o=>a.searchKey=o),label:"搜索",clearable:"",onKeyup:e[1]||(e[1]=E(o=>n.loadData(),["enter"])),variant:"outlined"},null,8,["modelValue"]),(m(!0),C(b,null,S(n.filteredConfigs,o=>(m(),C("div",{key:o.id},[t(f,{class:"d-flex justify-space-between align-center",title:o.key,subtitle:a.infomation[o.key]||o.key,onClick:d=>n.toggleEdit(o)},{default:l(()=>[g("div",M,[t(D,null,{default:l(()=>[s(k(o.value),1)]),_:2},1024)])]),_:2},1032,["title","subtitle","onClick"]),t(w,null,{default:l(()=>[a.editItemData.id===o.id?(m(),C("div",Q,[t(f,{flat:""},{default:l(()=>[t(D,null,{default:l(()=>[t(u,{modelValue:a.editItemData.key,"onUpdate:modelValue":e[2]||(e[2]=d=>a.editItemData.key=d),label:"名称",disabled:""},null,8,["modelValue"]),t(u,{modelValue:a.editItemData.value,"onUpdate:modelValue":e[3]||(e[3]=d=>a.editItemData.value=d),label:"值"},null,8,["modelValue"]),t(A,{modelValue:a.editItemData.is_public,"onUpdate:modelValue":e[4]||(e[4]=d=>a.editItemData.is_public=d),items:[{text:"公开",value:!0},{text:"内部",value:!1}],label:"可见性","item-title":"text","item-value":"value"},null,8,["modelValue"]),s(k(a.editItemData),1)]),_:1}),t(V,null,{default:l(()=>[t(r,{onClick:d=>n.confirmDeleteItem(o),color:"error"},{default:l(()=>e[14]||(e[14]=[s("删除")])),_:2},1032,["onClick"]),t(L),t(r,{onClick:n.cancelEdit},{default:l(()=>e[15]||(e[15]=[s("取消")])),_:1},8,["onClick"]),t(r,{onClick:n.saveEdit,color:"primary"},{default:l(()=>e[16]||(e[16]=[s("保存")])),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024)])):x("",!0)]),_:2},1024),t(U)]))),128)),t(y,{modelValue:a.createDialog,"onUpdate:modelValue":e[8]||(e[8]=o=>a.createDialog=o),"max-width":"500px"},{default:l(()=>[t(f,null,{default:l(()=>[t(I,null,{default:l(()=>e[17]||(e[17]=[s("创建配置")])),_:1}),t(D,null,{default:l(()=>[t(u,{modelValue:a.newConfig.key,"onUpdate:modelValue":e[5]||(e[5]=o=>a.newConfig.key=o),label:"名称"},null,8,["modelValue"]),t(u,{modelValue:a.newConfig.value,"onUpdate:modelValue":e[6]||(e[6]=o=>a.newConfig.value=o),label:"值"},null,8,["modelValue"])]),_:1}),t(V,null,{default:l(()=>[t(r,{onClick:e[7]||(e[7]=o=>a.createDialog=!1)},{default:l(()=>e[18]||(e[18]=[s("取消")])),_:1}),t(r,{onClick:n.createConfig,color:"primary"},{default:l(()=>e[19]||(e[19]=[s("创建")])),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(y,{modelValue:a.deleteDialog,"onUpdate:modelValue":e[11]||(e[11]=o=>a.deleteDialog=o),"max-width":"500px"},{default:l(()=>[t(f,null,{default:l(()=>[t(I,null,{default:l(()=>e[20]||(e[20]=[s("确认删除")])),_:1}),t(D,null,{default:l(()=>[e[21]||(e[21]=s("您确定要删除此配置吗？ ")),t(K,null,{default:l(()=>[t(T,{title:a.deleteItemData.key,subtitle:a.deleteItemData.value},null,8,["title","subtitle"])]),_:1})]),_:1}),t(V,null,{default:l(()=>[t(r,{onClick:e[9]||(e[9]=o=>a.deleteDialog=!1),color:"primary"},{default:l(()=>e[22]||(e[22]=[s("取消")])),_:1}),t(r,{onClick:e[10]||(e[10]=o=>{n.deleteItem(a.deleteItemId),i.editDialog=!1}),color:"error"},{default:l(()=>e[23]||(e[23]=[s("确认")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}const J=c(R,[["render",q]]);export{J as default};
