import{g as ie,p as J,bw as we,w as $,d as ce,f as A,F as G,m as E,K as Se,bS as Ae,A as N,at as me,r as j,x as M,bT as De,bU as ke,y as ue,bV as Re,av as Pe,bW as Te,bX as Be,bd as Fe,be as Ie,bx as Oe,b as _e,bY as Le,e as T,k as ne,C as Ee,D as Me,bf as He,a as ze,bZ as Ke,u as he,b_ as Ne,b$ as Ue,c0 as re,aB as pe,O as ge,az as qe,ad as $e,ae as ye,c1 as We,a0 as je,aO as Xe,Z as Ye,c2 as Ze,S as Ge,h as Je,L as Qe,bs as et,c3 as tt,bt as lt,c4 as nt,c5 as at,c6 as be,c7 as Ve,c8 as ot,I as ut}from"./index-r6fcKOtS.js";import{V as rt}from"./VCheckboxBtn-ClUg9APb.js";const st=J({renderless:Boolean,...Se()},"VVirtualScrollItem"),it=ie()({name:"VVirtualScrollItem",inheritAttrs:!1,props:st(),emits:{"update:height":t=>!0},setup(t,d){let{attrs:l,emit:c,slots:o}=d;const{resizeRef:f,contentRect:m}=we(void 0,"border");$(()=>{var a;return(a=m.value)==null?void 0:a.height},a=>{a!=null&&c("update:height",a)}),ce(()=>{var a,i;return t.renderless?A(G,null,[(a=o.default)==null?void 0:a.call(o,{itemRef:f})]):A("div",E({ref:f,class:["v-virtual-scroll__item",t.class],style:t.style},l),[(i=o.default)==null?void 0:i.call(o)])})}}),ct=-1,dt=1,se=100,ft=J({itemHeight:{type:[Number,String],default:null},itemKey:{type:[String,Array,Function],default:null},height:[Number,String]},"virtual");function vt(t,d){const l=Ae(),c=N(0);me(()=>{c.value=parseFloat(t.itemHeight||0)});const o=N(0),f=N(Math.ceil((parseInt(t.height)||l.height.value)/(c.value||16))||1),m=N(0),a=N(0),i=j(),S=j();let s=0;const{resizeRef:H,contentRect:D}=we();me(()=>{H.value=i.value});const k=M(()=>{var e;return i.value===document.documentElement?l.height.value:((e=D.value)==null?void 0:e.height)||parseInt(t.height)||0}),B=M(()=>!!(i.value&&S.value&&k.value&&c.value));let h=Array.from({length:d.value.length}),g=Array.from({length:d.value.length});const P=N(0);let V=-1;function z(e){return h[e]||c.value}const K=De(()=>{const e=performance.now();g[0]=0;const n=d.value.length;for(let r=1;r<=n-1;r++)g[r]=(g[r-1]||0)+z(r-1);P.value=Math.max(P.value,performance.now()-e)},P),y=$(B,e=>{e&&(y(),s=S.value.offsetTop,K.immediate(),L(),~V&&Pe(()=>{Te&&window.requestAnimationFrame(()=>{le(V),V=-1})}))});ke(()=>{K.clear()});function Q(e,n){const r=h[e],p=c.value;c.value=p?Math.min(c.value,n):n,(r!==n||p!==c.value)&&(h[e]=n,K())}function O(e){e=ue(e,0,d.value.length-1);const n=Math.floor(e),r=e%1,p=n+1,I=g[n]||0,u=g[p]||I;return I+(u-I)*r}function _(e){return mt(g,e)}let W=0,U=0,X=0;$(k,(e,n)=>{n&&(L(),e<n&&requestAnimationFrame(()=>{U=0,L()}))});let Y=-1;function ee(){if(!i.value||!S.value)return;const e=i.value.scrollTop,n=performance.now();n-X>500?(U=Math.sign(e-W),s=S.value.offsetTop):U=e-W,W=e,X=n,window.clearTimeout(Y),Y=window.setTimeout(q,500),L()}function q(){!i.value||!S.value||(U=0,X=0,window.clearTimeout(Y),L())}let te=-1;function L(){cancelAnimationFrame(te),te=requestAnimationFrame(ae)}function ae(){if(!i.value||!k.value||!c.value)return;const e=W-s,n=Math.sign(U),r=Math.max(0,e-se),p=ue(_(r),0,d.value.length),I=e+k.value+se,u=ue(_(I)+1,p+1,d.value.length);if((n!==ct||p<o.value)&&(n!==dt||u>f.value)){const x=O(o.value)-O(p),C=O(u)-O(f.value);Math.max(x,C)>se?(o.value=p,f.value=u):(p<=0&&(o.value=p),u>=d.value.length&&(f.value=u))}m.value=O(o.value),a.value=O(d.value.length)-O(f.value)}function le(e){const n=O(e);!i.value||e&&!n?V=e:i.value.scrollTop=n}const oe=M(()=>d.value.slice(o.value,f.value).map((e,n)=>{const r=n+o.value;return{raw:e,index:r,key:Re(e,t.itemKey,r)}}));return $(d,()=>{h=Array.from({length:d.value.length}),g=Array.from({length:d.value.length}),K.immediate(),L()},{deep:1}),{calculateVisibleItems:L,containerRef:i,markerRef:S,computedItems:oe,paddingTop:m,paddingBottom:a,scrollToIndex:le,handleScroll:ee,handleScrollend:q,handleItemResize:Q}}function mt(t,d){let l=t.length-1,c=0,o=0,f=null,m=-1;if(t[l]<d)return l;for(;c<=l;)if(o=c+l>>1,f=t[o],f>d)l=o-1;else if(f<d)m=o,c=o+1;else return f===d?o:c;return m}const ht=J({items:{type:Array,default:()=>[]},renderless:Boolean,...ft(),...Se(),...He()},"VVirtualScroll"),pt=ie()({name:"VVirtualScroll",props:ht(),setup(t,d){let{slots:l}=d;const c=Be("VVirtualScroll"),{dimensionStyles:o}=Fe(t),{calculateVisibleItems:f,containerRef:m,markerRef:a,handleScroll:i,handleScrollend:S,handleItemResize:s,scrollToIndex:H,paddingTop:D,paddingBottom:k,computedItems:B}=vt(t,Ie(()=>t.items));return Oe(()=>t.renderless,()=>{function h(){var V,z;const P=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)?"addEventListener":"removeEventListener";m.value===document.documentElement?(document[P]("scroll",i,{passive:!0}),document[P]("scrollend",S)):((V=m.value)==null||V[P]("scroll",i,{passive:!0}),(z=m.value)==null||z[P]("scrollend",S))}_e(()=>{m.value=Le(c.vnode.el,!0),h(!0)}),ke(h)}),ce(()=>{const h=B.value.map(g=>T(it,{key:g.key,renderless:t.renderless,"onUpdate:height":P=>s(g.index,P)},{default:P=>{var V;return(V=l.default)==null?void 0:V.call(l,{item:g.raw,index:g.index,...P})}}));return t.renderless?A(G,null,[A("div",{ref:a,class:"v-virtual-scroll__spacer",style:{paddingTop:ne(D.value)}},null),h,A("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:ne(k.value)}},null)]):A("div",{ref:m,class:Me(["v-virtual-scroll",t.class]),onScrollPassive:i,onScrollend:S,style:Ee([o.value,t.style])},[A("div",{ref:a,class:"v-virtual-scroll__container",style:{paddingTop:ne(D.value),paddingBottom:ne(k.value)}},[h])])}),{calculateVisibleItems:f,scrollToIndex:H}}});function gt(t,d){const l=N(!1);let c;function o(a){cancelAnimationFrame(c),l.value=!0,c=requestAnimationFrame(()=>{c=requestAnimationFrame(()=>{l.value=!1})})}async function f(){await new Promise(a=>requestAnimationFrame(a)),await new Promise(a=>requestAnimationFrame(a)),await new Promise(a=>requestAnimationFrame(a)),await new Promise(a=>{if(l.value){const i=$(l,()=>{i(),a()})}else a()})}async function m(a){var s,H;if(a.key==="Tab"&&((s=d.value)==null||s.focus()),!["PageDown","PageUp","Home","End"].includes(a.key))return;const i=(H=t.value)==null?void 0:H.$el;if(!i)return;(a.key==="Home"||a.key==="End")&&i.scrollTo({top:a.key==="Home"?0:i.scrollHeight,behavior:"smooth"}),await f();const S=i.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(a.key==="PageDown"||a.key==="Home"){const D=i.getBoundingClientRect().top;for(const k of S)if(k.getBoundingClientRect().top>=D){k.focus();break}}else{const D=i.getBoundingClientRect().bottom;for(const k of[...S].reverse())if(k.getBoundingClientRect().bottom<=D){k.focus();break}}}return{onScrollPassive:o,onKeydown:m}}const yt=J({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:ut,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,noAutoScroll:Boolean,...ot({itemChildren:!1})},"Select"),bt=J({...yt(),...lt(at({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...tt({transition:{component:nt}})},"VSelect"),St=ie()({name:"VSelect",props:bt(),emits:{"update:focused":t=>!0,"update:modelValue":t=>!0,"update:menu":t=>!0},setup(t,d){let{slots:l}=d;const{t:c}=ze(),o=j(),f=j(),m=j(),{items:a,transformIn:i,transformOut:S}=Ke(t),s=he(t,"modelValue",[],e=>i(e===null?[null]:Ne(e)),e=>{const n=S(e);return t.multiple?n:n[0]??null}),H=M(()=>typeof t.counterValue=="function"?t.counterValue(s.value):typeof t.counterValue=="number"?t.counterValue:s.value.length),D=Ue(t),k=M(()=>s.value.map(e=>e.value)),B=N(!1);let h="",g=-1,P;const V=M(()=>t.hideSelected?a.value.filter(e=>!s.value.some(n=>(t.valueComparator||re)(n,e))):a.value),z=M(()=>t.hideNoData&&!V.value.length||D.isReadonly.value||D.isDisabled.value),K=he(t,"menu"),y=M({get:()=>K.value,set:e=>{var n;K.value&&!e&&((n=f.value)!=null&&n.Î¨openChildren.size)||e&&z.value||(K.value=e)}}),Q=Ie(()=>y.value?t.closeText:t.openText),O=M(()=>{var e;return{...t.menuProps,activatorProps:{...((e=t.menuProps)==null?void 0:e.activatorProps)||{},"aria-haspopup":"listbox"}}}),_=j(),W=gt(_,o);function U(e){t.openOnClear&&(y.value=!0)}function X(){z.value||(y.value=!y.value)}function Y(e){be(e)&&ee(e)}function ee(e){var v,R,w;if(!e.key||D.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(e.key)&&e.preventDefault(),["Enter","ArrowDown"," "].includes(e.key)&&(y.value=!0),["Escape","Tab"].includes(e.key)&&(y.value=!1),e.key==="Home"?(v=_.value)==null||v.focus("first"):e.key==="End"&&((R=_.value)==null||R.focus("last"));const n=1e3;if(!be(e))return;const r=performance.now();r-P>n&&(h="",g=-1),h+=e.key.toLowerCase(),P=r;const p=V.value;function I(){let b=u();return b||h.at(-1)===h.at(-2)&&(h=h.slice(0,-1),b=u(),b)||(g=-1,b=u(),b)?b:(h=e.key.toLowerCase(),u())}function u(){for(let b=g+1;b<p.length;b++){const Z=p[b];if(Z.title.toLowerCase().startsWith(h))return[Z,b]}}const x=I();if(!x)return;const[C,F]=x;g=F,(w=_.value)==null||w.focus(F),t.multiple||(s.value=[C])}function q(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!e.props.disabled)if(t.multiple){const r=s.value.findIndex(I=>(t.valueComparator||re)(I.value,e.value)),p=n??!~r;if(~r){const I=p?[...s.value,e]:[...s.value];I.splice(r,1),s.value=I}else p&&(s.value=[...s.value,e])}else{const r=n!==!1;s.value=r?[e]:[],Pe(()=>{y.value=!1})}}function te(e){var n;(n=_.value)!=null&&n.$el.contains(e.relatedTarget)||(y.value=!1)}function L(){var e;t.eager&&((e=m.value)==null||e.calculateVisibleItems())}function ae(){var e;B.value&&((e=o.value)==null||e.focus())}function le(e){B.value=!0}function oe(e){if(e==null)s.value=[];else if(Ve(o.value,":autofill")||Ve(o.value,":-webkit-autofill")){const n=a.value.find(r=>r.title===e);n&&q(n)}else o.value&&(o.value.value="")}return $(y,()=>{if(!t.hideSelected&&y.value&&s.value.length){const e=V.value.findIndex(n=>s.value.some(r=>(t.valueComparator||re)(r.value,n.value)));Te&&!t.noAutoScroll&&window.requestAnimationFrame(()=>{var n;e>=0&&((n=m.value)==null||n.scrollToIndex(e))})}}),$(()=>t.items,(e,n)=>{y.value||B.value&&t.hideNoData&&!n.length&&e.length&&(y.value=!0)}),ce(()=>{const e=!!(t.chips||l.chip),n=!!(!t.hideNoData||V.value.length||l["prepend-item"]||l["append-item"]||l["no-data"]),r=s.value.length>0,p=pe.filterProps(t),I=r||!B.value&&t.label&&!t.persistentPlaceholder?void 0:t.placeholder;return T(pe,E({ref:o},p,{modelValue:s.value.map(u=>u.props.value).join(", "),"onUpdate:modelValue":oe,focused:B.value,"onUpdate:focused":u=>B.value=u,validationValue:s.externalValue,counterValue:H.value,dirty:r,class:["v-select",{"v-select--active-menu":y.value,"v-select--chips":!!t.chips,[`v-select--${t.multiple?"multiple":"single"}`]:!0,"v-select--selected":s.value.length,"v-select--selection-slot":!!l.selection},t.class],style:t.style,inputmode:"none",placeholder:I,"onClick:clear":U,"onMousedown:control":X,onBlur:te,onKeydown:ee,"aria-label":c(Q.value),title:c(Q.value)}),{...l,default:()=>A(G,null,[T(qe,E({ref:f,modelValue:y.value,"onUpdate:modelValue":u=>y.value=u,activator:"parent",contentClass:"v-select__content",disabled:z.value,eager:t.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:t.transition,onAfterEnter:L,onAfterLeave:ae},O.value),{default:()=>[n&&T($e,E({ref:_,selected:k.value,selectStrategy:t.multiple?"independent":"single-independent",onMousedown:u=>u.preventDefault(),onKeydown:Y,onFocusin:le,tabindex:"-1","aria-live":"polite","aria-label":`${t.label}-list`,color:t.itemColor??t.color},W,t.listProps),{default:()=>{var u,x,C;return[(u=l["prepend-item"])==null?void 0:u.call(l),!V.value.length&&!t.hideNoData&&(((x=l["no-data"])==null?void 0:x.call(l))??T(ye,{key:"no-data",title:c(t.noDataText)},null)),T(pt,{ref:m,renderless:!0,items:V.value,itemKey:"value"},{default:F=>{var de,fe,ve;let{item:v,index:R,itemRef:w}=F;const b=We(v.props),Z=E(v.props,{ref:w,key:v.value,onClick:()=>q(v,null)});return v.type==="divider"?((de=l.divider)==null?void 0:de.call(l,{props:v.raw,index:R}))??T(je,E(v.props,{key:`divider-${R}`}),null):v.type==="subheader"?((fe=l.subheader)==null?void 0:fe.call(l,{props:v.raw,index:R}))??T(Xe,E(v.props,{key:`subheader-${R}`}),null):((ve=l.item)==null?void 0:ve.call(l,{item:v,index:R,props:Z}))??T(ye,E(Z,{role:"option"}),{prepend:xe=>{let{isSelected:Ce}=xe;return A(G,null,[t.multiple&&!t.hideSelected?T(rt,{key:v.value,modelValue:Ce,ripple:!1,tabindex:"-1"},null):void 0,b.prependAvatar&&T(Ye,{image:b.prependAvatar},null),b.prependIcon&&T(ge,{icon:b.prependIcon},null)])}})}}),(C=l["append-item"])==null?void 0:C.call(l)]}})]}),s.value.map((u,x)=>{function C(w){w.stopPropagation(),w.preventDefault(),q(u,!1)}const F={"onClick:close":C,onKeydown(w){w.key!=="Enter"&&w.key!==" "||(w.preventDefault(),w.stopPropagation(),C(w))},onMousedown(w){w.preventDefault(),w.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},v=e?!!l.chip:!!l.selection,R=v?Ze(e?l.chip({item:u,index:x,props:F}):l.selection({item:u,index:x})):void 0;if(!(v&&!R))return A("div",{key:u.value,class:"v-select__selection"},[e?l.chip?T(Je,{key:"chip-defaults",defaults:{VChip:{closable:t.closableChips,size:"small",text:u.title}}},{default:()=>[R]}):T(Ge,E({key:"chip",closable:t.closableChips,size:"small",text:u.title,disabled:u.props.disabled},F),null):R??A("span",{class:"v-select__selection-text"},[u.title,t.multiple&&x<s.value.length-1&&A("span",{class:"v-select__selection-comma"},[Qe(",")])])])})]),"append-inner":function(){var F,v;for(var u=arguments.length,x=new Array(u),C=0;C<u;C++)x[C]=arguments[C];return A(G,null,[(F=l["append-inner"])==null?void 0:F.call(l,...x),t.menuIcon?T(ge,{class:"v-select__menu-icon",color:(v=o.value)==null?void 0:v.fieldIconColor,icon:t.menuIcon},null):void 0])}})}),et({isFocused:B,menu:y,select:q},o)}});export{St as V,pt as a,yt as m,gt as u};
