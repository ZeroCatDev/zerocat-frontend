import{_ as m,r as p,w as s,b as v,b7 as h,c as b,o as w}from"./index-Bq2eo13E.js";const _={name:"MonacoEditorComponent",props:{modelValue:{type:String,default:""},language:{type:String,default:"javascript"},options:{type:Object,default:()=>({})},locale:{type:String,default:"zh-cn"}},emits:["update:modelValue","change"],setup(o,{emit:u}){const a=p(null);let e=null,l=null,i=null,n=null;const d=()=>{window.require.config({paths:{vs:"/monaco-editor/min/vs"},"vs/nls":{availableLanguages:{"*":o.locale}}}),window.require(["vs/editor/editor.main"],function(t){n=t,n.editor.defineTheme("monokai",{base:"vs-dark",inherit:!0,rules:[{token:"comment",foreground:"88846f",fontStyle:"italic"},{token:"keyword",foreground:"f92672"},{token:"string",foreground:"e6db74"},{token:"number",foreground:"ae81ff"}],colors:{"editor.background":"#272822","editor.foreground":"#f8f8f2","editorLineNumber.foreground":"#90908a","editor.selectionBackground":"#49483e","editor.lineHighlightBackground":"#3e3d32"}}),c()})},c=()=>{if(!a.value||!n)return;const r={...{value:o.modelValue,language:o.language,theme:"monokai",fontSize:14,tabSize:2,minimap:{enabled:!0},scrollBeyondLastLine:!1,automaticLayout:!0,wordWrap:"on",lineNumbers:"on",formatOnPaste:!0,formatOnType:!0,autoIndent:"full",suggestOnTriggerCharacters:!0,acceptSuggestionOnEnter:"on",quickSuggestions:!0,snippetSuggestions:"top",renderControlCharacters:!0,renderWhitespace:"selection",bracketPairColorization:{enabled:!0}},...o.options};e=n.editor.create(a.value,r),l=e.onDidChangeModelContent(()=>{const g=e.getValue();u("update:modelValue",g),u("change",g)}),i=new ResizeObserver(()=>{e&&e.layout()}),i.observe(a.value),setTimeout(()=>{e&&e.layout()},100)},f=()=>{i&&(i.disconnect(),i=null),l&&(l.dispose(),l=null),e&&(e.dispose(),e=null)};return s(()=>o.modelValue,t=>{e&&t!==e.getValue()&&e.setValue(t)}),s(()=>o.language,t=>{if(e&&n){const r=e.getModel();r&&n.editor.setModelLanguage(r,t)}}),s(()=>o.options,t=>{e&&e.updateOptions(t)},{deep:!0}),s(()=>o.locale,t=>{f(),window.require.config({"vs/nls":{availableLanguages:{"*":t}}}),window.require(["vs/editor/editor.main"],function(r){n=r,c()})}),v(()=>{if(window.require)d();else{const t=document.createElement("script");t.src="/monaco-editor/min/vs/loader.js",t.onload=d,document.head.appendChild(t)}window.addEventListener("resize",()=>{e&&e.layout()})}),h(()=>{window.removeEventListener("resize",()=>{e&&e.layout()}),f()}),{editorContainer:a}}},k={ref:"editorContainer",style:{height:"100%",width:"100%"}};function y(o,u,a,e,l,i){return w(),b("div",k,null,512)}const O=m(_,[["render",y]]);export{O as _};
