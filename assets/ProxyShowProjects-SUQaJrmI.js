import{_ as b,aa as L,a1 as C,c as h,o as n,e as a,f as c,N as t,F as v,U as k,Y as f,R as I,W as _,$ as m,n as w,bR as B,aU as $,a9 as S,L as r,X as u,aW as N,ad as P,ae as g,af as p,ag as y,Z as V,Q as U,j as q,aE as R,i as T}from"./index-DmjUHmS9.js";const A={props:{url:{type:String,required:!0},showUserInfo:{type:Boolean,default:!1},title:{type:String,required:!1},subtitle:{type:String,required:!1},autoload:{type:Boolean,default:!1}},data(){return{projects:[],page:0,canLoad:!0,loading:!1,scratch_proxy:"",limit:40}},methods:{async fetchProjects(){this.loading=!0;try{const i=await C.get(`${this.scratch_proxy}${this.url}limit=${this.limit}&offset=${this.page*this.limit}`);i.data.length===0&&(this.canLoad=!1),this.projects=this.projects.concat(i.data),this.page+=1}catch(i){console.log(i)}finally{this.loading=!1}}},watch:{url:{handler(){this.projects=[],this.page=0,this.canLoad=!0,this.autoload==!0&&this.fetchProjects()},immediate:!0}},created(){this.autoload==!0&&this.fetchProjects()},async mounted(){this.scratch_proxy=await L("scratchproxy.url")}};function E(i,s,d,F,o,x){return n(),h("div",null,[a(U,null,{default:t(()=>[(n(!0),h(v,null,k(o.projects,e=>(n(),f(I,{key:e.id,cols:"12",lg:"3",md:"4",sm:"6",xl:"2",xs:"12",xxl:"2"},{default:t(()=>[a(_,{to:"/app/proxy/"+e.id,border:"",hover:""},{default:t(()=>[a(w,{src:`${o.scratch_proxy}/thumbnails/${e.id}`,cover:"","lazy-src":B},null,8,["src"]),a($,null,{default:t(()=>[a(S,null,{default:t(()=>[r(u(e.title),1)]),_:2},1024),a(N,null,{default:t(()=>[r(u(e.description),1)]),_:2},1024)]),_:2},1024),d.showUserInfo?(n(),f(P,{key:0},{default:t(()=>[a(g,null,{prepend:t(()=>{var l;return[a(V,{image:`${this.scratch_proxy}/avatars/${((l=e.author)==null?void 0:l.id)||e.creator_id||""}`},null,8,["image"])]}),default:t(()=>[a(p,null,{default:t(()=>{var l;return[r(u(((l=e.author)==null?void 0:l.username)||e.username),1)]}),_:2},1024),a(y,null,{default:t(()=>{var l;return[r(u(((l=e.author)==null?void 0:l.id)||e.creator_id),1)]}),_:2},1024)]),_:2},1024),e.actor_id?(n(),f(g,{key:0},{prepend:t(()=>[a(V,{image:`${this.scratch_proxy}/avatars/${e.actor_id}`},null,8,["image"])]),default:t(()=>[a(p,null,{default:t(()=>[r(u(e.actor_id),1)]),_:2},1024),a(y,null,{default:t(()=>s[0]||(s[0]=[r("将作品添加进工作室",-1)])),_:1,__:[0]})]),_:2},1024)):m("",!0)]),_:2},1024)):m("",!0)]),_:2},1032,["to"])]),_:2},1024))),128))]),_:1}),s[2]||(s[2]=c("br",null,null,-1)),a(_,{subtitle:d.subtitle,title:d.title,border:"",hover:""},{default:t(()=>[a(q,{active:o.loading,height:"4",indeterminate:""},null,8,["active"]),a(R,null,{default:t(()=>[a(T,{disabled:!o.canLoad,onClick:x.fetchProjects},{default:t(()=>s[1]||(s[1]=[r("继续加载 ",-1)])),_:1,__:[1]},8,["disabled","onClick"])]),_:1})]),_:1},8,["subtitle","title"]),s[3]||(s[3]=c("br",null,null,-1)),s[4]||(s[4]=c("br",null,null,-1))])}const z=b(A,[["render",E]]);export{z as _};
