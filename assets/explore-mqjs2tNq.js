import{_ as V}from"./proxylicense-QnUiFsNV.js";import{e as f}from"./projectService-Cg0D_X4-.js";import{_ as j,X as d,o as p,M as s,e,f as n,Q as g,R as u,aC as h,i as _,L as r,j as b,S as x,O as C,T as o,c as P,F as L,W as v,Y as k,n as w,c4 as I,a_ as B,ae as S,b0 as T,ah as D,ai as N,aj as U,ak as F,Z as M,U as R,bg as z}from"./index-B0FU96U5.js";import"https://static.geetest.com/v4/gt4.js";const A={data(){return{orderitems:[{name:"热门的",type:"trending"},{name:"最受欢迎的",type:"popular"},{name:"新建的",type:"recent"}],tagitems:[{name:"全部",type:"*"},{name:"动画",type:"animations"},{name:"艺术",type:"art"},{name:"游戏",type:"games"},{name:"音乐",type:"music"},{name:"故事",type:"stories"},{name:"教程",type:"tutorials"}],search:{order:"trending",tag:"*",limit:18},usetime:0,ProjectsLoading:!1,projects:[],projectscount:0,curPage:1,scratch_proxy:""}},async mounted(){this.scratch_proxy=z("scratchproxy.url"),await this.getprojects()},methods:{async getprojects(){this.onPageChange(1)},async onPageChange(m,t){t&&(this.projects=[]),this.usetime=Date.now(),this.ProjectsLoading=!0;try{const i=await f(this.search.order,this.search.tag,m,this.search.limit);this.projects=this.projects.concat(i.data)}catch(i){console.log(i)}finally{this.ProjectsLoading=!1,this.usetime=Date.now()-this.usetime}this.curPage=m}}},E={class:"mb-2"};function O(m,t,i,Q,l,c){const y=V;return p(),d(R,null,{default:s(()=>[e(y,{url:"https://scratch.mit.edu/explore/projects/all"}),t[6]||(t[6]=n("br",null,null,-1)),e(g,null,{default:s(()=>[e(u,{cols:"3"},{default:s(()=>[e(h,{modelValue:l.search.order,"onUpdate:modelValue":t[0]||(t[0]=a=>l.search.order=a),items:l.orderitems,label:"排序 为："+l.search.order,"item-title":"name","item-value":"type"},null,8,["modelValue","items","label"])]),_:1}),e(u,{cols:"3"},{default:s(()=>[e(h,{modelValue:l.search.tag,"onUpdate:modelValue":t[1]||(t[1]=a=>l.search.tag=a),items:l.tagitems,label:"标签 为："+l.search.tag,"item-title":"name","item-value":"type"},null,8,["modelValue","items","label"])]),_:1}),e(u,{cols:"3"},{default:s(()=>[e(_,{onClick:t[2]||(t[2]=a=>c.onPageChange(1,!0))},{default:s(()=>t[4]||(t[4]=[r(" 加载",-1)])),_:1,__:[4]})]),_:1})]),_:1}),t[7]||(t[7]=n("br",null,null,-1)),t[8]||(t[8]=n("br",null,null,-1)),e(b,{active:l.ProjectsLoading,height:"4",indeterminate:""},null,8,["active"]),n("div",E,[e(x,null,{default:s(()=>[e(C,{icon:"mdi-clock",start:""}),r(" 本页加载用时"+o(Math.abs(l.usetime/1e3))+"秒 ",1)]),_:1})]),e(g,null,{default:s(()=>[(p(!0),P(L,null,v(l.projects,a=>(p(),d(u,{key:a,cols:" 12",md:"3"},{default:s(()=>[e(k,{to:"/app/proxy/"+a.id},{default:s(()=>[e(w,{src:`${l.scratch_proxy}/thumbnails/${a.id}`,cover:"","lazy-src":I},null,8,["src"]),e(B,null,{default:s(()=>[e(S,null,{default:s(()=>[r(o(a.title),1)]),_:2},1024),e(T,null,{default:s(()=>[r(o(a.description||"简介未找到"),1)]),_:2},1024)]),_:2},1024),e(D,null,{default:s(()=>[e(N,null,{prepend:s(()=>[e(M,{image:`${this.scratch_proxy}/avatars/${a.author.id}`},null,8,["image"])]),default:s(()=>[e(U,null,{default:s(()=>[r(o(a.author.username),1)]),_:2},1024),e(F,null,{default:s(()=>[r(o(a.author.id),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["to"])]),_:2},1024))),128))]),_:1}),t[9]||(t[9]=n("br",null,null,-1)),e(_,{onClick:t[3]||(t[3]=a=>c.onPageChange(l.curPage+1,!1))},{default:s(()=>t[5]||(t[5]=[r("继续加载",-1)])),_:1,__:[5]})]),_:1,__:[6,7,8,9]})}const q=j(A,[["render",O]]);export{q as default};
