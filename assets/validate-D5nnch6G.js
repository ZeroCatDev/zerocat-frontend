import{_ as d,H as n,G as p,ae as i,o as k,c as m,w as s,a as o,K as a,a7 as f,L as r,T as u,a3 as g,M as V,P as b}from"./index-DYKdaqCf.js";import{v as c}from"./userService-DrGAvo38.js";import{V as x}from"./VSpacer-B1NaiRLv.js";import{V as y}from"./VContainer-BKu9Q8Wt.js";/* empty css              */const $={data(){return{token:"",user:{},BASE_API:"https://zerocat-api.houlangs.com"}},mounted(){n.islogin.value==!0&&this.$router.push("/")},async created(){if(p({title:"魔术链接登录"}),this.$route.query.token)try{await this.$nextTick();const e=await c(this.$route.query.token);this.$toast.add({severity:e.data.status,summary:e.data.status,detail:e.data.message,life:3e3}),e.data.token&&(this.token=e.data.token,this.user=i(this.token),localStorage.setItem("token",this.token),this.user=i(localStorage.getItem("token")),console.log(this.user),n.loaduser(),this.$router.push({path:"/"}))}catch(e){this.user=e}else console.log("无token")}};function C(e,t,h,v,l,w){return k(),m(y,null,{default:s(()=>[o(b,{class:"mx-auto",rel:"noopener",target:"_blank",border:""},{title:s(()=>t[0]||(t[0]=[a("span",null,"您正在登录一个账户",-1)])),subtitle:s(()=>t[1]||(t[1]=[a("span",null,"其他页面传来了一个登录请求，正常情况下它会被自动处理",-1)])),default:s(()=>[o(f,{class:"bg-surface-light pt-4"},{default:s(()=>[t[2]||(t[2]=r("传入的token是：")),t[3]||(t[3]=a("br",null,null,-1)),r(" "+u(l.token)+" ",1),t[4]||(t[4]=a("br",null,null,-1)),t[5]||(t[5]=a("br",null,null,-1)),t[6]||(t[6]=r("处理后的数据是：")),t[7]||(t[7]=a("br",null,null,-1)),r(" "+u(l.user),1)]),_:1}),o(g,null,{default:s(()=>[o(x),o(V,{color:"primary",text:"返回登录",variant:"tonal",to:"/app/account/login",onClick:e.login},null,8,["onClick"])]),_:1})]),_:1})]),_:1})}const N=d($,[["render",C]]);export{N as default};
