import{_ as V}from"./ProjectQueryView-DJGx4dBY.js";import{_ as v}from"./UserRelationControls-DBc_qx1e.js";import{_ as p,a6 as I,af as b,Z as l,o as u,N as a,e as t,a0 as f,aY as w,ae as U,L as d,Y as o,a_ as k,$ as R,n as N,P as S,a8 as g,T as j,a5 as h,f as n,aI as T,O as z,X as A,R as B,S as y,U as L}from"./index-B1NM26Qy.js";import"./ProjectCard-B_tvgYuR.js";import"./VTextarea-QXKFkFpI.js";import"https://static.geetest.com/v4/gt4.js";const q={name:"UserInfoCard",components:{UserRelationControls:v},props:{userId:{type:[Number,String],default:null},username:{type:String,default:null},user:{type:Object,required:!0}},data(){return{loading:!1,error:null,localuser:b}},methods:{getRoleColor(s){return{admin:"error",moderator:"warning",user:"primary"}[s]||"default"},getRoleLabel(s){return{admin:"管理员",moderator:"版主",user:"用户"}[s]||s},async fetchUserInfo(){this.loading=!0;try{let s=this.userId?`/user/id/${this.userId}`:`/user/name/${this.username}`;const r=await I.get(s);if(r.data.status==="success")this.user=r.data.data;else throw new Error(r.data.message)}catch(s){console.error("Error fetching user info:",s),this.error=s.message}finally{this.loading=!1}}},watch:{userId:{handler:"fetchUserInfo",immediate:!0},username:{handler:"fetchUserInfo",immediate:!0}}},D={class:"text-center"},E={class:"text-h6"},O={class:"text-center"},P={class:"text-h6"},Y={class:"text-center"},Q={class:"text-h6"};function X(s,r,e,C,c,_){const m=v;return u(),l(A,{border:"",class:"user-info-card"},{default:a(()=>{var i;return[t(w,null,{prepend:a(()=>[t(R,{size:"96"},{default:a(()=>[e.user.avatar?(u(),l(N,{key:0,alt:e.user.display_name,src:c.localuser.getUserAvatar(e.user.avatar)},null,8,["alt","src"])):(u(),l(S,{key:1,icon:"mdi-account",size:"48"}))]),_:1})]),default:a(()=>[t(U,null,{default:a(()=>[d(o(e.user.display_name||e.user.username||"加载中..."),1)]),_:1}),t(k,null,{default:a(()=>[d("@"+o(e.user.username||"..."),1)]),_:1})]),_:1}),e.user.bio?(u(),l(g,{key:0,class:"mt-2"},{default:a(()=>[d(o(e.user.bio),1)]),_:1})):f("",!0),t(g,{class:"d-flex gap-2"},{default:a(()=>[e.user.role?(u(),l(j,{key:0,color:_.getRoleColor(e.user.role),size:"small",variant:"flat"},{default:a(()=>[d(o(_.getRoleLabel(e.user.role)),1)]),_:1},8,["color"])):f("",!0)]),_:1}),t(h),t(g,{class:"d-flex justify-space-around py-3"},{default:a(()=>[n("div",D,[n("div",E,o(e.user.project_count||0),1),r[0]||(r[0]=n("div",{class:"text-caption"},"作品",-1))]),t(h,{vertical:""}),n("div",O,[n("div",P,o(e.user.following_count||0),1),r[1]||(r[1]=n("div",{class:"text-caption"},"关注",-1))]),t(h,{vertical:""}),n("div",Y,[n("div",Q,o(e.user.followers_count||0),1),r[2]||(r[2]=n("div",{class:"text-caption"},"粉丝",-1))])]),_:1}),e.user.id&&e.user.id!==((i=c.localuser)==null?void 0:i.id)?(u(),l(T,{key:1},{default:a(()=>[t(z),t(m,{"display-name":e.user.display_name,"user-id":e.user.id,username:e.user.username},null,8,["display-name","user-id","username"])]),_:1})):f("",!0)]}),_:1})}const x=p(q,[["render",X],["__scopeId","data-v-888bafb0"]]),Z={components:{ProjectQueryView:V,UserInfoCard:x}};function F(s,r,e,C,c,_){const m=x,i=V;return u(),l(L,null,{default:a(()=>[t(B,null,{default:a(()=>[t(y,{cols:"12",lg:"3",md:"4"},{default:a(()=>[t(m,{"user-id":s.$route.params.id},null,8,["user-id"])]),_:1}),t(y,{cols:"12",lg:"9",md:"8"},{default:a(()=>[t(i,{target:s.$route.params.id,type:"author"},null,8,["target"])]),_:1})]),_:1})]),_:1})}const $=p(Z,[["render",F]]);export{$ as default};
