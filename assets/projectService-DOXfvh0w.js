import{y as e}from"./index-DHVuNzX6.js";const i=t=>({id:t,title:"未知项目",description:"项目信息未缓存",authorid:0,type:"scratch",license:"unknow",state:"unknow",view_count:0,time:0,tags:[],source:"unknow"});async function p(t){if(Array.isArray(t))try{const{data:o}=await e.post("/project/batch",{projectIds:t});return o.data}catch{return t.map(c=>i(c))}else try{const{data:o}=await e.get(`/project/id/${t}`);return o}catch{return i(t)}}async function l(t){try{const{data:o}=await e.get(`/projectlist/lists/listid/${t}`);return o.data}catch(o){return console.error("获取项目列表失败:",o),{projects:[]}}}async function g(t,o){try{const{data:c}=await e.get(`/project/namespace/${t}/${o}`);return c}catch{return i(0)}}async function y(t){try{const{data:o}=await e.post(`/project/initlize?projectid=${t}`);return o}catch{return i(0)}}const h=async t=>(await e({url:`/project/branches?projectid=${t}`,method:"get"})).data,j=async(t,o)=>{console.log(`Fetching commits for projectId: ${t}`);const s=(await e({url:`/project/commits?projectid=${t}`,method:"get"})).data.data;console.log(`Fetched ${s.length} commits`);const m=n=>(console.log(`Finding commit by id: ${n}`),s.find(a=>a.id===n));return(n=>{console.log(`Building commit history starting from commitid: ${n}`);const a=[];let r=m(n);for(;r;){if(console.log(`Adding commit to history: ${r.id}`),a.push(r),!r.parent_commit_id){console.log(`No parent commit found for commitid: ${r.id}`);break}r=m(r.parent_commit_id)}return a})(o)};export{g as a,h as b,p as c,l as d,j as g,y as i};
