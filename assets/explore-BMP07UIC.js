import{_ as y}from"./proxylicense-BKQJ_9cd.js";import{e as _}from"./projectService-CYX3rCH3.js";import{_ as j}from"./43-lazyload-CBkwrR6M.js";import{_ as x,T as c,o as p,N as s,h as e,M as o,j as g,K as l,k as C,O as b,S as i,a as P,F as v,Q as L,R as k,q as w,ar as I,as as B,at as S,ai as N,aj as T,al as D,am as U,U as z}from"./index-BVHv7Kt3.js";import{V,a as m}from"./VRow-DOaJ8fnm.js";import{V as h}from"./VSelect-G6DbVjBX.js";import{V as F}from"./VChip-mBmXDnix.js";import{V as M}from"./VContainer-COdZDY2D.js";/* empty css              */import"./VTextField-9kh1NZa8.js";/* empty css                   */import"./VInput-CfGeQOzG.js";import"./VCheckboxBtn-j9nv5Cgy.js";import"./VSelectionControl-B-SJ2O3p.js";const R={data(){return{orderitems:[{name:"热门的",type:"trending"},{name:"最受欢迎的",type:"popular"},{name:"新建的",type:"recent"}],tagitems:[{name:"全部",type:"*"},{name:"动画",type:"animations"},{name:"艺术",type:"art"},{name:"游戏",type:"games"},{name:"音乐",type:"music"},{name:"故事",type:"stories"},{name:"教程",type:"tutorials"}],search:{order:"trending",tag:"*",limit:18},usetime:0,ProjectsLoading:!1,projects:[],projectscount:0,curPage:1,scratch_proxy:"https://scratch.192325.xyz"}},async created(){await this.getprojects()},methods:{async getprojects(){this.onPageChange(1)},async onPageChange(u,t){t&&(this.projects=[]),this.usetime=Date.now(),this.ProjectsLoading=!0;try{const n=await _(this.search.order,this.search.tag,u,this.search.limit);this.projects=this.projects.concat(n.data)}catch(n){console.log(n)}finally{this.ProjectsLoading=!1,this.usetime=Date.now()-this.usetime}this.curPage=u}}},q={class:"mb-2"};function A(u,t,n,E,r,d){const f=y;return p(),c(M,null,{default:s(()=>[e(f,{url:"https://scratch.mit.edu/explore/projects/all"}),t[6]||(t[6]=o("br",null,null,-1)),e(V,null,{default:s(()=>[e(m,{cols:"3"},{default:s(()=>[e(h,{modelValue:r.search.order,"onUpdate:modelValue":t[0]||(t[0]=a=>r.search.order=a),items:r.orderitems,"item-title":"name","item-value":"type",label:"排序 为："+r.search.order},null,8,["modelValue","items","label"])]),_:1}),e(m,{cols:"3"},{default:s(()=>[e(h,{modelValue:r.search.tag,"onUpdate:modelValue":t[1]||(t[1]=a=>r.search.tag=a),items:r.tagitems,"item-title":"name","item-value":"type",label:"标签 为："+r.search.tag},null,8,["modelValue","items","label"])]),_:1}),e(m,{cols:"3"},{default:s(()=>[e(g,{onClick:t[2]||(t[2]=a=>d.onPageChange(1,!0))},{default:s(()=>t[4]||(t[4]=[l(" 加载 ")])),_:1})]),_:1})]),_:1}),t[7]||(t[7]=o("br",null,null,-1)),t[8]||(t[8]=o("br",null,null,-1)),e(C,{active:r.ProjectsLoading,height:"4",indeterminate:""},null,8,["active"]),o("div",q,[e(F,null,{default:s(()=>[e(b,{icon:"mdi-clock",start:""}),l("本页加载用时"+i(Math.abs(r.usetime/1e3))+"秒 ",1)]),_:1})]),e(V,null,{default:s(()=>[(p(!0),P(v,null,L(r.projects,a=>(p(),c(m,{cols:" 12",md:"3",key:a},{default:s(()=>[e(k,{to:"/app/proxy/"+a.id},{default:s(()=>[e(w,{src:`${r.scratch_proxy}/thumbnails/${a.id}`,cover:"","lazy-src":j},null,8,["src"]),e(I,null,{default:s(()=>[e(B,null,{default:s(()=>[l(i(a.title),1)]),_:2},1024),e(S,null,{default:s(()=>[l(i(a.description||"简介未找到"),1)]),_:2},1024)]),_:2},1024),e(N,null,{default:s(()=>[e(T,null,{prepend:s(()=>[e(z,{image:`${this.scratch_proxy}/avatars/${a.author.id}`},null,8,["image"])]),default:s(()=>[e(D,null,{default:s(()=>[l(i(a.author.username),1)]),_:2},1024),e(U,null,{default:s(()=>[l(i(a.author.id),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["to"])]),_:2},1024))),128))]),_:1}),t[9]||(t[9]=o("br",null,null,-1)),e(g,{onClick:t[3]||(t[3]=a=>d.onPageChange(r.curPage+1,!1))},{default:s(()=>t[5]||(t[5]=[l("继续加载")])),_:1})]),_:1})}const ae=x(R,[["render",A]]);export{ae as default};
