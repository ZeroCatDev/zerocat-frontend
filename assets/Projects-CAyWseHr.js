import{s as h}from"./showProjects-DQ6UlAfp.js";import{_ as V,J as j,o as s,e as _,c as a,Y as y,a1 as u,a as o,w as r,L as i,Z as m,O as n,W as p,N as P,T as I}from"./index-DFXp_gwa.js";import{a as k,V as w}from"./VRow-BPw0P95U.js";import{V as d}from"./VChip-BaHLS7Nk.js";import{V as T}from"./VPagination-CM-6iJ09.js";const x={components:{showProjects:h},props:{url:{type:String,required:!0},actions:{type:Array}},data(){return{projectIds:[],page:1,limit:16,totalPage:1,totalCount:0,loading:!1,loadTime:0}},computed:{hasTotalCount(){return this.totalCount>0}},methods:{async fetchProjects(){this.loading=!0;const c=performance.now();try{const t=await j.get(`${this.url}&curr=${this.page}&limit=${this.limit}`);this.projectIds=this.hasTotalCount?t.projects:[...this.projectIds,...t.projects],this.totalCount=t.totalCount||0,this.totalPage=this.totalCount?Math.ceil(this.totalCount/this.limit):1}catch(t){console.error("Failed to fetch projects:",t)}finally{this.loading=!1,this.loadTime=performance.now()-c}},loadMore(){this.page++,this.fetchProjects()}},watch:{url:{handler(){this.page=1,this.fetchProjects()},immediate:!0},page:{handler(){this.fetchProjects()}}}},B={class:"mt-2 text-medium-emphasis"};function N(c,t,f,M,e,l){const g=h;return s(),_(I,null,[e.loading?(s(),a(y,{key:0,indeterminate:"",color:"primary"})):u("",!0),o(w,null,{default:r(()=>[o(k,{cols:"12"},{default:r(()=>[i("p",B,[o(d,null,{default:r(()=>[o(m,{icon:"mdi-timer",start:""}),n(" 加载耗时: "+p(e.loadTime)+" ms ",1)]),_:1}),e.totalCount?(s(),a(d,{key:0},{default:r(()=>[o(m,{icon:"mdi-counter",start:""}),n(" 总作品数量: "+p(e.totalCount),1)]),_:1})):u("",!0)])]),_:1})]),_:1}),o(g,{projectIds:e.projectIds,actions:f.actions},null,8,["projectIds","actions"]),t[2]||(t[2]=i("br",null,null,-1)),l.hasTotalCount?(s(),a(T,{key:1,modelValue:e.page,"onUpdate:modelValue":t[0]||(t[0]=C=>e.page=C),length:e.totalPage,onInput:l.fetchProjects,rounded:"circle"},null,8,["modelValue","length","onInput"])):(s(),a(P,{key:2,onClick:l.loadMore,color:"primary"},{default:r(()=>t[1]||(t[1]=[n("继续加载")])),_:1},8,["onClick"])),t[3]||(t[3]=n()),t[4]||(t[4]=i("br",null,null,-1))],64)}const A=V(x,[["render",N]]);export{A as _};
