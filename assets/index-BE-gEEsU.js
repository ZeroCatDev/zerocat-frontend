import{o as h}from"./openEdit-AJJkPSPH.js";import{_ as j,Q as c,c as P,o as f,w as l,a as e,a3 as b,a4 as V,Z as N,a5 as L,I as n,K as w,e as g,G as p,M as I,N as E,ab as q,ac as S,H as u,O as m,ad as T,T as F,S as y}from"./index-DDZ3oPWF.js";import{V as O,a as U}from"./VRow-D6dO8d8o.js";import{V as k}from"./VSpacer-Cu31eZEb.js";import{V as B}from"./VSelect-CrIbHcQJ.js";import{V as H}from"./VChip-RlpxzpvD.js";import{V as A}from"./VContainer-DqnRmqHJ.js";import{V as C}from"./VDialog-DBQlpoDe.js";/* empty css              */import"./VCheckboxBtn-Dfblkfeh.js";import"./VSelectionControl-Cc3RjJDv.js";const G={data(){return{projectInfo:{title:"新建项目列表"},created:!1,newId:0,isVisibleDialog:!1,openEdit:h}},props:{callback:{type:Function,required:!1},close:{type:Function,required:!1}},methods:{show(){this.projectInfo={title:"新建项目列表"},this.created=!1,this.newId=0,this.isVisibleDialog=!0},async newProjectList(){await c.post("/projectlist/create",this.projectInfo).then(a=>{console.log(a),this.$toast.add({severity:"info",summary:"info",detail:a.data,life:3e3}),a.data.status=="success"&&(this.newId=a.data.id)}),this.callback()}}};function K(a,t,r,v,i,d){return f(),P(w,{"prepend-icon":"mdi-xml",title:"新建列表",border:""},{default:l(()=>[e(b,null,{default:l(()=>[e(O,{dense:""},{default:l(()=>[e(U,{cols:"12",md:"12",sm:"12"},{default:l(()=>[e(V,{label:"标题",required:"",hint:"将便于查找",modelValue:i.projectInfo.title,"onUpdate:modelValue":t[0]||(t[0]=s=>i.projectInfo.title=s),disabled:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(N),e(L,null,{default:l(()=>[e(k),e(n,{text:"关闭",variant:"plain",onClick:t[1]||(t[1]=s=>r.close())}),e(n,{color:"primary",text:"创建",variant:"tonal",onClick:t[2]||(t[2]=s=>{d.newProjectList(),r.close()}),disabled:i.created},null,8,["disabled"])]),_:1})]),_:1})}const _=j(G,[["render",K]]),M={data(){return{listStates:[{state:"私密",abbr:"private"},{state:"公开",abbr:"public"}],created:!1,newid:0,isVisible:!1,listInfo:{},newListInfo:{}}},props:{listid:{type:String,required:!0},callback:{type:Function,required:!1},close:{type:Function,required:!1}},methods:{show(){this.created=!1,this.newid=0,this.isVisible=!0},async getProjectList(a){await c.get("/projectlist/listid/"+a).then(t=>{console.log(t),this.$toast.add({severity:"info",summary:"info",detail:t.data,life:3e3}),t.data.status=="success"&&(this.listInfo=Object.assign({},t.data.data),this.newListInfo=Object.assign({},t.data.data))}),this.callback()},async updateProjectList(a){await c.post("/projectlist/update/"+a,this.newListInfo).then(t=>{console.log(t),this.$toast.add({severity:"info",summary:"info",detail:t.data,life:3e3}),t.data.status=="1"&&(this.listInfo=Object.assign({},t.data.data),this.newListInfo=Object.assign({},t.data.data))}),this.callback()},async deleteProjectList(a){await c.delete("/projectlist/"+a).then(t=>{console.log(t),this.$toast.add({severity:"info",summary:"info",detail:t.data,life:3e3})}),this.callback()}},mounted(){this.getProjectList(this.listid)}};function Q(a,t,r,v,i,d){return f(),P(w,{border:"",title:`${i.listInfo.title}(#${i.listInfo.id})`},{default:l(()=>[e(b,null,{default:l(()=>[e(V,{modelValue:i.newListInfo.title,"onUpdate:modelValue":t[0]||(t[0]=s=>i.newListInfo.title=s),label:"名称",required:""},null,8,["modelValue"]),e(V,{modelValue:i.newListInfo.description,"onUpdate:modelValue":t[1]||(t[1]=s=>i.newListInfo.description=s),label:"简介",required:""},null,8,["modelValue"]),e(B,{modelValue:i.newListInfo.state,"onUpdate:modelValue":t[2]||(t[2]=s=>i.newListInfo.state=s),items:i.listStates,"item-title":"state","item-value":"abbr",label:"项目状态"},null,8,["modelValue","items"])]),_:1}),e(L,null,{default:l(()=>[e(n,{text:"删除",variant:"plain",onClick:t[3]||(t[3]=s=>{d.deleteProjectList(r.listid),r.close()}),color:"red"}),e(k),e(n,{text:"回退",variant:"plain",onClick:t[4]||(t[4]=s=>i.newListInfo=Object.assign({},i.listInfo))}),e(n,{text:"关闭",variant:"plain",onClick:t[5]||(t[5]=s=>r.close())}),e(n,{color:"primary",text:"保存",variant:"tonal",onClick:t[6]||(t[6]=s=>d.updateProjectList(r.listid))})]),_:1})]),_:1},8,["title"])}const x=j(M,[["render",Q]]),R={components:{NewProjectList:_,EditProjectListConfig:x},async created(){y.isLogin.value===!1&&this.$router.push("/app/account/login")},data(){return{localuser:y,editlistid:0,EditProjectListConfigDialog:!1,NewProjectListDialog:!1,lists:[]}},methods:{async getProjectList(){this.lists=(await c({url:"/projectlist/my",method:"get"})).data.data}},mounted(){this.getProjectList()},name:"projectlist",setup(){F({title:"列表"})}},Z={class:"d-flex justify-space-between mb-4"},z={class:"d-flex ga-2"};function J(a,t,r,v,i,d){const s=x,D=_;return f(),g(I,null,[e(A,null,{default:l(()=>[p("div",Z,[t[3]||(t[3]=p("h1",null,"列表",-1)),p("div",z,[e(n,{onClick:t[0]||(t[0]=o=>i.NewProjectListDialog=!0),border:"",color:"primary",rounded:"lg",slim:"",text:"创建",variant:"flat"})])]),(f(!0),g(I,null,E(i.lists,o=>(f(),g("div",{key:o.id},[e(w,{border:""},{default:l(()=>[e(q,null,{default:l(()=>[e(S,null,{default:l(()=>[u(m(o.title),1),e(H,{color:o.state=="private"?"primary":"green"},{default:l(()=>[u(m(o.state=="private"?"私密":"公开"),1)]),_:2},1032,["color"])]),_:2},1024),e(T,null,{default:l(()=>[u(m(o.createTime+"创建，"+o.updateTime+"更新"),1)]),_:2},1024)]),_:2},1024),e(b,null,{default:l(()=>[u(m(o.description),1)]),_:2},1024),e(L,null,{default:l(()=>[e(n,{onClick:W=>{i.editlistid=o.id,i.EditProjectListConfigDialog=!0}},{default:l(()=>t[4]||(t[4]=[u("编辑")])),_:2},1032,["onClick"]),e(n,{to:`/app/projectlist/${o.id}`},{default:l(()=>t[5]||(t[5]=[u("打开")])),_:2},1032,["to"])]),_:2},1024)]),_:2},1024),t[6]||(t[6]=p("br",null,null,-1))]))),128))]),_:1}),e(C,{modelValue:i.EditProjectListConfigDialog,"onUpdate:modelValue":t[1]||(t[1]=o=>i.EditProjectListConfigDialog=o)},{default:l(()=>[e(s,{listid:i.editlistid,close:()=>i.EditProjectListConfigDialog=!1,callback:d.getProjectList},null,8,["listid","close","callback"])]),_:1},8,["modelValue"]),e(C,{modelValue:i.NewProjectListDialog,"onUpdate:modelValue":t[2]||(t[2]=o=>i.NewProjectListDialog=o)},{default:l(()=>[e(D,{listid:i.editlistid,close:()=>i.NewProjectListDialog=!1,callback:d.getProjectList},null,8,["listid","close","callback"])]),_:1},8,["modelValue"])],64)}const rt=j(R,[["render",J]]);export{rt as default};
