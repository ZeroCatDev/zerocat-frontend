import{_ as f,a as h}from"./Recaptcha-B4g2ARdM.js";import{_ as y,I as u,H as p,G as x,r as V,o as v,e as k,K as l,a as e,w as r,a4 as d,M as c,P as R,R as C}from"./index-DYKdaqCf.js";import{f as b}from"./userService-DrGAvo38.js";import{V as m,a as n}from"./VRow-2dIRckCl.js";import{V as B}from"./VForm-DbmWM3RE.js";import"./VDialog-BUdJTBxv.js";import"https://static.geetest.com/v4/gt4.js";/* empty css              */const z={components:{LoadingDialog:f,Recaptcha:h},data(){return{BASE_API:"https://zerocat-api.houlangs.com",password:"",password2:"",show1:u(!1),show2:u(!1),tryinguser:{},loading:!1,emailRules:[t=>t?!0:"必须填写邮箱",t=>/.+@.+\..+/.test(t)?!0:"不符合格式"],passwordRules:[t=>t?!0:"必须填写密码"],password2Rules:[t=>t?!0:"必须填写密码",t=>{if(t!=this.password)return"必须与前者相同"}]}},created(){p.islogin.value==!0&&this.$router.push("/")},setup(){x({title:"重设密码"})},methods:{async login(){this.loading=!0;try{await this.$nextTick();const t=await b({jwttoken:this.$route.query.token,captcha:this.$refs.recaptcha.getResponse(),pw:this.password});this.tryinguser=t.data,this.tryinguser.message!="OK"?this.$toast.add({severity:"info",summary:"info",detail:this.tryinguser.msg||this.tryinguser.message,life:3e3}):(p.setuser(this.tryinguser.token),(this.tryinguser.msg||this.tryinguser.message=="OK")&&this.$router.push("/"))}catch(t){this.$toast.add({severity:"error",summary:"错误",detail:t.message,life:3e3})}finally{this.loading=!1}}}},F={class:"auth-wrapper d-flex align-center justify-center pa-4"};function I(t,o,K,N,s,w){const i=V("v-cardtext"),g=h,_=f;return v(),k(C,null,[l("div",F,[e(R,{class:"auth-card pa-4 pt-7","max-width":"448",border:""},{default:r(()=>[e(m,null,{default:r(()=>[e(n,{cols:"12"},{default:r(()=>[e(i,null,{default:r(()=>o[4]||(o[4]=[l("h5",{class:"text-h5 font-weight-semibold mb-1"}," 欢迎来到ZeroCatNext！ 👋🏻 ",-1),l("p",{class:"mb-0"},"重设密码",-1)])),_:1})]),_:1})]),_:1}),e(i,null,{default:r(()=>[e(B,null,{default:r(()=>[e(m,null,{default:r(()=>[e(n,{cols:"12"},{default:r(()=>[e(d,{label:"密码",modelValue:s.password,"onUpdate:modelValue":o[0]||(o[0]=a=>s.password=a),variant:"outlined",rules:s.passwordRules,"append-icon":s.show1?"mdi-eye":"mdi-eye-off",type:s.show1?"text":"password","onClick:append":o[1]||(o[1]=a=>s.show1=!s.show1)},null,8,["modelValue","rules","append-icon","type"]),e(d,{label:"确认密码",modelValue:s.password2,"onUpdate:modelValue":o[2]||(o[2]=a=>s.password2=a),variant:"outlined",rules:s.password2Rules,"append-icon":s.show2?"mdi-eye":"mdi-eye-off",type:s.show2?"text":"password","onClick:append":o[3]||(o[3]=a=>s.show2=!s.show2)},null,8,["modelValue","rules","append-icon","type"])]),_:1}),e(n,{cols:"9"},{default:r(()=>[e(g,{ref:"recaptcha",recaptchaId:"recaptcha-div"},null,512)]),_:1}),e(n,{cols:"12"},{default:r(()=>[e(c,{class:"text-none",color:"primary",rounded:"xl",text:"重设密码",variant:"flat",size:"large",onClick:w.login,"append-icon":"mdi-arrow-right"},null,8,["onClick"])]),_:1}),e(n,{cols:"12"},{default:r(()=>[e(c,{class:"text-none",color:"white",rounded:"xl",text:"登录",variant:"text",size:"large","append-icon":"mdi-arrow-right",to:"/app/account/login"})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),e(_,{show:s.loading,text:"正在重设密码"},null,8,["show"])],64)}const T=y(z,[["render",I]]);export{T as default};
