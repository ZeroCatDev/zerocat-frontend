import{o as v}from"./openEdit-AJJkPSPH.js";import{_ as y,ad as c,U as C,o as g,N as l,M as r,h as n,K as o,T as u,S as p,aq as d,j as f,aE as h,Y as w,ai as a,az as k,L as j,aB as B}from"./index-DKqePUrh.js";import{V as b}from"./VCheckbox-0F4GHS8l.js";import{V as x}from"./VTextField-i-JnkifG.js";import{V as U}from"./VContainer-BXT9mjmi.js";import"./VCheckboxBtn-BBpyMeCr.js";import"./VSelectionControl-DIpHOvtW.js";import"./VInput-yqi59OEB.js";/* empty css                   *//* empty css              */const N={data(){return{project:{},author:{},openEditor:v,localuser:a,checktext:"我保证会好好对待改编的作品",checkknow:!0,checklicense:!0,checkname:!1,textRules:[s=>s?!0:"记得输入内容哦~",s=>s==="我保证会好好对待改编的作品"?!0:"输的不太对~"],forkprojectinfo:{name:""}}},async created(){a.isLogin.value===!1&&this.$router.push("/app/account/login"),this.fetchProjectAndAuthorDetails()},setup(){j({title:"分叉"})},methods:{async fetchProjectAndAuthorDetails(){const s=this.$route.params.username,e=this.$route.params.projectname;this.project=await k(s,e),this.projectid=this.project.id,this.forkprojectinfo.name=this.project.name,verifyname(),j({title:"分叉"+this.project.title}),this.author=await B(this.project.authorid)},async verifyname(){k(a.user.value.username,this.forkprojectinfo.name).then(s=>{console.log(s),s.id===0&&(this.checkname=!0)})},async forkproject(s){await w({url:"/project/fork",method:"post",data:{projectid:s,branch:this.project.default_branch,name:this.forkprojectinfo.name}}).then(e=>{console.log(e.data),this.$toast.add({severity:e.data.status,summary:e.data.message,detail:e.data.message,life:3e3}),e.data.status=="success"&&this.$router.push(`/${a.user.value.username}/${this.forkprojectinfo.name}`)}).catch(e=>{console.log(e),this.$toast.add({severity:"error",summary:"错误",detail:e,life:3e3})})}}},A={class:"d-flex justify-space-between"},L={class:"text-h4"},Z=["textContent"],D=["textContent"];function F(s,e,I,K,t,m){const V=c("v-text");return g(),C(U,{class:"pa-md-12"},{default:l(()=>[r("div",A,[r("h1",L,[e[6]||(e[6]=o("Fork ")),r("span",{textContent:u(t.project.title)},null,8,Z)])]),e[22]||(e[22]=r("br",null,null,-1)),n(p,{hover:"",border:""},{title:l(()=>[o(u(t.project.title),1)]),subtitle:l(()=>[o(" 作者"+u(t.author.display_name)+"，发布于："+u(t.project.time)+"，"+u(t.project.view_count)+"次浏览 ",1)]),text:l(()=>[o(u(t.project.description),1)]),_:1}),e[23]||(e[23]=r("br",null,null,-1)),n(p,{hover:"",border:""},{title:l(()=>e[7]||(e[7]=[o(" 你正在分叉一个项目 ")])),subtitle:l(()=>e[8]||(e[8]=[o("等等，确认点事 ")])),text:l(()=>[e[9]||(e[9]=o(" 你正在分叉 ")),r("span",{textContent:u(t.project.title)},null,8,D),e[10]||(e[10]=o(" ，这将会从此项目的生产环境创建一个一模一样的项目，新的项目将拥有一样的名称，简介与源代码内容。分叉是一个技术概念，不代表作者对你有任何授权。 ")),e[11]||(e[11]=r("br",null,null,-1)),e[12]||(e[12]=o("改编设立的目的是为了让社区中的作品得到更好的发展，请不要滥用改编，更不能直接抄袭。 "))]),default:l(()=>[n(d,null,{default:l(()=>[n(b,{label:"我已了解并确认",modelValue:t.checkknow,"onUpdate:modelValue":e[0]||(e[0]=i=>t.checkknow=i)},null,8,["modelValue"])]),_:1})]),_:1}),e[24]||(e[24]=r("br",null,null,-1)),n(p,{hover:"",border:""},{title:l(()=>[o(u(t.project.license),1)]),subtitle:l(()=>[o(" 你需要遵守："+u(t.project.license)+"许可证。 ",1)]),text:l(()=>[n(f,{href:"https://choosealicense.com/licenses/"+t.project.license,target:"_blank",variant:"outlined"},{default:l(()=>e[13]||(e[13]=[o("了解此许可证")])),_:1},8,["href"]),e[14]||(e[14]=r("br",null,null,-1)),e[15]||(e[15]=r("br",null,null,-1)),e[16]||(e[16]=o(" 开源许可证授予您某些权利，前提是您必须遵守相关许可证条款。如未明确标示许可证（显示为NULL），则默认作品受专有版权保护。在分发该作品之前，您需联系作者并获得授权。 ")),e[17]||(e[17]=r("br",null,null,-1)),e[18]||(e[18]=o(" 用户在ZeroCat上分发该作品，并不意味着其拥有该作品的所有权。作品的分叉仅为技术行为，不等同于获得作者的法律授权。")),e[19]||(e[19]=r("br",null,null,-1)),e[20]||(e[20]=o(" ZeroCat对用户上传、分发或使用的任何作品不承担任何法律责任。ZeroCat仅提供技术支持和托管服务，用户对所上传、分发及使用的作品负责，若因作品内容引发任何法律纠纷或损失，ZeroCat不承担任何责任。 "))]),default:l(()=>[n(d,null,{default:l(()=>[n(b,{label:"我已了解并确认",modelValue:t.checklicense,"onUpdate:modelValue":e[1]||(e[1]=i=>t.checklicense=i)},null,8,["modelValue"])]),_:1})]),_:1}),e[25]||(e[25]=r("br",null,null,-1)),n(V,null,{default:l(()=>e[21]||(e[21]=[o("如果您已了解以上内容，请在下方的输入框中输入")])),_:1}),e[26]||(e[26]=o()),e[27]||(e[27]=r("br",null,null,-1)),e[28]||(e[28]=r("br",null,null,-1)),n(x,{hint:"请准确输入上方的话",label:"我保证会好好对待改编的作品",type:"input",modelValue:t.checktext,"onUpdate:modelValue":e[2]||(e[2]=i=>t.checktext=i),rules:t.textRules,required:"",variant:"outlined",clearable:""},null,8,["modelValue","rules"]),n(x,{modelValue:t.forkprojectinfo.name,"onUpdate:modelValue":e[3]||(e[3]=i=>t.forkprojectinfo.name=i),variant:"outlined",label:"分叉后项目名称",onKeyup:e[4]||(e[4]=h(i=>m.verifyname(),["enter"])),color:t.checkname?"success":"error"},null,8,["modelValue","color"]),e[29]||(e[29]=r("br",null,null,-1)),n(f,{class:"text-none",color:"primary",rounded:"xl",text:"Fork",variant:"flat",size:"large",onClick:e[5]||(e[5]=i=>m.forkproject(t.project.id)),"append-icon":"mdi-arrow-right",disabled:!t.checkknow||!t.checklicense||!t.checktext},null,8,["disabled"])]),_:1})}const G=y(N,[["render",F]]);export{G as default};
