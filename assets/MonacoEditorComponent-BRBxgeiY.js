import{_ as g,r as p,w as r,e as v,b4 as w,a as _,o as h}from"./index-DKqePUrh.js";const b={name:"MonacoEditorComponent",props:{modelValue:{type:String,default:""},language:{type:String,default:"javascript"},options:{type:Object,default:()=>({})},locale:{type:String,default:"zh-cn"}},emits:["update:modelValue","change"],setup(n,{emit:u}){const l=p(null);let e=null,s=null,o=null,a=null;const d=()=>{window.require.config({paths:{vs:"/monaco-editor/min/vs"},"vs/nls":{availableLanguages:{"*":n.locale}}}),window.require(["vs/editor/editor.main"],function(t){a=t,c()})},c=()=>{if(!l.value||!a)return;const i={...{value:n.modelValue,language:n.language,theme:"vs-dark",fontSize:14,tabSize:2,minimap:{enabled:!0},scrollBeyondLastLine:!1,automaticLayout:!0,wordWrap:"on",lineNumbers:"on"},...n.options};e=a.editor.create(l.value,i),s=e.onDidChangeModelContent(()=>{const m=e.getValue();u("update:modelValue",m),u("change",m)}),o=new ResizeObserver(()=>{e&&e.layout()}),o.observe(l.value),setTimeout(()=>{e&&e.layout()},100)},f=()=>{o&&(o.disconnect(),o=null),s&&(s.dispose(),s=null),e&&(e.dispose(),e=null)};return r(()=>n.modelValue,t=>{e&&t!==e.getValue()&&e.setValue(t)}),r(()=>n.language,t=>{if(e&&a){const i=e.getModel();i&&a.editor.setModelLanguage(i,t)}}),r(()=>n.options,t=>{e&&e.updateOptions(t)},{deep:!0}),r(()=>n.locale,t=>{f(),window.require.config({"vs/nls":{availableLanguages:{"*":t}}}),window.require(["vs/editor/editor.main"],function(i){a=i,c()})}),v(()=>{if(window.require)d();else{const t=document.createElement("script");t.src="/monaco-editor/min/vs/loader.js",t.onload=d,document.head.appendChild(t)}window.addEventListener("resize",()=>{e&&e.layout()})}),w(()=>{window.removeEventListener("resize",()=>{e&&e.layout()}),f()}),{editorContainer:l}}},y={ref:"editorContainer",style:{height:"100%",width:"100%"}};function L(n,u,l,e,s,o){return h(),_("div",y,null,512)}const C=g(b,[["render",L]]);export{C as _};
