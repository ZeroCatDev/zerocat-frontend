import{_ as V}from"./ProjectQueryView-BuEQFGQW.js";import{_ as p}from"./UserRelationControls-BTfh9Q2Y.js";import{_ as v,a1 as I,aa as b,ab as w,Y as l,o as u,N as a,e as t,$ as f,aN as k,a9 as U,L as d,X as o,aP as N,Z as R,n as B,O as S,a3 as g,S as j,a0 as h,f as n,aE as T,W as z,Q as E,R as y,T as L}from"./index-k6-8hKoX.js";import{V as q}from"./VSpacer-BY-Xu9R1.js";import"./ProjectCard-DLcybwdr.js";import"./VTextarea-FJpDW-4-.js";const A={name:"UserInfoCard",components:{UserRelationControls:p},props:{userId:{type:[Number,String],default:null},username:{type:String,default:null},user:{type:Object,required:!0}},data(){return{loading:!1,error:null,s3BucketUrl:"",localuser:w}},async mounted(){this.s3BucketUrl=await b("s3.staticurl")},methods:{getRoleColor(s){return{admin:"error",moderator:"warning",user:"primary"}[s]||"default"},getRoleLabel(s){return{admin:"管理员",moderator:"版主",user:"用户"}[s]||s},async fetchUserInfo(){this.loading=!0;try{let s=this.userId?`/user/id/${this.userId}`:`/user/name/${this.username}`;const r=await I.get(s);if(r.data.status==="success")this.user=r.data.data;else throw new Error(r.data.message)}catch(s){console.error("Error fetching user info:",s),this.error=s.message}finally{this.loading=!1}}},watch:{userId:{handler:"fetchUserInfo",immediate:!0},username:{handler:"fetchUserInfo",immediate:!0}}},D={class:"text-center"},O={class:"text-h6"},P={class:"text-center"},Q={class:"text-h6"},W={class:"text-center"},X={class:"text-h6"};function Y(s,r,e,C,c,_){const m=p;return u(),l(z,{class:"user-info-card",border:""},{default:a(()=>{var i;return[t(k,null,{prepend:a(()=>[t(R,{size:"96"},{default:a(()=>[e.user.avatar?(u(),l(B,{key:0,src:c.s3BucketUrl+"/user/"+e.user.avatar,alt:e.user.display_name},null,8,["src","alt"])):(u(),l(S,{key:1,size:"48",icon:"mdi-account"}))]),_:1})]),default:a(()=>[t(U,null,{default:a(()=>[d(o(e.user.display_name||e.user.username||"加载中..."),1)]),_:1}),t(N,null,{default:a(()=>[d("@"+o(e.user.username||"..."),1)]),_:1})]),_:1}),e.user.bio?(u(),l(g,{key:0,class:"mt-2"},{default:a(()=>[d(o(e.user.bio),1)]),_:1})):f("",!0),t(g,{class:"d-flex gap-2"},{default:a(()=>[e.user.role?(u(),l(j,{key:0,size:"small",color:_.getRoleColor(e.user.role),variant:"flat"},{default:a(()=>[d(o(_.getRoleLabel(e.user.role)),1)]),_:1},8,["color"])):f("",!0)]),_:1}),t(h),t(g,{class:"d-flex justify-space-around py-3"},{default:a(()=>[n("div",D,[n("div",O,o(e.user.project_count||0),1),r[0]||(r[0]=n("div",{class:"text-caption"},"作品",-1))]),t(h,{vertical:""}),n("div",P,[n("div",Q,o(e.user.following_count||0),1),r[1]||(r[1]=n("div",{class:"text-caption"},"关注",-1))]),t(h,{vertical:""}),n("div",W,[n("div",X,o(e.user.followers_count||0),1),r[2]||(r[2]=n("div",{class:"text-caption"},"粉丝",-1))])]),_:1}),e.user.id&&e.user.id!==((i=c.localuser)==null?void 0:i.id)?(u(),l(T,{key:1},{default:a(()=>[t(q),t(m,{"user-id":e.user.id,username:e.user.username,"display-name":e.user.display_name},null,8,["user-id","username","display-name"])]),_:1})):f("",!0)]}),_:1})}const x=v(A,[["render",Y],["__scopeId","data-v-a12b0434"]]),Z={components:{ProjectQueryView:V,UserInfoCard:x}};function F(s,r,e,C,c,_){const m=x,i=V;return u(),l(L,null,{default:a(()=>[t(E,null,{default:a(()=>[t(y,{cols:"12",md:"4",lg:"3"},{default:a(()=>[t(m,{"user-id":s.$route.params.id},null,8,["user-id"])]),_:1}),t(y,{cols:"12",md:"8",lg:"9"},{default:a(()=>[t(i,{type:"author",target:s.$route.params.id},null,8,["target"])]),_:1})]),_:1})]),_:1})}const ee=v(Z,[["render",F]]);export{ee as default};
