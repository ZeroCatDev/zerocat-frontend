import{a as k}from"./Comment-ryDRitJN.js";import{_ as B}from"./proxylicense-Fnppw2GA.js";import{_ as V}from"./ProxyShowProjects-DctSuf4_.js";import{a as j}from"./projectService-CQ7HaKd-.js";import{_ as Z,ag as N,X as m,o as a,M as r,e as t,Q as D,R as y,f as i,Y as c,ae as p,L as l,a8 as b,T as s,$ as h,a_ as n,b0 as d,S as u,Z as v,n as f,c as I,F as z,W as F,i as L,c6 as g,U as R,bg as P}from"./index-DqTFJ56J.js";import"./TimeAgo-C1fvw-LU.js";import"./_commonjsHelpers-BosuxZz1.js";import"./VTextarea-DCEsvZBe.js";import"https://static.geetest.com/v4/gt4.js";const U={components:{Comment:k,ProxyShowProjects:V},data(){return{project:{id:1,title:"加载中",description:"加载中",instructions:"加载中",visibility:"visible",public:!0,comments_allowed:!0,is_published:!0,author:{id:1,username:"加载中",scratchteam:!1,history:{joined:"2000-01-01T00:00:00.000Z"},profile:{id:null,avatar:{"90x90":"","60x60":"","55x55":"","50x50":"","32x32":""}}},image:"",avatar:{"282x218":"","216x163":"","200x200":"","144x108":"","135x102":"","100x80":""},history:{created:"2000-01-01T00:00:00.000Z",modified:"2000-01-01T00:00:00.000Z",shared:"2000-01-01T00:00:00.000Z"},stats:{views:0,loves:0,favorites:0,remixes:0},remix:{parent:null,root:null},project_token:"",project_tags:[]},parentProject:null,rootProject:null,projectid:this.$route.params.id,embedurl:"",scratch_proxy:"",scratch_proxy_gui:""}},async mounted(){this.scratch_proxy=P("scratchproxy.url"),this.scratch_proxy_gui=P("scratchproxy.gui"),await this.fetchProjectData()},methods:{async fetchProjectData(){try{const _=await j(this.$route.params.id);this.project=_.data,this.embedurl=`${this.scratch_proxy_gui}/embed.html#${this.$route.params.id}`,this.project.remix.parent&&(this.parentProject=(await j(this.project.remix.parent)).data),this.project.remix.root&&this.project.remix.root!=this.project.remix.parent&&(this.rootProject=(await j(this.project.remix.root)).data)}catch(_){console.log(_)}}}},A=["src"],E={class:"px-4 d-flex ga-2 mb-2"},M={class:"px-4"};function Q(_,o,W,X,e,Y){const w=V,C=N("v-card-list"),T=B,S=k;return a(),m(R,null,{default:r(()=>[t(D,null,{default:r(()=>[t(y,{cols:"8",lg:"8",md:"8",sm:"8",xl:"8",xs:"8"},{default:r(()=>[t(c,{border:"",hover:"",style:{"aspect-ratio":"4 / 3"}},{default:r(()=>[i("iframe",{src:e.embedurl,frameborder:"0",scrolling:"no",style:{width:"100%",height:"100%"}},null,8,A)]),_:1}),o[2]||(o[2]=i("br",null,null,-1)),o[3]||(o[3]=i("br",null,null,-1)),t(c,{border:"",hover:""},{default:r(()=>[t(p,null,{default:r(()=>[...o[0]||(o[0]=[l("操作说明",-1)])]),_:1}),t(b,null,{default:r(()=>[l(s(e.project.instructions),1)]),_:1})]),_:1}),o[4]||(o[4]=i("br",null,null,-1)),t(c,{border:"",hover:""},{default:r(()=>[t(p,null,{default:r(()=>[...o[1]||(o[1]=[l("备注与鸣谢",-1)])]),_:1}),t(b,null,{default:r(()=>[l(s(e.project.description),1)]),_:1})]),_:1}),o[5]||(o[5]=i("br",null,null,-1)),o[6]||(o[6]=i("br",null,null,-1)),t(w,{showUserInfo:!0,url:`/projects/${e.project.id}/remixes?`,autoload:"false",subtitle:"对此项目的fork",title:"forks"},null,8,["url"])]),_:1}),t(y,{cols:"4"},{default:r(()=>[t(c,{border:"",hover:""},{default:r(()=>[t(C,null,{default:r(()=>[t(n,null,{default:r(()=>[t(p,null,{default:r(()=>[l(s(e.project.title),1)]),_:1}),t(d,null,{default:r(()=>[l(s(e.project.id),1)]),_:1})]),_:1}),t(n),t(n,null,{default:r(()=>[t(u,{pill:""},{default:r(()=>[t(v,{start:""},{default:r(()=>[t(f,{src:`${this.scratch_proxy}/avatars/${e.project.author.id}`},null,8,["src"])]),_:1}),l(" "+s(e.project.author.username||"加载中"),1)]),_:1})]),_:1}),t(n,null,{default:r(()=>[t(u,{pill:"","prepend-icon":"mdi-eye"},{default:r(()=>[l(s(e.project.stats.views)+"浏览 ",1)]),_:1}),t(u,{pill:"","prepend-icon":"mdi-heart"},{default:r(()=>[l(s(e.project.stats.loves)+"赞 ",1)]),_:1}),t(u,{pill:"","prepend-icon":"mdi-star"},{default:r(()=>[l(s(e.project.stats.favorites)+"star ",1)]),_:1}),t(u,{pill:"","prepend-icon":"mdi-source-fork"},{default:r(()=>[l(s(e.project.stats.remixes)+"fork ",1)]),_:1}),t(u,{pill:"","prepend-icon":"mdi-clock"},{default:r(()=>[l(s(e.project.history.created)+"创建 ",1)]),_:1}),t(u,{pill:"","prepend-icon":"mdi-clock"},{default:r(()=>[l(s(e.project.history.modified)+"更新 ",1)]),_:1}),t(u,{pill:"","prepend-icon":"mdi-clock"},{default:r(()=>[l(s(e.project.history.shared)+"公开 ",1)]),_:1})]),_:1}),e.project.project_tags&&e.project.project_tags.length>0?(a(),m(n,{key:0},{default:r(()=>[(a(!0),I(z,null,F(e.project.project_tags,x=>(a(),m(u,{key:x.id,class:"ma-1",pill:"","prepend-icon":"mdi-tag"},{default:r(()=>[l(s(x.name),1)]),_:2},1024))),128))]),_:1})):h("",!0)]),_:1}),i("div",E,[t(L,{href:e.scratch_proxy_gui+"/editor.html#"+e.project.id,target:"_blank",variant:"text"},{default:r(()=>[...o[7]||(o[7]=[l("打开创造页 ",-1)])]),_:1},8,["href"])]),i("div",M,[t(c,{to:"/app/proxy/user/"+e.project.author.username,hover:"",variant:"tonal"},{default:r(()=>[t(n,null,{prepend:r(()=>[t(v,null,{default:r(()=>[t(f,{src:`${this.scratch_proxy}/avatars/${e.project.author.id}`},null,8,["src"])]),_:1})]),default:r(()=>[t(p,{class:"text-white"},{default:r(()=>[l(s(e.project.author.username),1)]),_:1}),t(d,{class:"text-white"},{default:r(()=>[l(s(e.project.author.id),1)]),_:1})]),_:1})]),_:1},8,["to"])]),o[8]||(o[8]=i("br",null,null,-1))]),_:1}),o[11]||(o[11]=i("br",null,null,-1)),e.parentProject?(a(),m(c,{key:0,to:"/app/proxy/"+e.parentProject.id,border:"",hover:""},{default:r(()=>[t(n,null,{default:r(()=>[t(p,null,{default:r(()=>[l(s(e.parentProject.id==e.project.remix.root?"根项目":"父项目为"),1)]),_:1}),t(d,null,{default:r(()=>[l(s(e.parentProject.id==e.project.remix.root?"最初的项目":"父项目"),1)]),_:1})]),_:1}),t(f,{src:`${e.scratch_proxy}/thumbnails/${e.parentProject.id}`,cover:"","lazy-src":g},null,8,["src"]),t(n,null,{default:r(()=>[t(p,null,{default:r(()=>[l(s(e.parentProject.title),1)]),_:1}),t(d,null,{default:r(()=>[l(s(e.parentProject.description),1)]),_:1})]),_:1})]),_:1},8,["to"])):h("",!0),o[12]||(o[12]=i("br",null,null,-1)),e.rootProject?(a(),m(c,{key:1,to:"/app/proxy/"+e.rootProject.id,border:"",hover:""},{default:r(()=>[t(n,null,{default:r(()=>[t(p,null,{default:r(()=>[...o[9]||(o[9]=[l("根项目为",-1)])]),_:1}),t(d,null,{default:r(()=>[...o[10]||(o[10]=[l("最初的项目",-1)])]),_:1})]),_:1}),t(f,{src:`${e.scratch_proxy}/thumbnails/${e.rootProject.id}`,cover:"","lazy-src":g},null,8,["src"]),t(p,null,{default:r(()=>[l(s(e.rootProject.title),1)]),_:1}),t(d,null,{default:r(()=>[l(s(e.rootProject.description),1)]),_:1})]),_:1},8,["to"])):h("",!0),o[13]||(o[13]=i("br",null,null,-1)),t(T,{url:"https://scratch.mit.edu/projects/"+e.project.id},null,8,["url"])]),_:1})]),_:1}),t(S,{url:"scratchmiteduproject-"+e.project.id,name:"Scratch官网项目"},null,8,["url"])]),_:1})}const et=Z(U,[["render",Q]]);export{et as default};
