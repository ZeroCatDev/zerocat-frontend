import{_ as U,aa as F,c as A,o as p,f as v,e as o,Y as M,a5 as Ce,N as u,i as x,L as g,O as q,S as X,X as O,$ as de,W as Q,a9 as ee,a3 as G,aD as me,az as fe,R as y,D as ze,n as _e,Q as J,aA as P,aC as te,aE as ne,ac as We,F as he,U as ge,ad as Ee,aM as Ue,aO as Ye,j as Fe,Z as Ie,ag as Ae,ah as qe,V as Re,q as S,T as je,M as Le}from"./index-CkBs92ue.js";import{V as Ne}from"./VDataTable-Ct-hSZSO.js";import{V as $}from"./VSpacer-BOIfbRQc.js";import{_ as be}from"./OAuthManager-CYnTfa-x.js";import{_ as ye}from"./EmailManager-DvqBSAGx.js";import{C as Xe}from"./compressor.esm-C46f8uP2.js";import{u as Be,a as He,b as Qe,c as Ge,g as Je}from"./accountService-BozyFXBX.js";import{V as Ke}from"./VFileInput-DOMTF-Ce.js";import{V as Ze}from"./VSheet-Csk8PsVK.js";import{V as $e}from"./VSelect-Bx8t38VH.js";import{V as et}from"./VTextarea-ZWOfSWN3.js";import{a as tt,_ as nt}from"./UserFollowers-B06bMh86.js";import{_ as at}from"./UserBlocked-BUuuKe-D.js";import"./VCheckboxBtn-bwCWHVw4.js";import"./VSelectionControl-ghgcPwjv.js";import"./VTable-BjCyRAV9.js";import"./filter-BrUE0AxY.js";import"./verifyEmail-Do4Xm_1o.js";import"./oauth_providers-BTwCArWd.js";const we=6048e5,rt=864e5,L=43200,ae=1440,re=Symbol.for("constructDateFrom");function z(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&re in t?t[re](e):t instanceof Date?new t.constructor(e):new Date(e)}function w(t,e){return z(e||t,t)}let st={};function R(){return st}function E(t,e){var c,l,f,_;const n=R(),r=(e==null?void 0:e.weekStartsOn)??((l=(c=e==null?void 0:e.locale)==null?void 0:c.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((_=(f=n.locale)==null?void 0:f.options)==null?void 0:_.weekStartsOn)??0,a=w(t,e==null?void 0:e.in),i=a.getDay(),s=(i<r?7:0)+i-r;return a.setDate(a.getDate()-s),a.setHours(0,0,0,0),a}function B(t,e){return E(t,{...e,weekStartsOn:1})}function pe(t,e){const n=w(t,e==null?void 0:e.in),r=n.getFullYear(),a=z(n,0);a.setFullYear(r+1,0,4),a.setHours(0,0,0,0);const i=B(a),s=z(n,0);s.setFullYear(r,0,4),s.setHours(0,0,0,0);const c=B(s);return n.getTime()>=i.getTime()?r+1:n.getTime()>=c.getTime()?r:r-1}function H(t){const e=w(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function j(t,...e){const n=z.bind(null,t||e.find(r=>typeof r=="object"));return e.map(n)}function se(t,e){const n=w(t,e==null?void 0:e.in);return n.setHours(0,0,0,0),n}function ot(t,e,n){const[r,a]=j(n==null?void 0:n.in,t,e),i=se(r),s=se(a),c=+i-H(i),l=+s-H(s);return Math.round((c-l)/rt)}function it(t,e){const n=pe(t,e),r=z(t,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),B(r)}function N(t,e){const n=+w(t)-+w(e);return n<0?-1:n>0?1:n}function ut(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function ct(t){return!(!ut(t)&&typeof t!="number"||isNaN(+w(t)))}function lt(t,e,n){const[r,a]=j(n==null?void 0:n.in,t,e),i=r.getFullYear()-a.getFullYear(),s=r.getMonth()-a.getMonth();return i*12+s}function dt(t){return e=>{const r=(t?Math[t]:Math.trunc)(e);return r===0?0:r}}function mt(t,e){return+w(t)-+w(e)}function ft(t,e){const n=w(t,e==null?void 0:e.in);return n.setHours(23,59,59,999),n}function _t(t,e){const n=w(t,e==null?void 0:e.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function ht(t,e){const n=w(t,e==null?void 0:e.in);return+ft(n,e)==+_t(n,e)}function gt(t,e,n){const[r,a,i]=j(n==null?void 0:n.in,t,t,e),s=N(a,i),c=Math.abs(lt(a,i));if(c<1)return 0;a.getMonth()===1&&a.getDate()>27&&a.setDate(30),a.setMonth(a.getMonth()-s*c);let l=N(a,i)===-s;ht(r)&&c===1&&N(r,i)===1&&(l=!1);const f=s*(c-+l);return f===0?0:f}function bt(t,e,n){const r=mt(t,e)/1e3;return dt(n==null?void 0:n.roundingMethod)(r)}function yt(t,e){const n=w(t,e==null?void 0:e.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const wt={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},pt=(t,e,n)=>{let r;const a=wt[t];return typeof a=="string"?r=a:e===1?r=a.one:r=a.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function I(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const vt={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Dt={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},kt={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Pt={date:I({formats:vt,defaultWidth:"full"}),time:I({formats:Dt,defaultWidth:"full"}),dateTime:I({formats:kt,defaultWidth:"full"})},xt={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Mt=(t,e,n,r)=>xt[t];function T(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let a;if(r==="formatting"&&t.formattingValues){const s=t.defaultFormattingWidth||t.defaultWidth,c=n!=null&&n.width?String(n.width):s;a=t.formattingValues[c]||t.formattingValues[s]}else{const s=t.defaultWidth,c=n!=null&&n.width?String(n.width):t.defaultWidth;a=t.values[c]||t.values[s]}const i=t.argumentCallback?t.argumentCallback(e):e;return a[i]}}const Ot={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Tt={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Vt={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},St={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Ct={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},zt={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Wt=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Et={ordinalNumber:Wt,era:T({values:Ot,defaultWidth:"wide"}),quarter:T({values:Tt,defaultWidth:"wide",argumentCallback:t=>t-1}),month:T({values:Vt,defaultWidth:"wide"}),day:T({values:St,defaultWidth:"wide"}),dayPeriod:T({values:Ct,defaultWidth:"wide",formattingValues:zt,defaultFormattingWidth:"wide"})};function V(t){return(e,n={})=>{const r=n.width,a=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],i=e.match(a);if(!i)return null;const s=i[0],c=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(c)?Yt(c,k=>k.test(s)):Ut(c,k=>k.test(s));let f;f=t.valueCallback?t.valueCallback(l):l,f=n.valueCallback?n.valueCallback(f):f;const _=e.slice(s.length);return{value:f,rest:_}}}function Ut(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function Yt(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function ve(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const a=r[0],i=e.match(t.parsePattern);if(!i)return null;let s=t.valueCallback?t.valueCallback(i[0]):i[0];s=n.valueCallback?n.valueCallback(s):s;const c=e.slice(a.length);return{value:s,rest:c}}}const Ft=/^(\d+)(th|st|nd|rd)?/i,It=/\d+/i,At={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},qt={any:[/^b/i,/^(a|c)/i]},Rt={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},jt={any:[/1/i,/2/i,/3/i,/4/i]},Lt={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Nt={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Xt={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Bt={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Ht={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Qt={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Gt={ordinalNumber:ve({matchPattern:Ft,parsePattern:It,valueCallback:t=>parseInt(t,10)}),era:V({matchPatterns:At,defaultMatchWidth:"wide",parsePatterns:qt,defaultParseWidth:"any"}),quarter:V({matchPatterns:Rt,defaultMatchWidth:"wide",parsePatterns:jt,defaultParseWidth:"any",valueCallback:t=>t+1}),month:V({matchPatterns:Lt,defaultMatchWidth:"wide",parsePatterns:Nt,defaultParseWidth:"any"}),day:V({matchPatterns:Xt,defaultMatchWidth:"wide",parsePatterns:Bt,defaultParseWidth:"any"}),dayPeriod:V({matchPatterns:Ht,defaultMatchWidth:"any",parsePatterns:Qt,defaultParseWidth:"any"})},De={code:"en-US",formatDistance:pt,formatLong:Pt,formatRelative:Mt,localize:Et,match:Gt,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Jt(t,e){const n=w(t,e==null?void 0:e.in);return ot(n,yt(n))+1}function Kt(t,e){const n=w(t,e==null?void 0:e.in),r=+B(n)-+it(n);return Math.round(r/we)+1}function ke(t,e){var _,k,h,D;const n=w(t,e==null?void 0:e.in),r=n.getFullYear(),a=R(),i=(e==null?void 0:e.firstWeekContainsDate)??((k=(_=e==null?void 0:e.locale)==null?void 0:_.options)==null?void 0:k.firstWeekContainsDate)??a.firstWeekContainsDate??((D=(h=a.locale)==null?void 0:h.options)==null?void 0:D.firstWeekContainsDate)??1,s=z((e==null?void 0:e.in)||t,0);s.setFullYear(r+1,0,i),s.setHours(0,0,0,0);const c=E(s,e),l=z((e==null?void 0:e.in)||t,0);l.setFullYear(r,0,i),l.setHours(0,0,0,0);const f=E(l,e);return+n>=+c?r+1:+n>=+f?r:r-1}function Zt(t,e){var c,l,f,_;const n=R(),r=(e==null?void 0:e.firstWeekContainsDate)??((l=(c=e==null?void 0:e.locale)==null?void 0:c.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((_=(f=n.locale)==null?void 0:f.options)==null?void 0:_.firstWeekContainsDate)??1,a=ke(t,e),i=z((e==null?void 0:e.in)||t,0);return i.setFullYear(a,0,r),i.setHours(0,0,0,0),E(i,e)}function $t(t,e){const n=w(t,e==null?void 0:e.in),r=+E(n,e)-+Zt(n,e);return Math.round(r/we)+1}function m(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const C={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return m(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):m(n+1,2)},d(t,e){return m(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return m(t.getHours()%12||12,e.length)},H(t,e){return m(t.getHours(),e.length)},m(t,e){return m(t.getMinutes(),e.length)},s(t,e){return m(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),a=Math.trunc(r*Math.pow(10,n-3));return m(a,e.length)}},Y={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},oe={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),a=r>0?r:1-r;return n.ordinalNumber(a,{unit:"year"})}return C.y(t,e)},Y:function(t,e,n,r){const a=ke(t,r),i=a>0?a:1-a;if(e==="YY"){const s=i%100;return m(s,2)}return e==="Yo"?n.ordinalNumber(i,{unit:"year"}):m(i,e.length)},R:function(t,e){const n=pe(t);return m(n,e.length)},u:function(t,e){const n=t.getFullYear();return m(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return m(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return m(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return C.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return m(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const a=$t(t,r);return e==="wo"?n.ordinalNumber(a,{unit:"week"}):m(a,e.length)},I:function(t,e,n){const r=Kt(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):m(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):C.d(t,e)},D:function(t,e,n){const r=Jt(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):m(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const a=t.getDay(),i=(a-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return m(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const a=t.getDay(),i=(a-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return m(i,e.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),a=r===0?7:r;switch(e){case"i":return String(a);case"ii":return m(a,e.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const a=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let a;switch(r===12?a=Y.noon:r===0?a=Y.midnight:a=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let a;switch(r>=17?a=Y.evening:r>=12?a=Y.afternoon:r>=4?a=Y.morning:a=Y.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return C.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):C.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):m(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):m(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):C.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):C.s(t,e)},S:function(t,e){return C.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return ue(r);case"XXXX":case"XX":return W(r);case"XXXXX":case"XXX":default:return W(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return ue(r);case"xxxx":case"xx":return W(r);case"xxxxx":case"xxx":default:return W(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+ie(r,":");case"OOOO":default:return"GMT"+W(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+ie(r,":");case"zzzz":default:return"GMT"+W(r,":")}},t:function(t,e,n){const r=Math.trunc(+t/1e3);return m(r,e.length)},T:function(t,e,n){return m(+t,e.length)}};function ie(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),a=Math.trunc(r/60),i=r%60;return i===0?n+String(a):n+String(a)+e+m(i,2)}function ue(t,e){return t%60===0?(t>0?"-":"+")+m(Math.abs(t)/60,2):W(t,e)}function W(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),a=m(Math.trunc(r/60),2),i=m(r%60,2);return n+a+e+i}const ce=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},Pe=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},en=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],a=n[2];if(!a)return ce(t,e);let i;switch(r){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",ce(r,e)).replace("{{time}}",Pe(a,e))},tn={p:Pe,P:en},nn=/^D+$/,an=/^Y+$/,rn=["D","DD","YY","YYYY"];function sn(t){return nn.test(t)}function on(t){return an.test(t)}function un(t,e,n){const r=cn(t,e,n);if(console.warn(r),rn.includes(t))throw new RangeError(r)}function cn(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const ln=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,dn=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,mn=/^'([^]*?)'?$/,fn=/''/g,_n=/[a-zA-Z]/;function hn(t,e,n){var _,k,h,D;const r=R(),a=r.locale??De,i=r.firstWeekContainsDate??((k=(_=r.locale)==null?void 0:_.options)==null?void 0:k.firstWeekContainsDate)??1,s=r.weekStartsOn??((D=(h=r.locale)==null?void 0:h.options)==null?void 0:D.weekStartsOn)??0,c=w(t,n==null?void 0:n.in);if(!ct(c))throw new RangeError("Invalid time value");let l=e.match(dn).map(d=>{const b=d[0];if(b==="p"||b==="P"){const K=tn[b];return K(d,a.formatLong)}return d}).join("").match(ln).map(d=>{if(d==="''")return{isToken:!1,value:"'"};const b=d[0];if(b==="'")return{isToken:!1,value:gn(d)};if(oe[b])return{isToken:!0,value:d};if(b.match(_n))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:d}});a.localize.preprocessor&&(l=a.localize.preprocessor(c,l));const f={firstWeekContainsDate:i,weekStartsOn:s,locale:a};return l.map(d=>{if(!d.isToken)return d.value;const b=d.value;(on(b)||sn(b))&&un(b,e,String(t));const K=oe[b[0]];return K(c,b,a.localize,f)}).join("")}function gn(t){const e=t.match(mn);return e?e[1].replace(fn,"'"):t}function bn(t,e,n){const r=R(),a=(n==null?void 0:n.locale)??r.locale??De,i=2520,s=N(t,e);if(isNaN(s))throw new RangeError("Invalid time value");const c=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:s}),[l,f]=j(n==null?void 0:n.in,...s>0?[e,t]:[t,e]),_=bt(f,l),k=(H(f)-H(l))/1e3,h=Math.round((_-k)/60);let D;if(h<2)return n!=null&&n.includeSeconds?_<5?a.formatDistance("lessThanXSeconds",5,c):_<10?a.formatDistance("lessThanXSeconds",10,c):_<20?a.formatDistance("lessThanXSeconds",20,c):_<40?a.formatDistance("halfAMinute",0,c):_<60?a.formatDistance("lessThanXMinutes",1,c):a.formatDistance("xMinutes",1,c):h===0?a.formatDistance("lessThanXMinutes",1,c):a.formatDistance("xMinutes",h,c);if(h<45)return a.formatDistance("xMinutes",h,c);if(h<90)return a.formatDistance("aboutXHours",1,c);if(h<ae){const d=Math.round(h/60);return a.formatDistance("aboutXHours",d,c)}else{if(h<i)return a.formatDistance("xDays",1,c);if(h<L){const d=Math.round(h/ae);return a.formatDistance("xDays",d,c)}else if(h<L*2)return D=Math.round(h/L),a.formatDistance("aboutXMonths",D,c)}if(D=gt(f,l),D<12){const d=Math.round(h/L);return a.formatDistance("xMonths",d,c)}else{const d=D%12,b=Math.trunc(D/12);return d<3?a.formatDistance("aboutXYears",b,c):d<9?a.formatDistance("overXYears",b,c):a.formatDistance("almostXYears",b+1,c)}}function yn(t,e,n){const[r,a]=j(n==null?void 0:n.in,t,e);return+E(r,n)==+E(a,n)}const wn={lessThanXSeconds:{one:"不到 1 秒",other:"不到 {{count}} 秒"},xSeconds:{one:"1 秒",other:"{{count}} 秒"},halfAMinute:"半分钟",lessThanXMinutes:{one:"不到 1 分钟",other:"不到 {{count}} 分钟"},xMinutes:{one:"1 分钟",other:"{{count}} 分钟"},xHours:{one:"1 小时",other:"{{count}} 小时"},aboutXHours:{one:"大约 1 小时",other:"大约 {{count}} 小时"},xDays:{one:"1 天",other:"{{count}} 天"},aboutXWeeks:{one:"大约 1 个星期",other:"大约 {{count}} 个星期"},xWeeks:{one:"1 个星期",other:"{{count}} 个星期"},aboutXMonths:{one:"大约 1 个月",other:"大约 {{count}} 个月"},xMonths:{one:"1 个月",other:"{{count}} 个月"},aboutXYears:{one:"大约 1 年",other:"大约 {{count}} 年"},xYears:{one:"1 年",other:"{{count}} 年"},overXYears:{one:"超过 1 年",other:"超过 {{count}} 年"},almostXYears:{one:"将近 1 年",other:"将近 {{count}} 年"}},pn=(t,e,n)=>{let r;const a=wn[t];return typeof a=="string"?r=a:e===1?r=a.one:r=a.other.replace("{{count}}",String(e)),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?r+"内":r+"前":r},vn={full:"y'年'M'月'd'日' EEEE",long:"y'年'M'月'd'日'",medium:"yyyy-MM-dd",short:"yy-MM-dd"},Dn={full:"zzzz a h:mm:ss",long:"z a h:mm:ss",medium:"a h:mm:ss",short:"a h:mm"},kn={full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},Pn={date:I({formats:vn,defaultWidth:"full"}),time:I({formats:Dn,defaultWidth:"full"}),dateTime:I({formats:kn,defaultWidth:"full"})};function le(t,e,n){const r="eeee p";return yn(t,e,n)?r:t.getTime()>e.getTime()?"'下个'"+r:"'上个'"+r}const xn={lastWeek:le,yesterday:"'昨天' p",today:"'今天' p",tomorrow:"'明天' p",nextWeek:le,other:"PP p"},Mn=(t,e,n,r)=>{const a=xn[t];return typeof a=="function"?a(e,n,r):a},On={narrow:["前","公元"],abbreviated:["前","公元"],wide:["公元前","公元"]},Tn={narrow:["1","2","3","4"],abbreviated:["第一季","第二季","第三季","第四季"],wide:["第一季度","第二季度","第三季度","第四季度"]},Vn={narrow:["一","二","三","四","五","六","七","八","九","十","十一","十二"],abbreviated:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],wide:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]},Sn={narrow:["日","一","二","三","四","五","六"],short:["日","一","二","三","四","五","六"],abbreviated:["周日","周一","周二","周三","周四","周五","周六"],wide:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"]},Cn={narrow:{am:"上",pm:"下",midnight:"凌晨",noon:"午",morning:"早",afternoon:"下午",evening:"晚",night:"夜"},abbreviated:{am:"上午",pm:"下午",midnight:"凌晨",noon:"中午",morning:"早晨",afternoon:"中午",evening:"晚上",night:"夜间"},wide:{am:"上午",pm:"下午",midnight:"凌晨",noon:"中午",morning:"早晨",afternoon:"中午",evening:"晚上",night:"夜间"}},zn={narrow:{am:"上",pm:"下",midnight:"凌晨",noon:"午",morning:"早",afternoon:"下午",evening:"晚",night:"夜"},abbreviated:{am:"上午",pm:"下午",midnight:"凌晨",noon:"中午",morning:"早晨",afternoon:"中午",evening:"晚上",night:"夜间"},wide:{am:"上午",pm:"下午",midnight:"凌晨",noon:"中午",morning:"早晨",afternoon:"中午",evening:"晚上",night:"夜间"}},Wn=(t,e)=>{const n=Number(t);switch(e==null?void 0:e.unit){case"date":return n.toString()+"日";case"hour":return n.toString()+"时";case"minute":return n.toString()+"分";case"second":return n.toString()+"秒";default:return"第 "+n.toString()}},En={ordinalNumber:Wn,era:T({values:On,defaultWidth:"wide"}),quarter:T({values:Tn,defaultWidth:"wide",argumentCallback:t=>t-1}),month:T({values:Vn,defaultWidth:"wide"}),day:T({values:Sn,defaultWidth:"wide"}),dayPeriod:T({values:Cn,defaultWidth:"wide",formattingValues:zn,defaultFormattingWidth:"wide"})},Un=/^(第\s*)?\d+(日|时|分|秒)?/i,Yn=/\d+/i,Fn={narrow:/^(前)/i,abbreviated:/^(前)/i,wide:/^(公元前|公元)/i},In={any:[/^(前)/i,/^(公元)/i]},An={narrow:/^[1234]/i,abbreviated:/^第[一二三四]刻/i,wide:/^第[一二三四]刻钟/i},qn={any:[/(1|一)/i,/(2|二)/i,/(3|三)/i,/(4|四)/i]},Rn={narrow:/^(一|二|三|四|五|六|七|八|九|十[二一])/i,abbreviated:/^(一|二|三|四|五|六|七|八|九|十[二一]|\d|1[12])月/i,wide:/^(一|二|三|四|五|六|七|八|九|十[二一])月/i},jn={narrow:[/^一/i,/^二/i,/^三/i,/^四/i,/^五/i,/^六/i,/^七/i,/^八/i,/^九/i,/^十(?!(一|二))/i,/^十一/i,/^十二/i],any:[/^一|1/i,/^二|2/i,/^三|3/i,/^四|4/i,/^五|5/i,/^六|6/i,/^七|7/i,/^八|8/i,/^九|9/i,/^十(?!(一|二))|10/i,/^十一|11/i,/^十二|12/i]},Ln={narrow:/^[一二三四五六日]/i,short:/^[一二三四五六日]/i,abbreviated:/^周[一二三四五六日]/i,wide:/^星期[一二三四五六日]/i},Nn={any:[/日/i,/一/i,/二/i,/三/i,/四/i,/五/i,/六/i]},Xn={any:/^(上午?|下午?|午夜|[中正]午|早上?|下午|晚上?|凌晨|)/i},Bn={any:{am:/^上午?/i,pm:/^下午?/i,midnight:/^午夜/i,noon:/^[中正]午/i,morning:/^早上/i,afternoon:/^下午/i,evening:/^晚上?/i,night:/^凌晨/i}},Hn={ordinalNumber:ve({matchPattern:Un,parsePattern:Yn,valueCallback:t=>parseInt(t,10)}),era:V({matchPatterns:Fn,defaultMatchWidth:"wide",parsePatterns:In,defaultParseWidth:"any"}),quarter:V({matchPatterns:An,defaultMatchWidth:"wide",parsePatterns:qn,defaultParseWidth:"any",valueCallback:t=>t+1}),month:V({matchPatterns:Rn,defaultMatchWidth:"wide",parsePatterns:jn,defaultParseWidth:"any"}),day:V({matchPatterns:Ln,defaultMatchWidth:"wide",parsePatterns:Nn,defaultParseWidth:"any"}),dayPeriod:V({matchPatterns:Xn,defaultMatchWidth:"any",parsePatterns:Bn,defaultParseWidth:"any"})},Qn={code:"zh-CN",formatDistance:pn,formatLong:Pn,formatRelative:Mn,localize:En,match:Hn,options:{weekStartsOn:1,firstWeekContainsDate:4}},Gn={name:"SecurityManager",data(){return{activeTokens:[],isLoadingTokens:!1,isLoggingOutAll:!1,loadingTokenId:null,isPerformingAction:!1,showConfirmDialog:!1,confirmDialogTitle:"",confirmDialogText:"",confirmedAction:null,tokenHeaders:[{title:"创建时间",key:"created_at",sortable:!0},{title:"设备信息",key:"device_info",sortable:!1},{title:"IP地址",key:"ip_address",sortable:!0},{title:"IP属地",key:"ip_location",sortable:!0},{title:"操作",key:"actions",sortable:!1}]}},mounted(){this.loadData()},methods:{async loadData(){await this.loadActiveTokens()},async loadActiveTokens(){this.isLoadingTokens=!0;try{this.activeTokens=await F.getActiveTokens()}catch(t){console.error("获取会话列表失败:",t),this.$toast.add({severity:"error",summary:"错误",detail:"获取会话列表失败",life:3e3})}finally{this.isLoadingTokens=!1}},getActivityColor(t){return t?t<5?"info":t<20?"primary":t<50?"success":"purple":"grey"},formatIpLocation(t){if(!t)return"-";let e=t;if(typeof t=="string")try{e=JSON.parse(t)}catch{return t}let n="";return e.country&&(n+=e.country),e.region&&(n+=" "+e.region),e.city&&e.city!==e.region&&(n+=" "+e.city),e.isp&&(n+=` (${e.isp})`),n||"-"},formatDate(t){if(!t)return"-";const e=new Date(t),r=bn(e,new Date,{addSuffix:!0,locale:Qn}),a=hn(e,"yyyy-MM-dd HH:mm:ss");return`${r} (${a})`},async handleRevokeToken(t){this.loadingTokenId=t,this.isPerformingAction=!0;try{await F.revokeToken(t)?(this.$toast.add({severity:"success",summary:"成功",detail:"会话已成功结束",life:3e3}),await this.loadActiveTokens()):this.$toast.add({severity:"error",summary:"错误",detail:"会话结束失败",life:3e3})}catch(e){console.error("会话结束失败:",e),this.$toast.add({severity:"error",summary:"错误",detail:"会话结束失败",life:3e3})}finally{this.loadingTokenId=null,this.isPerformingAction=!1}},confirmLogoutAll(){this.confirmDialogTitle="确认退出所有会话",this.confirmDialogText="这将使所有会话立即失效，包括当前会话。您需要重新登录才能继续使用。确定要执行此操作吗？",this.confirmedAction=this.logoutAllSessions,this.showConfirmDialog=!0},async logoutAllSessions(){this.isLoggingOutAll=!0;try{await F.logoutAllDevices()?(this.$toast.add({severity:"success",summary:"成功",detail:"已成功退出所有会话",life:3e3}),this.$router.push("/app/account/login")):this.$toast.add({severity:"error",summary:"错误",detail:"退出所有会话失败",life:3e3})}catch(t){console.error("退出所有会话失败:",t),this.$toast.add({severity:"error",summary:"错误",detail:"退出所有会话失败",life:3e3})}finally{this.isLoggingOutAll=!1}},executeConfirmedAction(){typeof this.confirmedAction=="function"&&this.confirmedAction(),this.showConfirmDialog=!1}}},Jn={class:"mb-6"},Kn={class:"d-flex align-center"},Zn={key:0},$n={key:1},ea={class:"d-flex gap-4 mt-6"};function ta(t,e,n,r,a,i){return p(),A("div",null,[v("div",Jn,[e[4]||(e[4]=v("h4",{class:"text-h6 mb-3"},"登录设备",-1)),a.activeTokens.length===0&&!a.isLoadingTokens?(p(),M(Ce,{key:0,type:"info",text:"没有活跃的会话",class:"mb-3"})):(p(),M(Ne,{key:1,headers:a.tokenHeaders,items:a.activeTokens,loading:a.isLoadingTokens,"loading-text":"加载会话列表...","no-data-text":"没有找到活跃会话",class:"elevation-1 rounded-lg"},{"item.created_at":u(({item:s})=>[g(O(i.formatDate(s.created_at)),1)]),"item.device_info":u(({item:s})=>{var c,l;return[v("div",Kn,[g(O(((c=s.device_info)==null?void 0:c.os)||"未知")+" ("+O(((l=s.device_info)==null?void 0:l.browser)||"未知")+") ",1),s.is_current?(p(),M(X,{key:0,color:"success",size:"small",text:"当前"})):de("",!0)])]}),"item.ip_address":u(({item:s})=>[g(O(s.ip_address),1)]),"item.ip_location":u(({item:s})=>[s.ip_location?(p(),A("span",Zn,O(i.formatIpLocation(s.ip_location)),1)):(p(),A("span",$n,"-"))]),"item.activity_count":u(({item:s})=>[o(X,{color:i.getActivityColor(s.activity_count),size:"small",text:t.getActivityText(s.activity_count)},null,8,["color","text"])]),"item.actions":u(({item:s})=>[o(x,{onClick:c=>i.handleRevokeToken(s.id),size:"small",color:"error",variant:"text",loading:a.loadingTokenId===s.id,disabled:a.isLoadingTokens||a.isPerformingAction},{default:u(()=>[o(q,null,{default:u(()=>e[2]||(e[2]=[g("mdi-logout")])),_:1,__:[2]}),e[3]||(e[3]=g(" 结束会话 "))]),_:2,__:[3]},1032,["onClick","loading","disabled"])]),_:1},8,["headers","items","loading"]))]),v("div",ea,[o(x,{color:"error","prepend-icon":"mdi-logout-variant",onClick:i.confirmLogoutAll,loading:a.isLoggingOutAll,disabled:a.isPerformingAction||a.isLoadingTokens},{default:u(()=>e[5]||(e[5]=[g(" 退出所有会话 ")])),_:1,__:[5]},8,["onClick","loading","disabled"])]),o(fe,{modelValue:a.showConfirmDialog,"onUpdate:modelValue":e[1]||(e[1]=s=>a.showConfirmDialog=s),"max-width":"500"},{default:u(()=>[o(Q,null,{default:u(()=>[o(ee,{class:"text-h5"},{default:u(()=>[g(O(a.confirmDialogTitle),1)]),_:1}),o(G,null,{default:u(()=>[g(O(a.confirmDialogText),1)]),_:1}),o(me,null,{default:u(()=>[o($),o(x,{color:"primary",variant:"text",onClick:e[0]||(e[0]=s=>a.showConfirmDialog=!1)},{default:u(()=>e[6]||(e[6]=[g("取消")])),_:1,__:[6]}),o(x,{color:"error",variant:"flat",onClick:i.executeConfirmedAction},{default:u(()=>e[7]||(e[7]=[g("确认")])),_:1,__:[7]},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}const xe=U(Gn,[["render",ta]]),na={name:"AvatarEditor",props:{userData:{type:Object,required:!0},s3BucketUrl:{type:String,required:!0}},data(){return{loading:!1,avatarFile:null,previewImage:null}},methods:{onFileChange(t){const e=t.target.files?t.target.files[0]:null;e instanceof File&&e.type.startsWith("image/")?new Xe(e,{quality:.8,maxWidth:500,maxHeight:500,success:n=>{this.previewImage=URL.createObjectURL(n),this.avatarFile=n},error:n=>{console.error("图片压缩出错：",n.message),this.$emit("error",{message:"图片压缩出错："+n.message})}}):e&&this.$emit("error",{message:"请选择有效的图片文件"})},async uploadAvatar(){if(this.avatarFile){this.loading=!0;try{const t=new FormData;t.append("zcfile",this.avatarFile);const e=await Be("",t);this.$emit("avatar-updated",e),this.avatarFile=null}catch(t){this.$emit("error",t)}finally{this.loading=!1}}}}},aa={class:"d-flex align-center justify-center fill-height"};function ra(t,e,n,r,a,i){return p(),M(J,null,{default:u(()=>[o(y,{cols:"12",md:"6"},{default:u(()=>[o(Ke,{label:"上传头像",accept:"image/*",onChange:i.onFileChange,placeholder:"选择图片上传","prepend-icon":"mdi-camera",variant:"outlined",density:"comfortable","show-size":"",rules:[s=>!s||!s.length||s[0].size<2e6||"头像大小不能超过2MB"]},null,8,["onChange","rules"]),e[0]||(e[0]=v("div",{class:"text-caption text-medium-emphasis"},"图片将被自动压缩",-1))]),_:1,__:[0]}),o(y,{cols:"12",md:"6",class:"d-flex align-center justify-center"},{default:u(()=>[o(Ze,{class:ze(["rounded-lg overflow-hidden","elevation-2"]),width:"150",height:"150"},{default:u(()=>[o(_e,{src:a.previewImage||n.s3BucketUrl+"/user/"+n.userData.avatar,height:"150",width:"150",cover:"",class:"bg-grey-lighten-3"},{placeholder:u(()=>[v("div",aa,[o(q,{icon:"mdi-image",size:"64",color:"grey-darken-1"})])]),_:1},8,["src"])]),_:1})]),_:1}),o(y,{cols:"12"},{default:u(()=>[o(x,{onClick:i.uploadAvatar,disabled:!a.avatarFile,color:"primary",size:"large","prepend-icon":"mdi-cloud-upload",class:"px-6",loading:a.loading},{default:u(()=>e[1]||(e[1]=[g(" 上传头像 ")])),_:1,__:[1]},8,["onClick","disabled","loading"])]),_:1})]),_:1})}const Me=U(na,[["render",ra]]),sa={name:"PasswordEditor",data(){return{loading:!1,valid:!1,oldPassword:"",newPassword:"",confirmPassword:"",passwordRules:[t=>!!t||"请输入新密码",t=>/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[$@$!%*?&\.])[A-Za-z\d$@$!%*?&\.]{8,}/.test(t)||"密码必须由数字、大小写字母和特殊字符组成，且长度至少为8位"]}},methods:{async changePassword(){if(this.valid){this.loading=!0;try{const t=await He({oldpw:this.oldPassword,newpw:this.newPassword});this.$emit("password-updated",t),this.oldPassword="",this.newPassword="",this.confirmPassword=""}catch(t){this.$emit("error",t)}finally{this.loading=!1}}}}};function oa(t,e,n,r,a,i){return p(),M(ne,{modelValue:a.valid,"onUpdate:modelValue":e[3]||(e[3]=s=>a.valid=s),onSubmit:te(i.changePassword,["prevent"])},{default:u(()=>[o(J,null,{default:u(()=>[o(y,{cols:"12",md:"8"},{default:u(()=>[o(P,{modelValue:a.oldPassword,"onUpdate:modelValue":e[0]||(e[0]=s=>a.oldPassword=s),label:"当前密码",variant:"outlined",density:"comfortable",type:"password",rules:[s=>!!s||"请输入当前密码"],required:""},null,8,["modelValue","rules"])]),_:1}),o(y,{cols:"12",md:"8"},{default:u(()=>[o(P,{modelValue:a.newPassword,"onUpdate:modelValue":e[1]||(e[1]=s=>a.newPassword=s),rules:a.passwordRules,label:"新密码",variant:"outlined",density:"comfortable",type:"password",required:""},null,8,["modelValue","rules"]),e[4]||(e[4]=v("div",{class:"text-caption text-medium-emphasis"}," 密码必须由数字、大小写字母和特殊字符组成，且长度至少为8位 ",-1))]),_:1,__:[4]}),o(y,{cols:"12",md:"8"},{default:u(()=>[o(P,{modelValue:a.confirmPassword,"onUpdate:modelValue":e[2]||(e[2]=s=>a.confirmPassword=s),rules:[s=>!!s||"请确认新密码",s=>s===a.newPassword||"两次输入的密码不一致"],label:"确认新密码",variant:"outlined",density:"comfortable",type:"password",required:""},null,8,["modelValue","rules"])]),_:1}),o(y,{cols:"12"},{default:u(()=>[o(x,{onClick:i.changePassword,disabled:!a.valid,color:"primary",size:"large","prepend-icon":"mdi-lock-reset",class:"px-6",loading:a.loading},{default:u(()=>e[5]||(e[5]=[g(" 更新密码 ")])),_:1,__:[5]},8,["onClick","disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue","onSubmit"])}const Oe=U(sa,[["render",oa]]),ia={name:"UsernameEditor",props:{userData:{type:Object,required:!0}},data(){return{loading:!1,valid:!1,username:this.userData.username||"",usernameRules:[t=>!!t||"用户名是必填项",t=>t&&t.length<=10||"用户名不能超过10个字符",t=>/^[a-z]+$/.test(t)||"用户名只能包含小写字母"]}},watch:{userData:{handler(t){this.username=t.username||""},immediate:!0}},methods:{async changeUsername(){if(this.valid){this.loading=!0;try{const t=await Qe({username:this.username});this.$emit("username-updated",t)}catch(t){this.$emit("error",t)}finally{this.loading=!1}}}}};function ua(t,e,n,r,a,i){return p(),M(ne,{modelValue:a.valid,"onUpdate:modelValue":e[1]||(e[1]=s=>a.valid=s),onSubmit:te(i.changeUsername,["prevent"])},{default:u(()=>[o(J,null,{default:u(()=>[o(y,{cols:"12",md:"8"},{default:u(()=>[o(P,{modelValue:a.username,"onUpdate:modelValue":e[0]||(e[0]=s=>a.username=s),counter:10,rules:a.usernameRules,label:"用户名",variant:"outlined",density:"comfortable",required:""},null,8,["modelValue","rules"]),e[2]||(e[2]=v("div",{class:"text-caption text-medium-emphasis"},"用户名只能包含小写字母",-1))]),_:1,__:[2]}),o(y,{cols:"12"},{default:u(()=>[o(x,{onClick:i.changeUsername,disabled:!a.valid,color:"primary",size:"large","prepend-icon":"mdi-check",class:"px-6",loading:a.loading},{default:u(()=>e[3]||(e[3]=[g(" 保存用户名 ")])),_:1,__:[3]},8,["onClick","disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue","onSubmit"])}const Te=U(ia,[["render",ua]]),ca="阿拉伯联合酋长国",la="阿根廷",da="奥地利",ma="澳大利亚 (au_act)",fa="澳大利亚 (au_nsw)",_a="澳大利亚 (au_nt)",ha="澳大利亚 (au_qld_brisbane)",ga="澳大利亚 (au_qld_cairns)",ba="澳大利亚 (au_qld)",ya="澳大利亚 (au_sa)",wa="澳大利亚 (au_tas_north)",pa="澳大利亚 (au_tas_south)",va="澳大利亚 (au_tas)",Da="澳大利亚 (au_vic_melbourne)",ka="澳大利亚 (au_vic)",Pa="澳大利亚 (au_wa)",xa="澳大利亚",Ma="比利时 (be_fr)",Oa="比利时 (be_nl)",Ta="保加利亚 (bg_bg)",Va="保加利亚 (bg_en)",Sa="巴西",Ca="巴西 (br_sp)",za="巴西 (br_spcapital)",Wa="加拿大 (ca_ab)",Ea="加拿大 (ca_bc)",Ua="加拿大 (ca_mb)",Ya="加拿大 (ca_nb)",Fa="加拿大 (ca_nl)",Ia="加拿大 (ca_ns)",Aa="加拿大 (ca_nt)",qa="加拿大 (ca_nu)",Ra="加拿大 (ca_on)",ja="加拿大 (ca_pe)",La="加拿大 (ca_qc)",Na="加拿大 (ca_sk)",Xa="加拿大 (ca_yt)",Ba="加拿大",Ha="瑞士 (ch_ag)",Qa="瑞士 (ch_ai)",Ga="瑞士 (ch_ar)",Ja="瑞士 (ch_be)",Ka="瑞士 (ch_bl)",Za="瑞士 (ch_bs)",$a="瑞士 (ch_fr)",er="瑞士 (ch_ge)",tr="瑞士 (ch_gl)",nr="瑞士 (ch_gr)",ar="瑞士 (ch_ju)",rr="瑞士 (ch_lu)",sr="瑞士 (ch_ne)",or="瑞士 (ch_nw)",ir="瑞士 (ch_ow)",ur="瑞士 (ch_sg)",cr="瑞士 (ch_sh)",lr="瑞士 (ch_so)",dr="瑞士 (ch_sz)",mr="瑞士 (ch_tg)",fr="瑞士 (ch_ti)",_r="瑞士 (ch_ur)",hr="瑞士 (ch_vd)",gr="瑞士 (ch_vs)",br="瑞士 (ch_zg)",yr="瑞士 (ch_zh)",wr="瑞士",pr="智利",vr="哥伦比亚",Dr="哥斯达黎加",kr="捷克共和国",Pr="德国 (de_bb)",xr="德国 (de_be)",Mr="德国 (de_bw)",Or="德国 (de_by_augsburg)",Tr="德国 (de_by_cath)",Vr="德国 (de_by)",Sr="德国 (de_hb)",Cr="德国 (de_he)",zr="德国 (de_hh)",Wr="德国 (de_mv)",Er="德国 (de_ni)",Ur="德国 (de_nw)",Yr="德国 (de_rp)",Fr="德国 (de_sh)",Ir="德国 (de_sl)",Ar="德国 (de_sn_sorbian)",qr="德国 (de_sn)",Rr="德国 (de_st)",jr="德国 (de_th_cath)",Lr="德国 (de_th)",Nr="德国",Xr="丹麦",Br="爱沙尼亚",Hr="希腊",Qr="西班牙 (es_an)",Gr="西班牙 (es_ar)",Jr="西班牙 (es_ce)",Kr="西班牙 (es_cl)",Zr="西班牙 (es_cm)",$r="西班牙 (es_cn)",es="西班牙 (es_ct)",ts="西班牙 (es_ex)",ns="西班牙 (es_ga)",as="西班牙 (es_ib)",rs="西班牙 (es_lo)",ss="西班牙 (es_m)",os="西班牙 (es_mu)",is="西班牙 (es_na)",us="西班牙 (es_o)",cs="西班牙 (es_pv)",ls="西班牙 (es_v)",ds="西班牙 (es_vc)",ms="西班牙",fs="芬兰",_s="法国 (fr_a)",hs="法国 (fr_m)",gs="法国",bs="英国 (gb_con)",ys="英国 (gb_eaw)",ws="英国 (gb_eng)",ps="英国 (gb_gsy)",vs="英国 (gb_iom)",Ds="英国 (gb_jsy)",ks="英国 (gb_nir)",Ps="英国 (gb_sct)",xs="英国 (gb_wls)",Ms="英国",Os="格鲁吉亚",Ts="根西岛",Vs="加纳",Ss="克罗地亚",Cs="匈牙利",zs="印度尼西亚",Ws="爱尔兰",Es="马恩岛",Us="印度 (in_gj)",Ys="印度 (in_mh)",Fs="印度 (in_rj)",Is="印度 (in_tn)",As="印度 (in_ka)",qs="冰岛",Rs="意大利 (it_bl)",js="意大利 (it_fi)",Ls="意大利 (it_ge)",Ns="意大利 (it_pd)",Xs="意大利 (it_rm)",Bs="意大利 (it_ro)",Hs="意大利 (it_to)",Qs="意大利 (it_tv)",Gs="意大利 (it_ve)",Js="意大利 (it_vi)",Ks="意大利 (it_vr)",Zs="意大利",$s="泽西岛",eo="日本",to="肯尼亚",no="韩国",ao="哈萨克斯坦",ro="列支敦士登",so="立陶宛",oo="卢森堡",io="拉脱维亚",uo="摩洛哥",co="马耳他 (mt_en)",lo="马耳他 (mt_mt)",mo="墨西哥 (mx_pue)",fo="墨西哥",_o="马来西亚",ho="尼日利亚",go="荷兰",bo="挪威",yo="新西兰 (nz_ak)",wo="新西兰 (nz_ca)",po="新西兰 (nz_ch)",vo="新西兰 (nz_hb)",Do="新西兰 (nz_mb)",ko="新西兰 (nz_ne)",Po="新西兰 (nz_nl)",xo="新西兰 (nz_ot)",Mo="新西兰 (nz_sc)",Oo="新西兰 (nz_sl)",To="新西兰 (nz_ta)",Vo="新西兰 (nz_we)",So="新西兰 (nz_wl)",Co="新西兰",zo="秘鲁",Wo="菲律宾",Eo="波兰",Uo="葡萄牙 (pt_li)",Yo="葡萄牙 (pt_po)",Fo="葡萄牙",Io="罗马尼亚",Ao="塞尔维亚 (rs_cyrl)",qo="塞尔维亚 (rs_la)",Ro="俄罗斯联邦",jo="瑞典",Lo="沙特阿拉伯",No="新加坡",Xo="斯洛文尼亚",Bo="斯洛伐克",Ho="泰国",Qo="突尼斯",Go="土耳其",Jo="乌克兰",Ko="美国 (us_ak)",Zo="美国 (us_al)",$o="美国 (us_ar)",ei="美国 (us_az)",ti="美国 (us_ca)",ni="美国 (us_co)",ai="美国 (us_ct)",ri="美国 (us_dc)",si="美国 (us_de)",oi="美国 (us_fl)",ii="美国 (us_ga)",ui="美国 (us_gu)",ci="美国 (us_hi)",li="美国 (us_ia)",di="美国 (us_id)",mi="美国 (us_il)",fi="美国 (us_in)",_i="美国 (us_ks)",hi="美国 (us_ky)",gi="美国 (us_la)",bi="美国 (us_ma)",yi="美国 (us_md)",wi="美国 (us_me)",pi="美国 (us_mi)",vi="美国 (us_mn)",Di="美国 (us_mo)",ki="美国 (us_ms)",Pi="美国 (us_mt)",xi="美国 (us_nc)",Mi="美国 (us_nd)",Oi="美国 (us_ne)",Ti="美国 (us_nh)",Vi="美国 (us_nj)",Si="美国 (us_nm)",Ci="美国 (us_nv)",zi="美国 (us_ny)",Wi="美国 (us_oh)",Ei="美国 (us_ok)",Ui="美国 (us_or)",Yi="美国 (us_pa)",Fi="美国 (us_pr)",Ii="美国 (us_ri)",Ai="美国 (us_sc)",qi="美国 (us_sd)",Ri="美国 (us_tn)",ji="美国 (us_tx)",Li="美国 (us_ut)",Ni="美国 (us_va)",Xi="美国 (us_vi)",Bi="美国 (us_vt)",Hi="美国 (us_wa)",Qi="美国 (us_wi)",Gi="美国 (us_wv)",Ji="美国 (us_wy)",Ki="美国",Zi="委内瑞拉",$i="美属维尔京群岛",eu="南非",tu="中国",nu="中国（大陆） (zh_cn)",au="中国（台湾） (zh_tw)",ru="中国（香港） (zh_hk)",su="中国（澳门） (zh_mo)",Z={ae:ca,ar:la,at:da,au_act:ma,au_nsw:fa,au_nt:_a,au_qld_brisbane:ha,au_qld_cairns:ga,au_qld:ba,au_sa:ya,au_tas_north:wa,au_tas_south:pa,au_tas:va,au_vic_melbourne:Da,au_vic:ka,au_wa:Pa,au:xa,be_fr:Ma,be_nl:Oa,bg_bg:Ta,bg_en:Va,br:Sa,br_sp:Ca,br_spcapital:za,ca_ab:Wa,ca_bc:Ea,ca_mb:Ua,ca_nb:Ya,ca_nl:Fa,ca_ns:Ia,ca_nt:Aa,ca_nu:qa,ca_on:Ra,ca_pe:ja,ca_qc:La,ca_sk:Na,ca_yt:Xa,ca:Ba,ch_ag:Ha,ch_ai:Qa,ch_ar:Ga,ch_be:Ja,ch_bl:Ka,ch_bs:Za,ch_fr:$a,ch_ge:er,ch_gl:tr,ch_gr:nr,ch_ju:ar,ch_lu:rr,ch_ne:sr,ch_nw:or,ch_ow:ir,ch_sg:ur,ch_sh:cr,ch_so:lr,ch_sz:dr,ch_tg:mr,ch_ti:fr,ch_ur:_r,ch_vd:hr,ch_vs:gr,ch_zg:br,ch_zh:yr,ch:wr,cl:pr,co:vr,cr:Dr,cz:kr,de_bb:Pr,de_be:xr,de_bw:Mr,de_by_augsburg:Or,de_by_cath:Tr,de_by:Vr,de_hb:Sr,de_he:Cr,de_hh:zr,de_mv:Wr,de_ni:Er,de_nw:Ur,de_rp:Yr,de_sh:Fr,de_sl:Ir,de_sn_sorbian:Ar,de_sn:qr,de_st:Rr,de_th_cath:jr,de_th:Lr,de:Nr,dk:Xr,ee:Br,el:Hr,es_an:Qr,es_ar:Gr,es_ce:Jr,es_cl:Kr,es_cm:Zr,es_cn:$r,es_ct:es,es_ex:ts,es_ga:ns,es_ib:as,es_lo:rs,es_m:ss,es_mu:os,es_na:is,es_o:us,es_pv:cs,es_v:ls,es_vc:ds,es:ms,fi:fs,fr_a:_s,fr_m:hs,fr:gs,gb_con:bs,gb_eaw:ys,gb_eng:ws,gb_gsy:ps,gb_iom:vs,gb_jsy:Ds,gb_nir:ks,gb_sct:Ps,gb_wls:xs,gb:Ms,ge:Os,gg:Ts,gh:Vs,hr:Ss,hu:Cs,id:zs,ie:Ws,im:Es,in:"印度",in_gj:Us,in_mh:Ys,in_rj:Fs,in_tn:Is,in_ka:As,is:qs,it_bl:Rs,it_fi:js,it_ge:Ls,it_pd:Ns,it_rm:Xs,it_ro:Bs,it_to:Hs,it_tv:Qs,it_ve:Gs,it_vi:Js,it_vr:Ks,it:Zs,je:$s,jp:eo,ke:to,kr:no,kz:ao,li:ro,lt:so,lu:oo,lv:io,ma:uo,mt_en:co,mt_mt:lo,mx_pue:mo,mx:fo,my:_o,ng:ho,nl:go,no:bo,nz_ak:yo,nz_ca:wo,nz_ch:po,nz_hb:vo,nz_mb:Do,nz_ne:ko,nz_nl:Po,nz_ot:xo,nz_sc:Mo,nz_sl:Oo,nz_ta:To,nz_we:Vo,nz_wl:So,nz:Co,pe:zo,ph:Wo,pl:Eo,pt_li:Uo,pt_po:Yo,pt:Fo,ro:Io,rs_cyrl:Ao,rs_la:qo,ru:Ro,se:jo,sa:Lo,sg:No,si:Xo,sk:Bo,th:Ho,tn:Qo,tr:Go,ua:Jo,us_ak:Ko,us_al:Zo,us_ar:$o,us_az:ei,us_ca:ti,us_co:ni,us_ct:ai,us_dc:ri,us_de:si,us_fl:oi,us_ga:ii,us_gu:ui,us_hi:ci,us_ia:li,us_id:di,us_il:mi,us_in:fi,us_ks:_i,us_ky:hi,us_la:gi,us_ma:bi,us_md:yi,us_me:wi,us_mi:pi,us_mn:vi,us_mo:Di,us_ms:ki,us_mt:Pi,us_nc:xi,us_nd:Mi,us_ne:Oi,us_nh:Ti,us_nj:Vi,us_nm:Si,us_nv:Ci,us_ny:zi,us_oh:Wi,us_ok:Ei,us_or:Ui,us_pa:Yi,us_pr:Fi,us_ri:Ii,us_sc:Ai,us_sd:qi,us_tn:Ri,us_tx:ji,us_ut:Li,us_va:Ni,us_vi:Xi,us_vt:Bi,us_wa:Hi,us_wi:Qi,us_wv:Gi,us_wy:Ji,us:Ki,ve:Zi,vi:$i,za:eu,zh:tu,zh_cn:nu,zh_tw:au,zh_hk:ru,zh_mo:su},ou={name:"ProfileEditor",props:{userData:{type:Object,required:!0}},data(){return{loading:!1,valid:!1,showRegionDialog:!1,regionSearch:"",profileData:{display_name:this.userData.display_name||"",motto:this.userData.motto||"",bio:this.userData.bio||"",location:this.userData.location||"",region:this.userData.region?{value:this.userData.region,text:Z[this.userData.region]||""}:null,url:this.userData.url||"",birthday:this.userData.birthday||"",featured_projects:this.userData.featured_projects||""},regionOptions:Object.entries(Z).map(([t,e])=>({value:t,text:e})),selectedGender:{state:"未知",abbr:"3"},genderOptions:[{state:"男",abbr:"0"},{state:"女",abbr:"1"},{state:"猫娘",abbr:"2"},{state:"未知",abbr:"3"}],nameRules:[t=>!!t||"名称是必填项",t=>t&&t.length<=20||"名称不能超过20个字符"],locationRules:[t=>!t||t.length<=100||"地址不能超过100个字符"],regionRules:[t=>!t||t.length<=100||"区域不能超过100个字符"],urlRules:[t=>!t||t.length<=255||"URL不能超过255个字符",t=>!t||/^https?:\/\/.*/.test(t)||"URL必须以http://或https://开头"],birthdayRules:[t=>!t||/^\d{4}-\d{2}-\d{2}$/.test(t)||"生日格式必须为YYYY-MM-DD"],projectIdRules:[t=>!t||/^\d+$/.test(t)||"项目ID必须是数字"]}},computed:{filteredRegions(){if(!this.regionSearch)return this.regionOptions;const t=this.regionSearch.toLowerCase();return this.regionOptions.filter(e=>e.text.toLowerCase().includes(t)||e.value.toLowerCase().includes(t))}},watch:{userData:{handler(t){this.profileData={display_name:t.display_name||"",motto:t.motto||"",bio:t.bio||"",location:t.location||"",region:t.region?{value:t.region,text:Z[t.region]||""}:null,url:t.url||"",birthday:t.birthday?this.formatDateForInput(t.birthday):"",featured_projects:t.featured_projects||""},this.selectedGender=this.genderOptions.find(e=>e.abbr==t.sex)||this.genderOptions[3]},immediate:!0,deep:!0}},methods:{formatDateForInput(t){return t?new Date(t).toISOString().split("T")[0]:""},selectRegion(t){this.profileData.region=t,this.showRegionDialog=!1},clearRegion(){this.profileData.region=null,this.showRegionDialog=!1},async updateProfile(){var t;if(this.valid){this.loading=!0;try{const e=await Ge({display_name:this.profileData.display_name,motto:this.profileData.motto,bio:this.profileData.bio,location:this.profileData.location,region:((t=this.profileData.region)==null?void 0:t.value)||"",sex:this.selectedGender.abbr,url:this.profileData.url,birthday:this.profileData.birthday,featured_projects:this.profileData.featured_projects||void 0});this.$emit("profile-updated",e)}catch(e){this.$emit("error",e)}finally{this.loading=!1}}}}};function iu(t,e,n,r,a,i){return p(),M(ne,{modelValue:a.valid,"onUpdate:modelValue":e[14]||(e[14]=s=>a.valid=s),onSubmit:te(i.updateProfile,["prevent"])},{default:u(()=>[o(J,null,{default:u(()=>[o(y,{cols:"12",md:"6"},{default:u(()=>[o(P,{modelValue:a.profileData.display_name,"onUpdate:modelValue":e[0]||(e[0]=s=>a.profileData.display_name=s),counter:20,label:"显示名称",variant:"outlined",density:"comfortable",required:"",rules:a.nameRules},null,8,["modelValue","rules"])]),_:1}),o(y,{cols:"12",md:"6"},{default:u(()=>[o($e,{modelValue:a.selectedGender,"onUpdate:modelValue":e[1]||(e[1]=s=>a.selectedGender=s),items:a.genderOptions,"item-title":"state","item-value":"abbr",label:"性别",variant:"outlined",density:"comfortable","persistent-hint":"","return-object":""},null,8,["modelValue","items"])]),_:1}),o(y,{cols:"12",md:"6"},{default:u(()=>[o(P,{modelValue:a.profileData.location,"onUpdate:modelValue":e[2]||(e[2]=s=>a.profileData.location=s),counter:100,label:"地点",variant:"outlined",density:"comfortable",rules:a.locationRules},null,8,["modelValue","rules"])]),_:1}),o(y,{cols:"12",md:"6"},{default:u(()=>{var s;return[o(P,{"model-value":((s=a.profileData.region)==null?void 0:s.text)||"",label:"区域",variant:"outlined",density:"comfortable",readonly:"",rules:a.regionRules,"persistent-hint":"",hint:"点击选择您所在的区域",onClick:e[4]||(e[4]=c=>a.showRegionDialog=!0)},{append:u(()=>[o(x,{variant:"text",icon:"mdi-map-marker",onClick:e[3]||(e[3]=c=>a.showRegionDialog=!0)})]),_:1},8,["model-value","rules"])]}),_:1}),o(y,{cols:"12",md:"6"},{default:u(()=>[o(P,{modelValue:a.profileData.url,"onUpdate:modelValue":e[5]||(e[5]=s=>a.profileData.url=s),counter:255,label:"个人网站",variant:"outlined",density:"comfortable",rules:a.urlRules},null,8,["modelValue","rules"])]),_:1}),o(y,{cols:"12",md:"6"},{default:u(()=>[o(P,{modelValue:a.profileData.birthday,"onUpdate:modelValue":e[6]||(e[6]=s=>a.profileData.birthday=s),label:"生日",type:"date",variant:"outlined",density:"comfortable",rules:a.birthdayRules},null,8,["modelValue","rules"])]),_:1}),o(y,{cols:"12"},{default:u(()=>[o(P,{modelValue:a.profileData.motto,"onUpdate:modelValue":e[7]||(e[7]=s=>a.profileData.motto=s),counter:500,label:"一行简介",variant:"outlined",density:"comfortable"},null,8,["modelValue"])]),_:1}),o(y,{cols:"12"},{default:u(()=>[o(et,{label:"详细介绍",modelValue:a.profileData.bio,"onUpdate:modelValue":e[8]||(e[8]=s=>a.profileData.bio=s),counter:2e3,variant:"outlined","auto-grow":"",rows:"3",hint:"支持Markdown格式","persistent-hint":""},null,8,["modelValue"])]),_:1}),o(y,{cols:"12",md:"6"},{default:u(()=>[o(P,{modelValue:a.profileData.featured_projects,"onUpdate:modelValue":e[9]||(e[9]=s=>a.profileData.featured_projects=s),label:"精选项目ID",variant:"outlined",density:"comfortable",type:"number",hint:"输入您的项目ID","persistent-hint":"",rules:a.projectIdRules},null,8,["modelValue","rules"])]),_:1}),o(y,{cols:"12"},{default:u(()=>[o(x,{onClick:i.updateProfile,disabled:!a.valid,color:"primary",size:"large","prepend-icon":"mdi-content-save",class:"px-6",loading:a.loading},{default:u(()=>e[15]||(e[15]=[g(" 保存资料 ")])),_:1,__:[15]},8,["onClick","disabled","loading"])]),_:1})]),_:1}),o(fe,{modelValue:a.showRegionDialog,"onUpdate:modelValue":e[13]||(e[13]=s=>a.showRegionDialog=s),"max-width":"600"},{default:u(()=>[o(Q,null,{default:u(()=>[o(ee,{class:"text-h5 pa-4"},{default:u(()=>[e[16]||(e[16]=g(" 选择区域 ")),o($),o(x,{icon:"mdi-close",variant:"text",onClick:e[10]||(e[10]=s=>a.showRegionDialog=!1)})]),_:1,__:[16]}),o(G,{class:"pa-4"},{default:u(()=>[o(P,{modelValue:a.regionSearch,"onUpdate:modelValue":e[11]||(e[11]=s=>a.regionSearch=s),label:"搜索区域",variant:"outlined",density:"comfortable","prepend-inner-icon":"mdi-magnify",clearable:"","hide-details":"",class:"mb-4"},null,8,["modelValue"]),o(We,{lines:"two",class:"region-list"},{default:u(()=>[(p(!0),A(he,null,ge(i.filteredRegions,s=>(p(),M(Ee,{key:s.value,title:s.text,subtitle:s.value,onClick:c=>i.selectRegion(s)},{prepend:u(()=>{var c;return[o(q,{color:((c=a.profileData.region)==null?void 0:c.value)===s.value?"primary":void 0},{default:u(()=>{var l;return[g(O(((l=a.profileData.region)==null?void 0:l.value)===s.value?"mdi-check-circle":"mdi-earth"),1)]}),_:2},1032,["color"])]}),_:2},1032,["title","subtitle","onClick"]))),128))]),_:1})]),_:1}),o(me,{class:"pa-4"},{default:u(()=>[o($),o(x,{variant:"text",onClick:i.clearRegion},{default:u(()=>e[17]||(e[17]=[g(" 清除选择 ")])),_:1,__:[17]},8,["onClick"]),o(x,{color:"primary",onClick:e[12]||(e[12]=s=>a.showRegionDialog=!1)},{default:u(()=>e[18]||(e[18]=[g(" 确定 ")])),_:1,__:[18]})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["modelValue","onSubmit"])}const Ve=U(ou,[["render",iu],["__scopeId","data-v-24343570"]]),uu={name:"UserCard",props:{userData:{type:Object,required:!0},loading:{type:Boolean,default:!1},s3BucketUrl:{type:String,required:!0}}},cu={class:"text-body-2 text-medium-emphasis",style:{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}};function lu(t,e,n,r,a,i){return p(),M(Q,{hover:"",border:"",variant:"elevated",loading:n.loading,class:"mb-4"},{prepend:u(()=>[o(Ie,{class:"ma-3",size:"64"},{default:u(()=>[o(_e,{alt:n.userData.display_name,src:n.s3BucketUrl+"/user/"+n.userData.avatar,cover:""},null,8,["alt","src"])]),_:1})]),loader:u(({isActive:s})=>[o(Fe,{active:s,height:"4",indeterminate:"",color:"primary"},null,8,["active"])]),default:u(()=>[o(Ue,null,{default:u(()=>[o(ee,{class:"font-weight-bold text-h5"},{default:u(()=>[g(O(n.userData.display_name||"加载中..."),1)]),_:1}),o(Ye,{class:"mt-2"},{default:u(()=>[o(X,{class:"mr-2",size:"small"},{default:u(()=>[o(q,{icon:"mdi-account-circle",start:"",size:"small"}),g(" ID: "+O(n.userData.id||"—"),1)]),_:1}),o(X,{size:"small"},{default:u(()=>[o(q,{icon:"mdi-tag",start:"",size:"small"}),e[0]||(e[0]=g(" 创作者 "))]),_:1,__:[0]})]),_:1})]),_:1}),n.userData.bio?(p(),M(G,{key:0},{default:u(()=>[v("div",cu,O(n.userData.bio),1)]),_:1})):de("",!0)]),_:1},8,["loading"])}const Se=U(uu,[["render",lu]]),du={components:{EmailManager:ye,OAuthManager:be,SecurityManager:xe,UserCard:Se,ProfileEditor:Ve,UsernameEditor:Te,PasswordEditor:Oe,AvatarEditor:Me,UserFollowing:nt,UserFollowers:tt,UserBlocked:at},data(){return{userCardLoading:!1,localuser:F,userInfo:{},tab:"userInfo",tabItems:[{title:"用户信息",value:"userInfo",icon:"mdi-account-circle"},{title:"账户",value:"username",icon:"mdi-cog"},{title:"密码",value:"password",icon:"mdi-lock"},{title:"头像",value:"avatar",icon:"mdi-image"},{title:"邮箱",value:"email",icon:"mdi-email"},{title:"OAuth",value:"oauth",icon:"mdi-link-variant"},{title:"安全",value:"security",icon:"mdi-security"},{title:"关系",value:"relationships",icon:"mdi-account-group",to:"/app/account/relationships"},{title:"开发者",value:"developer",icon:"mdi-account-group",to:"/app/account/developer"}],VITE_APP_S3_BUCKET:"https://zerocat-bitiful.houlangs.com"}},setup(){Le({title:"账户设置"})},async created(){F.isLogin.value?await this.getUserById():this.$router.push("/app/account/login")},methods:{async getUserById(){this.userCardLoading=!0;try{const t=await Je(F.user.value.id);this.userInfo=t.data.data}catch(t){this.handleError(t)}finally{this.userCardLoading=!1}},handleProfileUpdate(t){this.showToast(t.data.status||"info","修改个人信息",t.data.message),this.getUserById()},handleUsernameUpdate(t){this.showToast(t.data.status||"info","修改用户名",t.data.message),this.getUserById()},handlePasswordUpdate(t){this.showToast(t.data.status||"info","修改密码",t.data.message)},handleAvatarUpdate(t){this.showToast(t.data.status||"info","修改头像",t.data.message),this.getUserById()},handleError(t){this.showToast("error","错误",t.message)},showToast(t,e,n){this.$toast.add({severity:t,summary:e,detail:n,life:3e3})}}};function mu(t,e,n,r,a,i){const s=Se,c=Ve,l=Te,f=Oe,_=Me,k=ye,h=be,D=xe;return p(),M(je,{fluid:"",class:"pa-4"},{default:u(()=>[o(s,{userData:a.userInfo,loading:a.userCardLoading,s3BucketUrl:a.VITE_APP_S3_BUCKET},null,8,["userData","loading","s3BucketUrl"]),o(Q,{hover:"",border:""},{default:u(()=>[o(Ae,{modelValue:a.tab,"onUpdate:modelValue":e[0]||(e[0]=d=>a.tab=d),"bg-color":"primary"},{default:u(()=>[(p(!0),A(he,null,ge(a.tabItems,d=>(p(),M(qe,{key:d.value,text:d.title,value:d.value,onClick:b=>a.tab=d.value,"prepend-icon":d.icon,to:d.to},null,8,["text","value","onClick","prepend-icon","to"]))),128))]),_:1},8,["modelValue"]),o(G,{class:"pa-4"},{default:u(()=>[o(Re,{modelValue:a.tab,"onUpdate:modelValue":e[1]||(e[1]=d=>a.tab=d)},{default:u(()=>[o(S,{value:"userInfo"},{default:u(()=>[e[2]||(e[2]=v("h3",{class:"text-h5 mb-4"},"个人资料",-1)),o(c,{userData:a.userInfo,onProfileUpdated:i.handleProfileUpdate,onError:i.handleError},null,8,["userData","onProfileUpdated","onError"])]),_:1,__:[2]}),o(S,{value:"username"},{default:u(()=>[e[3]||(e[3]=v("h3",{class:"text-h5 mb-4"},"修改用户名",-1)),o(l,{userData:a.userInfo,onUsernameUpdated:i.handleUsernameUpdate,onError:i.handleError},null,8,["userData","onUsernameUpdated","onError"])]),_:1,__:[3]}),o(S,{value:"password"},{default:u(()=>[e[4]||(e[4]=v("h3",{class:"text-h5 mb-4"},"修改密码",-1)),o(f,{onPasswordUpdated:i.handlePasswordUpdate,onError:i.handleError},null,8,["onPasswordUpdated","onError"])]),_:1,__:[4]}),o(S,{value:"avatar"},{default:u(()=>[e[5]||(e[5]=v("h3",{class:"text-h5 mb-4"},"更新头像",-1)),o(_,{userData:a.userInfo,s3BucketUrl:a.VITE_APP_S3_BUCKET,onAvatarUpdated:i.handleAvatarUpdate,onError:i.handleError},null,8,["userData","s3BucketUrl","onAvatarUpdated","onError"])]),_:1,__:[5]}),o(S,{value:"email"},{default:u(()=>[e[6]||(e[6]=v("h3",{class:"text-h5 mb-4"},"邮箱管理",-1)),o(k,{ref:"emailManager"},null,512)]),_:1,__:[6]}),o(S,{value:"oauth"},{default:u(()=>[e[7]||(e[7]=v("h3",{class:"text-h5 mb-4"},"第三方账号关联",-1)),o(h)]),_:1,__:[7]}),o(S,{value:"security"},{default:u(()=>[e[8]||(e[8]=v("h3",{class:"text-h5 mb-4"},"安全管理",-1)),o(D)]),_:1,__:[8]}),o(S,{value:"relationships"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})}const zu=U(du,[["render",mu],["__scopeId","data-v-d038106e"]]);export{zu as default};
