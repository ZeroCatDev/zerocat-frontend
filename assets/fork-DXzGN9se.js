import{o as j}from"./openEdit-AJJkPSPH.js";import{_ as h,H as V,G as a,J as v,r as C,o as w,c as y,w as r,L as o,O as l,W as n,a as i,R as p,a3 as d,N as m,a0 as c}from"./index-BCe8u7sk.js";import{l as g,b as N}from"./project-DMlAlB-c.js";import{l as F,b as f}from"./user-D4tRpBrk.js";import{V as b}from"./VCheckbox-6DRxlQMW.js";import{V as U}from"./VContainer-KIG5WJU7.js";import"./db-DtOqCdQO.js";import"./VCheckboxBtn-DuRu_72_.js";import"./VSelectionControl-B_EPyzVO.js";/* empty css              */const Z={data(){return{project:{id:0,type:"scratch",licence:"加载中",authorid:89,state:"public",view_count:119,time:"2000-01-01T00:00:00.000Z",title:"加载中",description:"加载中",tags:"",source:""},author:{id:89,username:"加载中",display_name:"加载中",state:0,regTime:"2000-01-01T00:00:00.000Z",motto:"加载中",images:"加载中"},openEditor:j,localuser:V,checktext:"",checkknow:!1,checklicense:!1,textRules:[s=>s?!0:"记得输入内容哦~",s=>{if(s!="我保证会好好对待改编的作品")return"输的不太对~"}]}},async created(){this.localuser.islogin==!1&&this.$router.push("/account/login"),this.startLiveFetch(),await this.refreshProject(),await this.refreshAuthor()},setup(){a({title:"分叉"})},methods:{startLiveFetch(){g([Number(this.$route.params.id)],s=>{s.length>0&&(this.project=s[0],a({title:"分叉"+this.project.title}))}),F([Number(this.project.authorid)],async s=>{s.length>0&&(this.author=s[0]),await f(this.project.authorid)})},async refreshProject(){await N(this.$route.params.id)},async refreshAuthor(){await f(this.project.authorid)},async forkproject(s){await v({url:"/project/"+s+"/fork",method:"post"}).then(t=>{console.log(t),this.$toast.add({severity:"success",summary:"成功",detail:"分叉成功",life:3e3}),t.id&&this.$router.push("/projects/"+t.id)}).catch(t=>{console.log(t),this.$toast.add({severity:"error",summary:"错误",detail:t,life:3e3})})}}},L={class:"d-flex justify-space-between"},T={class:"text-h4"},B=["textContent"],P=["textContent"];function A(s,t,D,R,e,x){const k=C("v-text");return w(),y(U,{class:"pa-md-12"},{default:r(()=>[o("div",L,[o("h1",T,[t[4]||(t[4]=l("Fork ")),o("span",{textContent:n(e.project.title)},null,8,B)])]),t[20]||(t[20]=o("br",null,null,-1)),i(p,{hover:"",border:""},{title:r(()=>[l(n(e.project.title),1)]),subtitle:r(()=>[l(" 作者"+n(e.author.display_name)+"，发布于："+n(e.project.time)+"，"+n(e.project.view_count)+"次浏览 ",1)]),text:r(()=>[l(n(e.project.description),1)]),_:1}),t[21]||(t[21]=o("br",null,null,-1)),i(p,{hover:"",border:""},{title:r(()=>t[5]||(t[5]=[l(" 你正在分叉一个项目 ")])),subtitle:r(()=>t[6]||(t[6]=[l("等等，确认点事 ")])),text:r(()=>[t[7]||(t[7]=l(" 你正在分叉 ")),o("span",{textContent:n(e.project.title)},null,8,P),t[8]||(t[8]=l(" ，这将会从此项目的生产环境创建一个一模一样的项目，新的项目将拥有一样的名称，简介与源代码内容。分叉是一个技术概念，不代表作者对你有任何授权。 ")),t[9]||(t[9]=o("br",null,null,-1)),t[10]||(t[10]=l("改编设立的目的是为了让社区中的作品得到更好的发展，请不要滥用改编，更不能直接抄袭。 "))]),default:r(()=>[i(d,null,{default:r(()=>[i(b,{label:"我已了解并确认",modelValue:e.checkknow,"onUpdate:modelValue":t[0]||(t[0]=u=>e.checkknow=u)},null,8,["modelValue"])]),_:1})]),_:1}),t[22]||(t[22]=o("br",null,null,-1)),i(p,{hover:"",border:""},{title:r(()=>[l(n(e.project.license),1)]),subtitle:r(()=>[l(" 你需要遵守："+n(e.project.license)+"许可证。 ",1)]),text:r(()=>[i(m,{href:"https://choosealicense.com/licenses/"+e.project.license,target:"_blank",variant:"outlined"},{default:r(()=>t[11]||(t[11]=[l("了解此许可证")])),_:1},8,["href"]),t[12]||(t[12]=o("br",null,null,-1)),t[13]||(t[13]=o("br",null,null,-1)),t[14]||(t[14]=l(" 开源许可证授予您某些权利，前提是您必须遵守相关许可证条款。如未明确标示许可证（显示为NULL），则默认作品受专有版权保护。在分发该作品之前，您需联系作者并获得授权。 ")),t[15]||(t[15]=o("br",null,null,-1)),t[16]||(t[16]=l(" 用户在ZeroCatNext上分发该作品，并不意味着其拥有该作品的所有权。作品的分叉仅为技术行为，不等同于获得作者的法律授权。")),t[17]||(t[17]=o("br",null,null,-1)),t[18]||(t[18]=l(" ZeroCatNext对用户上传、分发或使用的任何作品不承担任何法律责任。ZeroCatNext仅提供技术支持和托管服务，用户对所上传、分发及使用的作品负责，若因作品内容引发任何法律纠纷或损失，ZeroCatNext不承担任何责任。 "))]),default:r(()=>[i(d,null,{default:r(()=>[i(b,{label:"我已了解并确认",modelValue:e.checklicense,"onUpdate:modelValue":t[1]||(t[1]=u=>e.checklicense=u)},null,8,["modelValue"])]),_:1})]),_:1}),t[23]||(t[23]=o("br",null,null,-1)),i(k,null,{default:r(()=>t[19]||(t[19]=[l("如果您已了解以上内容，请在下方的输入框中输入")])),_:1}),t[24]||(t[24]=l()),t[25]||(t[25]=o("br",null,null,-1)),t[26]||(t[26]=o("br",null,null,-1)),i(c,{hint:"请准确输入上方的话",label:"我保证会好好对待改编的作品",type:"input",modelValue:e.checktext,"onUpdate:modelValue":t[2]||(t[2]=u=>e.checktext=u),rules:e.textRules,required:"",variant:"outlined",clearable:""},null,8,["modelValue","rules"]),t[27]||(t[27]=o("br",null,null,-1)),i(m,{class:"text-none",color:"primary",rounded:"xl",text:"Fork",variant:"flat",size:"large",onClick:t[3]||(t[3]=u=>x.forkproject(e.project.id)),"append-icon":"mdi-arrow-right",disabled:!e.checkknow||!e.checklicense||!e.checktext},null,8,["disabled"])]),_:1})}const K=h(Z,[["render",A]]);export{K as default};
