import{aH as Ia,p as U,u as we,x as C,w as gt,aI as $t,y as ut,aJ as xe,aK as Pe,g as ke,a as Ze,d as Fe,aL as St,f as p,e as c,m as K,I as ve,aM as Fa,k as ne,D as Ve,r as ge,aN as Ea,aO as Ba,aP as Wa,aQ as dt,A as Aa,aR as H,aS as qt,aT as ze,aU as Ne,aV as Ua,aW as Ra,aX as vt,aY as La,F as ue,aZ as Na,a_ as yt,S as Ie,O as pe,C as Ha,i as z,L as V,as as le,X as Y,a$ as ct,b0 as He,b1 as Ya,b2 as ja,a0 as $a,_ as ce,ab as ye,c as $e,o as B,Y as j,a5 as qa,N as b,$ as zt,W as bt,a9 as Gt,a3 as wt,at as za,ap as Ga,R,n as Xt,Q as et,aq as Ce,au as pt,aC as Xa,aE as Qa,j as Ka,Z as Ja,ah as Za,U as en,ai as tn,V as an,q as te,T as nn,M as rn}from"./index-2BOuw0Uj.js";import{V as xt}from"./VSelect-B_NztMX1.js";import{V as Pt}from"./VCheckboxBtn-SuIeYQMN.js";import{V as _t,m as on,_ as Qt}from"./EmailManager-DaSjOKP8.js";import{u as sn,m as ln}from"./filter-C4aM-yy8.js";import{V as un}from"./VSpacer-Xm0WeXZ8.js";import{_ as Kt}from"./OAuthManager-Bt0qdl2C.js";import{u as dn,a as cn,b as fn,c as mn,g as hn}from"./accountService-CjZ0P0My.js";import{V as gn}from"./VFileInput-C_LEwlau.js";import{V as vn}from"./VSheet-CXwdGU5N.js";import{V as yn}from"./VTextarea-D7UZTICS.js";import{a as bn,_ as wn}from"./UserFollowers-EZ2AAxt2.js";import{_ as pn}from"./UserBlocked-vTG41LzR.js";import"./VSelectionControl-D5DH-qHP.js";import"./verifyEmail-Dn7cJFs1.js";function Tt(e,t,a){return Object.keys(e).filter(n=>Ia(n)&&n.endsWith(t)).reduce((n,r)=>(n[r.slice(0,-t.length)]=i=>e[r](i,a(i)),n),{})}const Jt=6048e5,xn=864e5,Ye=43200,Ot=1440,Mt=Symbol.for("constructDateFrom");function re(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&Mt in e?e[Mt](t):e instanceof Date?new e.constructor(t):new Date(t)}function I(e,t){return re(t||e,e)}let Pn={};function Ee(){return Pn}function de(e,t){var s,l,u,f;const a=Ee(),n=(t==null?void 0:t.weekStartsOn)??((l=(s=t==null?void 0:t.locale)==null?void 0:s.options)==null?void 0:l.weekStartsOn)??a.weekStartsOn??((f=(u=a.locale)==null?void 0:u.options)==null?void 0:f.weekStartsOn)??0,r=I(e,t==null?void 0:t.in),i=r.getDay(),o=(i<n?7:0)+i-n;return r.setDate(r.getDate()-o),r.setHours(0,0,0,0),r}function Ge(e,t){return de(e,{...t,weekStartsOn:1})}function Zt(e,t){const a=I(e,t==null?void 0:t.in),n=a.getFullYear(),r=re(a,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const i=Ge(r),o=re(a,0);o.setFullYear(n,0,4),o.setHours(0,0,0,0);const s=Ge(o);return a.getTime()>=i.getTime()?n+1:a.getTime()>=s.getTime()?n:n-1}function Xe(e){const t=I(e),a=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return a.setUTCFullYear(t.getFullYear()),+e-+a}function Be(e,...t){const a=re.bind(null,e||t.find(n=>typeof n=="object"));return t.map(a)}function Ct(e,t){const a=I(e,t==null?void 0:t.in);return a.setHours(0,0,0,0),a}function kn(e,t,a){const[n,r]=Be(a==null?void 0:a.in,e,t),i=Ct(n),o=Ct(r),s=+i-Xe(i),l=+o-Xe(o);return Math.round((s-l)/xn)}function Dn(e,t){const a=Zt(e,t),n=re(e,0);return n.setFullYear(a,0,4),n.setHours(0,0,0,0),Ge(n)}function qe(e,t){const a=+I(e)-+I(t);return a<0?-1:a>0?1:a}function Sn(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function _n(e){return!(!Sn(e)&&typeof e!="number"||isNaN(+I(e)))}function Tn(e,t,a){const[n,r]=Be(a==null?void 0:a.in,e,t),i=n.getFullYear()-r.getFullYear(),o=n.getMonth()-r.getMonth();return i*12+o}function On(e){return t=>{const n=(e?Math[e]:Math.trunc)(t);return n===0?0:n}}function Mn(e,t){return+I(e)-+I(t)}function Cn(e,t){const a=I(e,t==null?void 0:t.in);return a.setHours(23,59,59,999),a}function Vn(e,t){const a=I(e,t==null?void 0:t.in),n=a.getMonth();return a.setFullYear(a.getFullYear(),n+1,0),a.setHours(23,59,59,999),a}function In(e,t){const a=I(e,t==null?void 0:t.in);return+Cn(a,t)==+Vn(a,t)}function Fn(e,t,a){const[n,r,i]=Be(a==null?void 0:a.in,e,e,t),o=qe(r,i),s=Math.abs(Tn(r,i));if(s<1)return 0;r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-o*s);let l=qe(r,i)===-o;In(n)&&s===1&&qe(n,i)===1&&(l=!1);const u=o*(s-+l);return u===0?0:u}function En(e,t,a){const n=Mn(e,t)/1e3;return On(a==null?void 0:a.roundingMethod)(n)}function Bn(e,t){const a=I(e,t==null?void 0:t.in);return a.setFullYear(a.getFullYear(),0,1),a.setHours(0,0,0,0),a}const Wn={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},An=(e,t,a)=>{let n;const r=Wn[e];return typeof r=="string"?n=r:t===1?n=r.one:n=r.other.replace("{{count}}",t.toString()),a!=null&&a.addSuffix?a.comparison&&a.comparison>0?"in "+n:n+" ago":n};function be(e){return(t={})=>{const a=t.width?String(t.width):e.defaultWidth;return e.formats[a]||e.formats[e.defaultWidth]}}const Un={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Rn={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Ln={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Nn={date:be({formats:Un,defaultWidth:"full"}),time:be({formats:Rn,defaultWidth:"full"}),dateTime:be({formats:Ln,defaultWidth:"full"})},Hn={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Yn=(e,t,a,n)=>Hn[e];function $(e){return(t,a)=>{const n=a!=null&&a.context?String(a.context):"standalone";let r;if(n==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,s=a!=null&&a.width?String(a.width):o;r=e.formattingValues[s]||e.formattingValues[o]}else{const o=e.defaultWidth,s=a!=null&&a.width?String(a.width):e.defaultWidth;r=e.values[s]||e.values[o]}const i=e.argumentCallback?e.argumentCallback(t):t;return r[i]}}const jn={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},$n={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},qn={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},zn={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Gn={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Xn={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Qn=(e,t)=>{const a=Number(e),n=a%100;if(n>20||n<10)switch(n%10){case 1:return a+"st";case 2:return a+"nd";case 3:return a+"rd"}return a+"th"},Kn={ordinalNumber:Qn,era:$({values:jn,defaultWidth:"wide"}),quarter:$({values:$n,defaultWidth:"wide",argumentCallback:e=>e-1}),month:$({values:qn,defaultWidth:"wide"}),day:$({values:zn,defaultWidth:"wide"}),dayPeriod:$({values:Gn,defaultWidth:"wide",formattingValues:Xn,defaultFormattingWidth:"wide"})};function q(e){return(t,a={})=>{const n=a.width,r=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],i=t.match(r);if(!i)return null;const o=i[0],s=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(s)?Zn(s,m=>m.test(o)):Jn(s,m=>m.test(o));let u;u=e.valueCallback?e.valueCallback(l):l,u=a.valueCallback?a.valueCallback(u):u;const f=t.slice(o.length);return{value:u,rest:f}}}function Jn(e,t){for(const a in e)if(Object.prototype.hasOwnProperty.call(e,a)&&t(e[a]))return a}function Zn(e,t){for(let a=0;a<e.length;a++)if(t(e[a]))return a}function ea(e){return(t,a={})=>{const n=t.match(e.matchPattern);if(!n)return null;const r=n[0],i=t.match(e.parsePattern);if(!i)return null;let o=e.valueCallback?e.valueCallback(i[0]):i[0];o=a.valueCallback?a.valueCallback(o):o;const s=t.slice(r.length);return{value:o,rest:s}}}const er=/^(\d+)(th|st|nd|rd)?/i,tr=/\d+/i,ar={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},nr={any:[/^b/i,/^(a|c)/i]},rr={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},ir={any:[/1/i,/2/i,/3/i,/4/i]},or={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},sr={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},lr={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},ur={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},dr={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},cr={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},fr={ordinalNumber:ea({matchPattern:er,parsePattern:tr,valueCallback:e=>parseInt(e,10)}),era:q({matchPatterns:ar,defaultMatchWidth:"wide",parsePatterns:nr,defaultParseWidth:"any"}),quarter:q({matchPatterns:rr,defaultMatchWidth:"wide",parsePatterns:ir,defaultParseWidth:"any",valueCallback:e=>e+1}),month:q({matchPatterns:or,defaultMatchWidth:"wide",parsePatterns:sr,defaultParseWidth:"any"}),day:q({matchPatterns:lr,defaultMatchWidth:"wide",parsePatterns:ur,defaultParseWidth:"any"}),dayPeriod:q({matchPatterns:dr,defaultMatchWidth:"any",parsePatterns:cr,defaultParseWidth:"any"})},ta={code:"en-US",formatDistance:An,formatLong:Nn,formatRelative:Yn,localize:Kn,match:fr,options:{weekStartsOn:0,firstWeekContainsDate:1}};function mr(e,t){const a=I(e,t==null?void 0:t.in);return kn(a,Bn(a))+1}function hr(e,t){const a=I(e,t==null?void 0:t.in),n=+Ge(a)-+Dn(a);return Math.round(n/Jt)+1}function aa(e,t){var f,m,h,w;const a=I(e,t==null?void 0:t.in),n=a.getFullYear(),r=Ee(),i=(t==null?void 0:t.firstWeekContainsDate)??((m=(f=t==null?void 0:t.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??r.firstWeekContainsDate??((w=(h=r.locale)==null?void 0:h.options)==null?void 0:w.firstWeekContainsDate)??1,o=re((t==null?void 0:t.in)||e,0);o.setFullYear(n+1,0,i),o.setHours(0,0,0,0);const s=de(o,t),l=re((t==null?void 0:t.in)||e,0);l.setFullYear(n,0,i),l.setHours(0,0,0,0);const u=de(l,t);return+a>=+s?n+1:+a>=+u?n:n-1}function gr(e,t){var s,l,u,f;const a=Ee(),n=(t==null?void 0:t.firstWeekContainsDate)??((l=(s=t==null?void 0:t.locale)==null?void 0:s.options)==null?void 0:l.firstWeekContainsDate)??a.firstWeekContainsDate??((f=(u=a.locale)==null?void 0:u.options)==null?void 0:f.firstWeekContainsDate)??1,r=aa(e,t),i=re((t==null?void 0:t.in)||e,0);return i.setFullYear(r,0,n),i.setHours(0,0,0,0),de(i,t)}function vr(e,t){const a=I(e,t==null?void 0:t.in),n=+de(a,t)-+gr(a,t);return Math.round(n/Jt)+1}function S(e,t){const a=e<0?"-":"",n=Math.abs(e).toString().padStart(t,"0");return a+n}const ae={y(e,t){const a=e.getFullYear(),n=a>0?a:1-a;return S(t==="yy"?n%100:n,t.length)},M(e,t){const a=e.getMonth();return t==="M"?String(a+1):S(a+1,2)},d(e,t){return S(e.getDate(),t.length)},a(e,t){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return a.toUpperCase();case"aaa":return a;case"aaaaa":return a[0];case"aaaa":default:return a==="am"?"a.m.":"p.m."}},h(e,t){return S(e.getHours()%12||12,t.length)},H(e,t){return S(e.getHours(),t.length)},m(e,t){return S(e.getMinutes(),t.length)},s(e,t){return S(e.getSeconds(),t.length)},S(e,t){const a=t.length,n=e.getMilliseconds(),r=Math.trunc(n*Math.pow(10,a-3));return S(r,t.length)}},he={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Vt={G:function(e,t,a){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return a.era(n,{width:"abbreviated"});case"GGGGG":return a.era(n,{width:"narrow"});case"GGGG":default:return a.era(n,{width:"wide"})}},y:function(e,t,a){if(t==="yo"){const n=e.getFullYear(),r=n>0?n:1-n;return a.ordinalNumber(r,{unit:"year"})}return ae.y(e,t)},Y:function(e,t,a,n){const r=aa(e,n),i=r>0?r:1-r;if(t==="YY"){const o=i%100;return S(o,2)}return t==="Yo"?a.ordinalNumber(i,{unit:"year"}):S(i,t.length)},R:function(e,t){const a=Zt(e);return S(a,t.length)},u:function(e,t){const a=e.getFullYear();return S(a,t.length)},Q:function(e,t,a){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return S(n,2);case"Qo":return a.ordinalNumber(n,{unit:"quarter"});case"QQQ":return a.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return a.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return a.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,a){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return S(n,2);case"qo":return a.ordinalNumber(n,{unit:"quarter"});case"qqq":return a.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return a.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return a.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,a){const n=e.getMonth();switch(t){case"M":case"MM":return ae.M(e,t);case"Mo":return a.ordinalNumber(n+1,{unit:"month"});case"MMM":return a.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return a.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return a.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,a){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return S(n+1,2);case"Lo":return a.ordinalNumber(n+1,{unit:"month"});case"LLL":return a.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return a.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return a.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,a,n){const r=vr(e,n);return t==="wo"?a.ordinalNumber(r,{unit:"week"}):S(r,t.length)},I:function(e,t,a){const n=hr(e);return t==="Io"?a.ordinalNumber(n,{unit:"week"}):S(n,t.length)},d:function(e,t,a){return t==="do"?a.ordinalNumber(e.getDate(),{unit:"date"}):ae.d(e,t)},D:function(e,t,a){const n=mr(e);return t==="Do"?a.ordinalNumber(n,{unit:"dayOfYear"}):S(n,t.length)},E:function(e,t,a){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return a.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return a.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(n,{width:"short",context:"formatting"});case"EEEE":default:return a.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,a,n){const r=e.getDay(),i=(r-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return S(i,2);case"eo":return a.ordinalNumber(i,{unit:"day"});case"eee":return a.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return a.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(r,{width:"short",context:"formatting"});case"eeee":default:return a.day(r,{width:"wide",context:"formatting"})}},c:function(e,t,a,n){const r=e.getDay(),i=(r-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return S(i,t.length);case"co":return a.ordinalNumber(i,{unit:"day"});case"ccc":return a.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return a.day(r,{width:"narrow",context:"standalone"});case"cccccc":return a.day(r,{width:"short",context:"standalone"});case"cccc":default:return a.day(r,{width:"wide",context:"standalone"})}},i:function(e,t,a){const n=e.getDay(),r=n===0?7:n;switch(t){case"i":return String(r);case"ii":return S(r,t.length);case"io":return a.ordinalNumber(r,{unit:"day"});case"iii":return a.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return a.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return a.day(n,{width:"short",context:"formatting"});case"iiii":default:return a.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,a){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return a.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return a.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return a.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return a.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,a){const n=e.getHours();let r;switch(n===12?r=he.noon:n===0?r=he.midnight:r=n/12>=1?"pm":"am",t){case"b":case"bb":return a.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return a.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return a.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return a.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(e,t,a){const n=e.getHours();let r;switch(n>=17?r=he.evening:n>=12?r=he.afternoon:n>=4?r=he.morning:r=he.night,t){case"B":case"BB":case"BBB":return a.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return a.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return a.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(e,t,a){if(t==="ho"){let n=e.getHours()%12;return n===0&&(n=12),a.ordinalNumber(n,{unit:"hour"})}return ae.h(e,t)},H:function(e,t,a){return t==="Ho"?a.ordinalNumber(e.getHours(),{unit:"hour"}):ae.H(e,t)},K:function(e,t,a){const n=e.getHours()%12;return t==="Ko"?a.ordinalNumber(n,{unit:"hour"}):S(n,t.length)},k:function(e,t,a){let n=e.getHours();return n===0&&(n=24),t==="ko"?a.ordinalNumber(n,{unit:"hour"}):S(n,t.length)},m:function(e,t,a){return t==="mo"?a.ordinalNumber(e.getMinutes(),{unit:"minute"}):ae.m(e,t)},s:function(e,t,a){return t==="so"?a.ordinalNumber(e.getSeconds(),{unit:"second"}):ae.s(e,t)},S:function(e,t){return ae.S(e,t)},X:function(e,t,a){const n=e.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return Ft(n);case"XXXX":case"XX":return se(n);case"XXXXX":case"XXX":default:return se(n,":")}},x:function(e,t,a){const n=e.getTimezoneOffset();switch(t){case"x":return Ft(n);case"xxxx":case"xx":return se(n);case"xxxxx":case"xxx":default:return se(n,":")}},O:function(e,t,a){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+It(n,":");case"OOOO":default:return"GMT"+se(n,":")}},z:function(e,t,a){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+It(n,":");case"zzzz":default:return"GMT"+se(n,":")}},t:function(e,t,a){const n=Math.trunc(+e/1e3);return S(n,t.length)},T:function(e,t,a){return S(+e,t.length)}};function It(e,t=""){const a=e>0?"-":"+",n=Math.abs(e),r=Math.trunc(n/60),i=n%60;return i===0?a+String(r):a+String(r)+t+S(i,2)}function Ft(e,t){return e%60===0?(e>0?"-":"+")+S(Math.abs(e)/60,2):se(e,t)}function se(e,t=""){const a=e>0?"-":"+",n=Math.abs(e),r=S(Math.trunc(n/60),2),i=S(n%60,2);return a+r+t+i}const Et=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},na=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},yr=(e,t)=>{const a=e.match(/(P+)(p+)?/)||[],n=a[1],r=a[2];if(!r)return Et(e,t);let i;switch(n){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",Et(n,t)).replace("{{time}}",na(r,t))},br={p:na,P:yr},wr=/^D+$/,pr=/^Y+$/,xr=["D","DD","YY","YYYY"];function Pr(e){return wr.test(e)}function kr(e){return pr.test(e)}function Dr(e,t,a){const n=Sr(e,t,a);if(console.warn(n),xr.includes(e))throw new RangeError(n)}function Sr(e,t,a){const n=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${a}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const _r=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Tr=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Or=/^'([^]*?)'?$/,Mr=/''/g,Cr=/[a-zA-Z]/;function Vr(e,t,a){var f,m,h,w;const n=Ee(),r=n.locale??ta,i=n.firstWeekContainsDate??((m=(f=n.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??1,o=n.weekStartsOn??((w=(h=n.locale)==null?void 0:h.options)==null?void 0:w.weekStartsOn)??0,s=I(e,a==null?void 0:a.in);if(!_n(s))throw new RangeError("Invalid time value");let l=t.match(Tr).map(d=>{const y=d[0];if(y==="p"||y==="P"){const v=br[y];return v(d,r.formatLong)}return d}).join("").match(_r).map(d=>{if(d==="''")return{isToken:!1,value:"'"};const y=d[0];if(y==="'")return{isToken:!1,value:Ir(d)};if(Vt[y])return{isToken:!0,value:d};if(y.match(Cr))throw new RangeError("Format string contains an unescaped latin alphabet character `"+y+"`");return{isToken:!1,value:d}});r.localize.preprocessor&&(l=r.localize.preprocessor(s,l));const u={firstWeekContainsDate:i,weekStartsOn:o,locale:r};return l.map(d=>{if(!d.isToken)return d.value;const y=d.value;(kr(y)||Pr(y))&&Dr(y,t,String(e));const v=Vt[y[0]];return v(s,y,r.localize,u)}).join("")}function Ir(e){const t=e.match(Or);return t?t[1].replace(Mr,"'"):e}function Fr(e,t,a){const n=Ee(),r=(a==null?void 0:a.locale)??n.locale??ta,i=2520,o=qe(e,t);if(isNaN(o))throw new RangeError("Invalid time value");const s=Object.assign({},a,{addSuffix:a==null?void 0:a.addSuffix,comparison:o}),[l,u]=Be(a==null?void 0:a.in,...o>0?[t,e]:[e,t]),f=En(u,l),m=(Xe(u)-Xe(l))/1e3,h=Math.round((f-m)/60);let w;if(h<2)return a!=null&&a.includeSeconds?f<5?r.formatDistance("lessThanXSeconds",5,s):f<10?r.formatDistance("lessThanXSeconds",10,s):f<20?r.formatDistance("lessThanXSeconds",20,s):f<40?r.formatDistance("halfAMinute",0,s):f<60?r.formatDistance("lessThanXMinutes",1,s):r.formatDistance("xMinutes",1,s):h===0?r.formatDistance("lessThanXMinutes",1,s):r.formatDistance("xMinutes",h,s);if(h<45)return r.formatDistance("xMinutes",h,s);if(h<90)return r.formatDistance("aboutXHours",1,s);if(h<Ot){const d=Math.round(h/60);return r.formatDistance("aboutXHours",d,s)}else{if(h<i)return r.formatDistance("xDays",1,s);if(h<Ye){const d=Math.round(h/Ot);return r.formatDistance("xDays",d,s)}else if(h<Ye*2)return w=Math.round(h/Ye),r.formatDistance("aboutXMonths",w,s)}if(w=Fn(u,l),w<12){const d=Math.round(h/Ye);return r.formatDistance("xMonths",d,s)}else{const d=w%12,y=Math.trunc(w/12);return d<3?r.formatDistance("aboutXYears",y,s):d<9?r.formatDistance("overXYears",y,s):r.formatDistance("almostXYears",y+1,s)}}function Er(e,t,a){const[n,r]=Be(a==null?void 0:a.in,e,t);return+de(n,a)==+de(r,a)}const Br={lessThanXSeconds:{one:"不到 1 秒",other:"不到 {{count}} 秒"},xSeconds:{one:"1 秒",other:"{{count}} 秒"},halfAMinute:"半分钟",lessThanXMinutes:{one:"不到 1 分钟",other:"不到 {{count}} 分钟"},xMinutes:{one:"1 分钟",other:"{{count}} 分钟"},xHours:{one:"1 小时",other:"{{count}} 小时"},aboutXHours:{one:"大约 1 小时",other:"大约 {{count}} 小时"},xDays:{one:"1 天",other:"{{count}} 天"},aboutXWeeks:{one:"大约 1 个星期",other:"大约 {{count}} 个星期"},xWeeks:{one:"1 个星期",other:"{{count}} 个星期"},aboutXMonths:{one:"大约 1 个月",other:"大约 {{count}} 个月"},xMonths:{one:"1 个月",other:"{{count}} 个月"},aboutXYears:{one:"大约 1 年",other:"大约 {{count}} 年"},xYears:{one:"1 年",other:"{{count}} 年"},overXYears:{one:"超过 1 年",other:"超过 {{count}} 年"},almostXYears:{one:"将近 1 年",other:"将近 {{count}} 年"}},Wr=(e,t,a)=>{let n;const r=Br[e];return typeof r=="string"?n=r:t===1?n=r.one:n=r.other.replace("{{count}}",String(t)),a!=null&&a.addSuffix?a.comparison&&a.comparison>0?n+"内":n+"前":n},Ar={full:"y'年'M'月'd'日' EEEE",long:"y'年'M'月'd'日'",medium:"yyyy-MM-dd",short:"yy-MM-dd"},Ur={full:"zzzz a h:mm:ss",long:"z a h:mm:ss",medium:"a h:mm:ss",short:"a h:mm"},Rr={full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},Lr={date:be({formats:Ar,defaultWidth:"full"}),time:be({formats:Ur,defaultWidth:"full"}),dateTime:be({formats:Rr,defaultWidth:"full"})};function Bt(e,t,a){const n="eeee p";return Er(e,t,a)?n:e.getTime()>t.getTime()?"'下个'"+n:"'上个'"+n}const Nr={lastWeek:Bt,yesterday:"'昨天' p",today:"'今天' p",tomorrow:"'明天' p",nextWeek:Bt,other:"PP p"},Hr=(e,t,a,n)=>{const r=Nr[e];return typeof r=="function"?r(t,a,n):r},Yr={narrow:["前","公元"],abbreviated:["前","公元"],wide:["公元前","公元"]},jr={narrow:["1","2","3","4"],abbreviated:["第一季","第二季","第三季","第四季"],wide:["第一季度","第二季度","第三季度","第四季度"]},$r={narrow:["一","二","三","四","五","六","七","八","九","十","十一","十二"],abbreviated:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],wide:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]},qr={narrow:["日","一","二","三","四","五","六"],short:["日","一","二","三","四","五","六"],abbreviated:["周日","周一","周二","周三","周四","周五","周六"],wide:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"]},zr={narrow:{am:"上",pm:"下",midnight:"凌晨",noon:"午",morning:"早",afternoon:"下午",evening:"晚",night:"夜"},abbreviated:{am:"上午",pm:"下午",midnight:"凌晨",noon:"中午",morning:"早晨",afternoon:"中午",evening:"晚上",night:"夜间"},wide:{am:"上午",pm:"下午",midnight:"凌晨",noon:"中午",morning:"早晨",afternoon:"中午",evening:"晚上",night:"夜间"}},Gr={narrow:{am:"上",pm:"下",midnight:"凌晨",noon:"午",morning:"早",afternoon:"下午",evening:"晚",night:"夜"},abbreviated:{am:"上午",pm:"下午",midnight:"凌晨",noon:"中午",morning:"早晨",afternoon:"中午",evening:"晚上",night:"夜间"},wide:{am:"上午",pm:"下午",midnight:"凌晨",noon:"中午",morning:"早晨",afternoon:"中午",evening:"晚上",night:"夜间"}},Xr=(e,t)=>{const a=Number(e);switch(t==null?void 0:t.unit){case"date":return a.toString()+"日";case"hour":return a.toString()+"时";case"minute":return a.toString()+"分";case"second":return a.toString()+"秒";default:return"第 "+a.toString()}},Qr={ordinalNumber:Xr,era:$({values:Yr,defaultWidth:"wide"}),quarter:$({values:jr,defaultWidth:"wide",argumentCallback:e=>e-1}),month:$({values:$r,defaultWidth:"wide"}),day:$({values:qr,defaultWidth:"wide"}),dayPeriod:$({values:zr,defaultWidth:"wide",formattingValues:Gr,defaultFormattingWidth:"wide"})},Kr=/^(第\s*)?\d+(日|时|分|秒)?/i,Jr=/\d+/i,Zr={narrow:/^(前)/i,abbreviated:/^(前)/i,wide:/^(公元前|公元)/i},ei={any:[/^(前)/i,/^(公元)/i]},ti={narrow:/^[1234]/i,abbreviated:/^第[一二三四]刻/i,wide:/^第[一二三四]刻钟/i},ai={any:[/(1|一)/i,/(2|二)/i,/(3|三)/i,/(4|四)/i]},ni={narrow:/^(一|二|三|四|五|六|七|八|九|十[二一])/i,abbreviated:/^(一|二|三|四|五|六|七|八|九|十[二一]|\d|1[12])月/i,wide:/^(一|二|三|四|五|六|七|八|九|十[二一])月/i},ri={narrow:[/^一/i,/^二/i,/^三/i,/^四/i,/^五/i,/^六/i,/^七/i,/^八/i,/^九/i,/^十(?!(一|二))/i,/^十一/i,/^十二/i],any:[/^一|1/i,/^二|2/i,/^三|3/i,/^四|4/i,/^五|5/i,/^六|6/i,/^七|7/i,/^八|8/i,/^九|9/i,/^十(?!(一|二))|10/i,/^十一|11/i,/^十二|12/i]},ii={narrow:/^[一二三四五六日]/i,short:/^[一二三四五六日]/i,abbreviated:/^周[一二三四五六日]/i,wide:/^星期[一二三四五六日]/i},oi={any:[/日/i,/一/i,/二/i,/三/i,/四/i,/五/i,/六/i]},si={any:/^(上午?|下午?|午夜|[中正]午|早上?|下午|晚上?|凌晨|)/i},li={any:{am:/^上午?/i,pm:/^下午?/i,midnight:/^午夜/i,noon:/^[中正]午/i,morning:/^早上/i,afternoon:/^下午/i,evening:/^晚上?/i,night:/^凌晨/i}},ui={ordinalNumber:ea({matchPattern:Kr,parsePattern:Jr,valueCallback:e=>parseInt(e,10)}),era:q({matchPatterns:Zr,defaultMatchWidth:"wide",parsePatterns:ei,defaultParseWidth:"any"}),quarter:q({matchPatterns:ti,defaultMatchWidth:"wide",parsePatterns:ai,defaultParseWidth:"any",valueCallback:e=>e+1}),month:q({matchPatterns:ni,defaultMatchWidth:"wide",parsePatterns:ri,defaultParseWidth:"any"}),day:q({matchPatterns:ii,defaultMatchWidth:"wide",parsePatterns:oi,defaultParseWidth:"any"}),dayPeriod:q({matchPatterns:si,defaultMatchWidth:"any",parsePatterns:li,defaultParseWidth:"any"})},di={code:"zh-CN",formatDistance:Wr,formatLong:Lr,formatRelative:Hr,localize:Qr,match:ui,options:{weekStartsOn:1,firstWeekContainsDate:4}},ci=U({page:{type:[Number,String],default:1},itemsPerPage:{type:[Number,String],default:10}},"DataTable-paginate"),ra=Symbol.for("vuetify:data-table-pagination");function fi(e){const t=we(e,"page",void 0,n=>Number(n??1)),a=we(e,"itemsPerPage",void 0,n=>Number(n??10));return{page:t,itemsPerPage:a}}function mi(e){const{page:t,itemsPerPage:a,itemsLength:n}=e,r=C(()=>a.value===-1?0:a.value*(t.value-1)),i=C(()=>a.value===-1?n.value:Math.min(n.value,r.value+a.value)),o=C(()=>a.value===-1||n.value===0?1:Math.ceil(n.value/a.value));gt([t,o],()=>{t.value>o.value&&(t.value=o.value)});function s(h){a.value=h,t.value=1}function l(){t.value=ut(t.value+1,1,o.value)}function u(){t.value=ut(t.value-1,1,o.value)}function f(h){t.value=ut(h,1,o.value)}const m={page:t,itemsPerPage:a,startIndex:r,stopIndex:i,pageCount:o,itemsLength:n,nextPage:l,prevPage:u,setPage:f,setItemsPerPage:s};return Pe(ra,m),m}function hi(){const e=xe(ra);if(!e)throw new Error("Missing pagination!");return e}function gi(e){const t=$t("usePaginatedItems"),{items:a,startIndex:n,stopIndex:r,itemsPerPage:i}=e,o=C(()=>i.value<=0?a.value:a.value.slice(n.value,r.value));return gt(o,s=>{t.emit("update:currentItems",s)},{immediate:!0}),{paginatedItems:o}}const ia=U({prevIcon:{type:ve,default:"$prev"},nextIcon:{type:ve,default:"$next"},firstIcon:{type:ve,default:"$first"},lastIcon:{type:ve,default:"$last"},itemsPerPageText:{type:String,default:"$vuetify.dataFooter.itemsPerPageText"},pageText:{type:String,default:"$vuetify.dataFooter.pageText"},firstPageLabel:{type:String,default:"$vuetify.dataFooter.firstPage"},prevPageLabel:{type:String,default:"$vuetify.dataFooter.prevPage"},nextPageLabel:{type:String,default:"$vuetify.dataFooter.nextPage"},lastPageLabel:{type:String,default:"$vuetify.dataFooter.lastPage"},itemsPerPageOptions:{type:Array,default:()=>[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}]},showCurrentPage:Boolean},"VDataTableFooter"),Wt=ke()({name:"VDataTableFooter",props:ia(),setup(e,t){let{slots:a}=t;const{t:n}=Ze(),{page:r,pageCount:i,startIndex:o,stopIndex:s,itemsLength:l,itemsPerPage:u,setItemsPerPage:f}=hi(),m=C(()=>e.itemsPerPageOptions.map(h=>typeof h=="number"?{value:h,title:h===-1?n("$vuetify.dataFooter.itemsPerPageAll"):String(h)}:{...h,title:isNaN(Number(h.title))?n(h.title):h.title}));return Fe(()=>{var w;const h=St.filterProps(e);return p("div",{class:"v-data-table-footer"},[(w=a.prepend)==null?void 0:w.call(a),p("div",{class:"v-data-table-footer__items-per-page"},[p("span",{"aria-label":n(e.itemsPerPageText)},[n(e.itemsPerPageText)]),c(xt,{items:m.value,modelValue:u.value,"onUpdate:modelValue":d=>f(Number(d)),density:"compact",variant:"outlined","hide-details":!0},null)]),p("div",{class:"v-data-table-footer__info"},[p("div",null,[n(e.pageText,l.value?o.value+1:0,s.value,l.value)])]),p("div",{class:"v-data-table-footer__pagination"},[c(St,K({modelValue:r.value,"onUpdate:modelValue":d=>r.value=d,density:"comfortable","first-aria-label":e.firstPageLabel,"last-aria-label":e.lastPageLabel,length:i.value,"next-aria-label":e.nextPageLabel,"previous-aria-label":e.prevPageLabel,rounded:!0,"show-first-last-page":!0,"total-visible":e.showCurrentPage?1:0,variant:"plain"},h),null)])])}),{}}}),Qe=Fa({align:{type:String,default:"start"},fixed:Boolean,fixedOffset:[Number,String],height:[Number,String],lastFixed:Boolean,noPadding:Boolean,tag:String,width:[Number,String],maxWidth:[Number,String],nowrap:Boolean},(e,t)=>{let{slots:a}=t;const n=e.tag??"td";return c(n,{tabindex:"0",class:Ve(["v-data-table__td",{"v-data-table-column--fixed":e.fixed,"v-data-table-column--last-fixed":e.lastFixed,"v-data-table-column--no-padding":e.noPadding,"v-data-table-column--nowrap":e.nowrap},`v-data-table-column--align-${e.align}`]),style:{height:ne(e.height),width:ne(e.width),maxWidth:ne(e.maxWidth),left:ne(e.fixedOffset||null)}},{default:()=>{var r;return[(r=a.default)==null?void 0:r.call(a)]}})}),vi=U({headers:Array},"DataTable-header"),oa=Symbol.for("vuetify:data-table-headers"),sa={title:"",sortable:!1},yi={...sa,width:48};function bi(){const t=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).map(a=>({element:a,priority:0}));return{enqueue:(a,n)=>{let r=!1;for(let i=0;i<t.length;i++)if(t[i].priority>n){t.splice(i,0,{element:a,priority:n}),r=!0;break}r||t.push({element:a,priority:n})},size:()=>t.length,count:()=>{let a=0;if(!t.length)return 0;const n=Math.floor(t[0].priority);for(let r=0;r<t.length;r++)Math.floor(t[r].priority)===n&&(a+=1);return a},dequeue:()=>t.shift()}}function mt(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];if(!e.children)t.push(e);else for(const a of e.children)mt(a,t);return t}function la(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new Set;for(const a of e)a.key&&t.add(a.key),a.children&&la(a.children,t);return t}function wi(e){if(e.key){if(e.key==="data-table-group")return sa;if(["data-table-expand","data-table-select"].includes(e.key))return yi}}function kt(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.children?Math.max(t,...e.children.map(a=>kt(a,t+1))):t}function pi(e){let t=!1;function a(i){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(i)if(o&&(i.fixed=!0),i.fixed)if(i.children)for(let s=i.children.length-1;s>=0;s--)a(i.children[s],!0);else t?isNaN(Number(i.width))?Wa(`Multiple fixed columns should have a static width (key: ${i.key})`):i.minWidth=Math.max(Number(i.width)||0,Number(i.minWidth)||0):i.lastFixed=!0,t=!0;else if(i.children)for(let s=i.children.length-1;s>=0;s--)a(i.children[s]);else t=!1}for(let i=e.length-1;i>=0;i--)a(e[i]);function n(i){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!i)return o;if(i.children){i.fixedOffset=o;for(const s of i.children)o=n(s,o)}else i.fixed&&(i.fixedOffset=o,o+=parseFloat(i.width||"0")||0);return o}let r=0;for(const i of e)r=n(i,r)}function xi(e,t){const a=[];let n=0;const r=bi(e);for(;r.size()>0;){let o=r.count();const s=[];let l=1;for(;o>0;){const{element:u,priority:f}=r.dequeue(),m=t-n-kt(u);if(s.push({...u,rowspan:m??1,colspan:u.children?mt(u).length:1}),u.children)for(const h of u.children){const w=f%1+l/Math.pow(10,n+2);r.enqueue(h,n+m+w)}l+=1,o-=1}n+=1,a.push(s)}return{columns:e.map(o=>mt(o)).flat(),headers:a}}function ua(e){const t=[];for(const a of e){const n={...wi(a),...a},r=n.key??(typeof n.value=="string"?n.value:null),i=n.value??r??null,o={...n,key:r,value:i,sortable:n.sortable??(n.key!=null||!!n.sort),children:n.children?ua(n.children):void 0};t.push(o)}return t}function Pi(e,t){const a=ge([]),n=ge([]),r=ge({}),i=ge({}),o=ge({});Ea(()=>{var y,v,_;const u=(e.headers||Object.keys(e.items[0]??{}).map(g=>({key:g,title:Ba(g)}))).slice(),f=la(u);(y=t==null?void 0:t.groupBy)!=null&&y.value.length&&!f.has("data-table-group")&&u.unshift({key:"data-table-group",title:"Group"}),(v=t==null?void 0:t.showSelect)!=null&&v.value&&!f.has("data-table-select")&&u.unshift({key:"data-table-select"}),(_=t==null?void 0:t.showExpand)!=null&&_.value&&!f.has("data-table-expand")&&u.push({key:"data-table-expand"});const m=ua(u);pi(m);const h=Math.max(...m.map(g=>kt(g)))+1,w=xi(m,h);a.value=w.headers,n.value=w.columns;const d=w.headers.flat(1);for(const g of d)g.key&&(g.sortable&&(g.sort&&(r.value[g.key]=g.sort),g.sortRaw&&(i.value[g.key]=g.sortRaw)),g.filter&&(o.value[g.key]=g.filter))});const s={headers:a,columns:n,sortFunctions:r,sortRawFunctions:i,filterFunctions:o};return Pe(oa,s),s}function tt(){const e=xe(oa);if(!e)throw new Error("Missing headers!");return e}const ki={showSelectAll:!1,allSelected:()=>[],select:e=>{var n;let{items:t,value:a}=e;return new Set(a?[(n=t[0])==null?void 0:n.value]:[])},selectAll:e=>{let{selected:t}=e;return t}},da={showSelectAll:!0,allSelected:e=>{let{currentPage:t}=e;return t},select:e=>{let{items:t,value:a,selected:n}=e;for(const r of t)a?n.add(r.value):n.delete(r.value);return n},selectAll:e=>{let{value:t,currentPage:a,selected:n}=e;return da.select({items:a,value:t,selected:n})}},ca={showSelectAll:!0,allSelected:e=>{let{allItems:t}=e;return t},select:e=>{let{items:t,value:a,selected:n}=e;for(const r of t)a?n.add(r.value):n.delete(r.value);return n},selectAll:e=>{let{value:t,allItems:a,selected:n}=e;return ca.select({items:a,value:t,selected:n})}},Di=U({showSelect:Boolean,selectStrategy:{type:[String,Object],default:"page"},modelValue:{type:Array,default:()=>[]},valueComparator:{type:Function,default:qt}},"DataTable-select"),fa=Symbol.for("vuetify:data-table-selection");function Si(e,t){let{allItems:a,currentPage:n}=t;const r=we(e,"modelValue",e.modelValue,g=>new Set(dt(g).map(k=>{var O;return((O=a.value.find(D=>e.valueComparator(k,D.value)))==null?void 0:O.value)??k})),g=>[...g.values()]),i=C(()=>a.value.filter(g=>g.selectable)),o=C(()=>n.value.filter(g=>g.selectable)),s=C(()=>{if(typeof e.selectStrategy=="object")return e.selectStrategy;switch(e.selectStrategy){case"single":return ki;case"all":return ca;case"page":default:return da}}),l=Aa(null);function u(g){return dt(g).every(k=>r.value.has(k.value))}function f(g){return dt(g).some(k=>r.value.has(k.value))}function m(g,k){const O=s.value.select({items:g,value:k,selected:new Set(r.value)});r.value=O}function h(g,k,O){const D=[];if(k=k??n.value.findIndex(F=>F.value===g.value),e.selectStrategy!=="single"&&(O!=null&&O.shiftKey)&&l.value!==null){const[F,W]=[l.value,k].sort((T,P)=>T-P);D.push(...n.value.slice(F,W+1).filter(T=>T.selectable))}else D.push(g),l.value=k;m(D,!u([g]))}function w(g){const k=s.value.selectAll({value:g,allItems:i.value,currentPage:o.value,selected:new Set(r.value)});r.value=k}const d=C(()=>r.value.size>0),y=C(()=>{const g=s.value.allSelected({allItems:i.value,currentPage:o.value});return!!g.length&&u(g)}),v=H(()=>s.value.showSelectAll),_={toggleSelect:h,select:m,selectAll:w,isSelected:u,isSomeSelected:f,someSelected:d,allSelected:y,showSelectAll:v,lastSelectedIndex:l,selectStrategy:s};return Pe(fa,_),_}function at(){const e=xe(fa);if(!e)throw new Error("Missing selection!");return e}const _i=U({sortBy:{type:Array,default:()=>[]},customKeySort:Object,multiSort:Boolean,mustSort:Boolean},"DataTable-sort"),ma=Symbol.for("vuetify:data-table-sort");function Ti(e){const t=we(e,"sortBy"),a=H(()=>e.mustSort),n=H(()=>e.multiSort);return{sortBy:t,mustSort:a,multiSort:n}}function Oi(e){const{sortBy:t,mustSort:a,multiSort:n,page:r}=e,i=l=>{if(l.key==null)return;let u=t.value.map(m=>({...m}))??[];const f=u.find(m=>m.key===l.key);f?f.order==="desc"?a.value&&u.length===1?f.order="asc":u=u.filter(m=>m.key!==l.key):f.order="desc":n.value?u.push({key:l.key,order:"asc"}):u=[{key:l.key,order:"asc"}],t.value=u,r&&(r.value=1)};function o(l){return!!t.value.find(u=>u.key===l.key)}const s={sortBy:t,toggleSort:i,isSorted:o};return Pe(ma,s),s}function ha(){const e=xe(ma);if(!e)throw new Error("Missing sort!");return e}function Mi(e,t,a,n){const r=Ze();return{sortedItems:C(()=>{var o,s;return a.value.length?Ci(t.value,a.value,r.current.value,{transform:n==null?void 0:n.transform,sortFunctions:{...e.customKeySort,...(o=n==null?void 0:n.sortFunctions)==null?void 0:o.value},sortRawFunctions:(s=n==null?void 0:n.sortRawFunctions)==null?void 0:s.value}):t.value})}}function Ci(e,t,a,n){const r=new Intl.Collator(a,{sensitivity:"accent",usage:"sort"});return e.map(o=>[o,n!=null&&n.transform?n.transform(o):o]).sort((o,s)=>{var l,u;for(let f=0;f<t.length;f++){let m=!1;const h=t[f].key,w=t[f].order??"asc";if(w===!1)continue;let d=ze(o[1],h),y=ze(s[1],h),v=o[0].raw,_=s[0].raw;if(w==="desc"&&([d,y]=[y,d],[v,_]=[_,v]),(l=n==null?void 0:n.sortRawFunctions)!=null&&l[h]){const g=n.sortRawFunctions[h](v,_);if(g==null)continue;if(m=!0,g)return g}if((u=n==null?void 0:n.sortFunctions)!=null&&u[h]){const g=n.sortFunctions[h](d,y);if(g==null)continue;if(m=!0,g)return g}if(!m){if(d instanceof Date&&y instanceof Date)return d.getTime()-y.getTime();if([d,y]=[d,y].map(g=>g!=null?g.toString().toLocaleLowerCase():g),d!==y)return Ne(d)&&Ne(y)?0:Ne(d)?-1:Ne(y)?1:!isNaN(d)&&!isNaN(y)?Number(d)-Number(y):r.compare(d,y)}}return 0}).map(o=>{let[s]=o;return s})}const ga=U({color:String,disableSort:Boolean,fixedHeader:Boolean,multiSort:Boolean,sortAscIcon:{type:ve,default:"$sortAsc"},sortDescIcon:{type:ve,default:"$sortDesc"},headerProps:{type:Object},sticky:Boolean,...yt(),...Na()},"VDataTableHeaders"),At=ke()({name:"VDataTableHeaders",props:ga(),setup(e,t){let{slots:a}=t;const{t:n}=Ze(),{toggleSort:r,sortBy:i,isSorted:o}=ha(),{someSelected:s,allSelected:l,selectAll:u,showSelectAll:f}=at(),{columns:m,headers:h}=tt(),{loaderClasses:w}=Ua(e);function d(P,x){if(!(!(e.sticky||e.fixedHeader)&&!P.fixed))return{position:"sticky",left:P.fixed?ne(P.fixedOffset):void 0,top:e.sticky||e.fixedHeader?`calc(var(--v-table-header-height) * ${x})`:void 0}}function y(P,x){P.key==="Enter"&&!e.disableSort&&r(x)}function v(P){const x=i.value.find(M=>M.key===P.key);return x?x.order==="asc"?e.sortAscIcon:e.sortDescIcon:e.sortAscIcon}const{backgroundColorClasses:_,backgroundColorStyles:g}=Ra(()=>e.color),{displayClasses:k,mobile:O}=vt(e),D=C(()=>({headers:h.value,columns:m.value,toggleSort:r,isSorted:o,sortBy:i.value,someSelected:s.value,allSelected:l.value,selectAll:u,getSortIcon:v})),F=C(()=>["v-data-table__th",{"v-data-table__th--sticky":e.sticky||e.fixedHeader},k.value,w.value]),W=P=>{let{column:x,x:M,y:E}=P;const L=x.key==="data-table-select"||x.key==="data-table-expand",J=K(e.headerProps??{},x.headerProps??{});return c(Qe,K({tag:"th",align:x.align,class:[{"v-data-table__th--sortable":x.sortable&&!e.disableSort,"v-data-table__th--sorted":o(x),"v-data-table__th--fixed":x.fixed},...F.value],style:{width:ne(x.width),minWidth:ne(x.minWidth),maxWidth:ne(x.maxWidth),...d(x,E)},colspan:x.colspan,rowspan:x.rowspan,onClick:x.sortable?()=>r(x):void 0,fixed:x.fixed,nowrap:x.nowrap,lastFixed:x.lastFixed,noPadding:L},J,{onKeydown:G=>x.sortable&&y(G,x)}),{default:()=>{var Q;const G=`header.${x.key}`,X={column:x,selectAll:u,isSorted:o,toggleSort:r,sortBy:i.value,someSelected:s.value,allSelected:l.value,getSortIcon:v};return a[G]?a[G](X):x.key==="data-table-select"?((Q=a["header.data-table-select"])==null?void 0:Q.call(a,X))??(f.value&&c(Pt,{modelValue:l.value,indeterminate:s.value&&!l.value,"onUpdate:modelValue":u},null)):p("div",{class:"v-data-table-header__content"},[p("span",null,[x.title]),x.sortable&&!e.disableSort&&c(pe,{key:"icon",class:"v-data-table-header__sort-icon",icon:v(x)},null),e.multiSort&&o(x)&&p("div",{key:"badge",class:Ve(["v-data-table-header__sort-badge",..._.value]),style:Ha(g.value)},[i.value.findIndex(fe=>fe.key===x.key)+1])])}})},T=()=>{const P=C(()=>m.value.filter(M=>(M==null?void 0:M.sortable)&&!e.disableSort)),x=C(()=>{if(m.value.find(E=>E.key==="data-table-select")!=null)return l.value?"$checkboxOn":s.value?"$checkboxIndeterminate":"$checkboxOff"});return c(Qe,K({tag:"th",class:[...F.value],colspan:h.value.length+1},e.headerProps),{default:()=>[p("div",{class:"v-data-table-header__content"},[c(xt,{chips:!0,class:"v-data-table__td-sort-select",clearable:!0,density:"default",items:P.value,label:n("$vuetify.dataTable.sortBy"),multiple:e.multiSort,variant:"underlined","onClick:clear":()=>i.value=[],appendIcon:x.value,"onClick:append":()=>u(!l.value)},{...a,chip:M=>{var E;return c(Ie,{onClick:(E=M.item.raw)!=null&&E.sortable?()=>r(M.item.raw):void 0,onMousedown:L=>{L.preventDefault(),L.stopPropagation()}},{default:()=>[M.item.title,c(pe,{class:Ve(["v-data-table__td-sort-icon",o(M.item.raw)&&"v-data-table__td-sort-icon-active"]),icon:v(M.item.raw),size:"small"},null)]})}})])]})};Fe(()=>O.value?p("tr",null,[c(T,null,null)]):p(ue,null,[a.headers?a.headers(D.value):h.value.map((P,x)=>p("tr",null,[P.map((M,E)=>c(W,{column:M,x:E,y:x},null))])),e.loading&&p("tr",{class:"v-data-table-progress"},[p("th",{colspan:m.value.length},[c(La,{name:"v-data-table-progress",absolute:!0,active:!0,color:typeof e.loading=="boolean"?void 0:e.loading,indeterminate:!0},{default:a.loader})])])]))}}),Vi=U({groupBy:{type:Array,default:()=>[]}},"DataTable-group"),va=Symbol.for("vuetify:data-table-group");function Ii(e){return{groupBy:we(e,"groupBy")}}function Fi(e){const{disableSort:t,groupBy:a,sortBy:n}=e,r=ge(new Set),i=C(()=>a.value.map(f=>({...f,order:f.order??!1})).concat(t!=null&&t.value?[]:n.value));function o(f){return r.value.has(f.id)}function s(f){const m=new Set(r.value);o(f)?m.delete(f.id):m.add(f.id),r.value=m}function l(f){function m(h){const w=[];for(const d of h.items)"type"in d&&d.type==="group"?w.push(...m(d)):w.push(d);return[...new Set(w)]}return m({items:f})}const u={sortByWithGroups:i,toggleGroup:s,opened:r,groupBy:a,extractRows:l,isGroupOpen:o};return Pe(va,u),u}function ya(){const e=xe(va);if(!e)throw new Error("Missing group!");return e}function Ei(e,t){if(!e.length)return[];const a=new Map;for(const n of e){const r=ze(n.raw,t);a.has(r)||a.set(r,[]),a.get(r).push(n)}return a}function ba(e,t){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"root";if(!t.length)return[];const r=Ei(e,t[0]),i=[],o=t.slice(1);return r.forEach((s,l)=>{const u=t[0],f=`${n}_${u}_${l}`;i.push({depth:a,id:f,key:u,value:l,items:o.length?ba(s,o,a+1,f):s,type:"group"})}),i}function wa(e,t){const a=[];for(const n of e)"type"in n&&n.type==="group"?(n.value!=null&&a.push(n),(t.has(n.id)||n.value==null)&&a.push(...wa(n.items,t))):a.push(n);return a}function Bi(e,t,a){return{flatItems:C(()=>{if(!t.value.length)return e.value;const r=ba(e.value,t.value.map(i=>i.key));return wa(r,a.value)})}}const Wi=U({item:{type:Object,required:!0}},"VDataTableGroupHeaderRow"),Ai=ke()({name:"VDataTableGroupHeaderRow",props:Wi(),setup(e,t){let{slots:a}=t;const{isGroupOpen:n,toggleGroup:r,extractRows:i}=ya(),{isSelected:o,isSomeSelected:s,select:l}=at(),{columns:u}=tt(),f=C(()=>i([e.item]));return()=>p("tr",{class:"v-data-table-group-header-row",style:{"--v-data-table-group-header-row-depth":e.item.depth}},[u.value.map(m=>{var h,w;if(m.key==="data-table-group"){const d=n(e.item)?"$expand":"$next",y=()=>r(e.item);return((h=a["data-table-group"])==null?void 0:h.call(a,{item:e.item,count:f.value.length,props:{icon:d,onClick:y}}))??c(Qe,{class:"v-data-table-group-header-row__column"},{default:()=>[c(z,{size:"small",variant:"text",icon:d,onClick:y},null),p("span",null,[e.item.value]),p("span",null,[V("("),f.value.length,V(")")])]})}if(m.key==="data-table-select"){const d=o(f.value),y=s(f.value)&&!d,v=_=>l(f.value,_);return((w=a["data-table-select"])==null?void 0:w.call(a,{props:{modelValue:d,indeterminate:y,"onUpdate:modelValue":v}}))??p("td",null,[c(Pt,{modelValue:d,indeterminate:y,"onUpdate:modelValue":v},null)])}return p("td",null,null)})])}}),Ui=U({expandOnClick:Boolean,showExpand:Boolean,expanded:{type:Array,default:()=>[]}},"DataTable-expand"),pa=Symbol.for("vuetify:datatable:expanded");function Ri(e){const t=H(()=>e.expandOnClick),a=we(e,"expanded",e.expanded,s=>new Set(s),s=>[...s.values()]);function n(s,l){const u=new Set(a.value);l?u.add(s.value):u.delete(s.value),a.value=u}function r(s){return a.value.has(s.value)}function i(s){n(s,!r(s))}const o={expand:n,expanded:a,expandOnClick:t,isExpanded:r,toggleExpand:i};return Pe(pa,o),o}function xa(){const e=xe(pa);if(!e)throw new Error("foo");return e}const Li=U({index:Number,item:Object,cellProps:[Object,Function],onClick:ct(),onContextmenu:ct(),onDblclick:ct(),...yt()},"VDataTableRow"),Ni=ke()({name:"VDataTableRow",props:Li(),setup(e,t){let{slots:a}=t;const{displayClasses:n,mobile:r}=vt(e,"v-data-table__tr"),{isSelected:i,toggleSelect:o,someSelected:s,allSelected:l,selectAll:u}=at(),{isExpanded:f,toggleExpand:m}=xa(),{toggleSort:h,sortBy:w,isSorted:d}=ha(),{columns:y}=tt();Fe(()=>p("tr",{class:Ve(["v-data-table__tr",{"v-data-table__tr--clickable":!!(e.onClick||e.onContextmenu||e.onDblclick)},n.value]),onClick:e.onClick,onContextmenu:e.onContextmenu,onDblclick:e.onDblclick},[e.item&&y.value.map((v,_)=>{const g=e.item,k=`item.${v.key}`,O=`header.${v.key}`,D={index:e.index,item:g.raw,internalItem:g,value:ze(g.columns,v.key),column:v,isSelected:i,toggleSelect:o,isExpanded:f,toggleExpand:m},F={column:v,selectAll:u,isSorted:d,toggleSort:h,sortBy:w.value,someSelected:s.value,allSelected:l.value,getSortIcon:()=>""},W=typeof e.cellProps=="function"?e.cellProps({index:D.index,item:D.item,internalItem:D.internalItem,value:D.value,column:v}):e.cellProps,T=typeof v.cellProps=="function"?v.cellProps({index:D.index,item:D.item,internalItem:D.internalItem,value:D.value}):v.cellProps;return c(Qe,K({align:v.align,class:{"v-data-table__td--expanded-row":v.key==="data-table-expand","v-data-table__td--select-row":v.key==="data-table-select"},fixed:v.fixed,fixedOffset:v.fixedOffset,lastFixed:v.lastFixed,maxWidth:r.value?void 0:v.maxWidth,noPadding:v.key==="data-table-select"||v.key==="data-table-expand",nowrap:v.nowrap,width:r.value?void 0:v.width},W,T),{default:()=>{var x,M,E,L;if(v.key==="data-table-select")return((x=a["item.data-table-select"])==null?void 0:x.call(a,{...D,props:{disabled:!g.selectable,modelValue:i([g]),onClick:le(()=>o(g),["stop"])}}))??c(Pt,{disabled:!g.selectable,modelValue:i([g]),onClick:le(J=>o(g,e.index,J),["stop"])},null);if(v.key==="data-table-expand")return((M=a["item.data-table-expand"])==null?void 0:M.call(a,{...D,props:{icon:f(g)?"$collapse":"$expand",size:"small",variant:"text",onClick:le(()=>m(g),["stop"])}}))??c(z,{icon:f(g)?"$collapse":"$expand",size:"small",variant:"text",onClick:le(()=>m(g),["stop"])},null);if(a[k]&&!r.value)return a[k](D);const P=Y(D.value);return r.value?p(ue,null,[p("div",{class:"v-data-table__td-title"},[((E=a[O])==null?void 0:E.call(a,F))??v.title]),p("div",{class:"v-data-table__td-value"},[((L=a[k])==null?void 0:L.call(a,D))??P])]):P}})})]))}}),Pa=U({loading:[Boolean,String],loadingText:{type:String,default:"$vuetify.dataIterator.loadingText"},hideNoData:Boolean,items:{type:Array,default:()=>[]},noDataText:{type:String,default:"$vuetify.noDataText"},rowProps:[Object,Function],cellProps:[Object,Function],...yt()},"VDataTableRows"),Ut=ke()({name:"VDataTableRows",inheritAttrs:!1,props:Pa(),setup(e,t){let{attrs:a,slots:n}=t;const{columns:r}=tt(),{expandOnClick:i,toggleExpand:o,isExpanded:s}=xa(),{isSelected:l,toggleSelect:u}=at(),{toggleGroup:f,isGroupOpen:m}=ya(),{t:h}=Ze(),{mobile:w}=vt(e);return Fe(()=>{var d,y;return e.loading&&(!e.items.length||n.loading)?p("tr",{class:"v-data-table-rows-loading",key:"loading"},[p("td",{colspan:r.value.length},[((d=n.loading)==null?void 0:d.call(n))??h(e.loadingText)])]):!e.loading&&!e.items.length&&!e.hideNoData?p("tr",{class:"v-data-table-rows-no-data",key:"no-data"},[p("td",{colspan:r.value.length},[((y=n["no-data"])==null?void 0:y.call(n))??h(e.noDataText)])]):p(ue,null,[e.items.map((v,_)=>{var O;if(v.type==="group"){const D={index:_,item:v,columns:r.value,isExpanded:s,toggleExpand:o,isSelected:l,toggleSelect:u,toggleGroup:f,isGroupOpen:m};return n["group-header"]?n["group-header"](D):c(Ai,K({key:`group-header_${v.id}`,item:v},Tt(a,":group-header",()=>D)),n)}const g={index:_,item:v.raw,internalItem:v,columns:r.value,isExpanded:s,toggleExpand:o,isSelected:l,toggleSelect:u},k={...g,props:K({key:`item_${v.key??v.index}`,onClick:i.value?()=>{o(v)}:void 0,index:_,item:v,cellProps:e.cellProps,mobile:w.value},Tt(a,":row",()=>g),typeof e.rowProps=="function"?e.rowProps({item:g.item,index:g.index,internalItem:g.internalItem}):e.rowProps)};return p(ue,{key:k.props.key},[n.item?n.item(k):c(Ni,k.props,n),s(v)&&((O=n["expanded-row"])==null?void 0:O.call(n,g))])})])}),{}}}),Hi=U({items:{type:Array,default:()=>[]},itemValue:{type:[String,Array,Function],default:"id"},itemSelectable:{type:[String,Array,Function],default:null},rowProps:[Object,Function],cellProps:[Object,Function],returnObject:Boolean},"DataTable-items");function Yi(e,t,a,n){const r=e.returnObject?t:He(t,e.itemValue),i=He(t,e.itemSelectable,!0),o=n.reduce((s,l)=>(l.key!=null&&(s[l.key]=He(t,l.value)),s),{});return{type:"item",key:e.returnObject?He(t,e.itemValue):r,index:a,value:r,selectable:i,columns:o,raw:t}}function ji(e,t,a){return t.map((n,r)=>Yi(e,n,r,a))}function $i(e,t){return{items:C(()=>ji(e,e.items,t.value))}}function qi(e){let{page:t,itemsPerPage:a,sortBy:n,groupBy:r,search:i}=e;const o=$t("VDataTable"),s=()=>({page:t.value,itemsPerPage:a.value,sortBy:n.value,groupBy:r.value,search:i.value});let l=null;gt(s,u=>{qt(l,u)||(l&&l.search!==u.search&&(t.value=1),o.emit("update:options",u),l=u)},{deep:!0,immediate:!0})}const zi=U({...Pa(),hideDefaultBody:Boolean,hideDefaultFooter:Boolean,hideDefaultHeader:Boolean,width:[String,Number],search:String,...Ui(),...Vi(),...vi(),...Hi(),...Di(),..._i(),...ga(),...on()},"DataTable"),Gi=U({...ci(),...zi(),...ln(),...ia()},"VDataTable"),Xi=ke()({name:"VDataTable",props:Gi(),emits:{"update:modelValue":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:groupBy":e=>!0,"update:expanded":e=>!0,"update:currentItems":e=>!0},setup(e,t){let{attrs:a,slots:n}=t;const{groupBy:r}=Ii(e),{sortBy:i,multiSort:o,mustSort:s}=Ti(e),{page:l,itemsPerPage:u}=fi(e),{disableSort:f}=Ya(e),{columns:m,headers:h,sortFunctions:w,sortRawFunctions:d,filterFunctions:y}=Pi(e,{groupBy:r,showSelect:H(()=>e.showSelect),showExpand:H(()=>e.showExpand)}),{items:v}=$i(e,m),_=H(()=>e.search),{filteredItems:g}=sn(e,v,_,{transform:N=>N.columns,customKeyFilter:y}),{toggleSort:k}=Oi({sortBy:i,multiSort:o,mustSort:s,page:l}),{sortByWithGroups:O,opened:D,extractRows:F,isGroupOpen:W,toggleGroup:T}=Fi({groupBy:r,sortBy:i,disableSort:f}),{sortedItems:P}=Mi(e,g,O,{transform:N=>({...N.raw,...N.columns}),sortFunctions:w,sortRawFunctions:d}),{flatItems:x}=Bi(P,r,D),M=C(()=>x.value.length),{startIndex:E,stopIndex:L,pageCount:J,setItemsPerPage:G}=mi({page:l,itemsPerPage:u,itemsLength:M}),{paginatedItems:X}=gi({items:x,startIndex:E,stopIndex:L,itemsPerPage:u}),Q=C(()=>F(X.value)),{isSelected:fe,select:nt,selectAll:rt,toggleSelect:it,someSelected:ot,allSelected:De}=Si(e,{allItems:v,currentPage:Q}),{isExpanded:We,toggleExpand:Ae}=Ri(e);qi({page:l,itemsPerPage:u,sortBy:i,groupBy:r,search:_}),ja({VDataTableRows:{hideNoData:H(()=>e.hideNoData),noDataText:H(()=>e.noDataText),loading:H(()=>e.loading),loadingText:H(()=>e.loadingText)}});const A=C(()=>({page:l.value,itemsPerPage:u.value,sortBy:i.value,pageCount:J.value,toggleSort:k,setItemsPerPage:G,someSelected:ot.value,allSelected:De.value,isSelected:fe,select:nt,selectAll:rt,toggleSelect:it,isExpanded:We,toggleExpand:Ae,isGroupOpen:W,toggleGroup:T,items:Q.value.map(N=>N.raw),internalItems:Q.value,groupedItems:X.value,columns:m.value,headers:h.value}));return Fe(()=>{const N=Wt.filterProps(e),Ue=At.filterProps(e),Re=Ut.filterProps(e),Le=_t.filterProps(e);return c(_t,K({class:["v-data-table",{"v-data-table--show-select":e.showSelect,"v-data-table--loading":e.loading},e.class],style:e.style},Le,{fixedHeader:e.fixedHeader||e.sticky}),{top:()=>{var Z;return(Z=n.top)==null?void 0:Z.call(n,A.value)},default:()=>{var Z,Se,st,ee,_e,Te;return n.default?n.default(A.value):p(ue,null,[(Z=n.colgroup)==null?void 0:Z.call(n,A.value),!e.hideDefaultHeader&&p("thead",{key:"thead"},[c(At,Ue,n)]),(Se=n.thead)==null?void 0:Se.call(n,A.value),!e.hideDefaultBody&&p("tbody",null,[(st=n["body.prepend"])==null?void 0:st.call(n,A.value),n.body?n.body(A.value):c(Ut,K(a,Re,{items:X.value}),n),(ee=n["body.append"])==null?void 0:ee.call(n,A.value)]),(_e=n.tbody)==null?void 0:_e.call(n,A.value),(Te=n.tfoot)==null?void 0:Te.call(n,A.value)])},bottom:()=>n.bottom?n.bottom(A.value):!e.hideDefaultFooter&&p(ue,null,[c($a,null,null),c(Wt,N,{prepend:n["footer.prepend"]})])})}),{}}}),Qi={name:"SecurityManager",data(){return{activeTokens:[],isLoadingTokens:!1,isLoggingOutAll:!1,loadingTokenId:null,isPerformingAction:!1,showConfirmDialog:!1,confirmDialogTitle:"",confirmDialogText:"",confirmedAction:null,tokenHeaders:[{title:"创建时间",key:"created_at",sortable:!0},{title:"设备信息",key:"device_info",sortable:!1},{title:"IP地址",key:"ip_address",sortable:!0},{title:"IP属地",key:"ip_location",sortable:!0},{title:"操作",key:"actions",sortable:!1}]}},mounted(){this.loadData()},methods:{async loadData(){await this.loadActiveTokens()},async loadActiveTokens(){this.isLoadingTokens=!0;try{this.activeTokens=await ye.getActiveTokens()}catch(e){console.error("获取会话列表失败:",e),this.$toast.add({severity:"error",summary:"错误",detail:"获取会话列表失败",life:3e3})}finally{this.isLoadingTokens=!1}},getActivityColor(e){return e?e<5?"info":e<20?"primary":e<50?"success":"purple":"grey"},formatIpLocation(e){if(!e)return"-";let t=e;if(typeof e=="string")try{t=JSON.parse(e)}catch{return e}let a="";return t.country&&(a+=t.country),t.region&&(a+=" "+t.region),t.city&&t.city!==t.region&&(a+=" "+t.city),t.isp&&(a+=` (${t.isp})`),a||"-"},formatDate(e){if(!e)return"-";const t=new Date(e),n=Fr(t,new Date,{addSuffix:!0,locale:di}),r=Vr(t,"yyyy-MM-dd HH:mm:ss");return`${n} (${r})`},async handleRevokeToken(e){this.loadingTokenId=e,this.isPerformingAction=!0;try{await ye.revokeToken(e)?(this.$toast.add({severity:"success",summary:"成功",detail:"会话已成功结束",life:3e3}),await this.loadActiveTokens()):this.$toast.add({severity:"error",summary:"错误",detail:"会话结束失败",life:3e3})}catch(t){console.error("会话结束失败:",t),this.$toast.add({severity:"error",summary:"错误",detail:"会话结束失败",life:3e3})}finally{this.loadingTokenId=null,this.isPerformingAction=!1}},confirmLogoutAll(){this.confirmDialogTitle="确认退出所有会话",this.confirmDialogText="这将使所有会话立即失效，包括当前会话。您需要重新登录才能继续使用。确定要执行此操作吗？",this.confirmedAction=this.logoutAllSessions,this.showConfirmDialog=!0},async logoutAllSessions(){this.isLoggingOutAll=!0;try{await ye.logoutAllDevices()?(this.$toast.add({severity:"success",summary:"成功",detail:"已成功退出所有会话",life:3e3}),this.$router.push("/app/account/login")):this.$toast.add({severity:"error",summary:"错误",detail:"退出所有会话失败",life:3e3})}catch(e){console.error("退出所有会话失败:",e),this.$toast.add({severity:"error",summary:"错误",detail:"退出所有会话失败",life:3e3})}finally{this.isLoggingOutAll=!1}},executeConfirmedAction(){typeof this.confirmedAction=="function"&&this.confirmedAction(),this.showConfirmDialog=!1}}},Ki={class:"mb-6"},Ji={class:"d-flex align-center"},Zi={key:0},eo={key:1},to={class:"d-flex gap-4 mt-6"};function ao(e,t,a,n,r,i){return B(),$e("div",null,[p("div",Ki,[t[4]||(t[4]=p("h4",{class:"text-h6 mb-3"},"登录设备",-1)),r.activeTokens.length===0&&!r.isLoadingTokens?(B(),j(qa,{key:0,type:"info",text:"没有活跃的会话",class:"mb-3"})):(B(),j(Xi,{key:1,headers:r.tokenHeaders,items:r.activeTokens,loading:r.isLoadingTokens,"loading-text":"加载会话列表...","no-data-text":"没有找到活跃会话",class:"elevation-1 rounded-lg"},{"item.created_at":b(({item:o})=>[V(Y(i.formatDate(o.created_at)),1)]),"item.device_info":b(({item:o})=>{var s,l;return[p("div",Ji,[V(Y(((s=o.device_info)==null?void 0:s.os)||"未知")+" ("+Y(((l=o.device_info)==null?void 0:l.browser)||"未知")+") ",1),o.is_current?(B(),j(Ie,{key:0,color:"success",size:"small",text:"当前"})):zt("",!0)])]}),"item.ip_address":b(({item:o})=>[V(Y(o.ip_address),1)]),"item.ip_location":b(({item:o})=>[o.ip_location?(B(),$e("span",Zi,Y(i.formatIpLocation(o.ip_location)),1)):(B(),$e("span",eo,"-"))]),"item.activity_count":b(({item:o})=>[c(Ie,{color:i.getActivityColor(o.activity_count),size:"small",text:e.getActivityText(o.activity_count)},null,8,["color","text"])]),"item.actions":b(({item:o})=>[c(z,{onClick:s=>i.handleRevokeToken(o.id),size:"small",color:"error",variant:"text",loading:r.loadingTokenId===o.id,disabled:r.isLoadingTokens||r.isPerformingAction},{default:b(()=>[c(pe,null,{default:b(()=>t[2]||(t[2]=[V("mdi-logout")])),_:1,__:[2]}),t[3]||(t[3]=V(" 结束会话 "))]),_:2,__:[3]},1032,["onClick","loading","disabled"])]),_:1},8,["headers","items","loading"]))]),p("div",to,[c(z,{color:"error","prepend-icon":"mdi-logout-variant",onClick:i.confirmLogoutAll,loading:r.isLoggingOutAll,disabled:r.isPerformingAction||r.isLoadingTokens},{default:b(()=>t[5]||(t[5]=[V(" 退出所有会话 ")])),_:1,__:[5]},8,["onClick","loading","disabled"])]),c(Ga,{modelValue:r.showConfirmDialog,"onUpdate:modelValue":t[1]||(t[1]=o=>r.showConfirmDialog=o),"max-width":"500"},{default:b(()=>[c(bt,null,{default:b(()=>[c(Gt,{class:"text-h5"},{default:b(()=>[V(Y(r.confirmDialogTitle),1)]),_:1}),c(wt,null,{default:b(()=>[V(Y(r.confirmDialogText),1)]),_:1}),c(za,null,{default:b(()=>[c(un),c(z,{color:"primary",variant:"text",onClick:t[0]||(t[0]=o=>r.showConfirmDialog=!1)},{default:b(()=>t[6]||(t[6]=[V("取消")])),_:1,__:[6]}),c(z,{color:"error",variant:"flat",onClick:i.executeConfirmedAction},{default:b(()=>t[7]||(t[7]=[V("确认")])),_:1,__:[7]},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}const ka=ce(Qi,[["render",ao]]);/*!
 * Compressor.js v1.2.1
 * https://fengyuanchen.github.io/compressorjs
 *
 * Copyright 2018-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2023-02-28T14:09:41.732Z
 */function Rt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,n)}return a}function je(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Rt(Object(a),!0).forEach(function(n){io(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Rt(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function no(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Lt(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Da(n.key),n)}}function ro(e,t,a){return t&&Lt(e.prototype,t),a&&Lt(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function io(e,t,a){return t=Da(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Ke(){return Ke=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Ke.apply(this,arguments)}function oo(e,t){if(typeof e!="object"||e===null)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Da(e){var t=oo(e,"string");return typeof t=="symbol"?t:String(t)}var Sa={exports:{}};(function(e){typeof window>"u"||function(t){var a=t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype,n=t.Blob&&function(){try{return!!new Blob}catch{return!1}}(),r=n&&t.Uint8Array&&function(){try{return new Blob([new Uint8Array(100)]).size===100}catch{return!1}}(),i=t.BlobBuilder||t.WebKitBlobBuilder||t.MozBlobBuilder||t.MSBlobBuilder,o=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,s=(n||i)&&t.atob&&t.ArrayBuffer&&t.Uint8Array&&function(l){var u,f,m,h,w,d,y,v,_;if(u=l.match(o),!u)throw new Error("invalid data URI");for(f=u[2]?u[1]:"text/plain"+(u[3]||";charset=US-ASCII"),m=!!u[4],h=l.slice(u[0].length),m?w=atob(h):w=decodeURIComponent(h),d=new ArrayBuffer(w.length),y=new Uint8Array(d),v=0;v<w.length;v+=1)y[v]=w.charCodeAt(v);return n?new Blob([r?y:d],{type:f}):(_=new i,_.append(d),_.getBlob(f))};t.HTMLCanvasElement&&!a.toBlob&&(a.mozGetAsFile?a.toBlob=function(l,u,f){var m=this;setTimeout(function(){f&&a.toDataURL&&s?l(s(m.toDataURL(u,f))):l(m.mozGetAsFile("blob",u))})}:a.toDataURL&&s&&(a.msToBlob?a.toBlob=function(l,u,f){var m=this;setTimeout(function(){(u&&u!=="image/png"||f)&&a.toDataURL&&s?l(s(m.toDataURL(u,f))):l(m.msToBlob(u))})}:a.toBlob=function(l,u,f){var m=this;setTimeout(function(){l(s(m.toDataURL(u,f)))})})),e.exports?e.exports=s:t.dataURLtoBlob=s}(window)})(Sa);var Nt=Sa.exports,so=function(t){return typeof Blob>"u"?!1:t instanceof Blob||Object.prototype.toString.call(t)==="[object Blob]"},Ht={strict:!0,checkOrientation:!0,retainExif:!1,maxWidth:1/0,maxHeight:1/0,minWidth:0,minHeight:0,width:void 0,height:void 0,resize:"none",quality:.8,mimeType:"auto",convertTypes:["image/png"],convertSize:5e6,beforeDraw:null,drew:null,success:null,error:null},lo=typeof window<"u"&&typeof window.document<"u",ie=lo?window:{},Je=function(t){return t>0&&t<1/0},uo=Array.prototype.slice;function Dt(e){return Array.from?Array.from(e):uo.call(e)}var co=/^image\/.+$/;function ht(e){return co.test(e)}function fo(e){var t=ht(e)?e.substr(6):"";return t==="jpeg"&&(t="jpg"),".".concat(t)}var _a=String.fromCharCode;function mo(e,t,a){var n="",r;for(a+=t,r=t;r<a;r+=1)n+=_a(e.getUint8(r));return n}var ho=ie.btoa;function Yt(e,t){for(var a=[],n=8192,r=new Uint8Array(e);r.length>0;)a.push(_a.apply(null,Dt(r.subarray(0,n)))),r=r.subarray(n);return"data:".concat(t,";base64,").concat(ho(a.join("")))}function go(e){var t=new DataView(e),a;try{var n,r,i;if(t.getUint8(0)===255&&t.getUint8(1)===216)for(var o=t.byteLength,s=2;s+1<o;){if(t.getUint8(s)===255&&t.getUint8(s+1)===225){r=s;break}s+=1}if(r){var l=r+4,u=r+10;if(mo(t,l,4)==="Exif"){var f=t.getUint16(u);if(n=f===18761,(n||f===19789)&&t.getUint16(u+2,n)===42){var m=t.getUint32(u+4,n);m>=8&&(i=u+m)}}}if(i){var h=t.getUint16(i,n),w,d;for(d=0;d<h;d+=1)if(w=i+d*12+2,t.getUint16(w,n)===274){w+=8,a=t.getUint16(w,n),t.setUint16(w,1,n);break}}}catch{a=1}return a}function vo(e){var t=0,a=1,n=1;switch(e){case 2:a=-1;break;case 3:t=-180;break;case 4:n=-1;break;case 5:t=90,n=-1;break;case 6:t=90;break;case 7:t=90,a=-1;break;case 8:t=-90;break}return{rotate:t,scaleX:a,scaleY:n}}var yo=/\.\d*(?:0|9){12}\d*$/;function jt(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return yo.test(e)?Math.round(e*t)/t:e}function Me(e){var t=e.aspectRatio,a=e.height,n=e.width,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"none",i=Je(n),o=Je(a);if(i&&o){var s=a*t;(r==="contain"||r==="none")&&s>n||r==="cover"&&s<n?a=n/t:n=a*t}else i?a=n/t:o&&(n=a*t);return{width:n,height:a}}function bo(e){for(var t=Dt(new Uint8Array(e)),a=t.length,n=[],r=0;r+3<a;){var i=t[r],o=t[r+1];if(i===255&&o===218)break;if(i===255&&o===216)r+=2;else{var s=t[r+2]*256+t[r+3],l=r+s+2,u=t.slice(r,l);n.push(u),r=l}}return n.reduce(function(f,m){return m[0]===255&&m[1]===225?f.concat(m):f},[])}function wo(e,t){var a=Dt(new Uint8Array(e));if(a[2]!==255||a[3]!==224)return e;var n=a[4]*256+a[5],r=[255,216].concat(t,a.slice(4+n));return new Uint8Array(r)}var po=ie.ArrayBuffer,ft=ie.FileReader,oe=ie.URL||ie.webkitURL,xo=/\.\w+$/,Po=ie.Compressor,ko=function(){function e(t,a){no(this,e),this.file=t,this.exif=[],this.image=new Image,this.options=je(je({},Ht),a),this.aborted=!1,this.result=null,this.init()}return ro(e,[{key:"init",value:function(){var a=this,n=this.file,r=this.options;if(!so(n)){this.fail(new Error("The first argument must be a File or Blob object."));return}var i=n.type;if(!ht(i)){this.fail(new Error("The first argument must be an image File or Blob object."));return}if(!oe||!ft){this.fail(new Error("The current browser does not support image compression."));return}po||(r.checkOrientation=!1,r.retainExif=!1);var o=i==="image/jpeg",s=o&&r.checkOrientation,l=o&&r.retainExif;if(oe&&!s&&!l)this.load({url:oe.createObjectURL(n)});else{var u=new ft;this.reader=u,u.onload=function(f){var m=f.target,h=m.result,w={},d=1;s&&(d=go(h),d>1&&Ke(w,vo(d))),l&&(a.exif=bo(h)),s||l?!oe||d>1?w.url=Yt(h,i):w.url=oe.createObjectURL(n):w.url=h,a.load(w)},u.onabort=function(){a.fail(new Error("Aborted to read the image with FileReader."))},u.onerror=function(){a.fail(new Error("Failed to read the image with FileReader."))},u.onloadend=function(){a.reader=null},s||l?u.readAsArrayBuffer(n):u.readAsDataURL(n)}}},{key:"load",value:function(a){var n=this,r=this.file,i=this.image;i.onload=function(){n.draw(je(je({},a),{},{naturalWidth:i.naturalWidth,naturalHeight:i.naturalHeight}))},i.onabort=function(){n.fail(new Error("Aborted to load the image."))},i.onerror=function(){n.fail(new Error("Failed to load the image."))},ie.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(ie.navigator.userAgent)&&(i.crossOrigin="anonymous"),i.alt=r.name,i.src=a.url}},{key:"draw",value:function(a){var n=this,r=a.naturalWidth,i=a.naturalHeight,o=a.rotate,s=o===void 0?0:o,l=a.scaleX,u=l===void 0?1:l,f=a.scaleY,m=f===void 0?1:f,h=this.file,w=this.image,d=this.options,y=document.createElement("canvas"),v=y.getContext("2d"),_=Math.abs(s)%180===90,g=(d.resize==="contain"||d.resize==="cover")&&Je(d.width)&&Je(d.height),k=Math.max(d.maxWidth,0)||1/0,O=Math.max(d.maxHeight,0)||1/0,D=Math.max(d.minWidth,0)||0,F=Math.max(d.minHeight,0)||0,W=r/i,T=d.width,P=d.height;if(_){var x=[O,k];k=x[0],O=x[1];var M=[F,D];D=M[0],F=M[1];var E=[P,T];T=E[0],P=E[1]}g&&(W=T/P);var L=Me({aspectRatio:W,width:k,height:O},"contain");k=L.width,O=L.height;var J=Me({aspectRatio:W,width:D,height:F},"cover");if(D=J.width,F=J.height,g){var G=Me({aspectRatio:W,width:T,height:P},d.resize);T=G.width,P=G.height}else{var X=Me({aspectRatio:W,width:T,height:P}),Q=X.width;T=Q===void 0?r:Q;var fe=X.height;P=fe===void 0?i:fe}T=Math.floor(jt(Math.min(Math.max(T,D),k))),P=Math.floor(jt(Math.min(Math.max(P,F),O)));var nt=-T/2,rt=-P/2,it=T,ot=P,De=[];if(g){var We=0,Ae=0,A=r,N=i,Ue=Me({aspectRatio:W,width:r,height:i},{contain:"cover",cover:"contain"}[d.resize]);A=Ue.width,N=Ue.height,We=(r-A)/2,Ae=(i-N)/2,De.push(We,Ae,A,N)}if(De.push(nt,rt,it,ot),_){var Re=[P,T];T=Re[0],P=Re[1]}y.width=T,y.height=P,ht(d.mimeType)||(d.mimeType=h.type);var Le="transparent";h.size>d.convertSize&&d.convertTypes.indexOf(d.mimeType)>=0&&(d.mimeType="image/jpeg");var Z=d.mimeType==="image/jpeg";if(Z&&(Le="#fff"),v.fillStyle=Le,v.fillRect(0,0,T,P),d.beforeDraw&&d.beforeDraw.call(this,v,y),!this.aborted&&(v.save(),v.translate(T/2,P/2),v.rotate(s*Math.PI/180),v.scale(u,m),v.drawImage.apply(v,[w].concat(De)),v.restore(),d.drew&&d.drew.call(this,v,y),!this.aborted)){var Se=function(ee){if(!n.aborted){var _e=function(Oe){return n.done({naturalWidth:r,naturalHeight:i,result:Oe})};if(ee&&Z&&d.retainExif&&n.exif&&n.exif.length>0){var Te=function(Oe){return _e(Nt(Yt(wo(Oe,n.exif),d.mimeType)))};if(ee.arrayBuffer)ee.arrayBuffer().then(Te).catch(function(){n.fail(new Error("Failed to read the compressed image with Blob.arrayBuffer()."))});else{var me=new ft;n.reader=me,me.onload=function(lt){var Oe=lt.target;Te(Oe.result)},me.onabort=function(){n.fail(new Error("Aborted to read the compressed image with FileReader."))},me.onerror=function(){n.fail(new Error("Failed to read the compressed image with FileReader."))},me.onloadend=function(){n.reader=null},me.readAsArrayBuffer(ee)}}else _e(ee)}};y.toBlob?y.toBlob(Se,d.mimeType,d.quality):Se(Nt(y.toDataURL(d.mimeType,d.quality)))}}},{key:"done",value:function(a){var n=a.naturalWidth,r=a.naturalHeight,i=a.result,o=this.file,s=this.image,l=this.options;if(oe&&s.src.indexOf("blob:")===0&&oe.revokeObjectURL(s.src),i)if(l.strict&&!l.retainExif&&i.size>o.size&&l.mimeType===o.type&&!(l.width>n||l.height>r||l.minWidth>n||l.minHeight>r||l.maxWidth<n||l.maxHeight<r))i=o;else{var u=new Date;i.lastModified=u.getTime(),i.lastModifiedDate=u,i.name=o.name,i.name&&i.type!==o.type&&(i.name=i.name.replace(xo,fo(i.type)))}else i=o;this.result=i,l.success&&l.success.call(this,i)}},{key:"fail",value:function(a){var n=this.options;if(n.error)n.error.call(this,a);else throw a}},{key:"abort",value:function(){this.aborted||(this.aborted=!0,this.reader?this.reader.abort():this.image.complete?this.fail(new Error("The compression process has been aborted.")):(this.image.onload=null,this.image.onabort()))}}],[{key:"noConflict",value:function(){return window.Compressor=Po,e}},{key:"setDefaults",value:function(a){Ke(Ht,a)}}]),e}();const Do={name:"AvatarEditor",props:{userData:{type:Object,required:!0},s3BucketUrl:{type:String,required:!0}},data(){return{loading:!1,avatarFile:null,previewImage:null}},methods:{onFileChange(e){const t=e.target.files?e.target.files[0]:null;t instanceof File&&t.type.startsWith("image/")?new ko(t,{quality:.8,maxWidth:500,maxHeight:500,success:a=>{this.previewImage=URL.createObjectURL(a),this.avatarFile=a},error:a=>{console.error("图片压缩出错：",a.message),this.$emit("error",{message:"图片压缩出错："+a.message})}}):t&&this.$emit("error",{message:"请选择有效的图片文件"})},async uploadAvatar(){if(this.avatarFile){this.loading=!0;try{const e=new FormData;e.append("zcfile",this.avatarFile);const t=await dn("",e);this.$emit("avatar-updated",t),this.avatarFile=null}catch(e){this.$emit("error",e)}finally{this.loading=!1}}}}},So={class:"d-flex align-center justify-center fill-height"};function _o(e,t,a,n,r,i){return B(),j(et,null,{default:b(()=>[c(R,{cols:"12",md:"6"},{default:b(()=>[c(gn,{label:"上传头像",accept:"image/*",onChange:i.onFileChange,placeholder:"选择图片上传","prepend-icon":"mdi-camera",variant:"outlined",density:"comfortable","show-size":"",rules:[o=>!o||!o.length||o[0].size<2e6||"头像大小不能超过2MB"]},null,8,["onChange","rules"]),t[0]||(t[0]=p("div",{class:"text-caption text-medium-emphasis"},"图片将被自动压缩",-1))]),_:1,__:[0]}),c(R,{cols:"12",md:"6",class:"d-flex align-center justify-center"},{default:b(()=>[c(vn,{class:Ve(["rounded-lg overflow-hidden","elevation-2"]),width:"150",height:"150"},{default:b(()=>[c(Xt,{src:r.previewImage||a.s3BucketUrl+"/user/"+a.userData.images,height:"150",width:"150",cover:"",class:"bg-grey-lighten-3"},{placeholder:b(()=>[p("div",So,[c(pe,{icon:"mdi-image",size:"64",color:"grey-darken-1"})])]),_:1},8,["src"])]),_:1})]),_:1}),c(R,{cols:"12"},{default:b(()=>[c(z,{onClick:i.uploadAvatar,disabled:!r.avatarFile,color:"primary",size:"large","prepend-icon":"mdi-cloud-upload",class:"px-6",loading:r.loading},{default:b(()=>t[1]||(t[1]=[V(" 上传头像 ")])),_:1,__:[1]},8,["onClick","disabled","loading"])]),_:1})]),_:1})}const Ta=ce(Do,[["render",_o]]),To={name:"PasswordEditor",data(){return{loading:!1,valid:!1,oldPassword:"",newPassword:"",confirmPassword:"",passwordRules:[e=>!!e||"请输入新密码",e=>/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[$@$!%*?&\.])[A-Za-z\d$@$!%*?&\.]{8,}/.test(e)||"密码必须由数字、大小写字母和特殊字符组成，且长度至少为8位"]}},methods:{async changePassword(){if(this.valid){this.loading=!0;try{const e=await cn({oldpw:this.oldPassword,newpw:this.newPassword});this.$emit("password-updated",e),this.oldPassword="",this.newPassword="",this.confirmPassword=""}catch(e){this.$emit("error",e)}finally{this.loading=!1}}}}};function Oo(e,t,a,n,r,i){return B(),j(pt,{modelValue:r.valid,"onUpdate:modelValue":t[3]||(t[3]=o=>r.valid=o),onSubmit:le(i.changePassword,["prevent"])},{default:b(()=>[c(et,null,{default:b(()=>[c(R,{cols:"12",md:"8"},{default:b(()=>[c(Ce,{modelValue:r.oldPassword,"onUpdate:modelValue":t[0]||(t[0]=o=>r.oldPassword=o),label:"当前密码",variant:"outlined",density:"comfortable",type:"password",rules:[o=>!!o||"请输入当前密码"],required:""},null,8,["modelValue","rules"])]),_:1}),c(R,{cols:"12",md:"8"},{default:b(()=>[c(Ce,{modelValue:r.newPassword,"onUpdate:modelValue":t[1]||(t[1]=o=>r.newPassword=o),rules:r.passwordRules,label:"新密码",variant:"outlined",density:"comfortable",type:"password",required:""},null,8,["modelValue","rules"]),t[4]||(t[4]=p("div",{class:"text-caption text-medium-emphasis"}," 密码必须由数字、大小写字母和特殊字符组成，且长度至少为8位 ",-1))]),_:1,__:[4]}),c(R,{cols:"12",md:"8"},{default:b(()=>[c(Ce,{modelValue:r.confirmPassword,"onUpdate:modelValue":t[2]||(t[2]=o=>r.confirmPassword=o),rules:[o=>!!o||"请确认新密码",o=>o===r.newPassword||"两次输入的密码不一致"],label:"确认新密码",variant:"outlined",density:"comfortable",type:"password",required:""},null,8,["modelValue","rules"])]),_:1}),c(R,{cols:"12"},{default:b(()=>[c(z,{onClick:i.changePassword,disabled:!r.valid,color:"primary",size:"large","prepend-icon":"mdi-lock-reset",class:"px-6",loading:r.loading},{default:b(()=>t[5]||(t[5]=[V(" 更新密码 ")])),_:1,__:[5]},8,["onClick","disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue","onSubmit"])}const Oa=ce(To,[["render",Oo]]),Mo={name:"UsernameEditor",props:{userData:{type:Object,required:!0}},data(){return{loading:!1,valid:!1,username:this.userData.username||"",usernameRules:[e=>!!e||"用户名是必填项",e=>e&&e.length<=10||"用户名不能超过10个字符",e=>/^[a-z]+$/.test(e)||"用户名只能包含小写字母"]}},watch:{userData:{handler(e){this.username=e.username||""},immediate:!0}},methods:{async changeUsername(){if(this.valid){this.loading=!0;try{const e=await fn({username:this.username});this.$emit("username-updated",e)}catch(e){this.$emit("error",e)}finally{this.loading=!1}}}}};function Co(e,t,a,n,r,i){return B(),j(pt,{modelValue:r.valid,"onUpdate:modelValue":t[1]||(t[1]=o=>r.valid=o),onSubmit:le(i.changeUsername,["prevent"])},{default:b(()=>[c(et,null,{default:b(()=>[c(R,{cols:"12",md:"8"},{default:b(()=>[c(Ce,{modelValue:r.username,"onUpdate:modelValue":t[0]||(t[0]=o=>r.username=o),counter:10,rules:r.usernameRules,label:"用户名",variant:"outlined",density:"comfortable",required:""},null,8,["modelValue","rules"]),t[2]||(t[2]=p("div",{class:"text-caption text-medium-emphasis"},"用户名只能包含小写字母",-1))]),_:1,__:[2]}),c(R,{cols:"12"},{default:b(()=>[c(z,{onClick:i.changeUsername,disabled:!r.valid,color:"primary",size:"large","prepend-icon":"mdi-check",class:"px-6",loading:r.loading},{default:b(()=>t[3]||(t[3]=[V(" 保存用户名 ")])),_:1,__:[3]},8,["onClick","disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue","onSubmit"])}const Ma=ce(Mo,[["render",Co]]),Vo={name:"ProfileEditor",props:{userData:{type:Object,required:!0}},data(){return{loading:!1,valid:!1,profileData:{display_name:this.userData.display_name||"",motto:this.userData.motto||""},selectedGender:{state:"未知",abbr:"3"},genderOptions:[{state:"男",abbr:"0"},{state:"女",abbr:"1"},{state:"猫娘",abbr:"2"},{state:"未知",abbr:"3"}],nameRules:[e=>!!e||"名称是必填项",e=>e&&e.length<=10||"名称不能超过10个字符"]}},watch:{userData:{handler(e){this.profileData.display_name=e.display_name||"",this.profileData.motto=e.motto||"",this.selectedGender=this.genderOptions.find(t=>t.abbr==e.sex)||this.genderOptions[3]},immediate:!0,deep:!0}},methods:{async updateProfile(){if(this.valid){this.loading=!0;try{const e=await mn({display_name:this.profileData.display_name,aboutme:this.profileData.motto,sex:this.selectedGender.abbr});this.$emit("profile-updated",e)}catch(e){this.$emit("error",e)}finally{this.loading=!1}}}}};function Io(e,t,a,n,r,i){return B(),j(pt,{modelValue:r.valid,"onUpdate:modelValue":t[3]||(t[3]=o=>r.valid=o),onSubmit:le(i.updateProfile,["prevent"])},{default:b(()=>[c(et,null,{default:b(()=>[c(R,{cols:"12",md:"6"},{default:b(()=>[c(Ce,{modelValue:r.profileData.display_name,"onUpdate:modelValue":t[0]||(t[0]=o=>r.profileData.display_name=o),counter:10,label:"显示名称",variant:"outlined",density:"comfortable",required:"",rules:r.nameRules},null,8,["modelValue","rules"])]),_:1}),c(R,{cols:"12",md:"6"},{default:b(()=>[c(xt,{modelValue:r.selectedGender,"onUpdate:modelValue":t[1]||(t[1]=o=>r.selectedGender=o),items:r.genderOptions,"item-title":"state","item-value":"abbr",label:"性别",variant:"outlined",density:"comfortable","persistent-hint":"","return-object":""},null,8,["modelValue","items"])]),_:1}),c(R,{cols:"12"},{default:b(()=>[c(yn,{label:"个人简介",modelValue:r.profileData.motto,"onUpdate:modelValue":t[2]||(t[2]=o=>r.profileData.motto=o),counter:500,variant:"outlined","auto-grow":"",rows:"3"},null,8,["modelValue"])]),_:1}),c(R,{cols:"12"},{default:b(()=>[c(z,{onClick:i.updateProfile,disabled:!r.valid,color:"primary",size:"large","prepend-icon":"mdi-content-save",class:"px-6",loading:r.loading},{default:b(()=>t[4]||(t[4]=[V(" 保存资料 ")])),_:1,__:[4]},8,["onClick","disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue","onSubmit"])}const Ca=ce(Vo,[["render",Io]]),Fo={name:"UserCard",props:{userData:{type:Object,required:!0},loading:{type:Boolean,default:!1},s3BucketUrl:{type:String,required:!0}}},Eo={class:"text-body-2 text-medium-emphasis",style:{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}};function Bo(e,t,a,n,r,i){return B(),j(bt,{hover:"",border:"",variant:"elevated",loading:a.loading,class:"mb-4"},{prepend:b(()=>[c(Ja,{class:"ma-3",size:"64"},{default:b(()=>[c(Xt,{alt:a.userData.display_name,src:a.s3BucketUrl+"/user/"+a.userData.images,cover:""},null,8,["alt","src"])]),_:1})]),loader:b(({isActive:o})=>[c(Ka,{active:o,height:"4",indeterminate:"",color:"primary"},null,8,["active"])]),default:b(()=>[c(Xa,null,{default:b(()=>[c(Gt,{class:"font-weight-bold text-h5"},{default:b(()=>[V(Y(a.userData.display_name||"加载中..."),1)]),_:1}),c(Qa,{class:"mt-2"},{default:b(()=>[c(Ie,{class:"mr-2",size:"small"},{default:b(()=>[c(pe,{icon:"mdi-account-circle",start:"",size:"small"}),V(" ID: "+Y(a.userData.id||"—"),1)]),_:1}),c(Ie,{size:"small"},{default:b(()=>[c(pe,{icon:"mdi-tag",start:"",size:"small"}),t[0]||(t[0]=V(" 创作者 "))]),_:1,__:[0]})]),_:1})]),_:1}),a.userData.motto?(B(),j(wt,{key:0},{default:b(()=>[p("div",Eo,Y(a.userData.motto),1)]),_:1})):zt("",!0)]),_:1},8,["loading"])}const Va=ce(Fo,[["render",Bo]]),Wo={components:{EmailManager:Qt,OAuthManager:Kt,SecurityManager:ka,UserCard:Va,ProfileEditor:Ca,UsernameEditor:Ma,PasswordEditor:Oa,AvatarEditor:Ta,UserFollowing:wn,UserFollowers:bn,UserBlocked:pn},data(){return{userCardLoading:!1,localuser:ye,userInfo:{},tab:"userInfo",tabItems:[{title:"用户信息",value:"userInfo",icon:"mdi-account-circle"},{title:"账户",value:"username",icon:"mdi-cog"},{title:"密码",value:"password",icon:"mdi-lock"},{title:"头像",value:"avatar",icon:"mdi-image"},{title:"邮箱",value:"email",icon:"mdi-email"},{title:"OAuth",value:"oauth",icon:"mdi-link-variant"},{title:"安全",value:"security",icon:"mdi-security"},{title:"关系",value:"relationships",icon:"mdi-account-group",to:"/app/account/relationships"}],VITE_APP_S3_BUCKET:"https://zerocat-bitiful.houlangs.com"}},setup(){rn({title:"账户设置"})},async created(){ye.isLogin.value?await this.getUserById():this.$router.push("/app/account/login")},methods:{async getUserById(){this.userCardLoading=!0;try{const e=await hn(ye.user.value.id);this.userInfo=e.data.data}catch(e){this.handleError(e)}finally{this.userCardLoading=!1}},handleProfileUpdate(e){this.showToast(e.data.status||"info","修改个人信息",e.data.message),this.getUserById()},handleUsernameUpdate(e){this.showToast(e.data.status||"info","修改用户名",e.data.message),this.getUserById()},handlePasswordUpdate(e){this.showToast(e.data.status||"info","修改密码",e.data.message)},handleAvatarUpdate(e){this.showToast(e.data.status||"info","修改头像",e.data.message),this.getUserById()},handleError(e){this.showToast("error","错误",e.message)},showToast(e,t,a){this.$toast.add({severity:e,summary:t,detail:a,life:3e3})}}};function Ao(e,t,a,n,r,i){const o=Va,s=Ca,l=Ma,u=Oa,f=Ta,m=Qt,h=Kt,w=ka;return B(),j(nn,{fluid:"",class:"pa-4"},{default:b(()=>[c(o,{userData:r.userInfo,loading:r.userCardLoading,s3BucketUrl:r.VITE_APP_S3_BUCKET},null,8,["userData","loading","s3BucketUrl"]),c(bt,{hover:"",border:""},{default:b(()=>[c(Za,{modelValue:r.tab,"onUpdate:modelValue":t[0]||(t[0]=d=>r.tab=d),"bg-color":"primary"},{default:b(()=>[(B(!0),$e(ue,null,en(r.tabItems,d=>(B(),j(tn,{key:d.value,text:d.title,value:d.value,onClick:y=>r.tab=d.value,"prepend-icon":d.icon,to:d.to},null,8,["text","value","onClick","prepend-icon","to"]))),128))]),_:1},8,["modelValue"]),c(wt,{class:"pa-4"},{default:b(()=>[c(an,{modelValue:r.tab,"onUpdate:modelValue":t[1]||(t[1]=d=>r.tab=d)},{default:b(()=>[c(te,{value:"userInfo"},{default:b(()=>[t[2]||(t[2]=p("h3",{class:"text-h5 mb-4"},"个人资料",-1)),c(s,{userData:r.userInfo,onProfileUpdated:i.handleProfileUpdate,onError:i.handleError},null,8,["userData","onProfileUpdated","onError"])]),_:1,__:[2]}),c(te,{value:"username"},{default:b(()=>[t[3]||(t[3]=p("h3",{class:"text-h5 mb-4"},"修改用户名",-1)),c(l,{userData:r.userInfo,onUsernameUpdated:i.handleUsernameUpdate,onError:i.handleError},null,8,["userData","onUsernameUpdated","onError"])]),_:1,__:[3]}),c(te,{value:"password"},{default:b(()=>[t[4]||(t[4]=p("h3",{class:"text-h5 mb-4"},"修改密码",-1)),c(u,{onPasswordUpdated:i.handlePasswordUpdate,onError:i.handleError},null,8,["onPasswordUpdated","onError"])]),_:1,__:[4]}),c(te,{value:"avatar"},{default:b(()=>[t[5]||(t[5]=p("h3",{class:"text-h5 mb-4"},"更新头像",-1)),c(f,{userData:r.userInfo,s3BucketUrl:r.VITE_APP_S3_BUCKET,onAvatarUpdated:i.handleAvatarUpdate,onError:i.handleError},null,8,["userData","s3BucketUrl","onAvatarUpdated","onError"])]),_:1,__:[5]}),c(te,{value:"email"},{default:b(()=>[t[6]||(t[6]=p("h3",{class:"text-h5 mb-4"},"邮箱管理",-1)),c(m,{ref:"emailManager"},null,512)]),_:1,__:[6]}),c(te,{value:"oauth"},{default:b(()=>[t[7]||(t[7]=p("h3",{class:"text-h5 mb-4"},"第三方账号关联",-1)),c(h)]),_:1,__:[7]}),c(te,{value:"security"},{default:b(()=>[t[8]||(t[8]=p("h3",{class:"text-h5 mb-4"},"安全管理",-1)),c(w)]),_:1,__:[8]}),c(te,{value:"relationships"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})}const Zo=ce(Wo,[["render",Ao],["__scopeId","data-v-e9dfc994"]]);export{Zo as default};
