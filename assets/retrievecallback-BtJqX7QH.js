import{_,bc as f,bd as m,ag as y,c as x,o as v,f as n,e,N as o,R as u,S as l,aJ as V,aF as p,i as d,X as R,F as b,M as k,af as C,r as c}from"./index-BhZBrlGg.js";import{r as B}from"./accountService-DIdvHoxZ.js";import"https://static.geetest.com/v4/gt4.js";const F={components:{LoadingDialog:m,Recaptcha:f},data(){return{BASE_API:"https://zerocat-api.houlangs.com",password:"",password2:"",show1:c(!1),show2:c(!1),tryinguser:{},loading:!1,emailRules:[t=>t?!0:"必须填写邮箱",t=>/.+@.+\..+/.test(t)?!0:"不符合格式"],passwordRules:[t=>t?!0:"必须填写密码"],password2Rules:[t=>t?!0:"必须填写密码",t=>{if(t!=this.password)return"必须与前者相同"}]}},created(){C.isLogin.value==!0&&this.$router.push("/")},setup(){k({title:"重设密码"})},methods:{async login(){this.loading=!0;try{const t=await B({jwttoken:this.$route.query.token,captcha:this.$refs.recaptcha.getResponse(),pw:this.password});this.tryinguser=t.data,this.tryinguser.status==="success"?this.$router.push("/app/account/login"):this.$toast.add({severity:"info",summary:"info",detail:this.tryinguser.message,life:3e3})}catch(t){this.$toast.add({severity:"error",summary:"错误",detail:t.message,life:3e3})}finally{this.loading=!1}}}},z={class:"auth-wrapper d-flex align-center justify-center pa-4"};function L(t,r,N,j,s,h){const i=y("v-cardtext"),w=f,g=m;return v(),x(b,null,[n("div",z,[e(R,{border:"",class:"auth-card pa-4 pt-7","max-width":"448",rounded:"lg"},{default:o(()=>[e(u,null,{default:o(()=>[e(l,{cols:"12"},{default:o(()=>[e(i,null,{default:o(()=>r[4]||(r[4]=[n("h5",{class:"text-h5 font-weight-semibold mb-1"}," 欢迎来到ZeroCat！ 👋🏻 ",-1),n("p",{class:"mb-0"},"重设密码",-1)])),_:1,__:[4]})]),_:1})]),_:1}),e(i,null,{default:o(()=>[e(V,null,{default:o(()=>[e(u,null,{default:o(()=>[e(l,{cols:"12"},{default:o(()=>[e(p,{modelValue:s.password,"onUpdate:modelValue":r[0]||(r[0]=a=>s.password=a),"append-icon":s.show1?"mdi-eye":"mdi-eye-off",rules:s.passwordRules,type:s.show1?"text":"password",label:"密码",variant:"outlined","onClick:append":r[1]||(r[1]=a=>s.show1=!s.show1)},null,8,["modelValue","append-icon","rules","type"]),e(p,{modelValue:s.password2,"onUpdate:modelValue":r[2]||(r[2]=a=>s.password2=a),"append-icon":s.show2?"mdi-eye":"mdi-eye-off",rules:s.password2Rules,type:s.show2?"text":"password",label:"确认密码",variant:"outlined","onClick:append":r[3]||(r[3]=a=>s.show2=!s.show2)},null,8,["modelValue","append-icon","rules","type"])]),_:1}),e(l,{cols:"9"},{default:o(()=>[e(w,{ref:"recaptcha",recaptchaId:"recaptcha-div"},null,512)]),_:1}),e(l,{cols:"12"},{default:o(()=>[e(d,{"append-icon":"mdi-arrow-right",class:"text-none",color:"primary",rounded:"xl",size:"large",text:"重设密码",variant:"flat",onClick:h.login},null,8,["onClick"])]),_:1}),e(l,{cols:"12"},{default:o(()=>[e(d,{"append-icon":"mdi-arrow-right",class:"text-none",color:"white",rounded:"xl",size:"large",text:"登录",to:"/app/account/login",variant:"text"})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),e(g,{show:s.loading,text:"正在重设密码"},null,8,["show"])],64)}const I=_(F,[["render",L]]);export{I as default};
