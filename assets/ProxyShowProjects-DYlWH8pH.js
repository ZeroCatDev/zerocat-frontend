import{_ as b,a1 as L,c as h,o as n,e,f,N as t,F as C,U as v,Y as c,R as k,W as _,$ as m,n as I,bV as B,aN as $,a9 as w,L as i,X as u,aP as N,ad as P,ae as g,af as p,ag as y,Z as V,Q as S,j as q,aE as T,i as U}from"./index-CqDYMkg5.js";const z={props:{url:{type:String,required:!0},showUserInfo:{type:Boolean,default:!1},title:{type:String,required:!1},subtitle:{type:String,required:!1},autoload:{type:Boolean,default:!1}},data(){return{projects:[],page:0,canLoad:!0,loading:!1,scratch_proxy:"https://scratch.192325.xyz",limit:40}},methods:{async fetchProjects(){this.loading=!0;try{const r=await L.get(`${this.scratch_proxy}${this.url}limit=${this.limit}&offset=${this.page*this.limit}`);r.data.length===0&&(this.canLoad=!1),this.projects=this.projects.concat(r.data),this.page+=1}catch(r){console.log(r)}finally{this.loading=!1}}},watch:{url:{handler(){this.projects=[],this.page=0,this.canLoad=!0,this.autoload==!0&&this.fetchProjects()},immediate:!0}},created(){this.autoload==!0&&this.fetchProjects()}};function A(r,l,d,E,o,x){return n(),h("div",null,[e(S,null,{default:t(()=>[(n(!0),h(C,null,v(o.projects,a=>(n(),c(k,{cols:"12",xs:"12",sm:"6",md:"4",lg:"3",xl:"2",xxl:"2",key:a.id},{default:t(()=>[e(_,{to:"/app/proxy/"+a.id,border:"",hover:""},{default:t(()=>[e(I,{src:`${o.scratch_proxy}/thumbnails/${a.id}`,cover:"","lazy-src":B},null,8,["src"]),e($,null,{default:t(()=>[e(w,null,{default:t(()=>[i(u(a.title),1)]),_:2},1024),e(N,null,{default:t(()=>[i(u(a.description),1)]),_:2},1024)]),_:2},1024),d.showUserInfo?(n(),c(P,{key:0},{default:t(()=>[e(g,null,{prepend:t(()=>{var s;return[e(V,{image:`${this.scratch_proxy}/avatars/${((s=a.author)==null?void 0:s.id)||a.creator_id||""}`},null,8,["image"])]}),default:t(()=>[e(p,null,{default:t(()=>{var s;return[i(u(((s=a.author)==null?void 0:s.username)||a.username),1)]}),_:2},1024),e(y,null,{default:t(()=>{var s;return[i(u(((s=a.author)==null?void 0:s.id)||a.creator_id),1)]}),_:2},1024)]),_:2},1024),a.actor_id?(n(),c(g,{key:0},{prepend:t(()=>[e(V,{image:`${this.scratch_proxy}/avatars/${a.actor_id}`},null,8,["image"])]),default:t(()=>[e(p,null,{default:t(()=>[i(u(a.actor_id),1)]),_:2},1024),e(y,null,{default:t(()=>l[0]||(l[0]=[i("将作品添加进工作室")])),_:1,__:[0]})]),_:2},1024)):m("",!0)]),_:2},1024)):m("",!0)]),_:2},1032,["to"])]),_:2},1024))),128))]),_:1}),l[2]||(l[2]=f("br",null,null,-1)),e(_,{title:d.title,subtitle:d.subtitle,border:"",hover:""},{default:t(()=>[e(q,{active:o.loading,height:"4",indeterminate:""},null,8,["active"]),e(T,null,{default:t(()=>[e(U,{onClick:x.fetchProjects,disabled:!o.canLoad},{default:t(()=>l[1]||(l[1]=[i("继续加载")])),_:1,__:[1]},8,["onClick","disabled"])]),_:1})]),_:1},8,["title","subtitle"]),l[3]||(l[3]=f("br",null,null,-1)),l[4]||(l[4]=f("br",null,null,-1))])}const R=b(z,[["render",A]]);export{R as _};
