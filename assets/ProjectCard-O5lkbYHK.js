import{_ as j,bC as m,Y as u,o as c,N as a,e as o,$ as g,W as l,n as I,bO as D,aC as n,a9 as d,L as i,X as h,aE as p}from"./index-2BOuw0Uj.js";const y={props:{projectData:{type:Object,default:null},projectId:{type:[Number,String],default:null},authorData:{type:Object,default:null},showAuthor:{type:Boolean,default:!1}},data(){return{project:null,author:null,loading:!1,VITE_APP_S3_BUCKET:"https://zerocat-bitiful.houlangs.com"}},created(){this.initializeData()},watch:{projectData:{handler(){this.initializeData()},deep:!0},authorData:{handler(){this.initializeData()},deep:!0},projectId(){this.initializeData()},showAuthor(){this.loadAuthorIfNeeded()}},methods:{initializeData(){this.projectData?this.project=this.projectData:this.projectId&&this.fetchProject(this.projectId),this.authorData?this.author=this.authorData:this.loadAuthorIfNeeded()},loadAuthorIfNeeded(){var e;this.showAuthor&&!this.author&&((e=this.project)!=null&&e.author)&&(this.author=this.project.author)},getProjectLink(){var e,r;return this.project?(e=this.project.author)!=null&&e.username&&this.project.name?`/${this.project.author.username}/${this.project.name}`:(r=this.project.author)!=null&&r.username?`/${this.project.author.username}/${this.project.id}`:"":""},async fetchProject(e){if(!this.loading){this.loading=!0;try{const r=await m([e]);r&&r.length>0&&(this.project=r[0],this.loadAuthorIfNeeded())}catch(r){console.error("Failed to fetch project:",r)}finally{this.loading=!1}}},async fetchAuthor(e){}}};function A(e,r,f,b,t,_){return c(),u(l,{rounded:"lg",class:"box-shadow"},{default:a(()=>[o(l,{to:_.getProjectLink(),style:{"aspect-ratio":"4/3"},rounded:"lg"},{default:a(()=>[o(I,{src:t.project?t.VITE_APP_S3_BUCKET+"/scratch_slt/"+t.project.id:"",class:"align-end","lazy-src":D,height:"100%",gradient:"to bottom, rgba(0,0,0,.1), rgba(0,0,0,.5)",cover:""},{default:a(()=>[o(n,null,{default:a(()=>[o(d,null,{default:a(()=>{var s;return[i(h(((s=t.project)==null?void 0:s.title)||"加载中..."),1)]}),_:1}),o(p,null,{default:a(()=>{var s;return[i(h(((s=t.project)==null?void 0:s.description)||""),1)]}),_:1})]),_:1})]),_:1},8,["src"])]),_:1},8,["to"]),f.showAuthor&&t.author?(c(),u(n,{key:0,"append-avatar":t.author.images?t.VITE_APP_S3_BUCKET+"/user/"+t.author.images:""},{default:a(()=>[o(d,null,{default:a(()=>[i(h(t.author.display_name||t.author.username||"未知用户"),1)]),_:1}),o(p,null,{default:a(()=>[i(h(t.author.username||""),1)]),_:1})]),_:1},8,["append-avatar"])):g("",!0)]),_:1})}const P=j(y,[["render",A],["__scopeId","data-v-7accec3e"]]);export{P as _};
