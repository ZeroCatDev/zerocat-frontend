import"./index-VWaDGczM.js";import{_ as u,H as l,G as d,o as p,c as f,w as e,a as r,K as s,a6 as m,L as o,S as i,a8 as k,M as g,O as V}from"./index-Hv2CJ3E2.js";import{v as b}from"./accountService-2Dpi9Zxt.js";import{V as x}from"./VSpacer-BsO7O3eE.js";import{V as y}from"./VContainer-CJWjEjmU.js";/* empty css              */const $={data(){return{token:"",user:{},BASE_API:"https://zerocat-api.houlangs.com"}},mounted(){l.isLogin.value==!0&&this.$router.push("/")},async created(){if(d({title:"魔术链接登录"}),this.$route.query.token)try{await this.$nextTick();const a=await b(this.$route.query.token);this.$toast.add({severity:a.data.status,summary:a.data.status,detail:a.data.message,life:3e3}),a.data.token&&(this.token=a.data.token,await l.setUser(a.data.token),l.isLogin.value==!0&&this.$router.push("/"))}catch(a){this.user=a}else console.log("无token")}};function v(a,t,C,w,n,B){return p(),f(y,null,{default:e(()=>[r(V,{class:"mx-auto",rel:"noopener",target:"_blank",border:""},{title:e(()=>t[0]||(t[0]=[s("span",null,"您正在登录一个账户",-1)])),subtitle:e(()=>t[1]||(t[1]=[s("span",null,"其他页面传来了一个登录请求，正常情况下它会被自动处理",-1)])),default:e(()=>[r(m,{class:"bg-surface-light pt-4"},{default:e(()=>[t[2]||(t[2]=o("传入的token是：")),t[3]||(t[3]=s("br",null,null,-1)),o(" "+i(n.token)+" ",1),t[4]||(t[4]=s("br",null,null,-1)),t[5]||(t[5]=s("br",null,null,-1)),t[6]||(t[6]=o("处理后的数据是：")),t[7]||(t[7]=s("br",null,null,-1)),o(" "+i(n.user),1)]),_:1}),r(k,null,{default:e(()=>[r(x),r(g,{color:"primary",text:"返回登录",variant:"tonal",to:"/app/account/login",onClick:a.login},null,8,["onClick"])]),_:1})]),_:1})]),_:1})}const q=u($,[["render",v]]);export{q as default};
