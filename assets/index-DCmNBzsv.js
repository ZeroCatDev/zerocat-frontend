import{aS as Wa,p as U,u as pe,x as V,w as yt,aT as Xt,y as dt,aq as xe,aU as Pe,g as ke,a as Ze,d as Ee,aV as Ot,f as w,e as c,m as J,I as ve,aW as za,k as re,D as Ie,r as be,at as Ra,aX as Ua,aY as ja,aZ as ft,A as La,a_ as q,a$ as $t,b0 as Ge,b1 as Le,b2 as Na,b3 as Ha,b4 as wt,b5 as Ya,F as se,b6 as qa,b7 as pt,S as Fe,O as de,C as Ga,i as R,L as C,aD as ce,X as H,b8 as mt,b9 as Ne,ar as Xa,ba as $a,a0 as Qa,_ as me,ab as ye,c as Ve,o as E,Y,a5 as Ka,N as h,$ as Qt,W as et,a9 as xt,a3 as tt,aE as Kt,aA as Jt,R as I,n as Zt,Q as at,aB as N,aF as Pt,ad as Ja,U as ea,ae as Za,aN as en,aP as tn,j as an,Z as nn,ah as rn,ai as sn,V as on,q as ae,T as ln,M as un}from"./index-BO3Jn2GH.js";import{V as kt}from"./VSelect-CTDExqSx.js";import{V as Dt}from"./VCheckboxBtn-BD_OJ1mA.js";import{V as Mt,m as cn}from"./VTable-BD0LZcWG.js";import{u as dn,m as fn}from"./filter-D2_HI1YO.js";import{V as _t}from"./VSpacer-BsiXipEJ.js";import{_ as ta}from"./OAuthManager-N6tpQUuJ.js";import{_ as aa}from"./EmailManager-D80sPfSW.js";import{u as mn,a as hn,b as gn,c as _n,g as bn}from"./accountService-kcxEUgyP.js";import{V as vn}from"./VFileInput-DLAm-UMK.js";import{V as yn}from"./VSheet-B6iQD8KV.js";import{V as wn}from"./VTextarea-CY0dvgEP.js";import{a as pn,_ as xn}from"./UserFollowers-C2wTtUle.js";import{_ as Pn}from"./UserBlocked-C2XMpDtO.js";import"./VSelectionControl-BTJIlb16.js";import"./verifyEmail-Cjo4X_ap.js";import"./oauth_providers-BTwCArWd.js";function Ct(e,t,a){return Object.keys(e).filter(n=>Wa(n)&&n.endsWith(t)).reduce((n,r)=>(n[r.slice(0,-t.length)]=s=>e[r](s,a(s)),n),{})}const na=6048e5,kn=864e5,He=43200,Vt=1440,It=Symbol.for("constructDateFrom");function oe(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&It in e?e[It](t):e instanceof Date?new e.constructor(t):new Date(t)}function F(e,t){return oe(t||e,e)}let Dn={};function Be(){return Dn}function fe(e,t){var i,l,u,f;const a=Be(),n=(t==null?void 0:t.weekStartsOn)??((l=(i=t==null?void 0:t.locale)==null?void 0:i.options)==null?void 0:l.weekStartsOn)??a.weekStartsOn??((f=(u=a.locale)==null?void 0:u.options)==null?void 0:f.weekStartsOn)??0,r=F(e,t==null?void 0:t.in),s=r.getDay(),o=(s<n?7:0)+s-n;return r.setDate(r.getDate()-o),r.setHours(0,0,0,0),r}function Xe(e,t){return fe(e,{...t,weekStartsOn:1})}function ra(e,t){const a=F(e,t==null?void 0:t.in),n=a.getFullYear(),r=oe(a,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const s=Xe(r),o=oe(a,0);o.setFullYear(n,0,4),o.setHours(0,0,0,0);const i=Xe(o);return a.getTime()>=s.getTime()?n+1:a.getTime()>=i.getTime()?n:n-1}function $e(e){const t=F(e),a=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return a.setUTCFullYear(t.getFullYear()),+e-+a}function Ae(e,...t){const a=oe.bind(null,e||t.find(n=>typeof n=="object"));return t.map(a)}function Ft(e,t){const a=F(e,t==null?void 0:t.in);return a.setHours(0,0,0,0),a}function Sn(e,t,a){const[n,r]=Ae(a==null?void 0:a.in,e,t),s=Ft(n),o=Ft(r),i=+s-$e(s),l=+o-$e(o);return Math.round((i-l)/kn)}function Tn(e,t){const a=ra(e,t),n=oe(e,0);return n.setFullYear(a,0,4),n.setHours(0,0,0,0),Xe(n)}function qe(e,t){const a=+F(e)-+F(t);return a<0?-1:a>0?1:a}function On(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function Mn(e){return!(!On(e)&&typeof e!="number"||isNaN(+F(e)))}function Cn(e,t,a){const[n,r]=Ae(a==null?void 0:a.in,e,t),s=n.getFullYear()-r.getFullYear(),o=n.getMonth()-r.getMonth();return s*12+o}function Vn(e){return t=>{const n=(e?Math[e]:Math.trunc)(t);return n===0?0:n}}function In(e,t){return+F(e)-+F(t)}function Fn(e,t){const a=F(e,t==null?void 0:t.in);return a.setHours(23,59,59,999),a}function En(e,t){const a=F(e,t==null?void 0:t.in),n=a.getMonth();return a.setFullYear(a.getFullYear(),n+1,0),a.setHours(23,59,59,999),a}function Bn(e,t){const a=F(e,t==null?void 0:t.in);return+Fn(a,t)==+En(a,t)}function An(e,t,a){const[n,r,s]=Ae(a==null?void 0:a.in,e,e,t),o=qe(r,s),i=Math.abs(Cn(r,s));if(i<1)return 0;r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-o*i);let l=qe(r,s)===-o;Bn(n)&&i===1&&qe(n,s)===1&&(l=!1);const u=o*(i-+l);return u===0?0:u}function Wn(e,t,a){const n=In(e,t)/1e3;return Vn(a==null?void 0:a.roundingMethod)(n)}function zn(e,t){const a=F(e,t==null?void 0:t.in);return a.setFullYear(a.getFullYear(),0,1),a.setHours(0,0,0,0),a}const Rn={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Un=(e,t,a)=>{let n;const r=Rn[e];return typeof r=="string"?n=r:t===1?n=r.one:n=r.other.replace("{{count}}",t.toString()),a!=null&&a.addSuffix?a.comparison&&a.comparison>0?"in "+n:n+" ago":n};function we(e){return(t={})=>{const a=t.width?String(t.width):e.defaultWidth;return e.formats[a]||e.formats[e.defaultWidth]}}const jn={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Ln={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Nn={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Hn={date:we({formats:jn,defaultWidth:"full"}),time:we({formats:Ln,defaultWidth:"full"}),dateTime:we({formats:Nn,defaultWidth:"full"})},Yn={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},qn=(e,t,a,n)=>Yn[e];function G(e){return(t,a)=>{const n=a!=null&&a.context?String(a.context):"standalone";let r;if(n==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,i=a!=null&&a.width?String(a.width):o;r=e.formattingValues[i]||e.formattingValues[o]}else{const o=e.defaultWidth,i=a!=null&&a.width?String(a.width):e.defaultWidth;r=e.values[i]||e.values[o]}const s=e.argumentCallback?e.argumentCallback(t):t;return r[s]}}const Gn={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Xn={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},$n={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Qn={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Kn={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Jn={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Zn=(e,t)=>{const a=Number(e),n=a%100;if(n>20||n<10)switch(n%10){case 1:return a+"st";case 2:return a+"nd";case 3:return a+"rd"}return a+"th"},er={ordinalNumber:Zn,era:G({values:Gn,defaultWidth:"wide"}),quarter:G({values:Xn,defaultWidth:"wide",argumentCallback:e=>e-1}),month:G({values:$n,defaultWidth:"wide"}),day:G({values:Qn,defaultWidth:"wide"}),dayPeriod:G({values:Kn,defaultWidth:"wide",formattingValues:Jn,defaultFormattingWidth:"wide"})};function X(e){return(t,a={})=>{const n=a.width,r=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],s=t.match(r);if(!s)return null;const o=s[0],i=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(i)?ar(i,m=>m.test(o)):tr(i,m=>m.test(o));let u;u=e.valueCallback?e.valueCallback(l):l,u=a.valueCallback?a.valueCallback(u):u;const f=t.slice(o.length);return{value:u,rest:f}}}function tr(e,t){for(const a in e)if(Object.prototype.hasOwnProperty.call(e,a)&&t(e[a]))return a}function ar(e,t){for(let a=0;a<e.length;a++)if(t(e[a]))return a}function sa(e){return(t,a={})=>{const n=t.match(e.matchPattern);if(!n)return null;const r=n[0],s=t.match(e.parsePattern);if(!s)return null;let o=e.valueCallback?e.valueCallback(s[0]):s[0];o=a.valueCallback?a.valueCallback(o):o;const i=t.slice(r.length);return{value:o,rest:i}}}const nr=/^(\d+)(th|st|nd|rd)?/i,rr=/\d+/i,sr={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},or={any:[/^b/i,/^(a|c)/i]},ir={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},lr={any:[/1/i,/2/i,/3/i,/4/i]},ur={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},cr={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},dr={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},fr={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},mr={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},hr={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},gr={ordinalNumber:sa({matchPattern:nr,parsePattern:rr,valueCallback:e=>parseInt(e,10)}),era:X({matchPatterns:sr,defaultMatchWidth:"wide",parsePatterns:or,defaultParseWidth:"any"}),quarter:X({matchPatterns:ir,defaultMatchWidth:"wide",parsePatterns:lr,defaultParseWidth:"any",valueCallback:e=>e+1}),month:X({matchPatterns:ur,defaultMatchWidth:"wide",parsePatterns:cr,defaultParseWidth:"any"}),day:X({matchPatterns:dr,defaultMatchWidth:"wide",parsePatterns:fr,defaultParseWidth:"any"}),dayPeriod:X({matchPatterns:mr,defaultMatchWidth:"any",parsePatterns:hr,defaultParseWidth:"any"})},oa={code:"en-US",formatDistance:Un,formatLong:Hn,formatRelative:qn,localize:er,match:gr,options:{weekStartsOn:0,firstWeekContainsDate:1}};function _r(e,t){const a=F(e,t==null?void 0:t.in);return Sn(a,zn(a))+1}function br(e,t){const a=F(e,t==null?void 0:t.in),n=+Xe(a)-+Tn(a);return Math.round(n/na)+1}function ia(e,t){var f,m,g,y;const a=F(e,t==null?void 0:t.in),n=a.getFullYear(),r=Be(),s=(t==null?void 0:t.firstWeekContainsDate)??((m=(f=t==null?void 0:t.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??r.firstWeekContainsDate??((y=(g=r.locale)==null?void 0:g.options)==null?void 0:y.firstWeekContainsDate)??1,o=oe((t==null?void 0:t.in)||e,0);o.setFullYear(n+1,0,s),o.setHours(0,0,0,0);const i=fe(o,t),l=oe((t==null?void 0:t.in)||e,0);l.setFullYear(n,0,s),l.setHours(0,0,0,0);const u=fe(l,t);return+a>=+i?n+1:+a>=+u?n:n-1}function vr(e,t){var i,l,u,f;const a=Be(),n=(t==null?void 0:t.firstWeekContainsDate)??((l=(i=t==null?void 0:t.locale)==null?void 0:i.options)==null?void 0:l.firstWeekContainsDate)??a.firstWeekContainsDate??((f=(u=a.locale)==null?void 0:u.options)==null?void 0:f.firstWeekContainsDate)??1,r=ia(e,t),s=oe((t==null?void 0:t.in)||e,0);return s.setFullYear(r,0,n),s.setHours(0,0,0,0),fe(s,t)}function yr(e,t){const a=F(e,t==null?void 0:t.in),n=+fe(a,t)-+vr(a,t);return Math.round(n/na)+1}function D(e,t){const a=e<0?"-":"",n=Math.abs(e).toString().padStart(t,"0");return a+n}const ne={y(e,t){const a=e.getFullYear(),n=a>0?a:1-a;return D(t==="yy"?n%100:n,t.length)},M(e,t){const a=e.getMonth();return t==="M"?String(a+1):D(a+1,2)},d(e,t){return D(e.getDate(),t.length)},a(e,t){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return a.toUpperCase();case"aaa":return a;case"aaaaa":return a[0];case"aaaa":default:return a==="am"?"a.m.":"p.m."}},h(e,t){return D(e.getHours()%12||12,t.length)},H(e,t){return D(e.getHours(),t.length)},m(e,t){return D(e.getMinutes(),t.length)},s(e,t){return D(e.getSeconds(),t.length)},S(e,t){const a=t.length,n=e.getMilliseconds(),r=Math.trunc(n*Math.pow(10,a-3));return D(r,t.length)}},_e={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Et={G:function(e,t,a){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return a.era(n,{width:"abbreviated"});case"GGGGG":return a.era(n,{width:"narrow"});case"GGGG":default:return a.era(n,{width:"wide"})}},y:function(e,t,a){if(t==="yo"){const n=e.getFullYear(),r=n>0?n:1-n;return a.ordinalNumber(r,{unit:"year"})}return ne.y(e,t)},Y:function(e,t,a,n){const r=ia(e,n),s=r>0?r:1-r;if(t==="YY"){const o=s%100;return D(o,2)}return t==="Yo"?a.ordinalNumber(s,{unit:"year"}):D(s,t.length)},R:function(e,t){const a=ra(e);return D(a,t.length)},u:function(e,t){const a=e.getFullYear();return D(a,t.length)},Q:function(e,t,a){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return D(n,2);case"Qo":return a.ordinalNumber(n,{unit:"quarter"});case"QQQ":return a.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return a.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return a.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,a){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return D(n,2);case"qo":return a.ordinalNumber(n,{unit:"quarter"});case"qqq":return a.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return a.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return a.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,a){const n=e.getMonth();switch(t){case"M":case"MM":return ne.M(e,t);case"Mo":return a.ordinalNumber(n+1,{unit:"month"});case"MMM":return a.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return a.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return a.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,a){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return D(n+1,2);case"Lo":return a.ordinalNumber(n+1,{unit:"month"});case"LLL":return a.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return a.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return a.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,a,n){const r=yr(e,n);return t==="wo"?a.ordinalNumber(r,{unit:"week"}):D(r,t.length)},I:function(e,t,a){const n=br(e);return t==="Io"?a.ordinalNumber(n,{unit:"week"}):D(n,t.length)},d:function(e,t,a){return t==="do"?a.ordinalNumber(e.getDate(),{unit:"date"}):ne.d(e,t)},D:function(e,t,a){const n=_r(e);return t==="Do"?a.ordinalNumber(n,{unit:"dayOfYear"}):D(n,t.length)},E:function(e,t,a){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return a.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return a.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(n,{width:"short",context:"formatting"});case"EEEE":default:return a.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,a,n){const r=e.getDay(),s=(r-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return D(s,2);case"eo":return a.ordinalNumber(s,{unit:"day"});case"eee":return a.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return a.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(r,{width:"short",context:"formatting"});case"eeee":default:return a.day(r,{width:"wide",context:"formatting"})}},c:function(e,t,a,n){const r=e.getDay(),s=(r-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return D(s,t.length);case"co":return a.ordinalNumber(s,{unit:"day"});case"ccc":return a.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return a.day(r,{width:"narrow",context:"standalone"});case"cccccc":return a.day(r,{width:"short",context:"standalone"});case"cccc":default:return a.day(r,{width:"wide",context:"standalone"})}},i:function(e,t,a){const n=e.getDay(),r=n===0?7:n;switch(t){case"i":return String(r);case"ii":return D(r,t.length);case"io":return a.ordinalNumber(r,{unit:"day"});case"iii":return a.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return a.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return a.day(n,{width:"short",context:"formatting"});case"iiii":default:return a.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,a){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return a.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return a.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return a.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return a.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,a){const n=e.getHours();let r;switch(n===12?r=_e.noon:n===0?r=_e.midnight:r=n/12>=1?"pm":"am",t){case"b":case"bb":return a.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return a.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return a.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return a.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(e,t,a){const n=e.getHours();let r;switch(n>=17?r=_e.evening:n>=12?r=_e.afternoon:n>=4?r=_e.morning:r=_e.night,t){case"B":case"BB":case"BBB":return a.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return a.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return a.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(e,t,a){if(t==="ho"){let n=e.getHours()%12;return n===0&&(n=12),a.ordinalNumber(n,{unit:"hour"})}return ne.h(e,t)},H:function(e,t,a){return t==="Ho"?a.ordinalNumber(e.getHours(),{unit:"hour"}):ne.H(e,t)},K:function(e,t,a){const n=e.getHours()%12;return t==="Ko"?a.ordinalNumber(n,{unit:"hour"}):D(n,t.length)},k:function(e,t,a){let n=e.getHours();return n===0&&(n=24),t==="ko"?a.ordinalNumber(n,{unit:"hour"}):D(n,t.length)},m:function(e,t,a){return t==="mo"?a.ordinalNumber(e.getMinutes(),{unit:"minute"}):ne.m(e,t)},s:function(e,t,a){return t==="so"?a.ordinalNumber(e.getSeconds(),{unit:"second"}):ne.s(e,t)},S:function(e,t){return ne.S(e,t)},X:function(e,t,a){const n=e.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return At(n);case"XXXX":case"XX":return ue(n);case"XXXXX":case"XXX":default:return ue(n,":")}},x:function(e,t,a){const n=e.getTimezoneOffset();switch(t){case"x":return At(n);case"xxxx":case"xx":return ue(n);case"xxxxx":case"xxx":default:return ue(n,":")}},O:function(e,t,a){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Bt(n,":");case"OOOO":default:return"GMT"+ue(n,":")}},z:function(e,t,a){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Bt(n,":");case"zzzz":default:return"GMT"+ue(n,":")}},t:function(e,t,a){const n=Math.trunc(+e/1e3);return D(n,t.length)},T:function(e,t,a){return D(+e,t.length)}};function Bt(e,t=""){const a=e>0?"-":"+",n=Math.abs(e),r=Math.trunc(n/60),s=n%60;return s===0?a+String(r):a+String(r)+t+D(s,2)}function At(e,t){return e%60===0?(e>0?"-":"+")+D(Math.abs(e)/60,2):ue(e,t)}function ue(e,t=""){const a=e>0?"-":"+",n=Math.abs(e),r=D(Math.trunc(n/60),2),s=D(n%60,2);return a+r+t+s}const Wt=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},la=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},wr=(e,t)=>{const a=e.match(/(P+)(p+)?/)||[],n=a[1],r=a[2];if(!r)return Wt(e,t);let s;switch(n){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;case"PPPP":default:s=t.dateTime({width:"full"});break}return s.replace("{{date}}",Wt(n,t)).replace("{{time}}",la(r,t))},pr={p:la,P:wr},xr=/^D+$/,Pr=/^Y+$/,kr=["D","DD","YY","YYYY"];function Dr(e){return xr.test(e)}function Sr(e){return Pr.test(e)}function Tr(e,t,a){const n=Or(e,t,a);if(console.warn(n),kr.includes(e))throw new RangeError(n)}function Or(e,t,a){const n=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${a}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Mr=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Cr=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Vr=/^'([^]*?)'?$/,Ir=/''/g,Fr=/[a-zA-Z]/;function Er(e,t,a){var f,m,g,y;const n=Be(),r=n.locale??oa,s=n.firstWeekContainsDate??((m=(f=n.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??1,o=n.weekStartsOn??((y=(g=n.locale)==null?void 0:g.options)==null?void 0:y.weekStartsOn)??0,i=F(e,a==null?void 0:a.in);if(!Mn(i))throw new RangeError("Invalid time value");let l=t.match(Cr).map(d=>{const v=d[0];if(v==="p"||v==="P"){const b=pr[v];return b(d,r.formatLong)}return d}).join("").match(Mr).map(d=>{if(d==="''")return{isToken:!1,value:"'"};const v=d[0];if(v==="'")return{isToken:!1,value:Br(d)};if(Et[v])return{isToken:!0,value:d};if(v.match(Fr))throw new RangeError("Format string contains an unescaped latin alphabet character `"+v+"`");return{isToken:!1,value:d}});r.localize.preprocessor&&(l=r.localize.preprocessor(i,l));const u={firstWeekContainsDate:s,weekStartsOn:o,locale:r};return l.map(d=>{if(!d.isToken)return d.value;const v=d.value;(Sr(v)||Dr(v))&&Tr(v,t,String(e));const b=Et[v[0]];return b(i,v,r.localize,u)}).join("")}function Br(e){const t=e.match(Vr);return t?t[1].replace(Ir,"'"):e}function Ar(e,t,a){const n=Be(),r=(a==null?void 0:a.locale)??n.locale??oa,s=2520,o=qe(e,t);if(isNaN(o))throw new RangeError("Invalid time value");const i=Object.assign({},a,{addSuffix:a==null?void 0:a.addSuffix,comparison:o}),[l,u]=Ae(a==null?void 0:a.in,...o>0?[t,e]:[e,t]),f=Wn(u,l),m=($e(u)-$e(l))/1e3,g=Math.round((f-m)/60);let y;if(g<2)return a!=null&&a.includeSeconds?f<5?r.formatDistance("lessThanXSeconds",5,i):f<10?r.formatDistance("lessThanXSeconds",10,i):f<20?r.formatDistance("lessThanXSeconds",20,i):f<40?r.formatDistance("halfAMinute",0,i):f<60?r.formatDistance("lessThanXMinutes",1,i):r.formatDistance("xMinutes",1,i):g===0?r.formatDistance("lessThanXMinutes",1,i):r.formatDistance("xMinutes",g,i);if(g<45)return r.formatDistance("xMinutes",g,i);if(g<90)return r.formatDistance("aboutXHours",1,i);if(g<Vt){const d=Math.round(g/60);return r.formatDistance("aboutXHours",d,i)}else{if(g<s)return r.formatDistance("xDays",1,i);if(g<He){const d=Math.round(g/Vt);return r.formatDistance("xDays",d,i)}else if(g<He*2)return y=Math.round(g/He),r.formatDistance("aboutXMonths",y,i)}if(y=An(u,l),y<12){const d=Math.round(g/He);return r.formatDistance("xMonths",d,i)}else{const d=y%12,v=Math.trunc(y/12);return d<3?r.formatDistance("aboutXYears",v,i):d<9?r.formatDistance("overXYears",v,i):r.formatDistance("almostXYears",v+1,i)}}function Wr(e,t,a){const[n,r]=Ae(a==null?void 0:a.in,e,t);return+fe(n,a)==+fe(r,a)}const zr={lessThanXSeconds:{one:"不到 1 秒",other:"不到 {{count}} 秒"},xSeconds:{one:"1 秒",other:"{{count}} 秒"},halfAMinute:"半分钟",lessThanXMinutes:{one:"不到 1 分钟",other:"不到 {{count}} 分钟"},xMinutes:{one:"1 分钟",other:"{{count}} 分钟"},xHours:{one:"1 小时",other:"{{count}} 小时"},aboutXHours:{one:"大约 1 小时",other:"大约 {{count}} 小时"},xDays:{one:"1 天",other:"{{count}} 天"},aboutXWeeks:{one:"大约 1 个星期",other:"大约 {{count}} 个星期"},xWeeks:{one:"1 个星期",other:"{{count}} 个星期"},aboutXMonths:{one:"大约 1 个月",other:"大约 {{count}} 个月"},xMonths:{one:"1 个月",other:"{{count}} 个月"},aboutXYears:{one:"大约 1 年",other:"大约 {{count}} 年"},xYears:{one:"1 年",other:"{{count}} 年"},overXYears:{one:"超过 1 年",other:"超过 {{count}} 年"},almostXYears:{one:"将近 1 年",other:"将近 {{count}} 年"}},Rr=(e,t,a)=>{let n;const r=zr[e];return typeof r=="string"?n=r:t===1?n=r.one:n=r.other.replace("{{count}}",String(t)),a!=null&&a.addSuffix?a.comparison&&a.comparison>0?n+"内":n+"前":n},Ur={full:"y'年'M'月'd'日' EEEE",long:"y'年'M'月'd'日'",medium:"yyyy-MM-dd",short:"yy-MM-dd"},jr={full:"zzzz a h:mm:ss",long:"z a h:mm:ss",medium:"a h:mm:ss",short:"a h:mm"},Lr={full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},Nr={date:we({formats:Ur,defaultWidth:"full"}),time:we({formats:jr,defaultWidth:"full"}),dateTime:we({formats:Lr,defaultWidth:"full"})};function zt(e,t,a){const n="eeee p";return Wr(e,t,a)?n:e.getTime()>t.getTime()?"'下个'"+n:"'上个'"+n}const Hr={lastWeek:zt,yesterday:"'昨天' p",today:"'今天' p",tomorrow:"'明天' p",nextWeek:zt,other:"PP p"},Yr=(e,t,a,n)=>{const r=Hr[e];return typeof r=="function"?r(t,a,n):r},qr={narrow:["前","公元"],abbreviated:["前","公元"],wide:["公元前","公元"]},Gr={narrow:["1","2","3","4"],abbreviated:["第一季","第二季","第三季","第四季"],wide:["第一季度","第二季度","第三季度","第四季度"]},Xr={narrow:["一","二","三","四","五","六","七","八","九","十","十一","十二"],abbreviated:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],wide:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]},$r={narrow:["日","一","二","三","四","五","六"],short:["日","一","二","三","四","五","六"],abbreviated:["周日","周一","周二","周三","周四","周五","周六"],wide:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"]},Qr={narrow:{am:"上",pm:"下",midnight:"凌晨",noon:"午",morning:"早",afternoon:"下午",evening:"晚",night:"夜"},abbreviated:{am:"上午",pm:"下午",midnight:"凌晨",noon:"中午",morning:"早晨",afternoon:"中午",evening:"晚上",night:"夜间"},wide:{am:"上午",pm:"下午",midnight:"凌晨",noon:"中午",morning:"早晨",afternoon:"中午",evening:"晚上",night:"夜间"}},Kr={narrow:{am:"上",pm:"下",midnight:"凌晨",noon:"午",morning:"早",afternoon:"下午",evening:"晚",night:"夜"},abbreviated:{am:"上午",pm:"下午",midnight:"凌晨",noon:"中午",morning:"早晨",afternoon:"中午",evening:"晚上",night:"夜间"},wide:{am:"上午",pm:"下午",midnight:"凌晨",noon:"中午",morning:"早晨",afternoon:"中午",evening:"晚上",night:"夜间"}},Jr=(e,t)=>{const a=Number(e);switch(t==null?void 0:t.unit){case"date":return a.toString()+"日";case"hour":return a.toString()+"时";case"minute":return a.toString()+"分";case"second":return a.toString()+"秒";default:return"第 "+a.toString()}},Zr={ordinalNumber:Jr,era:G({values:qr,defaultWidth:"wide"}),quarter:G({values:Gr,defaultWidth:"wide",argumentCallback:e=>e-1}),month:G({values:Xr,defaultWidth:"wide"}),day:G({values:$r,defaultWidth:"wide"}),dayPeriod:G({values:Qr,defaultWidth:"wide",formattingValues:Kr,defaultFormattingWidth:"wide"})},es=/^(第\s*)?\d+(日|时|分|秒)?/i,ts=/\d+/i,as={narrow:/^(前)/i,abbreviated:/^(前)/i,wide:/^(公元前|公元)/i},ns={any:[/^(前)/i,/^(公元)/i]},rs={narrow:/^[1234]/i,abbreviated:/^第[一二三四]刻/i,wide:/^第[一二三四]刻钟/i},ss={any:[/(1|一)/i,/(2|二)/i,/(3|三)/i,/(4|四)/i]},os={narrow:/^(一|二|三|四|五|六|七|八|九|十[二一])/i,abbreviated:/^(一|二|三|四|五|六|七|八|九|十[二一]|\d|1[12])月/i,wide:/^(一|二|三|四|五|六|七|八|九|十[二一])月/i},is={narrow:[/^一/i,/^二/i,/^三/i,/^四/i,/^五/i,/^六/i,/^七/i,/^八/i,/^九/i,/^十(?!(一|二))/i,/^十一/i,/^十二/i],any:[/^一|1/i,/^二|2/i,/^三|3/i,/^四|4/i,/^五|5/i,/^六|6/i,/^七|7/i,/^八|8/i,/^九|9/i,/^十(?!(一|二))|10/i,/^十一|11/i,/^十二|12/i]},ls={narrow:/^[一二三四五六日]/i,short:/^[一二三四五六日]/i,abbreviated:/^周[一二三四五六日]/i,wide:/^星期[一二三四五六日]/i},us={any:[/日/i,/一/i,/二/i,/三/i,/四/i,/五/i,/六/i]},cs={any:/^(上午?|下午?|午夜|[中正]午|早上?|下午|晚上?|凌晨|)/i},ds={any:{am:/^上午?/i,pm:/^下午?/i,midnight:/^午夜/i,noon:/^[中正]午/i,morning:/^早上/i,afternoon:/^下午/i,evening:/^晚上?/i,night:/^凌晨/i}},fs={ordinalNumber:sa({matchPattern:es,parsePattern:ts,valueCallback:e=>parseInt(e,10)}),era:X({matchPatterns:as,defaultMatchWidth:"wide",parsePatterns:ns,defaultParseWidth:"any"}),quarter:X({matchPatterns:rs,defaultMatchWidth:"wide",parsePatterns:ss,defaultParseWidth:"any",valueCallback:e=>e+1}),month:X({matchPatterns:os,defaultMatchWidth:"wide",parsePatterns:is,defaultParseWidth:"any"}),day:X({matchPatterns:ls,defaultMatchWidth:"wide",parsePatterns:us,defaultParseWidth:"any"}),dayPeriod:X({matchPatterns:cs,defaultMatchWidth:"any",parsePatterns:ds,defaultParseWidth:"any"})},ms={code:"zh-CN",formatDistance:Rr,formatLong:Nr,formatRelative:Yr,localize:Zr,match:fs,options:{weekStartsOn:1,firstWeekContainsDate:4}},hs=U({page:{type:[Number,String],default:1},itemsPerPage:{type:[Number,String],default:10}},"DataTable-paginate"),ua=Symbol.for("vuetify:data-table-pagination");function gs(e){const t=pe(e,"page",void 0,n=>Number(n??1)),a=pe(e,"itemsPerPage",void 0,n=>Number(n??10));return{page:t,itemsPerPage:a}}function _s(e){const{page:t,itemsPerPage:a,itemsLength:n}=e,r=V(()=>a.value===-1?0:a.value*(t.value-1)),s=V(()=>a.value===-1?n.value:Math.min(n.value,r.value+a.value)),o=V(()=>a.value===-1||n.value===0?1:Math.ceil(n.value/a.value));yt([t,o],()=>{t.value>o.value&&(t.value=o.value)});function i(g){a.value=g,t.value=1}function l(){t.value=dt(t.value+1,1,o.value)}function u(){t.value=dt(t.value-1,1,o.value)}function f(g){t.value=dt(g,1,o.value)}const m={page:t,itemsPerPage:a,startIndex:r,stopIndex:s,pageCount:o,itemsLength:n,nextPage:l,prevPage:u,setPage:f,setItemsPerPage:i};return Pe(ua,m),m}function bs(){const e=xe(ua);if(!e)throw new Error("Missing pagination!");return e}function vs(e){const t=Xt("usePaginatedItems"),{items:a,startIndex:n,stopIndex:r,itemsPerPage:s}=e,o=V(()=>s.value<=0?a.value:a.value.slice(n.value,r.value));return yt(o,i=>{t.emit("update:currentItems",i)},{immediate:!0}),{paginatedItems:o}}const ca=U({prevIcon:{type:ve,default:"$prev"},nextIcon:{type:ve,default:"$next"},firstIcon:{type:ve,default:"$first"},lastIcon:{type:ve,default:"$last"},itemsPerPageText:{type:String,default:"$vuetify.dataFooter.itemsPerPageText"},pageText:{type:String,default:"$vuetify.dataFooter.pageText"},firstPageLabel:{type:String,default:"$vuetify.dataFooter.firstPage"},prevPageLabel:{type:String,default:"$vuetify.dataFooter.prevPage"},nextPageLabel:{type:String,default:"$vuetify.dataFooter.nextPage"},lastPageLabel:{type:String,default:"$vuetify.dataFooter.lastPage"},itemsPerPageOptions:{type:Array,default:()=>[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}]},showCurrentPage:Boolean},"VDataTableFooter"),Rt=ke()({name:"VDataTableFooter",props:ca(),setup(e,t){let{slots:a}=t;const{t:n}=Ze(),{page:r,pageCount:s,startIndex:o,stopIndex:i,itemsLength:l,itemsPerPage:u,setItemsPerPage:f}=bs(),m=V(()=>e.itemsPerPageOptions.map(g=>typeof g=="number"?{value:g,title:g===-1?n("$vuetify.dataFooter.itemsPerPageAll"):String(g)}:{...g,title:isNaN(Number(g.title))?n(g.title):g.title}));return Ee(()=>{var y;const g=Ot.filterProps(e);return w("div",{class:"v-data-table-footer"},[(y=a.prepend)==null?void 0:y.call(a),w("div",{class:"v-data-table-footer__items-per-page"},[w("span",{"aria-label":n(e.itemsPerPageText)},[n(e.itemsPerPageText)]),c(kt,{items:m.value,modelValue:u.value,"onUpdate:modelValue":d=>f(Number(d)),density:"compact",variant:"outlined","hide-details":!0},null)]),w("div",{class:"v-data-table-footer__info"},[w("div",null,[n(e.pageText,l.value?o.value+1:0,i.value,l.value)])]),w("div",{class:"v-data-table-footer__pagination"},[c(Ot,J({modelValue:r.value,"onUpdate:modelValue":d=>r.value=d,density:"comfortable","first-aria-label":e.firstPageLabel,"last-aria-label":e.lastPageLabel,length:s.value,"next-aria-label":e.nextPageLabel,"previous-aria-label":e.prevPageLabel,rounded:!0,"show-first-last-page":!0,"total-visible":e.showCurrentPage?1:0,variant:"plain"},g),null)])])}),{}}}),Qe=za({align:{type:String,default:"start"},fixed:Boolean,fixedOffset:[Number,String],height:[Number,String],lastFixed:Boolean,noPadding:Boolean,tag:String,width:[Number,String],maxWidth:[Number,String],nowrap:Boolean},(e,t)=>{let{slots:a}=t;const n=e.tag??"td";return c(n,{tabindex:"0",class:Ie(["v-data-table__td",{"v-data-table-column--fixed":e.fixed,"v-data-table-column--last-fixed":e.lastFixed,"v-data-table-column--no-padding":e.noPadding,"v-data-table-column--nowrap":e.nowrap},`v-data-table-column--align-${e.align}`]),style:{height:re(e.height),width:re(e.width),maxWidth:re(e.maxWidth),left:re(e.fixedOffset||null)}},{default:()=>{var r;return[(r=a.default)==null?void 0:r.call(a)]}})}),ys=U({headers:Array},"DataTable-header"),da=Symbol.for("vuetify:data-table-headers"),fa={title:"",sortable:!1},ws={...fa,width:48};function ps(){const t=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).map(a=>({element:a,priority:0}));return{enqueue:(a,n)=>{let r=!1;for(let s=0;s<t.length;s++)if(t[s].priority>n){t.splice(s,0,{element:a,priority:n}),r=!0;break}r||t.push({element:a,priority:n})},size:()=>t.length,count:()=>{let a=0;if(!t.length)return 0;const n=Math.floor(t[0].priority);for(let r=0;r<t.length;r++)Math.floor(t[r].priority)===n&&(a+=1);return a},dequeue:()=>t.shift()}}function bt(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];if(!e.children)t.push(e);else for(const a of e.children)bt(a,t);return t}function ma(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new Set;for(const a of e)a.key&&t.add(a.key),a.children&&ma(a.children,t);return t}function xs(e){if(e.key){if(e.key==="data-table-group")return fa;if(["data-table-expand","data-table-select"].includes(e.key))return ws}}function St(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.children?Math.max(t,...e.children.map(a=>St(a,t+1))):t}function Ps(e){let t=!1;function a(s){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(s)if(o&&(s.fixed=!0),s.fixed)if(s.children)for(let i=s.children.length-1;i>=0;i--)a(s.children[i],!0);else t?isNaN(Number(s.width))?ja(`Multiple fixed columns should have a static width (key: ${s.key})`):s.minWidth=Math.max(Number(s.width)||0,Number(s.minWidth)||0):s.lastFixed=!0,t=!0;else if(s.children)for(let i=s.children.length-1;i>=0;i--)a(s.children[i]);else t=!1}for(let s=e.length-1;s>=0;s--)a(e[s]);function n(s){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!s)return o;if(s.children){s.fixedOffset=o;for(const i of s.children)o=n(i,o)}else s.fixed&&(s.fixedOffset=o,o+=parseFloat(s.width||"0")||0);return o}let r=0;for(const s of e)r=n(s,r)}function ks(e,t){const a=[];let n=0;const r=ps(e);for(;r.size()>0;){let o=r.count();const i=[];let l=1;for(;o>0;){const{element:u,priority:f}=r.dequeue(),m=t-n-St(u);if(i.push({...u,rowspan:m??1,colspan:u.children?bt(u).length:1}),u.children)for(const g of u.children){const y=f%1+l/Math.pow(10,n+2);r.enqueue(g,n+m+y)}l+=1,o-=1}n+=1,a.push(i)}return{columns:e.map(o=>bt(o)).flat(),headers:a}}function ha(e){const t=[];for(const a of e){const n={...xs(a),...a},r=n.key??(typeof n.value=="string"?n.value:null),s=n.value??r??null,o={...n,key:r,value:s,sortable:n.sortable??(n.key!=null||!!n.sort),children:n.children?ha(n.children):void 0};t.push(o)}return t}function Ds(e,t){const a=be([]),n=be([]),r=be({}),s=be({}),o=be({});Ra(()=>{var v,b,S;const u=(e.headers||Object.keys(e.items[0]??{}).map(_=>({key:_,title:Ua(_)}))).slice(),f=ma(u);(v=t==null?void 0:t.groupBy)!=null&&v.value.length&&!f.has("data-table-group")&&u.unshift({key:"data-table-group",title:"Group"}),(b=t==null?void 0:t.showSelect)!=null&&b.value&&!f.has("data-table-select")&&u.unshift({key:"data-table-select"}),(S=t==null?void 0:t.showExpand)!=null&&S.value&&!f.has("data-table-expand")&&u.push({key:"data-table-expand"});const m=ha(u);Ps(m);const g=Math.max(...m.map(_=>St(_)))+1,y=ks(m,g);a.value=y.headers,n.value=y.columns;const d=y.headers.flat(1);for(const _ of d)_.key&&(_.sortable&&(_.sort&&(r.value[_.key]=_.sort),_.sortRaw&&(s.value[_.key]=_.sortRaw)),_.filter&&(o.value[_.key]=_.filter))});const i={headers:a,columns:n,sortFunctions:r,sortRawFunctions:s,filterFunctions:o};return Pe(da,i),i}function nt(){const e=xe(da);if(!e)throw new Error("Missing headers!");return e}const Ss={showSelectAll:!1,allSelected:()=>[],select:e=>{var n;let{items:t,value:a}=e;return new Set(a?[(n=t[0])==null?void 0:n.value]:[])},selectAll:e=>{let{selected:t}=e;return t}},ga={showSelectAll:!0,allSelected:e=>{let{currentPage:t}=e;return t},select:e=>{let{items:t,value:a,selected:n}=e;for(const r of t)a?n.add(r.value):n.delete(r.value);return n},selectAll:e=>{let{value:t,currentPage:a,selected:n}=e;return ga.select({items:a,value:t,selected:n})}},_a={showSelectAll:!0,allSelected:e=>{let{allItems:t}=e;return t},select:e=>{let{items:t,value:a,selected:n}=e;for(const r of t)a?n.add(r.value):n.delete(r.value);return n},selectAll:e=>{let{value:t,allItems:a,selected:n}=e;return _a.select({items:a,value:t,selected:n})}},Ts=U({showSelect:Boolean,selectStrategy:{type:[String,Object],default:"page"},modelValue:{type:Array,default:()=>[]},valueComparator:{type:Function,default:$t}},"DataTable-select"),ba=Symbol.for("vuetify:data-table-selection");function Os(e,t){let{allItems:a,currentPage:n}=t;const r=pe(e,"modelValue",e.modelValue,_=>new Set(ft(_).map(P=>{var O;return((O=a.value.find(k=>e.valueComparator(P,k.value)))==null?void 0:O.value)??P})),_=>[..._.values()]),s=V(()=>a.value.filter(_=>_.selectable)),o=V(()=>n.value.filter(_=>_.selectable)),i=V(()=>{if(typeof e.selectStrategy=="object")return e.selectStrategy;switch(e.selectStrategy){case"single":return Ss;case"all":return _a;case"page":default:return ga}}),l=La(null);function u(_){return ft(_).every(P=>r.value.has(P.value))}function f(_){return ft(_).some(P=>r.value.has(P.value))}function m(_,P){const O=i.value.select({items:_,value:P,selected:new Set(r.value)});r.value=O}function g(_,P,O){const k=[];if(P=P??n.value.findIndex(B=>B.value===_.value),e.selectStrategy!=="single"&&(O!=null&&O.shiftKey)&&l.value!==null){const[B,W]=[l.value,P].sort((T,x)=>T-x);k.push(...n.value.slice(B,W+1).filter(T=>T.selectable))}else k.push(_),l.value=P;m(k,!u([_]))}function y(_){const P=i.value.selectAll({value:_,allItems:s.value,currentPage:o.value,selected:new Set(r.value)});r.value=P}const d=V(()=>r.value.size>0),v=V(()=>{const _=i.value.allSelected({allItems:s.value,currentPage:o.value});return!!_.length&&u(_)}),b=q(()=>i.value.showSelectAll),S={toggleSelect:g,select:m,selectAll:y,isSelected:u,isSomeSelected:f,someSelected:d,allSelected:v,showSelectAll:b,lastSelectedIndex:l,selectStrategy:i};return Pe(ba,S),S}function rt(){const e=xe(ba);if(!e)throw new Error("Missing selection!");return e}const Ms=U({sortBy:{type:Array,default:()=>[]},customKeySort:Object,multiSort:Boolean,mustSort:Boolean},"DataTable-sort"),va=Symbol.for("vuetify:data-table-sort");function Cs(e){const t=pe(e,"sortBy"),a=q(()=>e.mustSort),n=q(()=>e.multiSort);return{sortBy:t,mustSort:a,multiSort:n}}function Vs(e){const{sortBy:t,mustSort:a,multiSort:n,page:r}=e,s=l=>{if(l.key==null)return;let u=t.value.map(m=>({...m}))??[];const f=u.find(m=>m.key===l.key);f?f.order==="desc"?a.value&&u.length===1?f.order="asc":u=u.filter(m=>m.key!==l.key):f.order="desc":n.value?u.push({key:l.key,order:"asc"}):u=[{key:l.key,order:"asc"}],t.value=u,r&&(r.value=1)};function o(l){return!!t.value.find(u=>u.key===l.key)}const i={sortBy:t,toggleSort:s,isSorted:o};return Pe(va,i),i}function ya(){const e=xe(va);if(!e)throw new Error("Missing sort!");return e}function Is(e,t,a,n){const r=Ze();return{sortedItems:V(()=>{var o,i;return a.value.length?Fs(t.value,a.value,r.current.value,{transform:n==null?void 0:n.transform,sortFunctions:{...e.customKeySort,...(o=n==null?void 0:n.sortFunctions)==null?void 0:o.value},sortRawFunctions:(i=n==null?void 0:n.sortRawFunctions)==null?void 0:i.value}):t.value})}}function Fs(e,t,a,n){const r=new Intl.Collator(a,{sensitivity:"accent",usage:"sort"});return e.map(o=>[o,n!=null&&n.transform?n.transform(o):o]).sort((o,i)=>{var l,u;for(let f=0;f<t.length;f++){let m=!1;const g=t[f].key,y=t[f].order??"asc";if(y===!1)continue;let d=Ge(o[1],g),v=Ge(i[1],g),b=o[0].raw,S=i[0].raw;if(y==="desc"&&([d,v]=[v,d],[b,S]=[S,b]),(l=n==null?void 0:n.sortRawFunctions)!=null&&l[g]){const _=n.sortRawFunctions[g](b,S);if(_==null)continue;if(m=!0,_)return _}if((u=n==null?void 0:n.sortFunctions)!=null&&u[g]){const _=n.sortFunctions[g](d,v);if(_==null)continue;if(m=!0,_)return _}if(!m){if(d instanceof Date&&v instanceof Date)return d.getTime()-v.getTime();if([d,v]=[d,v].map(_=>_!=null?_.toString().toLocaleLowerCase():_),d!==v)return Le(d)&&Le(v)?0:Le(d)?-1:Le(v)?1:!isNaN(d)&&!isNaN(v)?Number(d)-Number(v):r.compare(d,v)}}return 0}).map(o=>{let[i]=o;return i})}const wa=U({color:String,disableSort:Boolean,fixedHeader:Boolean,multiSort:Boolean,sortAscIcon:{type:ve,default:"$sortAsc"},sortDescIcon:{type:ve,default:"$sortDesc"},headerProps:{type:Object},sticky:Boolean,...pt(),...qa()},"VDataTableHeaders"),Ut=ke()({name:"VDataTableHeaders",props:wa(),setup(e,t){let{slots:a}=t;const{t:n}=Ze(),{toggleSort:r,sortBy:s,isSorted:o}=ya(),{someSelected:i,allSelected:l,selectAll:u,showSelectAll:f}=rt(),{columns:m,headers:g}=nt(),{loaderClasses:y}=Na(e);function d(x,p){if(!(!(e.sticky||e.fixedHeader)&&!x.fixed))return{position:"sticky",left:x.fixed?re(x.fixedOffset):void 0,top:e.sticky||e.fixedHeader?`calc(var(--v-table-header-height) * ${p})`:void 0}}function v(x,p){x.key==="Enter"&&!e.disableSort&&r(p)}function b(x){const p=s.value.find(M=>M.key===x.key);return p?p.order==="asc"?e.sortAscIcon:e.sortDescIcon:e.sortAscIcon}const{backgroundColorClasses:S,backgroundColorStyles:_}=Ha(()=>e.color),{displayClasses:P,mobile:O}=wt(e),k=V(()=>({headers:g.value,columns:m.value,toggleSort:r,isSorted:o,sortBy:s.value,someSelected:i.value,allSelected:l.value,selectAll:u,getSortIcon:b})),B=V(()=>["v-data-table__th",{"v-data-table__th--sticky":e.sticky||e.fixedHeader},P.value,y.value]),W=x=>{let{column:p,x:M,y:A}=x;const j=p.key==="data-table-select"||p.key==="data-table-expand",Z=J(e.headerProps??{},p.headerProps??{});return c(Qe,J({tag:"th",align:p.align,class:[{"v-data-table__th--sortable":p.sortable&&!e.disableSort,"v-data-table__th--sorted":o(p),"v-data-table__th--fixed":p.fixed},...B.value],style:{width:re(p.width),minWidth:re(p.minWidth),maxWidth:re(p.maxWidth),...d(p,A)},colspan:p.colspan,rowspan:p.rowspan,onClick:p.sortable?()=>r(p):void 0,fixed:p.fixed,nowrap:p.nowrap,lastFixed:p.lastFixed,noPadding:j},Z,{onKeydown:$=>p.sortable&&v($,p)}),{default:()=>{var K;const $=`header.${p.key}`,Q={column:p,selectAll:u,isSorted:o,toggleSort:r,sortBy:s.value,someSelected:i.value,allSelected:l.value,getSortIcon:b};return a[$]?a[$](Q):p.key==="data-table-select"?((K=a["header.data-table-select"])==null?void 0:K.call(a,Q))??(f.value&&c(Dt,{modelValue:l.value,indeterminate:i.value&&!l.value,"onUpdate:modelValue":u},null)):w("div",{class:"v-data-table-header__content"},[w("span",null,[p.title]),p.sortable&&!e.disableSort&&c(de,{key:"icon",class:"v-data-table-header__sort-icon",icon:b(p)},null),e.multiSort&&o(p)&&w("div",{key:"badge",class:Ie(["v-data-table-header__sort-badge",...S.value]),style:Ga(_.value)},[s.value.findIndex(he=>he.key===p.key)+1])])}})},T=()=>{const x=V(()=>m.value.filter(M=>(M==null?void 0:M.sortable)&&!e.disableSort)),p=V(()=>{if(m.value.find(A=>A.key==="data-table-select")!=null)return l.value?"$checkboxOn":i.value?"$checkboxIndeterminate":"$checkboxOff"});return c(Qe,J({tag:"th",class:[...B.value],colspan:g.value.length+1},e.headerProps),{default:()=>[w("div",{class:"v-data-table-header__content"},[c(kt,{chips:!0,class:"v-data-table__td-sort-select",clearable:!0,density:"default",items:x.value,label:n("$vuetify.dataTable.sortBy"),multiple:e.multiSort,variant:"underlined","onClick:clear":()=>s.value=[],appendIcon:p.value,"onClick:append":()=>u(!l.value)},{...a,chip:M=>{var A;return c(Fe,{onClick:(A=M.item.raw)!=null&&A.sortable?()=>r(M.item.raw):void 0,onMousedown:j=>{j.preventDefault(),j.stopPropagation()}},{default:()=>[M.item.title,c(de,{class:Ie(["v-data-table__td-sort-icon",o(M.item.raw)&&"v-data-table__td-sort-icon-active"]),icon:b(M.item.raw),size:"small"},null)]})}})])]})};Ee(()=>O.value?w("tr",null,[c(T,null,null)]):w(se,null,[a.headers?a.headers(k.value):g.value.map((x,p)=>w("tr",null,[x.map((M,A)=>c(W,{column:M,x:A,y:p},null))])),e.loading&&w("tr",{class:"v-data-table-progress"},[w("th",{colspan:m.value.length},[c(Ya,{name:"v-data-table-progress",absolute:!0,active:!0,color:typeof e.loading=="boolean"?void 0:e.loading,indeterminate:!0},{default:a.loader})])])]))}}),Es=U({groupBy:{type:Array,default:()=>[]}},"DataTable-group"),pa=Symbol.for("vuetify:data-table-group");function Bs(e){return{groupBy:pe(e,"groupBy")}}function As(e){const{disableSort:t,groupBy:a,sortBy:n}=e,r=be(new Set),s=V(()=>a.value.map(f=>({...f,order:f.order??!1})).concat(t!=null&&t.value?[]:n.value));function o(f){return r.value.has(f.id)}function i(f){const m=new Set(r.value);o(f)?m.delete(f.id):m.add(f.id),r.value=m}function l(f){function m(g){const y=[];for(const d of g.items)"type"in d&&d.type==="group"?y.push(...m(d)):y.push(d);return[...new Set(y)]}return m({items:f})}const u={sortByWithGroups:s,toggleGroup:i,opened:r,groupBy:a,extractRows:l,isGroupOpen:o};return Pe(pa,u),u}function xa(){const e=xe(pa);if(!e)throw new Error("Missing group!");return e}function Ws(e,t){if(!e.length)return[];const a=new Map;for(const n of e){const r=Ge(n.raw,t);a.has(r)||a.set(r,[]),a.get(r).push(n)}return a}function Pa(e,t){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"root";if(!t.length)return[];const r=Ws(e,t[0]),s=[],o=t.slice(1);return r.forEach((i,l)=>{const u=t[0],f=`${n}_${u}_${l}`;s.push({depth:a,id:f,key:u,value:l,items:o.length?Pa(i,o,a+1,f):i,type:"group"})}),s}function ka(e,t){const a=[];for(const n of e)"type"in n&&n.type==="group"?(n.value!=null&&a.push(n),(t.has(n.id)||n.value==null)&&a.push(...ka(n.items,t))):a.push(n);return a}function zs(e,t,a){return{flatItems:V(()=>{if(!t.value.length)return e.value;const r=Pa(e.value,t.value.map(s=>s.key));return ka(r,a.value)})}}const Rs=U({item:{type:Object,required:!0}},"VDataTableGroupHeaderRow"),Us=ke()({name:"VDataTableGroupHeaderRow",props:Rs(),setup(e,t){let{slots:a}=t;const{isGroupOpen:n,toggleGroup:r,extractRows:s}=xa(),{isSelected:o,isSomeSelected:i,select:l}=rt(),{columns:u}=nt(),f=V(()=>s([e.item]));return()=>w("tr",{class:"v-data-table-group-header-row",style:{"--v-data-table-group-header-row-depth":e.item.depth}},[u.value.map(m=>{var g,y;if(m.key==="data-table-group"){const d=n(e.item)?"$expand":"$next",v=()=>r(e.item);return((g=a["data-table-group"])==null?void 0:g.call(a,{item:e.item,count:f.value.length,props:{icon:d,onClick:v}}))??c(Qe,{class:"v-data-table-group-header-row__column"},{default:()=>[c(R,{size:"small",variant:"text",icon:d,onClick:v},null),w("span",null,[e.item.value]),w("span",null,[C("("),f.value.length,C(")")])]})}if(m.key==="data-table-select"){const d=o(f.value),v=i(f.value)&&!d,b=S=>l(f.value,S);return((y=a["data-table-select"])==null?void 0:y.call(a,{props:{modelValue:d,indeterminate:v,"onUpdate:modelValue":b}}))??w("td",null,[c(Dt,{modelValue:d,indeterminate:v,"onUpdate:modelValue":b},null)])}return w("td",null,null)})])}}),js=U({expandOnClick:Boolean,showExpand:Boolean,expanded:{type:Array,default:()=>[]}},"DataTable-expand"),Da=Symbol.for("vuetify:datatable:expanded");function Ls(e){const t=q(()=>e.expandOnClick),a=pe(e,"expanded",e.expanded,i=>new Set(i),i=>[...i.values()]);function n(i,l){const u=new Set(a.value);l?u.add(i.value):u.delete(i.value),a.value=u}function r(i){return a.value.has(i.value)}function s(i){n(i,!r(i))}const o={expand:n,expanded:a,expandOnClick:t,isExpanded:r,toggleExpand:s};return Pe(Da,o),o}function Sa(){const e=xe(Da);if(!e)throw new Error("foo");return e}const Ns=U({index:Number,item:Object,cellProps:[Object,Function],onClick:mt(),onContextmenu:mt(),onDblclick:mt(),...pt()},"VDataTableRow"),Hs=ke()({name:"VDataTableRow",props:Ns(),setup(e,t){let{slots:a}=t;const{displayClasses:n,mobile:r}=wt(e,"v-data-table__tr"),{isSelected:s,toggleSelect:o,someSelected:i,allSelected:l,selectAll:u}=rt(),{isExpanded:f,toggleExpand:m}=Sa(),{toggleSort:g,sortBy:y,isSorted:d}=ya(),{columns:v}=nt();Ee(()=>w("tr",{class:Ie(["v-data-table__tr",{"v-data-table__tr--clickable":!!(e.onClick||e.onContextmenu||e.onDblclick)},n.value]),onClick:e.onClick,onContextmenu:e.onContextmenu,onDblclick:e.onDblclick},[e.item&&v.value.map((b,S)=>{const _=e.item,P=`item.${b.key}`,O=`header.${b.key}`,k={index:e.index,item:_.raw,internalItem:_,value:Ge(_.columns,b.key),column:b,isSelected:s,toggleSelect:o,isExpanded:f,toggleExpand:m},B={column:b,selectAll:u,isSorted:d,toggleSort:g,sortBy:y.value,someSelected:i.value,allSelected:l.value,getSortIcon:()=>""},W=typeof e.cellProps=="function"?e.cellProps({index:k.index,item:k.item,internalItem:k.internalItem,value:k.value,column:b}):e.cellProps,T=typeof b.cellProps=="function"?b.cellProps({index:k.index,item:k.item,internalItem:k.internalItem,value:k.value}):b.cellProps;return c(Qe,J({align:b.align,class:{"v-data-table__td--expanded-row":b.key==="data-table-expand","v-data-table__td--select-row":b.key==="data-table-select"},fixed:b.fixed,fixedOffset:b.fixedOffset,lastFixed:b.lastFixed,maxWidth:r.value?void 0:b.maxWidth,noPadding:b.key==="data-table-select"||b.key==="data-table-expand",nowrap:b.nowrap,width:r.value?void 0:b.width},W,T),{default:()=>{var p,M,A,j;if(b.key==="data-table-select")return((p=a["item.data-table-select"])==null?void 0:p.call(a,{...k,props:{disabled:!_.selectable,modelValue:s([_]),onClick:ce(()=>o(_),["stop"])}}))??c(Dt,{disabled:!_.selectable,modelValue:s([_]),onClick:ce(Z=>o(_,e.index,Z),["stop"])},null);if(b.key==="data-table-expand")return((M=a["item.data-table-expand"])==null?void 0:M.call(a,{...k,props:{icon:f(_)?"$collapse":"$expand",size:"small",variant:"text",onClick:ce(()=>m(_),["stop"])}}))??c(R,{icon:f(_)?"$collapse":"$expand",size:"small",variant:"text",onClick:ce(()=>m(_),["stop"])},null);if(a[P]&&!r.value)return a[P](k);const x=H(k.value);return r.value?w(se,null,[w("div",{class:"v-data-table__td-title"},[((A=a[O])==null?void 0:A.call(a,B))??b.title]),w("div",{class:"v-data-table__td-value"},[((j=a[P])==null?void 0:j.call(a,k))??x])]):x}})})]))}}),Ta=U({loading:[Boolean,String],loadingText:{type:String,default:"$vuetify.dataIterator.loadingText"},hideNoData:Boolean,items:{type:Array,default:()=>[]},noDataText:{type:String,default:"$vuetify.noDataText"},rowProps:[Object,Function],cellProps:[Object,Function],...pt()},"VDataTableRows"),jt=ke()({name:"VDataTableRows",inheritAttrs:!1,props:Ta(),setup(e,t){let{attrs:a,slots:n}=t;const{columns:r}=nt(),{expandOnClick:s,toggleExpand:o,isExpanded:i}=Sa(),{isSelected:l,toggleSelect:u}=rt(),{toggleGroup:f,isGroupOpen:m}=xa(),{t:g}=Ze(),{mobile:y}=wt(e);return Ee(()=>{var d,v;return e.loading&&(!e.items.length||n.loading)?w("tr",{class:"v-data-table-rows-loading",key:"loading"},[w("td",{colspan:r.value.length},[((d=n.loading)==null?void 0:d.call(n))??g(e.loadingText)])]):!e.loading&&!e.items.length&&!e.hideNoData?w("tr",{class:"v-data-table-rows-no-data",key:"no-data"},[w("td",{colspan:r.value.length},[((v=n["no-data"])==null?void 0:v.call(n))??g(e.noDataText)])]):w(se,null,[e.items.map((b,S)=>{var O;if(b.type==="group"){const k={index:S,item:b,columns:r.value,isExpanded:i,toggleExpand:o,isSelected:l,toggleSelect:u,toggleGroup:f,isGroupOpen:m};return n["group-header"]?n["group-header"](k):c(Us,J({key:`group-header_${b.id}`,item:b},Ct(a,":group-header",()=>k)),n)}const _={index:S,item:b.raw,internalItem:b,columns:r.value,isExpanded:i,toggleExpand:o,isSelected:l,toggleSelect:u},P={..._,props:J({key:`item_${b.key??b.index}`,onClick:s.value?()=>{o(b)}:void 0,index:S,item:b,cellProps:e.cellProps,mobile:y.value},Ct(a,":row",()=>_),typeof e.rowProps=="function"?e.rowProps({item:_.item,index:_.index,internalItem:_.internalItem}):e.rowProps)};return w(se,{key:P.props.key},[n.item?n.item(P):c(Hs,P.props,n),i(b)&&((O=n["expanded-row"])==null?void 0:O.call(n,_))])})])}),{}}}),Ys=U({items:{type:Array,default:()=>[]},itemValue:{type:[String,Array,Function],default:"id"},itemSelectable:{type:[String,Array,Function],default:null},rowProps:[Object,Function],cellProps:[Object,Function],returnObject:Boolean},"DataTable-items");function qs(e,t,a,n){const r=e.returnObject?t:Ne(t,e.itemValue),s=Ne(t,e.itemSelectable,!0),o=n.reduce((i,l)=>(l.key!=null&&(i[l.key]=Ne(t,l.value)),i),{});return{type:"item",key:e.returnObject?Ne(t,e.itemValue):r,index:a,value:r,selectable:s,columns:o,raw:t}}function Gs(e,t,a){return t.map((n,r)=>qs(e,n,r,a))}function Xs(e,t){return{items:V(()=>Gs(e,e.items,t.value))}}function $s(e){let{page:t,itemsPerPage:a,sortBy:n,groupBy:r,search:s}=e;const o=Xt("VDataTable"),i=()=>({page:t.value,itemsPerPage:a.value,sortBy:n.value,groupBy:r.value,search:s.value});let l=null;yt(i,u=>{$t(l,u)||(l&&l.search!==u.search&&(t.value=1),o.emit("update:options",u),l=u)},{deep:!0,immediate:!0})}const Qs=U({...Ta(),hideDefaultBody:Boolean,hideDefaultFooter:Boolean,hideDefaultHeader:Boolean,width:[String,Number],search:String,...js(),...Es(),...ys(),...Ys(),...Ts(),...Ms(),...wa(),...cn()},"DataTable"),Ks=U({...hs(),...Qs(),...fn(),...ca()},"VDataTable"),Js=ke()({name:"VDataTable",props:Ks(),emits:{"update:modelValue":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:groupBy":e=>!0,"update:expanded":e=>!0,"update:currentItems":e=>!0},setup(e,t){let{attrs:a,slots:n}=t;const{groupBy:r}=Bs(e),{sortBy:s,multiSort:o,mustSort:i}=Cs(e),{page:l,itemsPerPage:u}=gs(e),{disableSort:f}=Xa(e),{columns:m,headers:g,sortFunctions:y,sortRawFunctions:d,filterFunctions:v}=Ds(e,{groupBy:r,showSelect:q(()=>e.showSelect),showExpand:q(()=>e.showExpand)}),{items:b}=Xs(e,m),S=q(()=>e.search),{filteredItems:_}=dn(e,b,S,{transform:L=>L.columns,customKeyFilter:v}),{toggleSort:P}=Vs({sortBy:s,multiSort:o,mustSort:i,page:l}),{sortByWithGroups:O,opened:k,extractRows:B,isGroupOpen:W,toggleGroup:T}=As({groupBy:r,sortBy:s,disableSort:f}),{sortedItems:x}=Is(e,_,O,{transform:L=>({...L.raw,...L.columns}),sortFunctions:y,sortRawFunctions:d}),{flatItems:p}=zs(x,r,k),M=V(()=>p.value.length),{startIndex:A,stopIndex:j,pageCount:Z,setItemsPerPage:$}=_s({page:l,itemsPerPage:u,itemsLength:M}),{paginatedItems:Q}=vs({items:p,startIndex:A,stopIndex:j,itemsPerPage:u}),K=V(()=>B(Q.value)),{isSelected:he,select:st,selectAll:ot,toggleSelect:it,someSelected:lt,allSelected:De}=Os(e,{allItems:b,currentPage:K}),{isExpanded:We,toggleExpand:ze}=Ls(e);$s({page:l,itemsPerPage:u,sortBy:s,groupBy:r,search:S}),$a({VDataTableRows:{hideNoData:q(()=>e.hideNoData),noDataText:q(()=>e.noDataText),loading:q(()=>e.loading),loadingText:q(()=>e.loadingText)}});const z=V(()=>({page:l.value,itemsPerPage:u.value,sortBy:s.value,pageCount:Z.value,toggleSort:P,setItemsPerPage:$,someSelected:lt.value,allSelected:De.value,isSelected:he,select:st,selectAll:ot,toggleSelect:it,isExpanded:We,toggleExpand:ze,isGroupOpen:W,toggleGroup:T,items:K.value.map(L=>L.raw),internalItems:K.value,groupedItems:Q.value,columns:m.value,headers:g.value}));return Ee(()=>{const L=Rt.filterProps(e),Re=Ut.filterProps(e),Ue=jt.filterProps(e),je=Mt.filterProps(e);return c(Mt,J({class:["v-data-table",{"v-data-table--show-select":e.showSelect,"v-data-table--loading":e.loading},e.class],style:e.style},je,{fixedHeader:e.fixedHeader||e.sticky}),{top:()=>{var ee;return(ee=n.top)==null?void 0:ee.call(n,z.value)},default:()=>{var ee,Se,ut,te,Te,Oe;return n.default?n.default(z.value):w(se,null,[(ee=n.colgroup)==null?void 0:ee.call(n,z.value),!e.hideDefaultHeader&&w("thead",{key:"thead"},[c(Ut,Re,n)]),(Se=n.thead)==null?void 0:Se.call(n,z.value),!e.hideDefaultBody&&w("tbody",null,[(ut=n["body.prepend"])==null?void 0:ut.call(n,z.value),n.body?n.body(z.value):c(jt,J(a,Ue,{items:Q.value}),n),(te=n["body.append"])==null?void 0:te.call(n,z.value)]),(Te=n.tbody)==null?void 0:Te.call(n,z.value),(Oe=n.tfoot)==null?void 0:Oe.call(n,z.value)])},bottom:()=>n.bottom?n.bottom(z.value):!e.hideDefaultFooter&&w(se,null,[c(Qa,null,null),c(Rt,L,{prepend:n["footer.prepend"]})])})}),{}}}),Zs={name:"SecurityManager",data(){return{activeTokens:[],isLoadingTokens:!1,isLoggingOutAll:!1,loadingTokenId:null,isPerformingAction:!1,showConfirmDialog:!1,confirmDialogTitle:"",confirmDialogText:"",confirmedAction:null,tokenHeaders:[{title:"创建时间",key:"created_at",sortable:!0},{title:"设备信息",key:"device_info",sortable:!1},{title:"IP地址",key:"ip_address",sortable:!0},{title:"IP属地",key:"ip_location",sortable:!0},{title:"操作",key:"actions",sortable:!1}]}},mounted(){this.loadData()},methods:{async loadData(){await this.loadActiveTokens()},async loadActiveTokens(){this.isLoadingTokens=!0;try{this.activeTokens=await ye.getActiveTokens()}catch(e){console.error("获取会话列表失败:",e),this.$toast.add({severity:"error",summary:"错误",detail:"获取会话列表失败",life:3e3})}finally{this.isLoadingTokens=!1}},getActivityColor(e){return e?e<5?"info":e<20?"primary":e<50?"success":"purple":"grey"},formatIpLocation(e){if(!e)return"-";let t=e;if(typeof e=="string")try{t=JSON.parse(e)}catch{return e}let a="";return t.country&&(a+=t.country),t.region&&(a+=" "+t.region),t.city&&t.city!==t.region&&(a+=" "+t.city),t.isp&&(a+=` (${t.isp})`),a||"-"},formatDate(e){if(!e)return"-";const t=new Date(e),n=Ar(t,new Date,{addSuffix:!0,locale:ms}),r=Er(t,"yyyy-MM-dd HH:mm:ss");return`${n} (${r})`},async handleRevokeToken(e){this.loadingTokenId=e,this.isPerformingAction=!0;try{await ye.revokeToken(e)?(this.$toast.add({severity:"success",summary:"成功",detail:"会话已成功结束",life:3e3}),await this.loadActiveTokens()):this.$toast.add({severity:"error",summary:"错误",detail:"会话结束失败",life:3e3})}catch(t){console.error("会话结束失败:",t),this.$toast.add({severity:"error",summary:"错误",detail:"会话结束失败",life:3e3})}finally{this.loadingTokenId=null,this.isPerformingAction=!1}},confirmLogoutAll(){this.confirmDialogTitle="确认退出所有会话",this.confirmDialogText="这将使所有会话立即失效，包括当前会话。您需要重新登录才能继续使用。确定要执行此操作吗？",this.confirmedAction=this.logoutAllSessions,this.showConfirmDialog=!0},async logoutAllSessions(){this.isLoggingOutAll=!0;try{await ye.logoutAllDevices()?(this.$toast.add({severity:"success",summary:"成功",detail:"已成功退出所有会话",life:3e3}),this.$router.push("/app/account/login")):this.$toast.add({severity:"error",summary:"错误",detail:"退出所有会话失败",life:3e3})}catch(e){console.error("退出所有会话失败:",e),this.$toast.add({severity:"error",summary:"错误",detail:"退出所有会话失败",life:3e3})}finally{this.isLoggingOutAll=!1}},executeConfirmedAction(){typeof this.confirmedAction=="function"&&this.confirmedAction(),this.showConfirmDialog=!1}}},eo={class:"mb-6"},to={class:"d-flex align-center"},ao={key:0},no={key:1},ro={class:"d-flex gap-4 mt-6"};function so(e,t,a,n,r,s){return E(),Ve("div",null,[w("div",eo,[t[4]||(t[4]=w("h4",{class:"text-h6 mb-3"},"登录设备",-1)),r.activeTokens.length===0&&!r.isLoadingTokens?(E(),Y(Ka,{key:0,type:"info",text:"没有活跃的会话",class:"mb-3"})):(E(),Y(Js,{key:1,headers:r.tokenHeaders,items:r.activeTokens,loading:r.isLoadingTokens,"loading-text":"加载会话列表...","no-data-text":"没有找到活跃会话",class:"elevation-1 rounded-lg"},{"item.created_at":h(({item:o})=>[C(H(s.formatDate(o.created_at)),1)]),"item.device_info":h(({item:o})=>{var i,l;return[w("div",to,[C(H(((i=o.device_info)==null?void 0:i.os)||"未知")+" ("+H(((l=o.device_info)==null?void 0:l.browser)||"未知")+") ",1),o.is_current?(E(),Y(Fe,{key:0,color:"success",size:"small",text:"当前"})):Qt("",!0)])]}),"item.ip_address":h(({item:o})=>[C(H(o.ip_address),1)]),"item.ip_location":h(({item:o})=>[o.ip_location?(E(),Ve("span",ao,H(s.formatIpLocation(o.ip_location)),1)):(E(),Ve("span",no,"-"))]),"item.activity_count":h(({item:o})=>[c(Fe,{color:s.getActivityColor(o.activity_count),size:"small",text:e.getActivityText(o.activity_count)},null,8,["color","text"])]),"item.actions":h(({item:o})=>[c(R,{onClick:i=>s.handleRevokeToken(o.id),size:"small",color:"error",variant:"text",loading:r.loadingTokenId===o.id,disabled:r.isLoadingTokens||r.isPerformingAction},{default:h(()=>[c(de,null,{default:h(()=>t[2]||(t[2]=[C("mdi-logout")])),_:1,__:[2]}),t[3]||(t[3]=C(" 结束会话 "))]),_:2,__:[3]},1032,["onClick","loading","disabled"])]),_:1},8,["headers","items","loading"]))]),w("div",ro,[c(R,{color:"error","prepend-icon":"mdi-logout-variant",onClick:s.confirmLogoutAll,loading:r.isLoggingOutAll,disabled:r.isPerformingAction||r.isLoadingTokens},{default:h(()=>t[5]||(t[5]=[C(" 退出所有会话 ")])),_:1,__:[5]},8,["onClick","loading","disabled"])]),c(Jt,{modelValue:r.showConfirmDialog,"onUpdate:modelValue":t[1]||(t[1]=o=>r.showConfirmDialog=o),"max-width":"500"},{default:h(()=>[c(et,null,{default:h(()=>[c(xt,{class:"text-h5"},{default:h(()=>[C(H(r.confirmDialogTitle),1)]),_:1}),c(tt,null,{default:h(()=>[C(H(r.confirmDialogText),1)]),_:1}),c(Kt,null,{default:h(()=>[c(_t),c(R,{color:"primary",variant:"text",onClick:t[0]||(t[0]=o=>r.showConfirmDialog=!1)},{default:h(()=>t[6]||(t[6]=[C("取消")])),_:1,__:[6]}),c(R,{color:"error",variant:"flat",onClick:s.executeConfirmedAction},{default:h(()=>t[7]||(t[7]=[C("确认")])),_:1,__:[7]},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}const Oa=me(Zs,[["render",so]]);/*!
 * Compressor.js v1.2.1
 * https://fengyuanchen.github.io/compressorjs
 *
 * Copyright 2018-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2023-02-28T14:09:41.732Z
 */function Lt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,n)}return a}function Ye(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Lt(Object(a),!0).forEach(function(n){lo(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Lt(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function oo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Nt(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ma(n.key),n)}}function io(e,t,a){return t&&Nt(e.prototype,t),a&&Nt(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function lo(e,t,a){return t=Ma(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Ke(){return Ke=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Ke.apply(this,arguments)}function uo(e,t){if(typeof e!="object"||e===null)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Ma(e){var t=uo(e,"string");return typeof t=="symbol"?t:String(t)}var Ca={exports:{}};(function(e){typeof window>"u"||function(t){var a=t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype,n=t.Blob&&function(){try{return!!new Blob}catch{return!1}}(),r=n&&t.Uint8Array&&function(){try{return new Blob([new Uint8Array(100)]).size===100}catch{return!1}}(),s=t.BlobBuilder||t.WebKitBlobBuilder||t.MozBlobBuilder||t.MSBlobBuilder,o=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,i=(n||s)&&t.atob&&t.ArrayBuffer&&t.Uint8Array&&function(l){var u,f,m,g,y,d,v,b,S;if(u=l.match(o),!u)throw new Error("invalid data URI");for(f=u[2]?u[1]:"text/plain"+(u[3]||";charset=US-ASCII"),m=!!u[4],g=l.slice(u[0].length),m?y=atob(g):y=decodeURIComponent(g),d=new ArrayBuffer(y.length),v=new Uint8Array(d),b=0;b<y.length;b+=1)v[b]=y.charCodeAt(b);return n?new Blob([r?v:d],{type:f}):(S=new s,S.append(d),S.getBlob(f))};t.HTMLCanvasElement&&!a.toBlob&&(a.mozGetAsFile?a.toBlob=function(l,u,f){var m=this;setTimeout(function(){f&&a.toDataURL&&i?l(i(m.toDataURL(u,f))):l(m.mozGetAsFile("blob",u))})}:a.toDataURL&&i&&(a.msToBlob?a.toBlob=function(l,u,f){var m=this;setTimeout(function(){(u&&u!=="image/png"||f)&&a.toDataURL&&i?l(i(m.toDataURL(u,f))):l(m.msToBlob(u))})}:a.toBlob=function(l,u,f){var m=this;setTimeout(function(){l(i(m.toDataURL(u,f)))})})),e.exports?e.exports=i:t.dataURLtoBlob=i}(window)})(Ca);var Ht=Ca.exports,co=function(t){return typeof Blob>"u"?!1:t instanceof Blob||Object.prototype.toString.call(t)==="[object Blob]"},Yt={strict:!0,checkOrientation:!0,retainExif:!1,maxWidth:1/0,maxHeight:1/0,minWidth:0,minHeight:0,width:void 0,height:void 0,resize:"none",quality:.8,mimeType:"auto",convertTypes:["image/png"],convertSize:5e6,beforeDraw:null,drew:null,success:null,error:null},fo=typeof window<"u"&&typeof window.document<"u",ie=fo?window:{},Je=function(t){return t>0&&t<1/0},mo=Array.prototype.slice;function Tt(e){return Array.from?Array.from(e):mo.call(e)}var ho=/^image\/.+$/;function vt(e){return ho.test(e)}function go(e){var t=vt(e)?e.substr(6):"";return t==="jpeg"&&(t="jpg"),".".concat(t)}var Va=String.fromCharCode;function _o(e,t,a){var n="",r;for(a+=t,r=t;r<a;r+=1)n+=Va(e.getUint8(r));return n}var bo=ie.btoa;function qt(e,t){for(var a=[],n=8192,r=new Uint8Array(e);r.length>0;)a.push(Va.apply(null,Tt(r.subarray(0,n)))),r=r.subarray(n);return"data:".concat(t,";base64,").concat(bo(a.join("")))}function vo(e){var t=new DataView(e),a;try{var n,r,s;if(t.getUint8(0)===255&&t.getUint8(1)===216)for(var o=t.byteLength,i=2;i+1<o;){if(t.getUint8(i)===255&&t.getUint8(i+1)===225){r=i;break}i+=1}if(r){var l=r+4,u=r+10;if(_o(t,l,4)==="Exif"){var f=t.getUint16(u);if(n=f===18761,(n||f===19789)&&t.getUint16(u+2,n)===42){var m=t.getUint32(u+4,n);m>=8&&(s=u+m)}}}if(s){var g=t.getUint16(s,n),y,d;for(d=0;d<g;d+=1)if(y=s+d*12+2,t.getUint16(y,n)===274){y+=8,a=t.getUint16(y,n),t.setUint16(y,1,n);break}}}catch{a=1}return a}function yo(e){var t=0,a=1,n=1;switch(e){case 2:a=-1;break;case 3:t=-180;break;case 4:n=-1;break;case 5:t=90,n=-1;break;case 6:t=90;break;case 7:t=90,a=-1;break;case 8:t=-90;break}return{rotate:t,scaleX:a,scaleY:n}}var wo=/\.\d*(?:0|9){12}\d*$/;function Gt(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return wo.test(e)?Math.round(e*t)/t:e}function Ce(e){var t=e.aspectRatio,a=e.height,n=e.width,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"none",s=Je(n),o=Je(a);if(s&&o){var i=a*t;(r==="contain"||r==="none")&&i>n||r==="cover"&&i<n?a=n/t:n=a*t}else s?a=n/t:o&&(n=a*t);return{width:n,height:a}}function po(e){for(var t=Tt(new Uint8Array(e)),a=t.length,n=[],r=0;r+3<a;){var s=t[r],o=t[r+1];if(s===255&&o===218)break;if(s===255&&o===216)r+=2;else{var i=t[r+2]*256+t[r+3],l=r+i+2,u=t.slice(r,l);n.push(u),r=l}}return n.reduce(function(f,m){return m[0]===255&&m[1]===225?f.concat(m):f},[])}function xo(e,t){var a=Tt(new Uint8Array(e));if(a[2]!==255||a[3]!==224)return e;var n=a[4]*256+a[5],r=[255,216].concat(t,a.slice(4+n));return new Uint8Array(r)}var Po=ie.ArrayBuffer,ht=ie.FileReader,le=ie.URL||ie.webkitURL,ko=/\.\w+$/,Do=ie.Compressor,So=function(){function e(t,a){oo(this,e),this.file=t,this.exif=[],this.image=new Image,this.options=Ye(Ye({},Yt),a),this.aborted=!1,this.result=null,this.init()}return io(e,[{key:"init",value:function(){var a=this,n=this.file,r=this.options;if(!co(n)){this.fail(new Error("The first argument must be a File or Blob object."));return}var s=n.type;if(!vt(s)){this.fail(new Error("The first argument must be an image File or Blob object."));return}if(!le||!ht){this.fail(new Error("The current browser does not support image compression."));return}Po||(r.checkOrientation=!1,r.retainExif=!1);var o=s==="image/jpeg",i=o&&r.checkOrientation,l=o&&r.retainExif;if(le&&!i&&!l)this.load({url:le.createObjectURL(n)});else{var u=new ht;this.reader=u,u.onload=function(f){var m=f.target,g=m.result,y={},d=1;i&&(d=vo(g),d>1&&Ke(y,yo(d))),l&&(a.exif=po(g)),i||l?!le||d>1?y.url=qt(g,s):y.url=le.createObjectURL(n):y.url=g,a.load(y)},u.onabort=function(){a.fail(new Error("Aborted to read the image with FileReader."))},u.onerror=function(){a.fail(new Error("Failed to read the image with FileReader."))},u.onloadend=function(){a.reader=null},i||l?u.readAsArrayBuffer(n):u.readAsDataURL(n)}}},{key:"load",value:function(a){var n=this,r=this.file,s=this.image;s.onload=function(){n.draw(Ye(Ye({},a),{},{naturalWidth:s.naturalWidth,naturalHeight:s.naturalHeight}))},s.onabort=function(){n.fail(new Error("Aborted to load the image."))},s.onerror=function(){n.fail(new Error("Failed to load the image."))},ie.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(ie.navigator.userAgent)&&(s.crossOrigin="anonymous"),s.alt=r.name,s.src=a.url}},{key:"draw",value:function(a){var n=this,r=a.naturalWidth,s=a.naturalHeight,o=a.rotate,i=o===void 0?0:o,l=a.scaleX,u=l===void 0?1:l,f=a.scaleY,m=f===void 0?1:f,g=this.file,y=this.image,d=this.options,v=document.createElement("canvas"),b=v.getContext("2d"),S=Math.abs(i)%180===90,_=(d.resize==="contain"||d.resize==="cover")&&Je(d.width)&&Je(d.height),P=Math.max(d.maxWidth,0)||1/0,O=Math.max(d.maxHeight,0)||1/0,k=Math.max(d.minWidth,0)||0,B=Math.max(d.minHeight,0)||0,W=r/s,T=d.width,x=d.height;if(S){var p=[O,P];P=p[0],O=p[1];var M=[B,k];k=M[0],B=M[1];var A=[x,T];T=A[0],x=A[1]}_&&(W=T/x);var j=Ce({aspectRatio:W,width:P,height:O},"contain");P=j.width,O=j.height;var Z=Ce({aspectRatio:W,width:k,height:B},"cover");if(k=Z.width,B=Z.height,_){var $=Ce({aspectRatio:W,width:T,height:x},d.resize);T=$.width,x=$.height}else{var Q=Ce({aspectRatio:W,width:T,height:x}),K=Q.width;T=K===void 0?r:K;var he=Q.height;x=he===void 0?s:he}T=Math.floor(Gt(Math.min(Math.max(T,k),P))),x=Math.floor(Gt(Math.min(Math.max(x,B),O)));var st=-T/2,ot=-x/2,it=T,lt=x,De=[];if(_){var We=0,ze=0,z=r,L=s,Re=Ce({aspectRatio:W,width:r,height:s},{contain:"cover",cover:"contain"}[d.resize]);z=Re.width,L=Re.height,We=(r-z)/2,ze=(s-L)/2,De.push(We,ze,z,L)}if(De.push(st,ot,it,lt),S){var Ue=[x,T];T=Ue[0],x=Ue[1]}v.width=T,v.height=x,vt(d.mimeType)||(d.mimeType=g.type);var je="transparent";g.size>d.convertSize&&d.convertTypes.indexOf(d.mimeType)>=0&&(d.mimeType="image/jpeg");var ee=d.mimeType==="image/jpeg";if(ee&&(je="#fff"),b.fillStyle=je,b.fillRect(0,0,T,x),d.beforeDraw&&d.beforeDraw.call(this,b,v),!this.aborted&&(b.save(),b.translate(T/2,x/2),b.rotate(i*Math.PI/180),b.scale(u,m),b.drawImage.apply(b,[y].concat(De)),b.restore(),d.drew&&d.drew.call(this,b,v),!this.aborted)){var Se=function(te){if(!n.aborted){var Te=function(Me){return n.done({naturalWidth:r,naturalHeight:s,result:Me})};if(te&&ee&&d.retainExif&&n.exif&&n.exif.length>0){var Oe=function(Me){return Te(Ht(qt(xo(Me,n.exif),d.mimeType)))};if(te.arrayBuffer)te.arrayBuffer().then(Oe).catch(function(){n.fail(new Error("Failed to read the compressed image with Blob.arrayBuffer()."))});else{var ge=new ht;n.reader=ge,ge.onload=function(ct){var Me=ct.target;Oe(Me.result)},ge.onabort=function(){n.fail(new Error("Aborted to read the compressed image with FileReader."))},ge.onerror=function(){n.fail(new Error("Failed to read the compressed image with FileReader."))},ge.onloadend=function(){n.reader=null},ge.readAsArrayBuffer(te)}}else Te(te)}};v.toBlob?v.toBlob(Se,d.mimeType,d.quality):Se(Ht(v.toDataURL(d.mimeType,d.quality)))}}},{key:"done",value:function(a){var n=a.naturalWidth,r=a.naturalHeight,s=a.result,o=this.file,i=this.image,l=this.options;if(le&&i.src.indexOf("blob:")===0&&le.revokeObjectURL(i.src),s)if(l.strict&&!l.retainExif&&s.size>o.size&&l.mimeType===o.type&&!(l.width>n||l.height>r||l.minWidth>n||l.minHeight>r||l.maxWidth<n||l.maxHeight<r))s=o;else{var u=new Date;s.lastModified=u.getTime(),s.lastModifiedDate=u,s.name=o.name,s.name&&s.type!==o.type&&(s.name=s.name.replace(ko,go(s.type)))}else s=o;this.result=s,l.success&&l.success.call(this,s)}},{key:"fail",value:function(a){var n=this.options;if(n.error)n.error.call(this,a);else throw a}},{key:"abort",value:function(){this.aborted||(this.aborted=!0,this.reader?this.reader.abort():this.image.complete?this.fail(new Error("The compression process has been aborted.")):(this.image.onload=null,this.image.onabort()))}}],[{key:"noConflict",value:function(){return window.Compressor=Do,e}},{key:"setDefaults",value:function(a){Ke(Yt,a)}}]),e}();const To={name:"AvatarEditor",props:{userData:{type:Object,required:!0},s3BucketUrl:{type:String,required:!0}},data(){return{loading:!1,avatarFile:null,previewImage:null}},methods:{onFileChange(e){const t=e.target.files?e.target.files[0]:null;t instanceof File&&t.type.startsWith("image/")?new So(t,{quality:.8,maxWidth:500,maxHeight:500,success:a=>{this.previewImage=URL.createObjectURL(a),this.avatarFile=a},error:a=>{console.error("图片压缩出错：",a.message),this.$emit("error",{message:"图片压缩出错："+a.message})}}):t&&this.$emit("error",{message:"请选择有效的图片文件"})},async uploadAvatar(){if(this.avatarFile){this.loading=!0;try{const e=new FormData;e.append("zcfile",this.avatarFile);const t=await mn("",e);this.$emit("avatar-updated",t),this.avatarFile=null}catch(e){this.$emit("error",e)}finally{this.loading=!1}}}}},Oo={class:"d-flex align-center justify-center fill-height"};function Mo(e,t,a,n,r,s){return E(),Y(at,null,{default:h(()=>[c(I,{cols:"12",md:"6"},{default:h(()=>[c(vn,{label:"上传头像",accept:"image/*",onChange:s.onFileChange,placeholder:"选择图片上传","prepend-icon":"mdi-camera",variant:"outlined",density:"comfortable","show-size":"",rules:[o=>!o||!o.length||o[0].size<2e6||"头像大小不能超过2MB"]},null,8,["onChange","rules"]),t[0]||(t[0]=w("div",{class:"text-caption text-medium-emphasis"},"图片将被自动压缩",-1))]),_:1,__:[0]}),c(I,{cols:"12",md:"6",class:"d-flex align-center justify-center"},{default:h(()=>[c(yn,{class:Ie(["rounded-lg overflow-hidden","elevation-2"]),width:"150",height:"150"},{default:h(()=>[c(Zt,{src:r.previewImage||a.s3BucketUrl+"/user/"+a.userData.avatar,height:"150",width:"150",cover:"",class:"bg-grey-lighten-3"},{placeholder:h(()=>[w("div",Oo,[c(de,{icon:"mdi-image",size:"64",color:"grey-darken-1"})])]),_:1},8,["src"])]),_:1})]),_:1}),c(I,{cols:"12"},{default:h(()=>[c(R,{onClick:s.uploadAvatar,disabled:!r.avatarFile,color:"primary",size:"large","prepend-icon":"mdi-cloud-upload",class:"px-6",loading:r.loading},{default:h(()=>t[1]||(t[1]=[C(" 上传头像 ")])),_:1,__:[1]},8,["onClick","disabled","loading"])]),_:1})]),_:1})}const Ia=me(To,[["render",Mo]]),Co={name:"PasswordEditor",data(){return{loading:!1,valid:!1,oldPassword:"",newPassword:"",confirmPassword:"",passwordRules:[e=>!!e||"请输入新密码",e=>/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[$@$!%*?&\.])[A-Za-z\d$@$!%*?&\.]{8,}/.test(e)||"密码必须由数字、大小写字母和特殊字符组成，且长度至少为8位"]}},methods:{async changePassword(){if(this.valid){this.loading=!0;try{const e=await hn({oldpw:this.oldPassword,newpw:this.newPassword});this.$emit("password-updated",e),this.oldPassword="",this.newPassword="",this.confirmPassword=""}catch(e){this.$emit("error",e)}finally{this.loading=!1}}}}};function Vo(e,t,a,n,r,s){return E(),Y(Pt,{modelValue:r.valid,"onUpdate:modelValue":t[3]||(t[3]=o=>r.valid=o),onSubmit:ce(s.changePassword,["prevent"])},{default:h(()=>[c(at,null,{default:h(()=>[c(I,{cols:"12",md:"8"},{default:h(()=>[c(N,{modelValue:r.oldPassword,"onUpdate:modelValue":t[0]||(t[0]=o=>r.oldPassword=o),label:"当前密码",variant:"outlined",density:"comfortable",type:"password",rules:[o=>!!o||"请输入当前密码"],required:""},null,8,["modelValue","rules"])]),_:1}),c(I,{cols:"12",md:"8"},{default:h(()=>[c(N,{modelValue:r.newPassword,"onUpdate:modelValue":t[1]||(t[1]=o=>r.newPassword=o),rules:r.passwordRules,label:"新密码",variant:"outlined",density:"comfortable",type:"password",required:""},null,8,["modelValue","rules"]),t[4]||(t[4]=w("div",{class:"text-caption text-medium-emphasis"}," 密码必须由数字、大小写字母和特殊字符组成，且长度至少为8位 ",-1))]),_:1,__:[4]}),c(I,{cols:"12",md:"8"},{default:h(()=>[c(N,{modelValue:r.confirmPassword,"onUpdate:modelValue":t[2]||(t[2]=o=>r.confirmPassword=o),rules:[o=>!!o||"请确认新密码",o=>o===r.newPassword||"两次输入的密码不一致"],label:"确认新密码",variant:"outlined",density:"comfortable",type:"password",required:""},null,8,["modelValue","rules"])]),_:1}),c(I,{cols:"12"},{default:h(()=>[c(R,{onClick:s.changePassword,disabled:!r.valid,color:"primary",size:"large","prepend-icon":"mdi-lock-reset",class:"px-6",loading:r.loading},{default:h(()=>t[5]||(t[5]=[C(" 更新密码 ")])),_:1,__:[5]},8,["onClick","disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue","onSubmit"])}const Fa=me(Co,[["render",Vo]]),Io={name:"UsernameEditor",props:{userData:{type:Object,required:!0}},data(){return{loading:!1,valid:!1,username:this.userData.username||"",usernameRules:[e=>!!e||"用户名是必填项",e=>e&&e.length<=10||"用户名不能超过10个字符",e=>/^[a-z]+$/.test(e)||"用户名只能包含小写字母"]}},watch:{userData:{handler(e){this.username=e.username||""},immediate:!0}},methods:{async changeUsername(){if(this.valid){this.loading=!0;try{const e=await gn({username:this.username});this.$emit("username-updated",e)}catch(e){this.$emit("error",e)}finally{this.loading=!1}}}}};function Fo(e,t,a,n,r,s){return E(),Y(Pt,{modelValue:r.valid,"onUpdate:modelValue":t[1]||(t[1]=o=>r.valid=o),onSubmit:ce(s.changeUsername,["prevent"])},{default:h(()=>[c(at,null,{default:h(()=>[c(I,{cols:"12",md:"8"},{default:h(()=>[c(N,{modelValue:r.username,"onUpdate:modelValue":t[0]||(t[0]=o=>r.username=o),counter:10,rules:r.usernameRules,label:"用户名",variant:"outlined",density:"comfortable",required:""},null,8,["modelValue","rules"]),t[2]||(t[2]=w("div",{class:"text-caption text-medium-emphasis"},"用户名只能包含小写字母",-1))]),_:1,__:[2]}),c(I,{cols:"12"},{default:h(()=>[c(R,{onClick:s.changeUsername,disabled:!r.valid,color:"primary",size:"large","prepend-icon":"mdi-check",class:"px-6",loading:r.loading},{default:h(()=>t[3]||(t[3]=[C(" 保存用户名 ")])),_:1,__:[3]},8,["onClick","disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue","onSubmit"])}const Ea=me(Io,[["render",Fo]]),Eo="阿拉伯联合酋长国",Bo="阿根廷",Ao="奥地利",Wo="澳大利亚 (au_act)",zo="澳大利亚 (au_nsw)",Ro="澳大利亚 (au_nt)",Uo="澳大利亚 (au_qld_brisbane)",jo="澳大利亚 (au_qld_cairns)",Lo="澳大利亚 (au_qld)",No="澳大利亚 (au_sa)",Ho="澳大利亚 (au_tas_north)",Yo="澳大利亚 (au_tas_south)",qo="澳大利亚 (au_tas)",Go="澳大利亚 (au_vic_melbourne)",Xo="澳大利亚 (au_vic)",$o="澳大利亚 (au_wa)",Qo="澳大利亚",Ko="比利时 (be_fr)",Jo="比利时 (be_nl)",Zo="保加利亚 (bg_bg)",ei="保加利亚 (bg_en)",ti="巴西",ai="巴西 (br_sp)",ni="巴西 (br_spcapital)",ri="加拿大 (ca_ab)",si="加拿大 (ca_bc)",oi="加拿大 (ca_mb)",ii="加拿大 (ca_nb)",li="加拿大 (ca_nl)",ui="加拿大 (ca_ns)",ci="加拿大 (ca_nt)",di="加拿大 (ca_nu)",fi="加拿大 (ca_on)",mi="加拿大 (ca_pe)",hi="加拿大 (ca_qc)",gi="加拿大 (ca_sk)",_i="加拿大 (ca_yt)",bi="加拿大",vi="瑞士 (ch_ag)",yi="瑞士 (ch_ai)",wi="瑞士 (ch_ar)",pi="瑞士 (ch_be)",xi="瑞士 (ch_bl)",Pi="瑞士 (ch_bs)",ki="瑞士 (ch_fr)",Di="瑞士 (ch_ge)",Si="瑞士 (ch_gl)",Ti="瑞士 (ch_gr)",Oi="瑞士 (ch_ju)",Mi="瑞士 (ch_lu)",Ci="瑞士 (ch_ne)",Vi="瑞士 (ch_nw)",Ii="瑞士 (ch_ow)",Fi="瑞士 (ch_sg)",Ei="瑞士 (ch_sh)",Bi="瑞士 (ch_so)",Ai="瑞士 (ch_sz)",Wi="瑞士 (ch_tg)",zi="瑞士 (ch_ti)",Ri="瑞士 (ch_ur)",Ui="瑞士 (ch_vd)",ji="瑞士 (ch_vs)",Li="瑞士 (ch_zg)",Ni="瑞士 (ch_zh)",Hi="瑞士",Yi="智利",qi="哥伦比亚",Gi="哥斯达黎加",Xi="捷克共和国",$i="德国 (de_bb)",Qi="德国 (de_be)",Ki="德国 (de_bw)",Ji="德国 (de_by_augsburg)",Zi="德国 (de_by_cath)",el="德国 (de_by)",tl="德国 (de_hb)",al="德国 (de_he)",nl="德国 (de_hh)",rl="德国 (de_mv)",sl="德国 (de_ni)",ol="德国 (de_nw)",il="德国 (de_rp)",ll="德国 (de_sh)",ul="德国 (de_sl)",cl="德国 (de_sn_sorbian)",dl="德国 (de_sn)",fl="德国 (de_st)",ml="德国 (de_th_cath)",hl="德国 (de_th)",gl="德国",_l="丹麦",bl="爱沙尼亚",vl="希腊",yl="西班牙 (es_an)",wl="西班牙 (es_ar)",pl="西班牙 (es_ce)",xl="西班牙 (es_cl)",Pl="西班牙 (es_cm)",kl="西班牙 (es_cn)",Dl="西班牙 (es_ct)",Sl="西班牙 (es_ex)",Tl="西班牙 (es_ga)",Ol="西班牙 (es_ib)",Ml="西班牙 (es_lo)",Cl="西班牙 (es_m)",Vl="西班牙 (es_mu)",Il="西班牙 (es_na)",Fl="西班牙 (es_o)",El="西班牙 (es_pv)",Bl="西班牙 (es_v)",Al="西班牙 (es_vc)",Wl="西班牙",zl="芬兰",Rl="法国 (fr_a)",Ul="法国 (fr_m)",jl="法国",Ll="英国 (gb_con)",Nl="英国 (gb_eaw)",Hl="英国 (gb_eng)",Yl="英国 (gb_gsy)",ql="英国 (gb_iom)",Gl="英国 (gb_jsy)",Xl="英国 (gb_nir)",$l="英国 (gb_sct)",Ql="英国 (gb_wls)",Kl="英国",Jl="格鲁吉亚",Zl="根西岛",eu="加纳",tu="克罗地亚",au="匈牙利",nu="印度尼西亚",ru="爱尔兰",su="马恩岛",ou="印度 (in_gj)",iu="印度 (in_mh)",lu="印度 (in_rj)",uu="印度 (in_tn)",cu="印度 (in_ka)",du="冰岛",fu="意大利 (it_bl)",mu="意大利 (it_fi)",hu="意大利 (it_ge)",gu="意大利 (it_pd)",_u="意大利 (it_rm)",bu="意大利 (it_ro)",vu="意大利 (it_to)",yu="意大利 (it_tv)",wu="意大利 (it_ve)",pu="意大利 (it_vi)",xu="意大利 (it_vr)",Pu="意大利",ku="泽西岛",Du="日本",Su="肯尼亚",Tu="韩国",Ou="哈萨克斯坦",Mu="列支敦士登",Cu="立陶宛",Vu="卢森堡",Iu="拉脱维亚",Fu="摩洛哥",Eu="马耳他 (mt_en)",Bu="马耳他 (mt_mt)",Au="墨西哥 (mx_pue)",Wu="墨西哥",zu="马来西亚",Ru="尼日利亚",Uu="荷兰",ju="挪威",Lu="新西兰 (nz_ak)",Nu="新西兰 (nz_ca)",Hu="新西兰 (nz_ch)",Yu="新西兰 (nz_hb)",qu="新西兰 (nz_mb)",Gu="新西兰 (nz_ne)",Xu="新西兰 (nz_nl)",$u="新西兰 (nz_ot)",Qu="新西兰 (nz_sc)",Ku="新西兰 (nz_sl)",Ju="新西兰 (nz_ta)",Zu="新西兰 (nz_we)",ec="新西兰 (nz_wl)",tc="新西兰",ac="秘鲁",nc="菲律宾",rc="波兰",sc="葡萄牙 (pt_li)",oc="葡萄牙 (pt_po)",ic="葡萄牙",lc="罗马尼亚",uc="塞尔维亚 (rs_cyrl)",cc="塞尔维亚 (rs_la)",dc="俄罗斯联邦",fc="瑞典",mc="沙特阿拉伯",hc="新加坡",gc="斯洛文尼亚",_c="斯洛伐克",bc="泰国",vc="突尼斯",yc="土耳其",wc="乌克兰",pc="美国 (us_ak)",xc="美国 (us_al)",Pc="美国 (us_ar)",kc="美国 (us_az)",Dc="美国 (us_ca)",Sc="美国 (us_co)",Tc="美国 (us_ct)",Oc="美国 (us_dc)",Mc="美国 (us_de)",Cc="美国 (us_fl)",Vc="美国 (us_ga)",Ic="美国 (us_gu)",Fc="美国 (us_hi)",Ec="美国 (us_ia)",Bc="美国 (us_id)",Ac="美国 (us_il)",Wc="美国 (us_in)",zc="美国 (us_ks)",Rc="美国 (us_ky)",Uc="美国 (us_la)",jc="美国 (us_ma)",Lc="美国 (us_md)",Nc="美国 (us_me)",Hc="美国 (us_mi)",Yc="美国 (us_mn)",qc="美国 (us_mo)",Gc="美国 (us_ms)",Xc="美国 (us_mt)",$c="美国 (us_nc)",Qc="美国 (us_nd)",Kc="美国 (us_ne)",Jc="美国 (us_nh)",Zc="美国 (us_nj)",ed="美国 (us_nm)",td="美国 (us_nv)",ad="美国 (us_ny)",nd="美国 (us_oh)",rd="美国 (us_ok)",sd="美国 (us_or)",od="美国 (us_pa)",id="美国 (us_pr)",ld="美国 (us_ri)",ud="美国 (us_sc)",cd="美国 (us_sd)",dd="美国 (us_tn)",fd="美国 (us_tx)",md="美国 (us_ut)",hd="美国 (us_va)",gd="美国 (us_vi)",_d="美国 (us_vt)",bd="美国 (us_wa)",vd="美国 (us_wi)",yd="美国 (us_wv)",wd="美国 (us_wy)",pd="美国",xd="委内瑞拉",Pd="美属维尔京群岛",kd="南非",Dd="中国",Sd="中国（大陆） (zh_cn)",Td="中国（台湾） (zh_tw)",Od="中国（香港） (zh_hk)",Md="中国（澳门） (zh_mo)",gt={ae:Eo,ar:Bo,at:Ao,au_act:Wo,au_nsw:zo,au_nt:Ro,au_qld_brisbane:Uo,au_qld_cairns:jo,au_qld:Lo,au_sa:No,au_tas_north:Ho,au_tas_south:Yo,au_tas:qo,au_vic_melbourne:Go,au_vic:Xo,au_wa:$o,au:Qo,be_fr:Ko,be_nl:Jo,bg_bg:Zo,bg_en:ei,br:ti,br_sp:ai,br_spcapital:ni,ca_ab:ri,ca_bc:si,ca_mb:oi,ca_nb:ii,ca_nl:li,ca_ns:ui,ca_nt:ci,ca_nu:di,ca_on:fi,ca_pe:mi,ca_qc:hi,ca_sk:gi,ca_yt:_i,ca:bi,ch_ag:vi,ch_ai:yi,ch_ar:wi,ch_be:pi,ch_bl:xi,ch_bs:Pi,ch_fr:ki,ch_ge:Di,ch_gl:Si,ch_gr:Ti,ch_ju:Oi,ch_lu:Mi,ch_ne:Ci,ch_nw:Vi,ch_ow:Ii,ch_sg:Fi,ch_sh:Ei,ch_so:Bi,ch_sz:Ai,ch_tg:Wi,ch_ti:zi,ch_ur:Ri,ch_vd:Ui,ch_vs:ji,ch_zg:Li,ch_zh:Ni,ch:Hi,cl:Yi,co:qi,cr:Gi,cz:Xi,de_bb:$i,de_be:Qi,de_bw:Ki,de_by_augsburg:Ji,de_by_cath:Zi,de_by:el,de_hb:tl,de_he:al,de_hh:nl,de_mv:rl,de_ni:sl,de_nw:ol,de_rp:il,de_sh:ll,de_sl:ul,de_sn_sorbian:cl,de_sn:dl,de_st:fl,de_th_cath:ml,de_th:hl,de:gl,dk:_l,ee:bl,el:vl,es_an:yl,es_ar:wl,es_ce:pl,es_cl:xl,es_cm:Pl,es_cn:kl,es_ct:Dl,es_ex:Sl,es_ga:Tl,es_ib:Ol,es_lo:Ml,es_m:Cl,es_mu:Vl,es_na:Il,es_o:Fl,es_pv:El,es_v:Bl,es_vc:Al,es:Wl,fi:zl,fr_a:Rl,fr_m:Ul,fr:jl,gb_con:Ll,gb_eaw:Nl,gb_eng:Hl,gb_gsy:Yl,gb_iom:ql,gb_jsy:Gl,gb_nir:Xl,gb_sct:$l,gb_wls:Ql,gb:Kl,ge:Jl,gg:Zl,gh:eu,hr:tu,hu:au,id:nu,ie:ru,im:su,in:"印度",in_gj:ou,in_mh:iu,in_rj:lu,in_tn:uu,in_ka:cu,is:du,it_bl:fu,it_fi:mu,it_ge:hu,it_pd:gu,it_rm:_u,it_ro:bu,it_to:vu,it_tv:yu,it_ve:wu,it_vi:pu,it_vr:xu,it:Pu,je:ku,jp:Du,ke:Su,kr:Tu,kz:Ou,li:Mu,lt:Cu,lu:Vu,lv:Iu,ma:Fu,mt_en:Eu,mt_mt:Bu,mx_pue:Au,mx:Wu,my:zu,ng:Ru,nl:Uu,no:ju,nz_ak:Lu,nz_ca:Nu,nz_ch:Hu,nz_hb:Yu,nz_mb:qu,nz_ne:Gu,nz_nl:Xu,nz_ot:$u,nz_sc:Qu,nz_sl:Ku,nz_ta:Ju,nz_we:Zu,nz_wl:ec,nz:tc,pe:ac,ph:nc,pl:rc,pt_li:sc,pt_po:oc,pt:ic,ro:lc,rs_cyrl:uc,rs_la:cc,ru:dc,se:fc,sa:mc,sg:hc,si:gc,sk:_c,th:bc,tn:vc,tr:yc,ua:wc,us_ak:pc,us_al:xc,us_ar:Pc,us_az:kc,us_ca:Dc,us_co:Sc,us_ct:Tc,us_dc:Oc,us_de:Mc,us_fl:Cc,us_ga:Vc,us_gu:Ic,us_hi:Fc,us_ia:Ec,us_id:Bc,us_il:Ac,us_in:Wc,us_ks:zc,us_ky:Rc,us_la:Uc,us_ma:jc,us_md:Lc,us_me:Nc,us_mi:Hc,us_mn:Yc,us_mo:qc,us_ms:Gc,us_mt:Xc,us_nc:$c,us_nd:Qc,us_ne:Kc,us_nh:Jc,us_nj:Zc,us_nm:ed,us_nv:td,us_ny:ad,us_oh:nd,us_ok:rd,us_or:sd,us_pa:od,us_pr:id,us_ri:ld,us_sc:ud,us_sd:cd,us_tn:dd,us_tx:fd,us_ut:md,us_va:hd,us_vi:gd,us_vt:_d,us_wa:bd,us_wi:vd,us_wv:yd,us_wy:wd,us:pd,ve:xd,vi:Pd,za:kd,zh:Dd,zh_cn:Sd,zh_tw:Td,zh_hk:Od,zh_mo:Md},Cd={name:"ProfileEditor",props:{userData:{type:Object,required:!0}},data(){return{loading:!1,valid:!1,showRegionDialog:!1,regionSearch:"",profileData:{display_name:this.userData.display_name||"",motto:this.userData.motto||"",bio:this.userData.bio||"",location:this.userData.location||"",region:this.userData.region?{value:this.userData.region,text:gt[this.userData.region]||""}:null,url:this.userData.url||"",birthday:this.userData.birthday||"",featured_projects:this.userData.featured_projects||""},regionOptions:Object.entries(gt).map(([e,t])=>({value:e,text:t})),selectedGender:{state:"未知",abbr:"3"},genderOptions:[{state:"男",abbr:"0"},{state:"女",abbr:"1"},{state:"猫娘",abbr:"2"},{state:"未知",abbr:"3"}],nameRules:[e=>!!e||"名称是必填项",e=>e&&e.length<=20||"名称不能超过20个字符"],locationRules:[e=>!e||e.length<=100||"地址不能超过100个字符"],regionRules:[e=>!e||e.length<=100||"区域不能超过100个字符"],urlRules:[e=>!e||e.length<=255||"URL不能超过255个字符",e=>!e||/^https?:\/\/.*/.test(e)||"URL必须以http://或https://开头"],birthdayRules:[e=>!e||/^\d{4}-\d{2}-\d{2}$/.test(e)||"生日格式必须为YYYY-MM-DD"],projectIdRules:[e=>!e||/^\d+$/.test(e)||"项目ID必须是数字"]}},computed:{filteredRegions(){if(!this.regionSearch)return this.regionOptions;const e=this.regionSearch.toLowerCase();return this.regionOptions.filter(t=>t.text.toLowerCase().includes(e)||t.value.toLowerCase().includes(e))}},watch:{userData:{handler(e){this.profileData={display_name:e.display_name||"",motto:e.motto||"",bio:e.bio||"",location:e.location||"",region:e.region?{value:e.region,text:gt[e.region]||""}:null,url:e.url||"",birthday:e.birthday?this.formatDateForInput(e.birthday):"",featured_projects:e.featured_projects||""},this.selectedGender=this.genderOptions.find(t=>t.abbr==e.sex)||this.genderOptions[3]},immediate:!0,deep:!0}},methods:{formatDateForInput(e){return e?new Date(e).toISOString().split("T")[0]:""},selectRegion(e){this.profileData.region=e,this.showRegionDialog=!1},clearRegion(){this.profileData.region=null,this.showRegionDialog=!1},async updateProfile(){var e;if(this.valid){this.loading=!0;try{const t=await _n({display_name:this.profileData.display_name,motto:this.profileData.motto,bio:this.profileData.bio,location:this.profileData.location,region:((e=this.profileData.region)==null?void 0:e.value)||"",sex:this.selectedGender.abbr,url:this.profileData.url,birthday:this.profileData.birthday,featured_projects:this.profileData.featured_projects||void 0});this.$emit("profile-updated",t)}catch(t){this.$emit("error",t)}finally{this.loading=!1}}}}};function Vd(e,t,a,n,r,s){return E(),Y(Pt,{modelValue:r.valid,"onUpdate:modelValue":t[14]||(t[14]=o=>r.valid=o),onSubmit:ce(s.updateProfile,["prevent"])},{default:h(()=>[c(at,null,{default:h(()=>[c(I,{cols:"12",md:"6"},{default:h(()=>[c(N,{modelValue:r.profileData.display_name,"onUpdate:modelValue":t[0]||(t[0]=o=>r.profileData.display_name=o),counter:20,label:"显示名称",variant:"outlined",density:"comfortable",required:"",rules:r.nameRules},null,8,["modelValue","rules"])]),_:1}),c(I,{cols:"12",md:"6"},{default:h(()=>[c(kt,{modelValue:r.selectedGender,"onUpdate:modelValue":t[1]||(t[1]=o=>r.selectedGender=o),items:r.genderOptions,"item-title":"state","item-value":"abbr",label:"性别",variant:"outlined",density:"comfortable","persistent-hint":"","return-object":""},null,8,["modelValue","items"])]),_:1}),c(I,{cols:"12",md:"6"},{default:h(()=>[c(N,{modelValue:r.profileData.location,"onUpdate:modelValue":t[2]||(t[2]=o=>r.profileData.location=o),counter:100,label:"地点",variant:"outlined",density:"comfortable",rules:r.locationRules},null,8,["modelValue","rules"])]),_:1}),c(I,{cols:"12",md:"6"},{default:h(()=>{var o;return[c(N,{"model-value":((o=r.profileData.region)==null?void 0:o.text)||"",label:"区域",variant:"outlined",density:"comfortable",readonly:"",rules:r.regionRules,"persistent-hint":"",hint:"点击选择您所在的区域",onClick:t[4]||(t[4]=i=>r.showRegionDialog=!0)},{append:h(()=>[c(R,{variant:"text",icon:"mdi-map-marker",onClick:t[3]||(t[3]=i=>r.showRegionDialog=!0)})]),_:1},8,["model-value","rules"])]}),_:1}),c(I,{cols:"12",md:"6"},{default:h(()=>[c(N,{modelValue:r.profileData.url,"onUpdate:modelValue":t[5]||(t[5]=o=>r.profileData.url=o),counter:255,label:"个人网站",variant:"outlined",density:"comfortable",rules:r.urlRules},null,8,["modelValue","rules"])]),_:1}),c(I,{cols:"12",md:"6"},{default:h(()=>[c(N,{modelValue:r.profileData.birthday,"onUpdate:modelValue":t[6]||(t[6]=o=>r.profileData.birthday=o),label:"生日",type:"date",variant:"outlined",density:"comfortable",rules:r.birthdayRules},null,8,["modelValue","rules"])]),_:1}),c(I,{cols:"12"},{default:h(()=>[c(N,{modelValue:r.profileData.motto,"onUpdate:modelValue":t[7]||(t[7]=o=>r.profileData.motto=o),counter:500,label:"一行简介",variant:"outlined",density:"comfortable"},null,8,["modelValue"])]),_:1}),c(I,{cols:"12"},{default:h(()=>[c(wn,{label:"详细介绍",modelValue:r.profileData.bio,"onUpdate:modelValue":t[8]||(t[8]=o=>r.profileData.bio=o),counter:2e3,variant:"outlined","auto-grow":"",rows:"3",hint:"支持Markdown格式","persistent-hint":""},null,8,["modelValue"])]),_:1}),c(I,{cols:"12",md:"6"},{default:h(()=>[c(N,{modelValue:r.profileData.featured_projects,"onUpdate:modelValue":t[9]||(t[9]=o=>r.profileData.featured_projects=o),label:"精选项目ID",variant:"outlined",density:"comfortable",type:"number",hint:"输入您的项目ID","persistent-hint":"",rules:r.projectIdRules},null,8,["modelValue","rules"])]),_:1}),c(I,{cols:"12"},{default:h(()=>[c(R,{onClick:s.updateProfile,disabled:!r.valid,color:"primary",size:"large","prepend-icon":"mdi-content-save",class:"px-6",loading:r.loading},{default:h(()=>t[15]||(t[15]=[C(" 保存资料 ")])),_:1,__:[15]},8,["onClick","disabled","loading"])]),_:1})]),_:1}),c(Jt,{modelValue:r.showRegionDialog,"onUpdate:modelValue":t[13]||(t[13]=o=>r.showRegionDialog=o),"max-width":"600"},{default:h(()=>[c(et,null,{default:h(()=>[c(xt,{class:"text-h5 pa-4"},{default:h(()=>[t[16]||(t[16]=C(" 选择区域 ")),c(_t),c(R,{icon:"mdi-close",variant:"text",onClick:t[10]||(t[10]=o=>r.showRegionDialog=!1)})]),_:1,__:[16]}),c(tt,{class:"pa-4"},{default:h(()=>[c(N,{modelValue:r.regionSearch,"onUpdate:modelValue":t[11]||(t[11]=o=>r.regionSearch=o),label:"搜索区域",variant:"outlined",density:"comfortable","prepend-inner-icon":"mdi-magnify",clearable:"","hide-details":"",class:"mb-4"},null,8,["modelValue"]),c(Ja,{lines:"two",class:"region-list"},{default:h(()=>[(E(!0),Ve(se,null,ea(s.filteredRegions,o=>(E(),Y(Za,{key:o.value,title:o.text,subtitle:o.value,onClick:i=>s.selectRegion(o)},{prepend:h(()=>{var i;return[c(de,{color:((i=r.profileData.region)==null?void 0:i.value)===o.value?"primary":void 0},{default:h(()=>{var l;return[C(H(((l=r.profileData.region)==null?void 0:l.value)===o.value?"mdi-check-circle":"mdi-earth"),1)]}),_:2},1032,["color"])]}),_:2},1032,["title","subtitle","onClick"]))),128))]),_:1})]),_:1}),c(Kt,{class:"pa-4"},{default:h(()=>[c(_t),c(R,{variant:"text",onClick:s.clearRegion},{default:h(()=>t[17]||(t[17]=[C(" 清除选择 ")])),_:1,__:[17]},8,["onClick"]),c(R,{color:"primary",onClick:t[12]||(t[12]=o=>r.showRegionDialog=!1)},{default:h(()=>t[18]||(t[18]=[C(" 确定 ")])),_:1,__:[18]})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["modelValue","onSubmit"])}const Ba=me(Cd,[["render",Vd],["__scopeId","data-v-24343570"]]),Id={name:"UserCard",props:{userData:{type:Object,required:!0},loading:{type:Boolean,default:!1},s3BucketUrl:{type:String,required:!0}}},Fd={class:"text-body-2 text-medium-emphasis",style:{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}};function Ed(e,t,a,n,r,s){return E(),Y(et,{hover:"",border:"",variant:"elevated",loading:a.loading,class:"mb-4"},{prepend:h(()=>[c(nn,{class:"ma-3",size:"64"},{default:h(()=>[c(Zt,{alt:a.userData.display_name,src:a.s3BucketUrl+"/user/"+a.userData.avatar,cover:""},null,8,["alt","src"])]),_:1})]),loader:h(({isActive:o})=>[c(an,{active:o,height:"4",indeterminate:"",color:"primary"},null,8,["active"])]),default:h(()=>[c(en,null,{default:h(()=>[c(xt,{class:"font-weight-bold text-h5"},{default:h(()=>[C(H(a.userData.display_name||"加载中..."),1)]),_:1}),c(tn,{class:"mt-2"},{default:h(()=>[c(Fe,{class:"mr-2",size:"small"},{default:h(()=>[c(de,{icon:"mdi-account-circle",start:"",size:"small"}),C(" ID: "+H(a.userData.id||"—"),1)]),_:1}),c(Fe,{size:"small"},{default:h(()=>[c(de,{icon:"mdi-tag",start:"",size:"small"}),t[0]||(t[0]=C(" 创作者 "))]),_:1,__:[0]})]),_:1})]),_:1}),a.userData.bio?(E(),Y(tt,{key:0},{default:h(()=>[w("div",Fd,H(a.userData.bio),1)]),_:1})):Qt("",!0)]),_:1},8,["loading"])}const Aa=me(Id,[["render",Ed]]),Bd={components:{EmailManager:aa,OAuthManager:ta,SecurityManager:Oa,UserCard:Aa,ProfileEditor:Ba,UsernameEditor:Ea,PasswordEditor:Fa,AvatarEditor:Ia,UserFollowing:xn,UserFollowers:pn,UserBlocked:Pn},data(){return{userCardLoading:!1,localuser:ye,userInfo:{},tab:"userInfo",tabItems:[{title:"用户信息",value:"userInfo",icon:"mdi-account-circle"},{title:"账户",value:"username",icon:"mdi-cog"},{title:"密码",value:"password",icon:"mdi-lock"},{title:"头像",value:"avatar",icon:"mdi-image"},{title:"邮箱",value:"email",icon:"mdi-email"},{title:"OAuth",value:"oauth",icon:"mdi-link-variant"},{title:"安全",value:"security",icon:"mdi-security"},{title:"关系",value:"relationships",icon:"mdi-account-group",to:"/app/account/relationships"}],VITE_APP_S3_BUCKET:"https://zerocat-bitiful.houlangs.com"}},setup(){un({title:"账户设置"})},async created(){ye.isLogin.value?await this.getUserById():this.$router.push("/app/account/login")},methods:{async getUserById(){this.userCardLoading=!0;try{const e=await bn(ye.user.value.id);this.userInfo=e.data.data}catch(e){this.handleError(e)}finally{this.userCardLoading=!1}},handleProfileUpdate(e){this.showToast(e.data.status||"info","修改个人信息",e.data.message),this.getUserById()},handleUsernameUpdate(e){this.showToast(e.data.status||"info","修改用户名",e.data.message),this.getUserById()},handlePasswordUpdate(e){this.showToast(e.data.status||"info","修改密码",e.data.message)},handleAvatarUpdate(e){this.showToast(e.data.status||"info","修改头像",e.data.message),this.getUserById()},handleError(e){this.showToast("error","错误",e.message)},showToast(e,t,a){this.$toast.add({severity:e,summary:t,detail:a,life:3e3})}}};function Ad(e,t,a,n,r,s){const o=Aa,i=Ba,l=Ea,u=Fa,f=Ia,m=aa,g=ta,y=Oa;return E(),Y(ln,{fluid:"",class:"pa-4"},{default:h(()=>[c(o,{userData:r.userInfo,loading:r.userCardLoading,s3BucketUrl:r.VITE_APP_S3_BUCKET},null,8,["userData","loading","s3BucketUrl"]),c(et,{hover:"",border:""},{default:h(()=>[c(rn,{modelValue:r.tab,"onUpdate:modelValue":t[0]||(t[0]=d=>r.tab=d),"bg-color":"primary"},{default:h(()=>[(E(!0),Ve(se,null,ea(r.tabItems,d=>(E(),Y(sn,{key:d.value,text:d.title,value:d.value,onClick:v=>r.tab=d.value,"prepend-icon":d.icon,to:d.to},null,8,["text","value","onClick","prepend-icon","to"]))),128))]),_:1},8,["modelValue"]),c(tt,{class:"pa-4"},{default:h(()=>[c(on,{modelValue:r.tab,"onUpdate:modelValue":t[1]||(t[1]=d=>r.tab=d)},{default:h(()=>[c(ae,{value:"userInfo"},{default:h(()=>[t[2]||(t[2]=w("h3",{class:"text-h5 mb-4"},"个人资料",-1)),c(i,{userData:r.userInfo,onProfileUpdated:s.handleProfileUpdate,onError:s.handleError},null,8,["userData","onProfileUpdated","onError"])]),_:1,__:[2]}),c(ae,{value:"username"},{default:h(()=>[t[3]||(t[3]=w("h3",{class:"text-h5 mb-4"},"修改用户名",-1)),c(l,{userData:r.userInfo,onUsernameUpdated:s.handleUsernameUpdate,onError:s.handleError},null,8,["userData","onUsernameUpdated","onError"])]),_:1,__:[3]}),c(ae,{value:"password"},{default:h(()=>[t[4]||(t[4]=w("h3",{class:"text-h5 mb-4"},"修改密码",-1)),c(u,{onPasswordUpdated:s.handlePasswordUpdate,onError:s.handleError},null,8,["onPasswordUpdated","onError"])]),_:1,__:[4]}),c(ae,{value:"avatar"},{default:h(()=>[t[5]||(t[5]=w("h3",{class:"text-h5 mb-4"},"更新头像",-1)),c(f,{userData:r.userInfo,s3BucketUrl:r.VITE_APP_S3_BUCKET,onAvatarUpdated:s.handleAvatarUpdate,onError:s.handleError},null,8,["userData","s3BucketUrl","onAvatarUpdated","onError"])]),_:1,__:[5]}),c(ae,{value:"email"},{default:h(()=>[t[6]||(t[6]=w("h3",{class:"text-h5 mb-4"},"邮箱管理",-1)),c(m,{ref:"emailManager"},null,512)]),_:1,__:[6]}),c(ae,{value:"oauth"},{default:h(()=>[t[7]||(t[7]=w("h3",{class:"text-h5 mb-4"},"第三方账号关联",-1)),c(g)]),_:1,__:[7]}),c(ae,{value:"security"},{default:h(()=>[t[8]||(t[8]=w("h3",{class:"text-h5 mb-4"},"安全管理",-1)),c(y)]),_:1,__:[8]}),c(ae,{value:"relationships"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})}const ef=me(Bd,[["render",Ad],["__scopeId","data-v-e9dfc994"]]);export{ef as default};
