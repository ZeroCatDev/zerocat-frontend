import{a as N,_ as B}from"./Comment-C7eltvBp.js";import{_ as v}from"./NewProjectList-B2osy4HI.js";import{_ as V,H as f,J as c,o as n,e as m,a as t,w as o,R as g,S as F,Q as b,$ as J,L as r,T as a,a0 as K,a1 as M,M as P,G as O,c as h,P as x,a2 as S,a3 as T,a4 as D,K as u,U as A,O as I,a5 as y}from"./index-DL7175Ml.js";import{V as Q}from"./VDialog-Yk4FXVcr.js";import{P as R}from"./ProjectRunner-Bk5HkNd-.js";import{o as $}from"./openEdit-AJJkPSPH.js";import{g as q}from"./project-CWZTlMt1.js";import{a as z}from"./user-BMjOME-4.js";import{a as L,V as W}from"./VRow-CZsdssz8.js";import{V as d}from"./VChip-OEXAtNOV.js";import{V as X}from"./VContainer-DniT_RcQ.js";import"./VForm-0mX8y7Eu.js";import"./VTextarea-C1qs-16t.js";import"./VSpacer-j6Fup5yG.js";/* empty css              */const Y={components:{NewProjectList:v},name:"addtolist",data(){return{localuser:f,userinfo:f.user,newProjectListDialog:!1,projectLists:[]}},methods:{async getProjectList(){this.projectLists=(await c({url:"/projectlist/check?projectid="+this.$route.params.id,method:"get"})).data.data},async addProjectToList(i){await c({url:"/projectlist/add",data:{userid:this.userinfo.id,projectid:this.$route.params.id,listid:i},method:"post"}).then(s=>{this.$toast.add({severity:"info",summary:"info",detail:s.data.message,life:3e3}),this.getProjectList()})},async removeProjectFromList(i){await c({url:"/projectlist/remove",data:{projectid:this.$route.params.id,listid:i},method:"post"}).then(s=>{this.$toast.add({severity:"info",summary:"info",detail:s.data.message,life:3e3}),this.getProjectList()})}},mounted(){this.getProjectList()}};function Z(i,s,_,w,e,p){const j=v;return n(),m(g,null,[t(M,null,{default:o(()=>[(n(!0),m(g,null,F(e.projectLists,l=>(n(),m("div",{key:l.id},[t(b,{"append-icon":l.include==!0?"mdi-minus-circle":"mdi-plus-circle",active:l.include==!0,color:"primary",onClick:k=>l.include==!0?p.removeProjectFromList(l.id):p.addProjectToList(l.id)},{default:o(()=>[t(J,null,{default:o(()=>[r(a(l.title),1)]),_:2},1024),t(K,null,{default:o(()=>[r(a(l.description),1)]),_:2},1024)]),_:2},1032,["append-icon","active","onClick"])]))),128)),t(b,{onClick:s[0]||(s[0]=l=>e.newProjectListDialog=!0)},{default:o(()=>s[2]||(s[2]=[r("新建列表")])),_:1})]),_:1}),t(Q,{modelValue:e.newProjectListDialog,"onUpdate:modelValue":s[1]||(s[1]=l=>e.newProjectListDialog=l)},{default:o(()=>[t(j,{listid:i.editlistid,close:()=>e.newProjectListDialog=!1,callback:p.getProjectList},null,8,["listid","close","callback"])]),_:1},8,["modelValue"])],64)}const E=V(Y,[["render",Z]]),tt={components:{NewProjectList:v},name:"addtolist",data(){return{localuser:f,userinfo:f.user,newProjectListDialog:!1,projectLists:"",star:!1}},methods:{getStarStatus(){c({url:`/projectlist/checkstar?projectid=${this.$route.params.id}`,method:"get"}).then(i=>{this.star=i.data.star})},ToggleStarProject(){this.star==0?c({url:"/projectlist/star",method:"post",data:{projectid:this.$route.params.id}}).then(i=>{this.star=i.data.star}):c({url:"/projectlist/unstar",method:"post",data:{projectid:this.$route.params.id}}).then(i=>{this.star=i.data.star})}},mounted(){this.getStarStatus()}};function et(i,s,_,w,e,p){return n(),m(g,null,[t(P,{onClick:s[0]||(s[0]=j=>p.ToggleStarProject()),color:e.star?"yellow":"","prepend-icon":"mdi-star",variant:"tonal"},{default:o(()=>s[1]||(s[1]=[r("Star")])),_:1},8,["color"]),r(a(e.projectLists),1)],64)}const U=V(tt,[["render",et]]),ot={components:{ProjectRunner:R,TimeAgo:N,Comment:B,AddTolist:E,ProjectStar:U},data(){return{projectid:this.$route.params.id,project:{},author:{},communityinfo:{stars:""},openEditor:$,localuser:f}},async mounted(){this.fetchProjectAndAuthorDetails()},methods:{async fetchProjectAndAuthorDetails(){const i=this.$route.params.username,s=this.$route.params.projectname,_=await q(i,s);this.project=_,this.projectid=this.project.id,O({title:this.project.title}),this.author=await z(this.project.authorid)}}},st={class:"px-4 d-flex ga-2 mb-2"},rt={class:"px-4 d-flex ga-2 mb-2"},it={class:"px-4 d-flex ga-2 mb-2"},lt={class:"px-4 d-flex ga-2 mb-2"},at={class:"px-4 d-flex ga-2 mb-2"},nt={class:"px-4"};function ut(i,s,_,w,e,p){const j=R,l=N,k=U,H=E,G=B;return n(),h(X,null,{default:o(()=>[t(W,null,{default:o(()=>[t(L,{xs:"12",sm:"12",md:"8",lg:"8",xl:"8",xxl:"8",cols:"12"},{default:o(()=>[t(j,{type:e.project.type,id:e.project.id},null,8,["type","id"])]),_:1}),t(L,{xs:"12",sm:"12",md:"4",lg:"4",xl:"4",xxl:"8",cols:"12"},{default:o(()=>[t(x,{hover:"",border:""},{default:o(()=>[t(S,null,{default:o(()=>[t(T,null,{default:o(()=>[r(a(e.project.title),1)]),_:1}),t(D,null,{default:o(()=>[r(a(e.project.description),1)]),_:1})]),_:1}),u("div",st,[t(d,{pill:""},{default:o(()=>[t(A,{start:""},{default:o(()=>[t(I,{src:"https://s4-1.wuyuan.1r.ink/user/"+e.author.images},null,8,["src"])]),_:1}),r(a(e.author.display_name),1)]),_:1})]),u("div",rt,[t(d,{pill:"","prepend-icon":"mdi-eye"},{default:o(()=>[r(a(e.project.view_count)+"浏览",1)]),_:1}),t(d,{pill:"","prepend-icon":"mdi-star"},{default:o(()=>[r(a(e.communityinfo.stars)+" Star",1)]),_:1}),t(d,{pill:"","prepend-icon":"mdi-clock"},{default:o(()=>[t(l,{date:e.project.time},null,8,["date"])]),_:1})]),u("div",it,[e.project.state=="public"?(n(),h(d,{key:0,pill:"","prepend-icon":"mdi-xml"},{default:o(()=>s[1]||(s[1]=[r("开源作品")])),_:1})):y("",!0),e.project.state=="private"?(n(),h(d,{key:1,pill:"","prepend-icon":"mdi-xml"},{default:o(()=>s[2]||(s[2]=[r("私密作品")])),_:1})):y("",!0),t(d,{pill:"","prepend-icon":"mdi-application"},{default:o(()=>[r(a(e.project.type),1)]),_:1})]),u("div",lt,[(n(!0),m(g,null,F(e.project.tags,C=>(n(),m("div",null,[t(d,null,{default:o(()=>[r(a(C.name),1)]),_:2},1024)]))),256))]),u("div",at,[t(k),t(P,{onClick:s[0]||(s[0]=C=>e.openEditor(e.project.id,e.project.type)),variant:"text"},{default:o(()=>s[3]||(s[3]=[r("打开创造页")])),_:1}),e.project.authorid!=e.localuser.user.id?(n(),h(P,{key:0,to:`${e.project.authorid}/${e.projectid}/fork`,variant:"text"},{default:o(()=>s[4]||(s[4]=[r("改编")])),_:1},8,["to"])):y("",!0)]),u("div",nt,[t(x,{hover:"",to:"/"+e.author.username,border:""},{default:o(()=>[t(S,null,{prepend:o(()=>[t(A,null,{default:o(()=>[t(I,{alt:e.author.display_name,src:"https://s4-1.wuyuan.1r.ink/user/"+e.author.images},null,8,["alt","src"])]),_:1})]),default:o(()=>[t(T,{class:"text-white"},{default:o(()=>[r(a(e.author.display_name),1)]),_:1}),t(D,{class:"text-white"},{default:o(()=>[r(a(e.author.motto),1)]),_:1})]),_:1})]),_:1},8,["to"])]),s[5]||(s[5]=u("br",null,null,-1))]),_:1}),s[6]||(s[6]=u("br",null,null,-1)),t(x,{hover:"",border:""},{default:o(()=>[t(H)]),_:1})]),_:1}),t(L,{xxl:"8",xl:"8",lg:"8",md:"8",sm:"12",xs:"12",cols:"12"},{default:o(()=>[t(G,{url:"project-"+i.$route.params.id,name:"项目"},null,8,["url"])]),_:1})]),_:1})]),_:1})}const wt=V(ot,[["render",ut]]);export{wt as default};
