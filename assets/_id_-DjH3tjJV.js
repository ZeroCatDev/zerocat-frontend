import{_ as U}from"./Comment-fWetEztM.js";import{J as _,_ as M,I as B,o as c,c as g,w as s,K as n,a as e,U as h,O as k,T as i,ah as j,Y as u,L as r,a9 as D,aa as L,a6 as I,Z,X as T,e as y,S as V,R as C,M as f,P as p,ab as v,ac as x,ad as w}from"./index-D99aAHt4.js";import{_ as N}from"./43-lazyload-CBkwrR6M.js";import{a as R,V as d}from"./VChip-6XcPLImw.js";import{V as S,a as P}from"./VRow-CcowkCXt.js";import{V as W}from"./VContainer-BMeWRf_n.js";import"./VForm-Bj-7Ziom.js";import"./VTextarea-CHhCr_US.js";import"./VDialog-DmMVQ0YZ.js";/* empty css              */function A(o){return _.get(`https://scratch.192325.xyz/studios/${o}`)}function E(o,t,m){return _.get(`https://scratch.192325.xyz/studios/${o}/projects?&offset=${t*16-16}&limit=${m}`)}function F(o,t,m){return _.get(`https://scratch.192325.xyz/studios/${o}/curators?&offset=${t*16-16}&limit=${m}`)}function G(o,t,m){return _.get(`https://scratch.192325.xyz/studios/${o}/managers?&offset=${t*16-16}&limit=${m}`)}const J={components:{Comment:U},data(){return{tab:B(null),UserCardLoading:!0,ProjectsLoading:!0,userid:this.$route.params.id,studioinfo:{id:1,title:"加载中",host:1,description:"加载中",visibility:"visible",public:!0,open_to_all:!0,comments_allowed:!0,image:"",history:{created:"2000-01-01T00:00:00.000Z",modified:"2000-01-01T00:00:00.000Z"},stats:{comments:0,followers:0,managers:0,projects:0}},curators:[],curatorspage:0,curatorscanload:!0,managers:[],managerspage:0,managerscanload:!0,usetime:0,projects:[],curPage:1,limit:18,scratch_proxy:"https://scratch.192325.xyz"}},async created(){await this.fetchStudioInfo(),await this.onPageChange(1,!1)},methods:{async fetchStudioInfo(){try{const o=await A(this.$route.params.id);this.studioinfo=o.data}catch(o){console.log(o)}finally{this.UserCardLoading=!1}},async onPageChange(o,t){t&&(this.projects=[]),this.usetime=Date.now(),this.ProjectsLoading=!0;try{const m=await E(this.$route.params.id,o,this.limit);this.projects=this.projects.concat(m.data)}catch(m){console.log(m)}finally{this.ProjectsLoading=!1,this.usetime=Date.now()-this.usetime}this.curPage=o},async onCuratorsPageChange(o){try{const t=await F(this.$route.params.id,o,this.limit);t.data.length===0&&(this.curatorscanload=!1),this.curators=this.curators.concat(t.data)}catch(t){console.log(t)}this.curatorspage=o},async onManagersPageChange(o){try{const t=await G(this.$route.params.id,o,this.limit);t.data.length===0&&(this.managerscanload=!1),this.managers=this.managers.concat(t.data)}catch(t){console.log(t)}this.managerspage=o}}},K={class:"mb-2"},O={class:"font-weight-black"},X={class:"mb-2"};function Y(o,t,m,q,a,b){const z=U;return c(),g(W,null,{default:s(()=>[n("div",K,[e(p,{class:"mx-auto mb-4",disabled:a.UserCardLoading,loading:a.UserCardLoading},{prepend:s(()=>[e(h,{class:"mb-2"},{default:s(()=>[e(k,{alt:a.studioinfo.username,src:a.studioinfo.image},null,8,["alt","src"])]),_:1})]),title:s(()=>[n("span",O,i(a.studioinfo.title),1)]),loader:s(({isActive:l})=>[e(j,{active:l,height:"4",indeterminate:""},null,8,["active"])]),subtitle:s(()=>[e(R,{column:""},{default:s(()=>[e(d,null,{default:s(()=>[e(u,{icon:"mdi-account-circle",start:""}),r(" ID:"+i(a.studioinfo.id),1)]),_:1}),e(d,null,{default:s(()=>[e(u,{icon:"mdi-clock",start:""}),r(" "+i(a.studioinfo.history.created)+"创建 ",1)]),_:1}),e(d,null,{default:s(()=>[e(u,{icon:"mdi-clock",start:""}),r(" "+i(a.studioinfo.history.modified)+"更新",1)]),_:1}),e(d,null,{default:s(()=>[e(u,{icon:"mdi-earth",start:""}),r(" "+i(a.studioinfo.public==!0?"公开":"私密"),1)]),_:1}),e(d,null,{default:s(()=>[e(u,{icon:"mdi-earth",start:""}),r(" "+i(a.studioinfo.open_to_all==!0?"对所有人开放":"需要邀请"),1)]),_:1}),e(d,null,{default:s(()=>[e(u,{icon:"mdi-earth",start:""}),r(" "+i(a.studioinfo.comments_allowed==!0?"Scratch官网允许评论":"Scratch官网不允许评论"),1)]),_:1}),e(d,null,{default:s(()=>[e(u,{icon:"mdi-earth",start:""}),r(" Scratch官网"+i(a.studioinfo.stats.comments)+"评论",1)]),_:1}),e(d,null,{default:s(()=>[e(u,{icon:"mdi-earth",start:""}),r(" "+i(a.studioinfo.stats.followers)+"被关注",1)]),_:1}),e(d,null,{default:s(()=>[e(u,{icon:"mdi-earth",start:""}),r(" "+i(a.studioinfo.stats.managers)+"成员",1)]),_:1}),e(d,null,{default:s(()=>[e(u,{icon:"mdi-earth",start:""}),r(" "+i(a.studioinfo.stats.projects)+"项目",1)]),_:1})]),_:1})]),default:s(()=>[e(D,{modelValue:a.tab,"onUpdate:modelValue":t[0]||(t[0]=l=>a.tab=l)},{default:s(()=>[e(L,{value:"description"},{default:s(()=>t[5]||(t[5]=[r("简介")])),_:1}),e(L,{value:"members"},{default:s(()=>t[6]||(t[6]=[r("成员")])),_:1})]),_:1},8,["modelValue"]),e(I,null,{default:s(()=>[e(Z,{modelValue:a.tab,"onUpdate:modelValue":t[3]||(t[3]=l=>a.tab=l)},{default:s(()=>[e(T,{value:"description"},{default:s(()=>[r(i(a.studioinfo.description),1)]),_:1}),e(T,{value:"members"},{default:s(()=>[t[9]||(t[9]=n("h1",null,"管理员",-1)),e(S,null,{default:s(()=>[(c(!0),y(C,null,V(a.managers,l=>(c(),g(P,{cols:" 12",md:"3",key:l},{default:s(()=>[e(p,{to:"/app/proxy/user/"+l.username},{default:s(()=>[e(v,null,{prepend:s(()=>[e(h,{image:`${this.scratch_proxy}/avatars/${l.profile.id}`},null,8,["image"])]),default:s(()=>[e(x,null,{default:s(()=>[r(i(l.username),1)]),_:2},1024),e(w,null,{default:s(()=>[r(i(l.profile.country),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["to"])]),_:2},1024))),128))]),_:1}),t[10]||(t[10]=n("br",null,null,-1)),e(f,{onClick:t[1]||(t[1]=l=>b.onManagersPageChange(a.managerspage+1)),disabled:!a.managerscanload},{default:s(()=>t[7]||(t[7]=[r("继续加载")])),_:1},8,["disabled"]),t[11]||(t[11]=n("br",null,null,-1)),t[12]||(t[12]=n("br",null,null,-1)),t[13]||(t[13]=n("h1",null,"成员",-1)),e(S,null,{default:s(()=>[(c(!0),y(C,null,V(a.curators,l=>(c(),g(P,{cols:" 12",md:"3",key:l},{default:s(()=>[e(p,{to:"/app/proxy/user/"+l.username},{default:s(()=>[e(v,null,{prepend:s(()=>[e(h,{image:`${this.scratch_proxy}/avatars/${l.profile.id}`},null,8,["image"])]),default:s(()=>[e(x,null,{default:s(()=>[r(i(l.username),1)]),_:2},1024),e(w,null,{default:s(()=>[r(i(l.profile.country),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["to"])]),_:2},1024))),128))]),_:1}),t[14]||(t[14]=n("br",null,null,-1)),e(f,{onClick:t[2]||(t[2]=l=>b.onCuratorsPageChange(a.curatorspage+1)),disabled:!a.curatorscanload},{default:s(()=>t[8]||(t[8]=[r("继续加载")])),_:1},8,["disabled"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["disabled","loading"]),e(j,{active:a.ProjectsLoading,height:"4",indeterminate:""},null,8,["active"]),n("div",X,[e(d,null,{default:s(()=>[e(u,{icon:"mdi-clock",start:""}),r("本页加载用时"+i(Math.abs(a.usetime/1e3))+"秒 ",1)]),_:1})]),e(S,null,{default:s(()=>[(c(!0),y(C,null,V(a.projects,l=>(c(),g(P,{cols:"4",md:"2",key:l},{default:s(()=>[e(p,{to:"/app/proxy/"+l.id},{default:s(()=>[e(k,{src:`${a.scratch_proxy}/thumbnails/${l.id}`,cover:"","lazy-src":N},null,8,["src"]),e(v,null,{prepend:s(()=>[e(h,{image:`${this.scratch_proxy}/avatars/${l.actor_id}`},null,8,["image"])]),default:s(()=>[e(x,null,{default:s(()=>[r(i(l.title),1)]),_:2},1024),e(w,null,{default:s(()=>[r(i(l.username),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["to"])]),_:2},1024))),128))]),_:1}),t[19]||(t[19]=n("br",null,null,-1)),e(f,{onClick:t[4]||(t[4]=l=>b.onPageChange(a.curPage+1,!1))},{default:s(()=>t[15]||(t[15]=[r("继续加载")])),_:1}),t[20]||(t[20]=n("br",null,null,-1)),t[21]||(t[21]=n("br",null,null,-1)),e(p,{subtitle:"这是Scratch上的内容",title:"ZeroCatScratchMirror",border:""},{actions:s(()=>[e(f,{href:"https://scratch.mit.edu/studios/"+a.studioinfo.id,target:"_blank"},{default:s(()=>t[17]||(t[17]=[r("Scratch上的工作室主页")])),_:1},8,["href"]),e(f,{href:"https://scratch.mit.edu/terms_of_use",target:"_blank"},{default:s(()=>t[18]||(t[18]=[r("Scratch使用条款")])),_:1})]),default:s(()=>[e(I,{class:"bg-surface-light pt-4"},{default:s(()=>t[16]||(t[16]=[r(" 我们使用这种方式促进Scratch及其社区的发展，这些内容是按照"),n("a",null,"署名-相同方式共享 2.0 通用",-1),r("协议传播的，您可以在"),n("a",null,"https://creativecommons.org/licenses/by-sa/2.0/",-1),r("查看协议全文。 ")])),_:1})]),_:1})]),e(z,{url:"scratchmitedustudio-"+a.studioinfo.id,name:"Scratch官网工作室"},null,8,["url"])]),_:1})}const it=M(J,[["render",Y]]);export{it as default};
