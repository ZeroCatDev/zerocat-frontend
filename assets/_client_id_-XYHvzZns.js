import{_ as D,Y as _,o as b,N as n,e as t,Q as T,R as L,f as e,i as u,X as m,W as c,aF as A,aD as B,a3 as y,c as R,aB as g,F as O,U as I,L as s,a0 as j,aE as S,a9 as h,O as w,n as K,$ as P,a5 as E,S as z,bs as N,aA as q,T as G,aa as W,a1 as C}from"./index-CD7vfFJn.js";import{C as M}from"./compressor.esm-C46f8uP2.js";import{V as F}from"./VSpacer-46C6LS8S.js";import{V as H}from"./VTextarea-DNSQVqVM.js";import{V as J}from"./VSheet-B_3u303-.js";import{V as Q}from"./VFileInput-hc79-9bI.js";import{V as X}from"./VTable-BHdCsNAU.js";const Y={data(){return{form:{name:"",description:"",homepage_url:"",redirect_uris:[""],webhook_url:"",logo_url:"",terms_url:"",privacy_url:""},loading:!1,application:null,showClientSecret:!1,deleteDialog:!1,deleteConfirmation:"",logoFile:null,logoPreview:null,compressedLogoFile:null,logoUploading:!1,snackbar:{show:!1,text:"",color:"success"},s3BucketUrl:""}},methods:{async loadApplication(){this.loading=!0;try{const r=await C.get(`/oauth/applications/${this.$route.params.client_id}`);this.application=r.data,this.form=r.data}catch(r){this.showError("加载应用信息失败"),console.error("Failed to load application:",r)}this.loading=!1},async saveApplication(){const{valid:r}=await this.$refs.formRef.validate();if(!r){this.showError("请检查表单填写是否正确");return}this.loading=!0;try{const l=this.form;await C.put(`/oauth/applications/${this.$route.params.client_id}`,l),this.showSuccess("应用更新成功"),await this.loadApplication()}catch(l){this.showError("更新应用失败"),console.error("Failed to save application:",l)}this.loading=!1},async deleteApplication(){this.loading=!0;try{await C.delete(`/oauth/applications/${this.$route.params.client_id}`),this.showSuccess("应用已删除"),this.$router.push("/app/oauth/applications")}catch(r){this.showError("删除应用失败"),console.error("Failed to delete application:",r)}this.loading=!1,this.deleteDialog=!1},addRedirectUri(){this.form.redirect_uris.push("")},removeRedirectUri(r){this.form.redirect_uris.splice(r,1)},async copyToClipboard(r){try{await navigator.clipboard.writeText(r),this.showSuccess("已复制到剪贴板")}catch{this.showError("复制失败")}},toggleClientSecret(){this.showClientSecret=!this.showClientSecret},confirmDelete(){this.deleteDialog=!0,this.deleteConfirmation=""},showSuccess(r){this.snackbar={show:!0,text:r,color:"success"}},showError(r){this.snackbar={show:!0,text:r,color:"error"}},onLogoFileChange(r){const l=r.target.files?r.target.files[0]:null;l instanceof File&&l.type.startsWith("image/")?new M(l,{quality:.8,maxWidth:500,maxHeight:500,success:f=>{this.logoPreview=URL.createObjectURL(f),this.compressedLogoFile=f},error:f=>{console.error("图片压缩出错：",f.message),this.$emit("error",{message:"图片压缩出错："+f.message})}}):l&&this.$emit("error",{message:"请选择有效的图片文件"})},cancelLogoUpload(){this.logoPreview&&URL.revokeObjectURL(this.logoPreview),this.logoFile=null,this.logoPreview=null,this.compressedLogoFile=null},async uploadLogo(){var l,f,V,o;if(!this.compressedLogoFile)return;const r=new FormData;r.append("zcfile",this.compressedLogoFile);try{if(this.logoUploading=!0,(await C.post(`/oauth/applications/${this.$route.params.client_id}/logo`,r,{headers:{"Content-Type":"multipart/form-data"}})).data.code==="success")this.showSuccess("徽标上传成功"),this.cancelLogoUpload();else throw new Error("上传响应格式错误")}catch(a){console.error("上传徽标失败:",a),this.showError(((f=(l=a.response)==null?void 0:l.data)==null?void 0:f.message)||((o=(V=a.response)==null?void 0:V.data)==null?void 0:o.error)||"上传徽标失败，请稍后重试")}finally{this.logoUploading=!1}}},async mounted(){this.s3BucketUrl=await W("s3.staticurl"),this.loadApplication()},beforeDestroy(){this.logoPreview&&URL.revokeObjectURL(this.logoPreview)}},Z={class:"d-flex align-center"},$={class:"text-h4"},ll={class:"d-flex flex-column"},el={class:"d-flex align-items-center mb-4"},tl={class:"d-flex align-center justify-center fill-height"},ol={class:"d-flex flex-column"},il={key:0,class:"d-flex align-items-center"},sl={class:"mb-6"},nl={class:"mb-6"},rl={class:"d-flex align-center mb-2"},al={class:"d-flex justify-space-between align-center mb-2"},ul={class:"text-body-1"},dl={class:"mb-6"},pl={class:"d-flex align-center mb-2"},ml={class:"d-flex justify-space-between align-center mb-2"},cl={class:"text-body-1"},fl={class:"d-flex flex-column"},gl={class:"mb-6"},bl={class:"d-flex align-center mb-2"},yl={class:"d-flex justify-space-between align-center mb-2"},vl={class:"mb-6"},xl={class:"mb-6"},hl={class:"text-body-1"},_l={class:"mb-4"};function wl(r,l,f,V,o,a){return b(),_(G,{fluid:""},{default:n(()=>[t(T,{class:"mb-4"},{default:n(()=>[t(L,null,{default:n(()=>[e("div",Z,[t(u,{variant:"text",to:"/app/oauth/applications",icon:"mdi-arrow-left",class:"mr-4"}),e("h1",$,"编辑 "+m(o.form.name||"OAuth 应用"),1),t(F)])]),_:1})]),_:1}),t(T,null,{default:n(()=>[t(L,{cols:"12",md:"8"},{default:n(()=>[t(c,null,{default:n(()=>[t(A,{onSubmit:B(a.saveApplication,["prevent"]),ref:"formRef"},{default:n(()=>[t(y,null,{default:n(()=>[l[19]||(l[19]=e("h2",{class:"text-h6 mb-4"},"基本信息",-1)),t(g,{modelValue:o.form.name,"onUpdate:modelValue":l[0]||(l[0]=i=>o.form.name=i),label:"应用名称",rules:[i=>!!i||"应用名称是必填的"],required:"",class:"mb-4"},null,8,["modelValue","rules"]),t(H,{modelValue:o.form.description,"onUpdate:modelValue":l[1]||(l[1]=i=>o.form.description=i),label:"应用描述",hint:"简要描述你的应用，帮助用户了解应用的用途",rows:"3",class:"mb-4"},null,8,["modelValue"]),t(g,{modelValue:o.form.homepage_url,"onUpdate:modelValue":l[2]||(l[2]=i=>o.form.homepage_url=i),label:"应用主页",hint:"你的应用的完整URL",rules:[i=>!i||/^https?:\/\/.+/.test(i)||"请输入有效的URL（以http://或https://开头）"],class:"mb-4"},null,8,["modelValue","rules"]),l[20]||(l[20]=e("h2",{class:"text-h6 mb-4 mt-6"},"回调设置",-1)),(b(!0),R(O,null,I(o.form.redirect_uris,(i,d)=>(b(),R("div",{key:d,class:"d-flex mb-2"},[t(g,{modelValue:o.form.redirect_uris[d],"onUpdate:modelValue":p=>o.form.redirect_uris[d]=p,label:"授权回调URL",rules:[p=>!!p||"回调URL是必填的",p=>/^https?:\/\/.+/.test(p)||"请输入有效的URL（以http://或https://开头）"],required:"",class:"mr-2"},null,8,["modelValue","onUpdate:modelValue","rules"]),t(u,{icon:"mdi-delete",variant:"text",color:"error",onClick:p=>a.removeRedirectUri(d),disabled:o.form.redirect_uris.length===1},null,8,["onClick","disabled"])]))),128)),t(u,{"prepend-icon":"mdi-plus",variant:"text",class:"mt-2",onClick:a.addRedirectUri},{default:n(()=>l[18]||(l[18]=[s(" 添加回调URL ")])),_:1,__:[18]},8,["onClick"]),l[21]||(l[21]=e("h2",{class:"text-h6 mb-4 mt-6"},"高级设置",-1)),t(g,{modelValue:o.form.webhook_url,"onUpdate:modelValue":l[3]||(l[3]=i=>o.form.webhook_url=i),label:"Webhook URL",hint:"接收应用相关事件通知的URL",rules:[i=>!i||/^https?:\/\/.+/.test(i)||"请输入有效的URL（以http://或https://开头）"],class:"mb-4"},null,8,["modelValue","rules"]),t(g,{modelValue:o.form.terms_url,"onUpdate:modelValue":l[4]||(l[4]=i=>o.form.terms_url=i),label:"服务条款URL",hint:"应用服务条款页面的URL",rules:[i=>!i||/^https?:\/\/.+/.test(i)||"请输入有效的URL（以http://或https://开头）"],class:"mb-4"},null,8,["modelValue","rules"]),t(g,{modelValue:o.form.privacy_url,"onUpdate:modelValue":l[5]||(l[5]=i=>o.form.privacy_url=i),label:"隐私政策URL",hint:"应用隐私政策页面的URL",rules:[i=>!i||/^https?:\/\/.+/.test(i)||"请输入有效的URL（以http://或https://开头）"],class:"mb-4"},null,8,["modelValue","rules"])]),_:1,__:[19,20,21]}),t(j),t(S,{class:"pa-4"},{default:n(()=>[t(F),t(u,{variant:"outlined",class:"mr-2",to:"/app/oauth/applications"},{default:n(()=>l[22]||(l[22]=[s(" 取消 ")])),_:1,__:[22]}),t(u,{color:"primary",type:"submit",loading:o.loading},{default:n(()=>l[23]||(l[23]=[s(" 保存更改 ")])),_:1,__:[23]},8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1}),t(c,{class:"mb-4"},{default:n(()=>[t(h,{class:"text-h6 d-flex align-center"},{default:n(()=>[t(w,{icon:"mdi-image",color:"primary",class:"mr-2"}),l[24]||(l[24]=s(" 应用徽标 "))]),_:1,__:[24]}),t(y,null,{default:n(()=>[e("div",ll,[e("div",el,[t(J,{class:"rounded-lg overflow-hidden elevation-2 mr-4",width:"96",height:"96"},{default:n(()=>{var i;return[t(K,{src:o.logoPreview||o.s3BucketUrl+"/material/asset/"+((i=o.application)==null?void 0:i.logo_url),height:"96",width:"96",cover:"",class:"bg-grey-lighten-3"},{placeholder:n(()=>[e("div",tl,[t(w,{icon:"mdi-image",size:"48",color:"grey-darken-1"})])]),_:1},8,["src"])]}),_:1}),l[25]||(l[25]=e("div",{class:"flex-grow-1"},[e("p",{class:"text-body-2 mb-2"},"上传应用徽标以增加品牌辨识度"),e("ul",{class:"text-caption text-medium-emphasis mb-2"},[e("li",null,"建议尺寸：200 x 200 像素"),e("li",null,"支持格式：PNG、JPG、GIF"),e("li",null,"文件大小：最大 2MB")])],-1))]),e("div",ol,[t(Q,{modelValue:o.logoFile,"onUpdate:modelValue":l[6]||(l[6]=i=>o.logoFile=i),label:"选择图片",accept:"image/*",onChange:a.onLogoFileChange,placeholder:"选择或拖放图片","prepend-icon":"mdi-image",variant:"outlined",density:"comfortable","show-size":"",rules:[i=>!i||!i.length||i[0].size<2e6||"徽标大小不能超过2MB"],class:"mb-2"},null,8,["modelValue","onChange","rules"]),o.logoFile?(b(),R("div",il,[t(u,{color:"primary","prepend-icon":"mdi-cloud-upload",loading:o.logoUploading,class:"mr-2",onClick:a.uploadLogo},{default:n(()=>l[26]||(l[26]=[s(" 上传徽标 ")])),_:1,__:[26]},8,["loading","onClick"]),t(u,{color:"error",variant:"text",onClick:a.cancelLogoUpload},{default:n(()=>l[27]||(l[27]=[s(" 取消 ")])),_:1,__:[27]},8,["onClick"])])):P("",!0)])])]),_:1})]),_:1})]),_:1}),t(L,{cols:"12",md:"4"},{default:n(()=>[t(c,null,{default:n(()=>[t(h,{class:"text-h6"},{default:n(()=>l[28]||(l[28]=[s(" 客户端凭据 ")])),_:1,__:[28]}),t(y,null,{default:n(()=>[l[30]||(l[30]=e("p",{class:"text-body-2 mb-4"}," 使用这些凭据来配置你的OAuth应用。请确保安全保管你的客户端密钥。 ",-1)),o.application?(b(),_(g,{key:0,modelValue:o.application.client_id,"onUpdate:modelValue":l[8]||(l[8]=i=>o.application.client_id=i),label:"客户端ID",readonly:"",variant:"outlined",class:"mb-4"},{append:n(()=>[t(u,{icon:"mdi-content-copy",variant:"text",onClick:l[7]||(l[7]=i=>a.copyToClipboard(o.application.client_id))})]),_:1},8,["modelValue"])):P("",!0),o.application&&o.showClientSecret?(b(),_(g,{key:1,modelValue:o.application.client_secret,"onUpdate:modelValue":l[10]||(l[10]=i=>o.application.client_secret=i),label:"客户端密钥",readonly:"",variant:"outlined",type:"password",class:"mb-4"},{append:n(()=>[t(u,{icon:"mdi-eye",variant:"text",onClick:a.toggleClientSecret},null,8,["onClick"]),t(u,{icon:"mdi-content-copy",variant:"text",onClick:l[9]||(l[9]=i=>a.copyToClipboard(o.application.client_secret))})]),_:1},8,["modelValue"])):(b(),_(u,{key:2,block:"",variant:"outlined",onClick:a.toggleClientSecret},{default:n(()=>l[29]||(l[29]=[s(" 显示客户端密钥 ")])),_:1,__:[29]},8,["onClick"]))]),_:1,__:[30]})]),_:1}),t(c,{class:"mb-4"},{default:n(()=>[t(h,{class:"text-h6 d-flex align-center"},{default:n(()=>[t(w,{icon:"mdi-book-open-page-variant",color:"primary",class:"mr-2"}),l[31]||(l[31]=s(" OAuth 2.0 集成指南 "))]),_:1,__:[31]}),t(y,null,{default:n(()=>[e("div",sl,[t(E,{type:"info",variant:"tonal",class:"mb-4"},{default:n(()=>l[32]||(l[32]=[e("h4",{class:"text-subtitle-1 font-weight-bold mb-2"},"基本信息",-1),e("ul",{class:"ml-4"},[e("li",null,"协议标准：OAuth 2.0"),e("li",null,"支持流程：授权码模式（可选 PKCE 支持）"),e("li",null,"认证入口：https://zerocat-api.houlangs.com/oauth/authorize"),e("li",null,"令牌交换：https://zerocat-api.houlangs.com/oauth/token"),e("li",null,"用户信息：https://zerocat-api.houlangs.com/oauth/userinfo")],-1)])),_:1,__:[32]})]),e("div",nl,[e("div",rl,[t(z,{color:"primary",class:"mr-2"},{default:n(()=>l[33]||(l[33]=[s("步骤 1")])),_:1,__:[33]}),l[34]||(l[34]=e("span",{class:"text-h6"},"构建授权URL",-1))]),t(c,{variant:"outlined",class:"pa-4 mb-2"},{default:n(()=>{var i,d,p;return[e("div",al,[e("code",ul,[l[35]||(l[35]=s(" https://zerocat-api.houlangs.com/oauth/authorize?")),l[36]||(l[36]=e("br",null,null,-1)),s(" client_id="+m((i=o.application)==null?void 0:i.client_id),1),l[37]||(l[37]=e("br",null,null,-1)),s(" &redirect_uri="+m(((p=(d=o.form)==null?void 0:d.redirect_uris)==null?void 0:p[0])||"[您的回调URL]"),1),l[38]||(l[38]=e("br",null,null,-1)),l[39]||(l[39]=s(" &response_type=code")),l[40]||(l[40]=e("br",null,null,-1)),l[41]||(l[41]=s(" &scope=user:basic user:email")),l[42]||(l[42]=e("br",null,null,-1)),l[43]||(l[43]=s(" &state=[推荐：随机字符串防止CSRF攻击]")),l[44]||(l[44]=e("br",null,null,-1)),l[45]||(l[45]=s(" &code_challenge=[可选：PKCE挑战码]")),l[46]||(l[46]=e("br",null,null,-1)),l[47]||(l[47]=s(" &code_challenge_method=[可选：plain或S256] "))]),t(u,{icon:"mdi-content-copy",variant:"text",color:"primary",onClick:l[11]||(l[11]=k=>{var U,v,x;return a.copyToClipboard("https://zerocat-api.houlangs.com/oauth/authorize?client_id="+((U=o.application)==null?void 0:U.client_id)+"&redirect_uri="+(((x=(v=o.form)==null?void 0:v.redirect_uris)==null?void 0:x[0])||"[您的回调URL]")+"&response_type=code&scope=user:basic user:email&state=[推荐：随机字符串]")})})]),l[48]||(l[48]=e("div",{class:"mt-3"},[e("p",{class:"text-caption"},[e("strong",null,"参数说明：")]),e("ul",{class:"text-caption"},[e("li",null,[e("code",null,"client_id"),s("：必填，您的应用ID")]),e("li",null,[e("code",null,"redirect_uri"),s("：必填，必须与预配置的回调地址匹配")]),e("li",null,[e("code",null,"response_type"),s('：必填，固定为"code"')]),e("li",null,[e("code",null,"scope"),s("：可选，权限范围（空格分隔）")]),e("li",null,[e("code",null,"state"),s("：推荐，防止CSRF攻击的随机字符串")]),e("li",null,[e("code",null,"code_challenge"),s("：可选，PKCE模式下的挑战码")]),e("li",null,[e("code",null,"code_challenge_method"),s("：可选，PKCE方法（plain或S256）")])])],-1))]}),_:1,__:[48]})]),e("div",dl,[e("div",pl,[t(z,{color:"primary",class:"mr-2"},{default:n(()=>l[49]||(l[49]=[s("步骤 2")])),_:1,__:[49]}),l[50]||(l[50]=e("span",{class:"text-h6"},"获取访问令牌",-1))]),t(c,{variant:"outlined",class:"pa-4 mb-2"},{default:n(()=>{var i,d,p,k;return[e("div",ml,[e("code",cl,[l[51]||(l[51]=s(" POST https://zerocat-api.houlangs.com/oauth/token")),l[52]||(l[52]=e("br",null,null,-1)),l[53]||(l[53]=s(" Content-Type: application/x-www-form-urlencoded")),l[54]||(l[54]=e("br",null,null,-1)),l[55]||(l[55]=e("br",null,null,-1)),l[56]||(l[56]=s(" grant_type=authorization_code")),l[57]||(l[57]=e("br",null,null,-1)),l[58]||(l[58]=s(" code=[授权码]")),l[59]||(l[59]=e("br",null,null,-1)),s(" client_id="+m((i=o.application)==null?void 0:i.client_id),1),l[60]||(l[60]=e("br",null,null,-1)),s(" client_secret="+m(o.showClientSecret?(d=o.application)==null?void 0:d.client_secret:"[您的客户端密钥]"),1),l[61]||(l[61]=e("br",null,null,-1)),s(" redirect_uri="+m(((k=(p=o.form)==null?void 0:p.redirect_uris)==null?void 0:k[0])||"[您的回调URL]"),1),l[62]||(l[62]=e("br",null,null,-1)),l[63]||(l[63]=s(" code_verifier=[如果使用PKCE，则必填] "))]),e("div",fl,[t(u,{icon:"mdi-content-copy",variant:"text",color:"primary",class:"mb-2",onClick:l[12]||(l[12]=U=>{var v,x;return a.copyToClipboard(`POST https://zerocat-api.houlangs.com/oauth/token
Content-Type: application/x-www-form-urlencoded

grant_type=authorization_code
code=[授权码]
client_id=${(v=o.application)==null?void 0:v.client_id}
client_secret=${(x=o.application)==null?void 0:x.client_secret}
redirect_uri=[您的回调URL]`)})}),t(u,{icon:o.showClientSecret?"mdi-eye-off":"mdi-eye",variant:"text",color:"primary",onClick:a.toggleClientSecret},null,8,["icon","onClick"])])]),l[64]||(l[64]=e("div",{class:"mt-3"},[e("p",{class:"text-caption"},[e("strong",null,"响应示例：")]),e("pre",{class:"text-caption bg-grey-lighten-4 pa-2 rounded"},`{
  "access_token": "abc",
  "token_type": "Bearer",
  "expires_in": 3600,
  "refresh_token": "xyz",
  "scope": "user:basic user:email"
}`)],-1))]}),_:1,__:[64]})]),e("div",gl,[e("div",bl,[t(z,{color:"primary",class:"mr-2"},{default:n(()=>l[65]||(l[65]=[s("步骤 3")])),_:1,__:[65]}),l[66]||(l[66]=e("span",{class:"text-h6"},"使用访问令牌",-1))]),t(c,{variant:"outlined",class:"pa-4 mb-2"},{default:n(()=>[e("div",yl,[l[67]||(l[67]=e("code",{class:"text-body-1"},[s(" GET https://zerocat-api.houlangs.com/oauth/userinfo"),e("br"),s(" Authorization: Bearer [访问令牌] ")],-1)),t(u,{icon:"mdi-content-copy",variant:"text",color:"primary",onClick:l[13]||(l[13]=i=>a.copyToClipboard(`GET https://zerocat-api.houlangs.com/oauth/userinfo
Authorization: Bearer [访问令牌]`))})]),l[68]||(l[68]=e("div",{class:"mt-3"},[e("p",{class:"text-caption"},[e("strong",null,"响应示例：")]),e("pre",{class:"text-caption bg-grey-lighten-4 pa-2 rounded"},`{
  "openid": "zerocat_1234567890",
  "username": "zerocat",
  "nickname": "ZeroCat",
  "avatar": "https://zerocat.dev/avatar.png",
  "email": true,
  "email_verified": true
}`)],-1))]),_:1,__:[68]})]),e("div",vl,[l[70]||(l[70]=e("h3",{class:"text-h6 mb-3"},"可用权限（Scopes）",-1)),t(X,{density:"compact"},{default:n(()=>l[69]||(l[69]=[e("thead",null,[e("tr",null,[e("th",null,"权限名"),e("th",null,"说明")])],-1),e("tbody",null,[e("tr",null,[e("td",null,[e("code",null,"user:basic")]),e("td",null,"获取用户名与显示名")]),e("tr",null,[e("td",null,[e("code",null,"user:email")]),e("td",null,"获取用户验证过的邮箱地址")])],-1)])),_:1,__:[69]})]),e("div",xl,[l[81]||(l[81]=e("h3",{class:"text-h6 mb-3"},"刷新令牌（可选）",-1)),t(c,{variant:"outlined",class:"pa-4"},{default:n(()=>{var i,d;return[e("code",hl,[l[71]||(l[71]=s(" POST https://zerocat-api.houlangs.com/oauth/token")),l[72]||(l[72]=e("br",null,null,-1)),l[73]||(l[73]=s(" Content-Type: application/x-www-form-urlencoded")),l[74]||(l[74]=e("br",null,null,-1)),l[75]||(l[75]=e("br",null,null,-1)),l[76]||(l[76]=s(" grant_type=refresh_token")),l[77]||(l[77]=e("br",null,null,-1)),s(" client_id="+m((i=o.application)==null?void 0:i.client_id),1),l[78]||(l[78]=e("br",null,null,-1)),s(" client_secret="+m(o.showClientSecret?(d=o.application)==null?void 0:d.client_secret:"[您的客户端密钥]"),1),l[79]||(l[79]=e("br",null,null,-1)),l[80]||(l[80]=s(" refresh_token=[刷新令牌] "))])]}),_:1})]),l[83]||(l[83]=e("div",{class:"mb-6"},[e("h3",{class:"text-h6 mb-3"},"接口限速"),e("ul",{class:"text-body-2"},[e("li",null,"全局限制：每应用每小时 5000 次请求"),e("li",null,"授权请求：每 IP 每分钟最多 10 次")])],-1)),t(E,{type:"warning",variant:"outlined",class:"mt-4"},{prepend:n(()=>[t(w,{icon:"mdi-shield-lock"})]),default:n(()=>[l[82]||(l[82]=e("div",{class:"text-body-1"},[e("strong",null,"安全建议："),e("ul",{class:"mt-2"},[e("li",null,"使用 HTTPS 作为回调地址"),e("li",null,"建议启用 PKCE，特别是移动端应用"),e("li",null,"客户端密钥请勿暴露于前端代码"),e("li",null,"始终校验 state 参数与 redirect_uri"),e("li",null,"妥善管理与吊销令牌，保护用户数据隐私")])],-1))]),_:1,__:[82]}),l[84]||(l[84]=e("div",{class:"mt-6"},[e("h3",{class:"text-h6 mb-3"},"错误处理"),e("p",{class:"text-body-2 mb-2"},"常见错误响应格式："),e("pre",{class:"text-caption bg-grey-lighten-4 pa-2 rounded"},`{
  "error": "invalid_request",
  "error_description": "参数缺失或格式错误"
}`),e("p",{class:"text-body-2 mt-3 mb-2"},"常见错误类型："),e("ul",{class:"text-body-2"},[e("li",null,[e("code",null,"invalid_request"),s("：参数不合法")]),e("li",null,[e("code",null,"invalid_client"),s("：客户端验证失败")]),e("li",null,[e("code",null,"invalid_grant"),s("：code 或 refresh_token 无效")]),e("li",null,[e("code",null,"invalid_scope"),s("：权限范围无效")]),e("li",null,[e("code",null,"unauthorized_client"),s("：客户端未被授权")]),e("li",null,[e("code",null,"access_denied"),s("：用户拒绝授权")])])],-1))]),_:1,__:[83,84]})]),_:1}),t(c,{class:"mt-4",color:"error",variant:"outlined"},{default:n(()=>[t(h,{class:"text-h6"},{default:n(()=>l[85]||(l[85]=[s(" 删除应用 ")])),_:1,__:[85]}),t(y,null,{default:n(()=>l[86]||(l[86]=[e("p",{class:"text-body-2"}," 删除应用后，所有使用此应用的用户将无法继续访问。此操作不可撤销。 ",-1)])),_:1,__:[86]}),t(S,null,{default:n(()=>[t(u,{color:"error",variant:"text",onClick:a.confirmDelete},{default:n(()=>l[87]||(l[87]=[s(" 删除此应用 ")])),_:1,__:[87]},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1}),t(N,{modelValue:o.snackbar.show,"onUpdate:modelValue":l[14]||(l[14]=i=>o.snackbar.show=i),color:o.snackbar.color,timeout:3e3},{default:n(()=>[s(m(o.snackbar.text),1)]),_:1},8,["modelValue","color"]),t(q,{modelValue:o.deleteDialog,"onUpdate:modelValue":l[17]||(l[17]=i=>o.deleteDialog=i),"max-width":"500"},{default:n(()=>[t(c,null,{default:n(()=>[t(h,{class:"text-h5"},{default:n(()=>l[88]||(l[88]=[s(" 确认删除应用 ")])),_:1,__:[88]}),t(y,null,{default:n(()=>[e("p",_l,' 你确定要删除应用 "'+m(o.form.name)+'" 吗？此操作不可撤销，所有使用此应用的用户将无法继续访问。 ',1),t(g,{modelValue:o.deleteConfirmation,"onUpdate:modelValue":l[15]||(l[15]=i=>o.deleteConfirmation=i),label:"输入应用名称以确认",rules:[i=>i===o.form.name||"请输入正确的应用名称"]},null,8,["modelValue","rules"])]),_:1}),t(S,null,{default:n(()=>[t(F),t(u,{variant:"text",onClick:l[16]||(l[16]=i=>o.deleteDialog=!1)},{default:n(()=>l[89]||(l[89]=[s(" 取消 ")])),_:1,__:[89]}),t(u,{color:"error",disabled:o.deleteConfirmation!==o.form.name,onClick:a.deleteApplication,loading:o.loading},{default:n(()=>l[90]||(l[90]=[s(" 删除应用 ")])),_:1,__:[90]},8,["disabled","onClick","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}const zl=D(Y,[["render",wl],["__scopeId","data-v-35afee11"]]);export{zl as default};
