import{_ as b,Y as v,a as h,o,h as a,M as f,N as t,F as C,R as L,U as c,S as m,X as _,q as k,au as I,av as w,K as r,T as n,aw as B,al as S,am as g,ao as p,ap as y,W as V,k as $,aq as q,j as N}from"./index-DKqePUrh.js";import{_ as P}from"./43-lazyload-CBkwrR6M.js";import{a as T,V as U}from"./VRow-MTxZhg05.js";const z={props:{url:{type:String,required:!0},showUserInfo:{type:Boolean,default:!1},title:{type:String,required:!1},subtitle:{type:String,required:!1},autoload:{type:Boolean,default:!1}},data(){return{projects:[],page:0,canLoad:!0,loading:!1,scratch_proxy:"https://scratch.192325.xyz",limit:40}},methods:{async fetchProjects(){this.loading=!0;try{const i=await v.get(`${this.scratch_proxy}${this.url}limit=${this.limit}&offset=${this.page*this.limit}`);i.data.length===0&&(this.canLoad=!1),this.projects=this.projects.concat(i.data),this.page+=1}catch(i){console.log(i)}finally{this.loading=!1}}},watch:{url:{handler(){this.projects=[],this.page=0,this.canLoad=!0,this.autoload==!0&&this.fetchProjects()},immediate:!0}},created(){this.autoload==!0&&this.fetchProjects()}};function A(i,l,d,F,u,x){return o(),h("div",null,[a(U,null,{default:t(()=>[(o(!0),h(C,null,L(u.projects,e=>(o(),c(T,{cols:"12",xs:"12",sm:"6",md:"4",lg:"3",xl:"2",xxl:"2",key:e.id},{default:t(()=>[a(m,{to:"/app/proxy/"+e.id,border:"",hover:""},{default:t(()=>[a(k,{src:`${u.scratch_proxy}/thumbnails/${e.id}`,cover:"","lazy-src":P},null,8,["src"]),a(I,null,{default:t(()=>[a(w,null,{default:t(()=>[r(n(e.title),1)]),_:2},1024),a(B,null,{default:t(()=>[r(n(e.description),1)]),_:2},1024)]),_:2},1024),d.showUserInfo?(o(),c(S,{key:0},{default:t(()=>[a(g,null,{prepend:t(()=>{var s;return[a(V,{image:`${this.scratch_proxy}/avatars/${((s=e.author)==null?void 0:s.id)||e.creator_id||""}`},null,8,["image"])]}),default:t(()=>[a(p,null,{default:t(()=>{var s;return[r(n(((s=e.author)==null?void 0:s.username)||e.username),1)]}),_:2},1024),a(y,null,{default:t(()=>{var s;return[r(n(((s=e.author)==null?void 0:s.id)||e.creator_id),1)]}),_:2},1024)]),_:2},1024),e.actor_id?(o(),c(g,{key:0},{prepend:t(()=>[a(V,{image:`${this.scratch_proxy}/avatars/${e.actor_id}`},null,8,["image"])]),default:t(()=>[a(p,null,{default:t(()=>[r(n(e.actor_id),1)]),_:2},1024),a(y,null,{default:t(()=>l[0]||(l[0]=[r("将作品添加进工作室")])),_:1})]),_:2},1024)):_("",!0)]),_:2},1024)):_("",!0)]),_:2},1032,["to"])]),_:2},1024))),128))]),_:1}),l[2]||(l[2]=f("br",null,null,-1)),a(m,{title:d.title,subtitle:d.subtitle,border:"",hover:""},{default:t(()=>[a($,{active:u.loading,height:"4",indeterminate:""},null,8,["active"]),a(q,null,{default:t(()=>[a(N,{onClick:x.fetchProjects,disabled:!u.canLoad},{default:t(()=>l[1]||(l[1]=[r("继续加载")])),_:1},8,["onClick","disabled"])]),_:1})]),_:1},8,["title","subtitle"]),l[3]||(l[3]=f("br",null,null,-1)),l[4]||(l[4]=f("br",null,null,-1))])}const K=b(z,[["render",A]]);export{K as _};
