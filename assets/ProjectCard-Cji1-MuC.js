import{_ as p,bK as g,af as m,c2 as y,X as c,o as h,M as r,e as o,$ as b,Y as n,n as A,c3 as I,a_ as d,ae as f,L as s,T as u,b0 as _}from"./index-BDhe8qj9.js";const w={props:{project:{type:Object,required:!0},author:{type:Object,default:null},showAuthor:{type:Boolean,default:!0}},data(){return{loading:!1,error:null,getS3staticurl:y,localuser:m}},created(){this.initializeData()},watch:{project:{handler(){this.initializeData()},deep:!0},author:{handler(){this.initializeData()},deep:!0},showAuthor(){this.loadAuthorIfNeeded()}},methods:{initializeData(){this.project&&this.loadAuthorIfNeeded()},loadAuthorIfNeeded(){var e;this.showAuthor&&!this.author&&((e=this.project)!=null&&e.author)&&(this.author=this.project.author)},getProjectLink(){var e,a;return this.project?(e=this.project.author)!=null&&e.username&&this.project.name?`/${this.project.author.username}/${this.project.name}`:(a=this.project.author)!=null&&a.username?`/${this.project.author.username}/${this.project.id}`:"":""},async fetchProject(e){if(!this.loading){this.loading=!0;try{const a=await g([e]);a&&a.length>0&&(this.project=a[0],this.loadAuthorIfNeeded())}catch(a){console.error("Failed to fetch project:",a)}finally{this.loading=!1}}},async fetchAuthor(e){}}};function V(e,a,t,v,l,j){return h(),c(n,{class:"box-shadow",rounded:"lg"},{default:r(()=>[o(n,{to:j.getProjectLink(),rounded:"lg",style:{"aspect-ratio":"4/3"}},{default:r(()=>[o(A,{src:t.project?l.getS3staticurl(t.project.thumbnail):"",class:"align-end",cover:"",gradient:"to bottom, rgba(0,0,0,.1), rgba(0,0,0,.5)",height:"100%","lazy-src":I},{default:r(()=>[o(d,null,{default:r(()=>[o(f,null,{default:r(()=>{var i;return[s(u(((i=t.project)==null?void 0:i.title)||"加载中..."),1)]}),_:1}),o(_,null,{default:r(()=>{var i;return[s(u(((i=t.project)==null?void 0:i.description)||""),1)]}),_:1})]),_:1})]),_:1},8,["src"])]),_:1},8,["to"]),t.showAuthor&&t.author?(h(),c(d,{key:0,"append-avatar":t.author.avatar?l.localuser.getUserAvatar(t.author.avatar):""},{default:r(()=>[o(f,null,{default:r(()=>[s(u(t.author.display_name||t.author.username||"未知用户"),1)]),_:1}),o(_,null,{default:r(()=>[s(u(t.author.username||""),1)]),_:1})]),_:1},8,["append-avatar"])):b("",!0)]),_:1})}const x=p(w,[["render",V],["__scopeId","data-v-60ed42a7"]]);export{x as _};
