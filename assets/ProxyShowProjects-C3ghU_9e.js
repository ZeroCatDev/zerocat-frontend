import{_ as m,J as p,o as n,e as d,a as t,ah as _,w as a,R as g,S as V,c,P as y,O as x,ab as L,ac as b,L as r,T as o,ad as C,a2 as I,Q as k,U as w,a3 as v,a4 as B,a7 as P,K as u,M as $}from"./index-BYqNdXv5.js";import{_ as S}from"./43-lazyload-CBkwrR6M.js";import{a as N,V as T}from"./VRow-BuSSGV1N.js";const U={props:{url:{type:String,required:!0},showUserInfo:{type:Boolean,default:!1}},data(){return{projects:[],page:0,canLoad:!0,loading:!1,scratch_proxy:"https://scratch.192325.xyz",limit:40}},methods:{async fetchProjects(){this.loading=!0;try{const l=await p.get(`${this.scratch_proxy}${this.url}limit=${this.limit}&offset=${this.page*this.limit}`);l.data.length===0&&(this.canLoad=!1),this.projects=this.projects.concat(l.data),this.page+=1}catch(l){console.log(l)}finally{this.loading=!1}}},watch:{url:{handler(){this.projects=[],this.page=0,this.canLoad=!0,this.fetchProjects()},immediate:!0}},created(){this.fetchProjects()}};function j(l,e,h,z,i,f){return n(),d("div",null,[t(_,{active:i.loading,height:"4",indeterminate:""},null,8,["active"]),t(T,null,{default:a(()=>[(n(!0),d(g,null,V(i.projects,s=>(n(),c(N,{cols:"4",md:"2",key:s.id},{default:a(()=>[t(y,{to:"/app/proxy/"+s.id},{default:a(()=>[t(x,{src:`${i.scratch_proxy}/thumbnails/${s.id}`,cover:"","lazy-src":S},null,8,["src"]),t(L,null,{default:a(()=>[t(b,null,{default:a(()=>[r(o(s.title),1)]),_:2},1024),t(C,null,{default:a(()=>[r(o(s.description),1)]),_:2},1024)]),_:2},1024),h.showUserInfo?(n(),c(I,{key:0},{default:a(()=>[t(k,null,{prepend:a(()=>[t(w,{image:`${this.scratch_proxy}/avatars/${s.author.id}`},null,8,["image"])]),default:a(()=>[t(v,null,{default:a(()=>[r(o(s.author.username),1)]),_:2},1024),t(B,null,{default:a(()=>[r(o(s.author.id),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)):P("",!0)]),_:2},1032,["to"])]),_:2},1024))),128))]),_:1}),e[1]||(e[1]=u("br",null,null,-1)),t($,{onClick:f.fetchProjects,disabled:!i.canLoad},{default:a(()=>e[0]||(e[0]=[r("继续加载")])),_:1},8,["onClick","disabled"]),e[2]||(e[2]=u("br",null,null,-1)),e[3]||(e[3]=u("br",null,null,-1))])}const D=m(U,[["render",j]]);export{D as _};
