import{a as I,_ as F}from"./Comment-BFNIhNzO.js";import{_ as P}from"./NewProjectList-Dgq-IX7K.js";import{_ as L,H as f,J as p,o as n,e as m,a as t,w as o,R as h,S as B,Q as b,$ as J,L as r,T as a,a0 as K,a1 as M,M as y,G as O,c as j,P as g,a2 as S,a3 as T,a4 as D,K as d,U as A,O as N,a5 as x}from"./index-CobhglhN.js";import{V as Q}from"./VDialog-CKsQjyAE.js";import{P as R}from"./ProjectRunner-ChydDpKW.js";import{o as Z}from"./openEdit-AJJkPSPH.js";import{f as q}from"./project-CH45RD36.js";import{f as z}from"./user-B62HYk06.js";import{a as v,V as W}from"./VRow-DzeJdW44.js";import{V as u}from"./VChip-DqaqWhw6.js";import{V as X}from"./VContainer-DhaLVrOj.js";import"./VForm-BR3hLHji.js";import"./VTextarea-BZD3wT24.js";import"./VSpacer-DbhTzZpR.js";/* empty css              */const Y={components:{NewProjectList:P},name:"addtolist",data(){return{localuser:f,userinfo:f.user,newProjectListDialog:!1,projectLists:[]}},methods:{async getProjectList(){this.projectLists=(await p({url:"/projectlist/check?projectid="+this.$route.params.id,method:"get"})).data.data},async addProjectToList(i){await p({url:"/projectlist/add",data:{userid:this.userinfo.id,projectid:this.$route.params.id,listid:i},method:"post"}).then(s=>{this.$toast.add({severity:"info",summary:"info",detail:s.data.message,life:3e3}),this.getProjectList()})},async removeProjectFromList(i){await p({url:"/projectlist/remove",data:{projectid:this.$route.params.id,listid:i},method:"post"}).then(s=>{this.$toast.add({severity:"info",summary:"info",detail:s.data.message,life:3e3}),this.getProjectList()})}},mounted(){this.getProjectList()}};function $(i,s,V,w,e,c){const _=P;return n(),m(h,null,[t(M,null,{default:o(()=>[(n(!0),m(h,null,B(e.projectLists,l=>(n(),m("div",{key:l.id},[t(b,{"append-icon":l.include==!0?"mdi-minus-circle":"mdi-plus-circle",active:l.include==!0,color:"primary",onClick:k=>l.include==!0?c.removeProjectFromList(l.id):c.addProjectToList(l.id)},{default:o(()=>[t(J,null,{default:o(()=>[r(a(l.title),1)]),_:2},1024),t(K,null,{default:o(()=>[r(a(l.description),1)]),_:2},1024)]),_:2},1032,["append-icon","active","onClick"])]))),128)),t(b,{onClick:s[0]||(s[0]=l=>e.newProjectListDialog=!0)},{default:o(()=>s[2]||(s[2]=[r("新建列表")])),_:1})]),_:1}),t(Q,{modelValue:e.newProjectListDialog,"onUpdate:modelValue":s[1]||(s[1]=l=>e.newProjectListDialog=l)},{default:o(()=>[t(_,{listid:i.editlistid,close:()=>e.newProjectListDialog=!1,callback:c.getProjectList},null,8,["listid","close","callback"])]),_:1},8,["modelValue"])],64)}const E=L(Y,[["render",$]]),tt={components:{NewProjectList:P},name:"addtolist",data(){return{localuser:f,userinfo:f.user,newProjectListDialog:!1,projectLists:"",star:!1}},methods:{getStarStatus(){p({url:`/projectlist/checkstar?projectid=${this.$route.params.id}`,method:"get"}).then(i=>{this.star=i.data.star})},ToggleStarProject(){this.star==0?p({url:"/projectlist/star",method:"post",data:{projectid:this.$route.params.id}}).then(i=>{this.star=i.data.star}):p({url:"/projectlist/unstar",method:"post",data:{projectid:this.$route.params.id}}).then(i=>{this.star=i.data.star})}},mounted(){this.getStarStatus()}};function et(i,s,V,w,e,c){return n(),m(h,null,[t(y,{onClick:s[0]||(s[0]=_=>c.ToggleStarProject()),color:e.star?"yellow":"","prepend-icon":"mdi-star",variant:"tonal"},{default:o(()=>s[1]||(s[1]=[r("Star")])),_:1},8,["color"]),r(a(e.projectLists),1)],64)}const U=L(tt,[["render",et]]),ot={components:{ProjectRunner:R,TimeAgo:I,Comment:F,AddTolist:E,ProjectStar:U},data(){return{projectid:this.$route.params.id,project:{id:1,authorid:1,time:"2000-01-01T00:00:00.000Z",view_count:0,like_count:0,type:"text",favo_count:0,title:"",state:"public",description:"",license:"",tags:"",likeid:"",favoid:""},author:{id:1,display_name:"",motto:"",images:""},communityinfo:{stars:""},openEditor:Z,localuser:f}},async mounted(){await this.refreshProject(),this.fetchProjectAndAuthorDetails()},methods:{async fetchProjectAndAuthorDetails(){const i=Number(this.$route.params.id),s=await q(i);this.project=s,O({title:this.project.title}),this.author=await z(this.project.authorid)}}},st={class:"px-4 d-flex ga-2 mb-2"},rt={class:"px-4 d-flex ga-2 mb-2"},it={class:"px-4 d-flex ga-2 mb-2"},lt={class:"px-4 d-flex ga-2 mb-2"},at={class:"px-4 d-flex ga-2 mb-2"},nt={class:"px-4"};function dt(i,s,V,w,e,c){const _=R,l=I,k=U,H=E,G=F;return n(),j(X,null,{default:o(()=>[t(W,null,{default:o(()=>[t(v,{xs:"12",sm:"12",md:"8",lg:"8",xl:"8",xxl:"8",cols:"12"},{default:o(()=>[t(_,{type:e.project.type,id:e.project.id},null,8,["type","id"])]),_:1}),t(v,{xs:"12",sm:"12",md:"4",lg:"4",xl:"4",xxl:"8",cols:"12"},{default:o(()=>[t(g,{hover:"",border:""},{default:o(()=>[t(S,null,{default:o(()=>[t(T,null,{default:o(()=>[r(a(e.project.title),1)]),_:1}),t(D,null,{default:o(()=>[r(a(e.project.description),1)]),_:1})]),_:1}),d("div",st,[t(u,{pill:""},{default:o(()=>[t(A,{start:""},{default:o(()=>[t(N,{src:"https://s4-1.wuyuan.1r.ink/user/"+e.author.images},null,8,["src"])]),_:1}),r(a(e.author.display_name),1)]),_:1})]),d("div",rt,[t(u,{pill:"","prepend-icon":"mdi-eye"},{default:o(()=>[r(a(e.project.view_count)+"浏览",1)]),_:1}),t(u,{pill:"","prepend-icon":"mdi-star"},{default:o(()=>[r(a(e.communityinfo.stars)+" Star",1)]),_:1}),t(u,{pill:"","prepend-icon":"mdi-clock"},{default:o(()=>[t(l,{date:e.project.time},null,8,["date"])]),_:1})]),d("div",it,[e.project.state=="public"?(n(),j(u,{key:0,pill:"","prepend-icon":"mdi-xml"},{default:o(()=>s[1]||(s[1]=[r("开源作品")])),_:1})):x("",!0),e.project.state=="private"?(n(),j(u,{key:1,pill:"","prepend-icon":"mdi-xml"},{default:o(()=>s[2]||(s[2]=[r("私密作品")])),_:1})):x("",!0),t(u,{pill:"","prepend-icon":"mdi-application"},{default:o(()=>[r(a(e.project.type),1)]),_:1})]),d("div",lt,[(n(!0),m(h,null,B(e.project.tags,C=>(n(),m("div",null,[t(u,null,{default:o(()=>[r(a(C.name),1)]),_:2},1024)]))),256))]),d("div",at,[t(k),t(y,{onClick:s[0]||(s[0]=C=>e.openEditor(e.project.id,e.project.type)),variant:"text"},{default:o(()=>s[3]||(s[3]=[r("打开创造页")])),_:1}),e.project.authorid!=e.localuser.user.id?(n(),j(y,{key:0,to:`${e.project.authorid}/${e.projectid}/fork`,variant:"text"},{default:o(()=>s[4]||(s[4]=[r("改编")])),_:1},8,["to"])):x("",!0)]),d("div",nt,[t(g,{hover:"",to:"/"+e.author.username,border:""},{default:o(()=>[t(S,null,{prepend:o(()=>[t(A,null,{default:o(()=>[t(N,{alt:e.author.display_name,src:"https://s4-1.wuyuan.1r.ink/user/"+e.author.images},null,8,["alt","src"])]),_:1})]),default:o(()=>[t(T,{class:"text-white"},{default:o(()=>[r(a(e.author.display_name),1)]),_:1}),t(D,{class:"text-white"},{default:o(()=>[r(a(e.author.motto),1)]),_:1})]),_:1})]),_:1},8,["to"])]),s[5]||(s[5]=d("br",null,null,-1))]),_:1}),s[6]||(s[6]=d("br",null,null,-1)),t(g,{hover:"",border:""},{default:o(()=>[t(H)]),_:1})]),_:1}),t(v,{xxl:"8",xl:"8",lg:"8",md:"8",sm:"12",xs:"12",cols:"12"},{default:o(()=>[t(G,{url:"project-"+i.$route.params.id,name:"项目"},null,8,["url"])]),_:1})]),_:1})]),_:1})}const wt=L(ot,[["render",dt]]);export{wt as default};
