import{_ as m,a as f}from"./Recaptcha-C-3XXlEe.js";import{_ as x,H as n,I as w,G as y,r as v,o as V,e as R,K as u,a as e,w as s,a5 as d,M as i,P as C,R as k}from"./index-Br6O0dGK.js";import{l as b}from"./userService-DVfi8XE_.js";import{V as c,a as o}from"./VRow-lRcUnfcN.js";import{V as z}from"./VForm-896biCxD.js";import"./VDialog-Buu13Vo0.js";import"https://static.geetest.com/v4/gt4.js";/* empty css              */const B={components:{LoadingDialog:m,Recaptcha:f},data(){return{BASE_API:"https://zerocat-api.houlangs.com",username:"",password:"",tryinguser:{},loading:!1,localuser:n,show1:w(!1),emailRules:[r=>r?!0:"必须填写邮箱",r=>/.+@.+\..+/.test(r)?!0:"不符合格式"],usernameRules:[r=>r?!0:"必须填写用户名"]}},created(){n.islogin.value==!0&&this.$router.push("/")},setup(){y({title:"登录"})},methods:{async login(){this.loading=!0;try{const r=await b({captcha:this.$refs.recaptcha.getResponse(),un:this.username,pw:this.password});this.tryinguser=r.data,this.tryinguser.message=="error"?this.$toast.add({severity:"info",summary:"info",detail:this.tryinguser.message,life:3e3}):(n.setuser(this.tryinguser.token),n.islogin.value&&this.$router.push("/"))}catch(r){this.$toast.add({severity:"error",summary:"错误",detail:r.message,life:3e3})}finally{this.loading=!1}}}},F={class:"auth-wrapper d-flex align-center justify-center pa-4"};function I(r,a,N,U,t,h){const p=v("v-cardtext"),g=f,_=m;return V(),R(k,null,[u("div",F,[e(C,{class:"auth-card pa-4 pt-7","max-width":"448",border:""},{default:s(()=>[e(c,null,{default:s(()=>[e(o,{cols:"12"},{default:s(()=>[e(p,null,{default:s(()=>a[3]||(a[3]=[u("h5",{class:"text-h5 font-weight-semibold mb-1"}," 欢迎来到ZeroCatNext！ 👋🏻 ",-1),u("p",{class:"mb-0"},"登录你的账户",-1)])),_:1})]),_:1})]),_:1}),e(p,null,{default:s(()=>[e(z,null,{default:s(()=>[e(c,null,{default:s(()=>[e(o,{cols:"12"},{default:s(()=>[e(d,{label:"邮箱",type:"text",modelValue:t.username,"onUpdate:modelValue":a[0]||(a[0]=l=>t.username=l),variant:"outlined",rules:t.emailRules},null,8,["modelValue","rules"]),e(d,{label:"密码",modelValue:t.password,"onUpdate:modelValue":a[1]||(a[1]=l=>t.password=l),variant:"outlined",rules:t.usernameRules,"append-icon":t.show1?"mdi-eye":"mdi-eye-off",type:t.show1?"text":"password","onClick:append":a[2]||(a[2]=l=>t.show1=!t.show1)},null,8,["modelValue","rules","append-icon","type"])]),_:1}),e(o,{cols:"9"},{default:s(()=>[e(g,{ref:"recaptcha",recaptchaId:"recaptcha-div"},null,512)]),_:1}),e(o,{cols:"12"},{default:s(()=>[e(i,{class:"text-none",color:"primary",rounded:"xl",text:"登录",variant:"flat",size:"large",onClick:h.login,"append-icon":"mdi-arrow-right"},null,8,["onClick"])]),_:1}),e(o,{cols:"12"},{default:s(()=>[e(i,{class:"text-none",color:"white",rounded:"xl",text:"注册",variant:"text",size:"large","append-icon":"mdi-arrow-right",to:"/app/account/register"}),e(i,{class:"text-none",color:"white",rounded:"xl",text:"邮箱验证登录",variant:"text",size:"large","append-icon":"mdi-arrow-right",to:"/app/account/magiclink"}),e(i,{class:"text-none",color:"white",rounded:"xl",text:"找回密码",variant:"text",size:"large","append-icon":"mdi-arrow-right",to:"/app/account/retrieve"})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),e(_,{show:t.loading,text:"登录中"},null,8,["show"])],64)}const K=x(B,[["render",I]]);export{K as default};
