import{_ as S,Z as x,o as k,N as l,e as s,R as V,S as g,X as u,aY as d,ae as p,L as r,a_ as f,P as o,a8 as n,f as a,Y as m,aI as _,i as h,aF as y,U as v,a6 as D,b9 as C,M}from"./index-BhZBrlGg.js";import{V as A}from"./VSelect-CWcWmsqs.js";import"https://static.geetest.com/v4/gt4.js";import"./VCheckboxBtn-jKGzOvSv.js";import"./VSelectionControl-Cdx4dl39.js";const G={setup(){M({title:"Scratch桌面版镜像"})},data(){return{release:{stat:0,url:{windows:"",macos:"",windows_link:"",macos_link:""},date:"一周以内",scratch_version:"未知",scratch_link_version:"未知"},download_source:{state:"ghproxy",abbr:"mirror.ghproxy.com/https://github.com"},download_source_list:[{state:"Github",abbr:"github.com"},{state:"gh.api.99988866.xyz",abbr:"gh.api.99988866.xyz/https://github.com"},{state:"ghproxy",abbr:"mirror.ghproxy.com/https://github.com"},{state:"自定义",abbr:""}],loading:!1,scratch_proxy:""}},async mounted(){this.scratch_proxy=C("scratchproxy.url"),this.loading=!0,this.release.stat=0,this.fetchReleaseData(this.scratch_proxy+"/asdm").catch(()=>this.fetchReleaseData("https://api.github.com/repos/sunwuyuan/AutoScratchDesktopMirror/releases/latest")).finally(()=>this.loading=!1)},methods:{async fetchReleaseData(b){try{const t=await D.get(b);this.release.stat=1,this.release.url.windows=this.extractDownloadUrl(t.data.assets,"scratch-win.exe"),this.release.url.macos=this.extractDownloadUrl(t.data.assets,"scratch-mac.dmg"),this.release.url.windows_link=this.extractDownloadUrl(t.data.assets,"scratch-link-win.zip"),this.release.url.macos_link=this.extractDownloadUrl(t.data.assets,"scratch-link-mac.zip"),this.release.date=new Date(t.data.published_at).toLocaleString();const i=JSON.parse(t.data.body).scratch_version.split("-");this.release.scratch_version=i[0],this.release.scratch_link_version=i[1]}catch(t){console.log(t),this.release.stat=t.response?t.response.status:0}},extractDownloadUrl(b,t){const i=b.find(c=>c.name===t);return i?i.browser_download_url.replace("https://github.com",""):""}}},j={class:"mt-2 font-weight-bold"},H={class:"mt-2 font-weight-bold"};function U(b,t,i,c,e,L){return k(),x(v,null,{default:l(()=>[s(V,null,{default:l(()=>[s(g,{cols:"12",md:"6"},{default:l(()=>[s(u,{border:"",hover:""},{default:l(()=>[s(d,null,{prepend:l(()=>[s(o,{icon:"mdi-download-box"})]),default:l(()=>[s(p,null,{default:l(()=>t[2]||(t[2]=[r("Auto Scratch-Desktop Mirror",-1)])),_:1,__:[2]}),s(f,null,{default:l(()=>t[3]||(t[3]=[r("Scratch桌面版镜像",-1)])),_:1,__:[3]})]),_:1}),s(n,{class:"bg-surface-light pt-4"},{default:l(()=>t[4]||(t[4]=[r(" Auto Scratch-Desktop Mirror 是一个基于 GitHub Action 的开源镜像项目，它会每周自动从 Scratch 官方网站下载最新的 Scratch 3.0 安装包并上传至 GitHub Release 提供给用户以供下载。 ",-1)])),_:1,__:[4]})]),_:1}),s(u,{border:"",class:"mt-7",hover:""},{default:l(()=>[s(d,null,{prepend:l(()=>[s(o,{icon:"mdi-heart"})]),default:l(()=>[s(p,null,{default:l(()=>t[5]||(t[5]=[r("感谢ASDM的开发者们",-1)])),_:1,__:[5]}),s(f,null,{default:l(()=>t[6]||(t[6]=[r("以下附 ASDM 的原始声明 ",-1)])),_:1,__:[6]})]),_:1}),s(n,{class:"bg-surface-light pt-4"},{default:l(()=>t[7]||(t[7]=[r(" Auto Scratch Desktop Mirror 是一个 Scratch 桌面版的开源下载镜像项目。我们通过 Github Workflow 自动下载 Scratch 官网的 Scratch 桌面版程序，并透过 CDN 或 Github Pages 提供，以方便中国大陆地区的用户下载。 ",-1),a("p",{class:"font-weight-light mt-2 text-caption"},[r(" 项目开源于 "),a("a",{href:"https://github.com/scratch-bar/asdm"},"GitHub"),r("，本版本由 waterblock79 开发。 "),a("br"),r(" 感谢: Scratch Team, GitHub, Vue.js, Vuetify.js 以及所有为这个项目添砖加瓦的人们! ")],-1)])),_:1,__:[7]}),s(n,null,{default:l(()=>t[8]||(t[8]=[r("此版本开源于 ",-1),a("a",{href:"https://github.com/sunwuyuan/AutoScratchDesktopMirror"},"GitHub",-1),a("br",null,null,-1),r(" 任何问题欢迎加QQ群沟通 964979747",-1),a("br",null,null,-1),a("p",{class:"font-weight-light mt-2 text-caption"},[r(" 此站点目前由 "),a("a",{href:"https://wuyuan.dev"},"孙悟元"),r("("),a("a",{href:"https://zerocat.wuyuan.dev"},"ZeroCat社区"),r(") 维护。"),a("br"),r(" 感谢: Scratch Team, GitHub, Vue.js, Vuetify.js, scratch-bar, waterblock79 , wrj2009 以及所有为这个项目添砖加瓦的人们! ")],-1)])),_:1,__:[8]})]),_:1})]),_:1}),s(g,{cols:"12",md:"6"},{default:l(()=>[s(u,{loading:e.loading,border:"",hover:""},{default:l(()=>[s(d,null,{prepend:l(()=>[s(o,{icon:"mdi-download"})]),default:l(()=>[s(p,{class:"font-weight-black"},{default:l(()=>t[9]||(t[9]=[r("下载 Scratch 3.0 ",-1)])),_:1,__:[9]}),s(f,null,{default:l(()=>t[10]||(t[10]=[r("公益Scratch桌面版镜像",-1)])),_:1,__:[10]})]),_:1}),s(n,{class:"bg-surface-light pt-4"},{default:l(()=>[t[11]||(t[11]=r(" 未正确加载下载地址？您可以尝试在应用商店中下载 ",-1)),t[12]||(t[12]=a("a",{class:"on-surface",href:"https://apps.apple.com/cn/app/scratch-desktop/id1446785996?mt=12"},"Mac OS 版本",-1)),t[13]||(t[13]=r(" 和 ",-1)),t[14]||(t[14]=a("a",{class:"on-surface",href:"https://www.microsoft.com/zh-cn/p/scratch-3/9pfgj25jl6x3"},"Windows 10 以上版本",-1)),t[15]||(t[15]=r(" 的 Scratch 桌面版。 ",-1)),a("p",j," 该版本镜像于 "+m(e.release.date)+"，Scratch 版本为 "+m(e.release.scratch_version)+"。 ",1)]),_:1,__:[11,12,13,14,15]}),s(_,null,{default:l(()=>[s(h,{disabled:e.release.stat==0,href:`https://${e.download_source.abbr}${e.release.url.windows}`,variant:"tonal"},{default:l(()=>[s(o,{icon:"mdi-microsoft-windows",right:""}),t[16]||(t[16]=r(" Windows 下载 ",-1))]),_:1,__:[16]},8,["disabled","href"]),s(h,{disabled:e.release.stat==0,href:`https://${e.download_source.abbr}${e.release.url.macos}`,variant:"tonal"},{default:l(()=>[s(o,{icon:"mdi-apple",right:""}),t[17]||(t[17]=r(" MacOS 下载 ",-1))]),_:1,__:[17]},8,["disabled","href"])]),_:1})]),_:1},8,["loading"]),s(u,{loading:e.loading,border:"",class:"mt-7",hover:""},{default:l(()=>[s(d,null,{prepend:l(()=>[s(o,{icon:"mdi-download"})]),default:l(()=>[s(p,{class:"font-weight-black"},{default:l(()=>t[18]||(t[18]=[r("下载 Scratch Link ",-1)])),_:1,__:[18]}),s(f,null,{default:l(()=>t[19]||(t[19]=[r("公益ScratchLink镜像",-1)])),_:1,__:[19]})]),_:1}),s(n,{class:"bg-surface-light pt-4"},{default:l(()=>[t[20]||(t[20]=r(" 未正确加载下载地址？您可以尝试在应用商店中下载 ",-1)),t[21]||(t[21]=a("a",{class:"on-surface",href:"https://itunes.apple.com/us/app/scratch-link/id1408863490"},"Mac OS 版本",-1)),t[22]||(t[22]=r(" 和 ",-1)),t[23]||(t[23]=a("a",{class:"on-surface",href:"https://www.microsoft.com/store/productId/9N48XLLCZH0X"},"Windows 10 以上版本",-1)),t[24]||(t[24]=r(" 的 Scratch 桌面版。 ",-1)),a("p",H," 该版本镜像于 "+m(e.release.date)+"，ScratchLink版本为 "+m(e.release.scratch_link_version)+"。 ",1)]),_:1,__:[20,21,22,23,24]}),s(_,null,{default:l(()=>[s(h,{disabled:e.release.stat==0,href:`https://${e.download_source.abbr}${e.release.url.windows_link}`,variant:"tonal"},{default:l(()=>[s(o,{icon:"mdi-microsoft-windows",right:""}),t[25]||(t[25]=r(" Windows 下载 ",-1))]),_:1,__:[25]},8,["disabled","href"]),s(h,{disabled:e.release.stat==0,href:`https://${e.download_source.abbr}${e.release.url.macos_link}`,variant:"tonal"},{default:l(()=>[s(o,{icon:"mdi-apple",right:""}),t[26]||(t[26]=r(" MacOS 下载 ",-1))]),_:1,__:[26]},8,["disabled","href"])]),_:1})]),_:1},8,["loading"]),s(u,{border:"",class:"mt-7",hover:""},{default:l(()=>[s(d,null,{prepend:l(()=>[s(o,{icon:"mdi-server"})]),default:l(()=>[s(p,{class:"font-weight-black"},{default:l(()=>t[27]||(t[27]=[r("设置下载源",-1)])),_:1,__:[27]}),s(f,null,{default:l(()=>t[28]||(t[28]=[r("如无法下载请检查此处",-1)])),_:1,__:[28]})]),_:1}),s(n,null,{default:l(()=>[t[29]||(t[29]=r(" 默认使用 ",-1)),t[30]||(t[30]=a("b",null,[a("a",{class:"on-surface",href:"https://mirror.ghproxy.com/"},"ghproxy")],-1)),t[31]||(t[31]=r(" 镜像源",-1)),t[32]||(t[32]=a("br",null,null,-1)),t[33]||(t[33]=r(" 通常情况下您",-1)),t[34]||(t[34]=a("b",null,"不需要更改下载源",-1)),t[35]||(t[35]=r("，但如果默认下载源不可用，您可以更改为另外一个，或者自定义下载源。 ",-1)),t[36]||(t[36]=a("br",null,null,-1)),t[37]||(t[37]=a("br",null,null,-1)),s(A,{modelValue:e.download_source,"onUpdate:modelValue":t[0]||(t[0]=w=>e.download_source=w),hint:`${e.download_source.state}, ${e.download_source.abbr}`,items:e.download_source_list,"item-title":"state","item-value":"abbr",label:"Select","persistent-hint":"","return-object":"","single-line":""},null,8,["modelValue","hint","items"]),t[38]||(t[38]=a("br",null,null,-1)),s(y,{modelValue:e.download_source.abbr,"onUpdate:modelValue":t[1]||(t[1]=w=>e.download_source.abbr=w),label:"可直接编辑"},null,8,["modelValue"])]),_:1,__:[29,30,31,32,33,34,35,36,37,38]})]),_:1})]),_:1})]),_:1})]),_:1})}const O=S(G,[["render",U]]);export{O as default};
