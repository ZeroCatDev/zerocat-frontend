import{_ as g,r as c,b as x,c as r,o as s,Y as u,$ as k,N as m,f as w,X as v,a0 as C,e as A,j as B,F as P,U as V,L as b,C as L,i as S,a1 as N}from"./index-CqDYMkg5.js";import{o as n}from"./oauth_providers-BTwCArWd.js";import{A as D}from"./authService-w9KrMMhD.js";const F={class:"text-body-2 text-medium-emphasis"},O={key:1,class:"d-flex justify-center my-4"},j={key:2,class:"d-flex flex-wrap gap-2 justify-start mt-4"},T={__name:"OAuthButtons",props:{mode:{type:String,default:"login",validator:o=>["login","register"].includes(o)},showDivider:{type:Boolean,default:!0},dividerText:{type:String,default:"或使用以下方式登录/注册"}},setup(o){const y=o,d=c([]),i=c(!0),l=c(null),f=e=>{const t=n[e.toLowerCase()];return(t==null?void 0:t.style)||n.default.style},h=e=>{const t=n[e.toLowerCase()];return(t==null?void 0:t.icon)||n.default.icon},p=async()=>{i.value=!0;try{const e=await N.get("/account/oauth/providers");e.data.status==="success"&&(d.value=e.data.data)}catch(e){console.error("Failed to fetch available OAuth providers:",e)}finally{i.value=!1}},_=async e=>{l.value=e;try{window.location.href=D.oauthRedirect(e,y.mode==="register")}catch(t){console.error("Failed to redirect to OAuth provider:",t),l.value=null}};return x(()=>{p()}),(e,t)=>(s(),r("div",null,[o.showDivider?(s(),u(C,{key:0,class:"my-4"},{default:m(()=>[w("span",F,v(o.dividerText),1)]),_:1})):k("",!0),i.value?(s(),r("div",O,[A(B,{indeterminate:"",color:"primary"})])):(s(),r("div",j,[(s(!0),r(P,null,V(d.value,a=>(s(),u(S,{key:a.id,onClick:I=>_(a.id),style:L(f(a.id)),"prepend-icon":h(a.id),variant:"flat",class:"text-none mr-1 mb-1",loading:l.value===a.id},{default:m(()=>[b(v(a.name),1)]),_:2},1032,["onClick","style","prepend-icon","loading"]))),128))]))]))}},M=g(T,[["__scopeId","data-v-d20355d8"]]);export{M as _};
