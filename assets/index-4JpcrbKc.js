import{_ as re,a as de}from"./UserFollowers-CQ48RLPu.js";import{_ as ce,a as ue,b as me}from"./Comment-CYjh0UqH.js";import{g as ke}from"./projectListService-CvcY-ji7.js";import{_ as N,a as y,o as r,T as p,N as i,h as t,Y as k,Z as Te,R as x,F as T,K as u,Q as I,X as L,j as F,M as o,S as n,b as R,p as M,$ as Ve,a0 as oe,a1 as b,a2 as Se,a3 as Pe,f as A,O as j,i as De,a4 as _e,G as fe,a5 as pe,J as q,I as he,a6 as Ie,B as ze,r as Le,w as Ue,l as z,E as ye,a7 as Be,x as Ee,a8 as Fe,a9 as Ne,aa as Re,y as ae,D as Me,H as Ae,ab as qe,ac as Oe,ad as $e,ae as V,af as Ke,U as ne,q as We,W as B,L as Ze,ag as He}from"./index-BxEavA_P.js";import{V as Ge}from"./VAlert-CsrWXBjI.js";import{a as S,V as U}from"./VRow-Cn2wrwA_.js";import{_ as Je}from"./Projects-TffEQXJy.js";import{_ as ge}from"./github-markdown-J7tJNUCk.js";import{g as Qe}from"./user-CEpNNJ7L.js";import{V as v}from"./VChip-D-oyIJaW.js";import{V as E}from"./VContainer-DTlUtd82.js";import"./VSnackbar-BFgf620T.js";import"./VForm-CgnNGVZG.js";import"./VInput-DpFKJkus.js";import"./VTextarea-B2pAyYqR.js";/* empty css                   */import"./VDialog-DZE4_IwT.js";/* empty css              */import"./ProjectCard-DUIeAIFr.js";import"./projectService-BzWp-imt.js";import"./43-lazyload-CBkwrR6M.js";import"./VPagination-CaM4oBXx.js";import"./VSpacer-DlIrFA2m.js";const Xe={name:"UserProjectLists",props:{userId:{type:[Number,String],required:!0},projectLists:{type:Array,default:()=>[]}},data(){return{loading:!1,localLists:[]}},computed:{lists(){return this.projectLists.length>0?this.projectLists:this.localLists}},watch:{userId:{immediate:!0,handler(e){e&&this.projectLists.length===0&&this.fetchUserLists()}}},methods:{async fetchUserLists(){this.loading=!0;try{const e=await ke(this.userId);e.status==="success"?this.localLists=e.data||[]:console.error("获取用户列表失败:",e.message)}catch(e){console.error("获取用户列表失败:",e)}finally{this.loading=!1}}}};function Ye(e,s,m,C,a,_){return r(),y("div",null,[a.loading?(r(),p(x,{key:0,class:"mb-4"},{default:i(()=>[t(k,{class:"text-center"},{default:i(()=>[t(Te,{indeterminate:"",color:"primary"})]),_:1})]),_:1})):(r(),y(T,{key:1},[_.lists.length===0?(r(),p(x,{key:0,class:"mb-4"},{default:i(()=>[t(k,{class:"text-center"},{default:i(()=>[t(Ge,{type:"info",variant:"tonal"},{default:i(()=>s[0]||(s[0]=[u(" 该用户暂无公开项目列表 ")])),_:1})]),_:1})]),_:1})):(r(),p(U,{key:1},{default:i(()=>[(r(!0),y(T,null,I(_.lists,f=>(r(),p(S,{cols:"12",xs:"12",sm:"6",md:"4",lg:"3",xl:"2",xxl:"2",key:f.id},{default:i(()=>[t(x,{rounded:"lg"},{default:i(()=>[t(x,{to:"/app/projectlist/"+f.id,rounded:"lg",title:f.title,subtitle:f.description,variant:"tonal"},null,8,["to","title","subtitle"])]),_:2},1024)]),_:2},1024))),128))]),_:1}))],64))])}const ve=N(Xe,[["render",Ye]]),et={name:"FollowStats",props:{userId:{type:Number,required:!0},username:{type:String,required:!0}},data(){return{followersCount:0,followingCount:0,loading:!1}},mounted(){this.fetchFollowStats()},watch:{userId:{handler(){this.fetchFollowStats()}}},methods:{async fetchFollowStats(){try{this.loading=!0;const e=await L.get(`/follows/followers/${this.userId}`,{params:{limit:1,offset:0}});e.data.success&&(this.followersCount=e.data.data.total);const s=await L.get(`/follows/following/${this.userId}`,{params:{limit:1,offset:0}});s.data.success&&(this.followingCount=s.data.data.total)}catch(e){console.error("获取关注统计失败:",e)}finally{this.loading=!1}}}},tt={class:"font-weight-bold"},st={class:"font-weight-bold"};function it(e,s,m,C,a,_){return r(),p(U,{class:"follow-stats"},{default:i(()=>[t(S,null,{default:i(()=>[t(F,{variant:"text",to:`/${m.username}/followers`,class:"stats-btn"},{default:i(()=>[o("span",tt,n(a.followersCount),1),s[0]||(s[0]=o("span",{class:"text-body-2 text-medium-emphasis"},"关注者",-1))]),_:1},8,["to"])]),_:1}),t(S,null,{default:i(()=>[t(F,{variant:"text",to:`/${m.username}/following`,class:"stats-btn"},{default:i(()=>[o("span",st,n(a.followingCount),1),s[1]||(s[1]=o("span",{class:"text-body-2 text-medium-emphasis"},"正在关注",-1))]),_:1},8,["to"])]),_:1})]),_:1})}const be=N(et,[["render",it],["__scopeId","data-v-2500ed2b"]]),lt=M({dotColor:String,fillDot:Boolean,hideDot:Boolean,icon:he,iconColor:String,lineColor:String,...q(),...pe(),...fe(),..._e()},"VTimelineDivider"),ot=R()({name:"VTimelineDivider",props:lt(),setup(e,s){let{slots:m}=s;const{sizeClasses:C,sizeStyles:a}=Ve(e,"v-timeline-divider__dot"),{backgroundColorStyles:_,backgroundColorClasses:f}=oe(b(e,"dotColor")),{roundedClasses:g}=Se(e,"v-timeline-divider__dot"),{elevationClasses:w}=Pe(e),{backgroundColorClasses:P,backgroundColorStyles:D}=oe(b(e,"lineColor"));return A(()=>t("div",{class:["v-timeline-divider",{"v-timeline-divider--fill-dot":e.fillDot},e.class],style:e.style},[t("div",{class:["v-timeline-divider__before",P.value],style:D.value},null),!e.hideDot&&t("div",{key:"dot",class:["v-timeline-divider__dot",w.value,g.value,C.value],style:a.value},[t("div",{class:["v-timeline-divider__inner-dot",f.value,g.value],style:_.value},[m.default?t(De,{key:"icon-defaults",disabled:!e.icon,defaults:{VIcon:{color:e.iconColor,icon:e.icon,size:e.size}}},m.default):t(j,{key:"icon",color:e.iconColor,icon:e.icon,size:e.size},null)])]),t("div",{class:["v-timeline-divider__after",P.value],style:D.value},null)])),{}}}),xe=M({density:String,dotColor:String,fillDot:Boolean,hideDot:Boolean,hideOpposite:{type:Boolean,default:void 0},icon:he,iconColor:String,lineInset:[Number,String],side:{type:String,validator:e=>e==null||["start","end"].includes(e)},...q(),...Be(),..._e(),...pe(),...fe(),...ye()},"VTimelineItem"),at=R()({name:"VTimelineItem",props:xe(),setup(e,s){let{slots:m}=s;const{dimensionStyles:C}=Ie(e),a=ze(0),_=Le();return Ue(_,f=>{var g;f&&(a.value=((g=f.$el.querySelector(".v-timeline-divider__dot"))==null?void 0:g.getBoundingClientRect().width)??0)},{flush:"post"}),A(()=>{var f,g;return t("div",{class:["v-timeline-item",{"v-timeline-item--fill-dot":e.fillDot,"v-timeline-item--side-start":e.side==="start","v-timeline-item--side-end":e.side==="end"},e.class],style:[{"--v-timeline-dot-size":z(a.value),"--v-timeline-line-inset":e.lineInset?`calc(var(--v-timeline-dot-size) / 2 + ${z(e.lineInset)})`:z(0)},e.style]},[t("div",{class:"v-timeline-item__body",style:C.value},[(f=m.default)==null?void 0:f.call(m)]),t(ot,{ref:_,hideDot:e.hideDot,icon:e.icon,iconColor:e.iconColor,size:e.size,elevation:e.elevation,dotColor:e.dotColor,fillDot:e.fillDot,rounded:e.rounded},{default:m.icon}),e.density!=="compact"&&t("div",{class:"v-timeline-item__opposite"},[!e.hideOpposite&&((g=m.opposite)==null?void 0:g.call(m))])])}),{}}}),nt=M({align:{type:String,default:"center",validator:e=>["center","start"].includes(e)},direction:{type:String,default:"vertical",validator:e=>["vertical","horizontal"].includes(e)},justify:{type:String,default:"auto",validator:e=>["auto","center"].includes(e)},side:{type:String,validator:e=>e==null||["start","end"].includes(e)},lineThickness:{type:[String,Number],default:2},lineColor:String,truncateLine:{type:String,validator:e=>["start","end","both"].includes(e)},...qe(xe({lineInset:0}),["dotColor","fillDot","hideOpposite","iconColor","lineInset","size"]),...q(),...Ae(),...ye(),...Me()},"VTimeline"),rt=R()({name:"VTimeline",props:nt(),setup(e,s){let{slots:m}=s;const{themeClasses:C}=Ee(e),{densityClasses:a}=Fe(e),{rtlClasses:_}=Ne();Re({VTimelineDivider:{lineColor:b(e,"lineColor")},VTimelineItem:{density:b(e,"density"),dotColor:b(e,"dotColor"),fillDot:b(e,"fillDot"),hideOpposite:b(e,"hideOpposite"),iconColor:b(e,"iconColor"),lineColor:b(e,"lineColor"),lineInset:b(e,"lineInset"),size:b(e,"size")}});const f=ae(()=>{const w=e.side?e.side:e.density!=="default"?"end":null;return w&&`v-timeline--side-${w}`}),g=ae(()=>{const w=["v-timeline--truncate-line-start","v-timeline--truncate-line-end"];switch(e.truncateLine){case"both":return w;case"start":return w[0];case"end":return w[1];default:return null}});return A(()=>t(e.tag,{class:["v-timeline",`v-timeline--${e.direction}`,`v-timeline--align-${e.align}`,`v-timeline--justify-${e.justify}`,g.value,{"v-timeline--inset-line":!!e.lineInset},C.value,a.value,f.value,_.value,e.class],style:[{"--v-timeline-line-thickness":z(e.lineThickness)},e.style]},m)),{}}}),dt={components:{Comment:me,Markdown:ue,TimeAgo:ce,UserProjectLists:ve,UserRelationControls:ge,FollowStats:be,UserFollowers:de,UserFollowing:re},data(){return{username:this.$route.params.username,user:{},lists:[],url:"",tab:this.$route.query.tab||"home",timeline:{events:[],pagination:{current:1,size:20,total:0}},currentPage:1,isLoadingMore:!1,pageSize:20,localuser:He,eventTypes:{project_create:{text:"创建了新项目",label:"新建",color:"success",isProject:!0},project_publish:{text:"更新了项目",label:"更新",color:"info",isProject:!0},project_fork:{text:"复刻了项目",label:"复刻",color:"warning",isProject:!0},project_delete:{text:"删除了项目",label:"删除",color:"error",isProject:!0},user_profile_update:{text:"更新了个人资料",label:"更新",color:"info"},user_register:{text:"加入了 ZeroCat",label:"注册",color:"primary"},project_commit:{text:"提交了项目更新",label:"提交",color:"info",isProject:!0},project_rename:{text:"重命名了项目",label:"重命名",color:"warning",isProject:!0},project_info_update:{text:"更新了项目信息",label:"更新信息",color:"info",isProject:!0}},fieldDisplayNames:{display_name:"昵称",motto:"个性签名",sex:"性别",birthday:"生日",avatar:"头像",background:"背景图片",email:"邮箱",phone:"手机号",website:"个人网站",bio:"个人简介",social_links:"社交链接",preferences:"偏好设置",visibility:"可见性设置",language:"语言设置"},VITE_APP_S3_BUCKET:"https://zerocat-bitiful.houlangs.com"}},watch:{"$route.query.tab"(e){this.tab=e||"home"}},async created(){await this.fetchUser(),await this.getProjectList(),await this.fetchTimeline(),this.tab=this.$route.query.tab||"home"},computed:{hasMoreEvents(){return this.timeline.events.length<this.timeline.pagination.total}},methods:{async fetchUser(){this.user=await Qe(this.username),Ze({title:""+this.user.display_name}),this.url=`/searchapi?search_userid=${this.user.id}&search_type=&search_title=&search_source=&search_description=&search_orderby=view_up&search_state=public&search_tag=`},async getProjectList(){try{const e=await L({url:`/projectlist/userid/${this.user.id}/public`,method:"get"});e.data&&e.data.data&&(this.lists=e.data.data)}catch(e){console.error("获取用户项目列表失败:",e),this.lists=[]}},async fetchTimeline(e=1){try{const s=await L.get(`/timeline/user/${this.user.id}`,{params:{page:e,limit:this.pageSize}});s.data.status==="success"&&(e===1?this.timeline=s.data.data:(this.timeline.events=[...this.timeline.events,...s.data.data.events],this.timeline.pagination=s.data.data.pagination))}catch(s){console.error("Failed to fetch timeline:",s)}},getUpdatedFields(e){return e!=null&&e.length?e.map(s=>this.fieldDisplayNames[s]||s).join("、"):""},async loadMoreEvents(){if(!(this.isLoadingMore||!this.hasMoreEvents))try{this.isLoadingMore=!0,this.currentPage+=1,await this.fetchTimeline(this.currentPage)}catch(e){console.error("Failed to load more events:",e)}finally{this.isLoadingMore=!1}},getTargetContent(e,s){if(!e)return"";switch(e.type){case"project":return e.title||`项目 #${e.id}`;case"user":return e.display_name||`用户 #${e.id}`;case"projectlist":return`项目列表 #${e.id}`;default:return`${e.type} #${e.id}`}},getFieldDisplayName(e){return{title:"标题",description:"描述",type:"类型",state:"状态",visibility:"可见性",tags:"标签",category:"分类"}[e]||e}}},ct={class:"font-weight-bold text-sm-h2 text-h4 mt-2 d-inline-flex align-center username"},ut={class:"mt-2 text-body-1 text-medium-emphasis",style:{"word-break":"break-word","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}},mt={class:"mt-2 text-medium-emphasis"},_t={class:"timeline-item-content"},ft={class:"event-header"},pt={class:"text-h6"},ht={class:"project-info"},yt={class:"font-weight-medium"},gt={class:"mt-2 text-caption text-medium-emphasis"},vt={class:"d-flex align-center mb-2"},bt={class:"font-weight-medium"},xt={class:"rename-details text-body-2"},wt={class:"d-flex align-center"},Ct={class:"d-flex align-center mt-1"},jt={class:"project-meta text-caption text-medium-emphasis mt-2"},kt={class:"d-flex align-center mb-2"},Tt={class:"font-weight-medium"},Vt={class:"commit-message text-body-2"},St={class:"commit-hash text-caption text-medium-emphasis mt-1"},Pt={class:"d-flex align-center mb-2"},Dt={class:"font-weight-medium"},It={class:"info-updates text-body-2"},zt={class:"d-flex align-center"},Lt={class:"d-flex flex-column mt-1 field-changes"},Ut={class:"old-value"},Bt={class:"ml-2"},Et={class:"new-value"},Ft={class:"ml-2 text-info"},Nt={class:"project-meta text-caption text-medium-emphasis mt-2"},Rt={key:3,class:"event-content pa-2"},Mt={key:0,class:"text-body-2"},At={key:1,class:"text-body-2"},qt={key:2,class:"text-body-2 text-medium-emphasis"},Ot={class:"d-flex justify-center mt-4 mb-4"},$t={key:1,class:"text-medium-emphasis"};function Kt(e,s,m,C,a,_){const f=ce,g=ge,w=be,P=ue,D=Je,we=ve,O=me,Ce=de,je=re,$=Oe("router-link");return r(),p(E,null,{default:i(()=>[t($e,{modelValue:a.tab,"onUpdate:modelValue":s[0]||(s[0]=l=>a.tab=l)},{default:i(()=>[t(V,{value:"home"},{default:i(()=>[t(Ke,{class:"mt-8"},{default:i(()=>[t(U,{class:"d-flex align-center"},{default:i(()=>[t(S,null,{default:i(()=>[s[2]||(s[2]=o("p",{class:"font-weight-medium text-primary"},"ZeroCat 用户",-1)),o("p",ct,[u(n(a.user.display_name)+" ",1),t(ne,{size:"52",class:"ma-2"},{default:i(()=>[t(We,{src:a.VITE_APP_S3_BUCKET+"/user/"+a.user.images},null,8,["src"])]),_:1})]),o("p",ut,n(a.user.motto),1),o("p",mt,[t(v,null,{default:i(()=>[t(j,{icon:"mdi-account-circle",start:""}),u(" #"+n(a.user.id),1)]),_:1}),t(v,null,{default:i(()=>[t(j,{icon:"mdi-clock",start:""}),t(f,{date:a.user.regTime},null,8,["date"]),s[1]||(s[1]=u(" 注册 "))]),_:1}),t(v,null,{default:i(()=>[t(j,{icon:"mdi-tag",start:""}),u(" "+n(a.user.id===1?"社区管理员":"用户"),1)]),_:1})]),t(g,{"user-id":a.user.id,username:a.username,"display-name":a.user.display_name},null,8,["user-id","username","display-name"]),t(w,{"user-id":a.user.id,username:a.username,class:"mt-3"},null,8,["user-id","username"])]),_:1})]),_:1})]),_:1}),s[4]||(s[4]=o("br",null,null,-1)),t(x,{title:"关于我",subtitle:"README.md"},{default:i(()=>[t(k,{class:"markdown-body"},{default:i(()=>[s[3]||(s[3]=o("br",null,null,-1)),t(P,null,{default:i(()=>[u(n(a.user.motto),1)]),_:1})]),_:1})]),_:1}),s[5]||(s[5]=u()),t(D,{url:a.url},null,8,["url"]),t(U,null,{default:i(()=>[(r(!0),y(T,null,I(a.lists,l=>(r(),p(S,{cols:"12",xs:"12",sm:"6",md:"4",lg:"3",xl:"2",xxl:"2",key:l.id},{default:i(()=>[t(x,{rounded:"lg"},{default:i(()=>[t(x,{to:"/app/projectlist/"+l.id,rounded:"lg",title:l.title,subtitle:l.description,color:"primary",variant:"tonal"},null,8,["to","title","subtitle"])]),_:2},1024)]),_:2},1024))),128))]),_:1}),s[6]||(s[6]=o("br",null,null,-1)),t(we,{"user-id":a.user.id,"project-lists":a.lists},null,8,["user-id","project-lists"]),s[7]||(s[7]=o("br",null,null,-1)),t(O,{url:"user-"+a.user.id,name:"用户"},null,8,["url"])]),_:1}),t(V,{value:"comment"},{default:i(()=>[t(O,{url:"user-"+a.user.id,name:"用户"},null,8,["url"])]),_:1}),t(V,{value:"followers"},{default:i(()=>[t(E,null,{default:i(()=>[s[8]||(s[8]=o("h2",{class:"text-h5 mb-4"},"关注者",-1)),t(Ce,{"user-id":a.user.id,"show-all":!1},null,8,["user-id"])]),_:1})]),_:1}),t(V,{value:"following"},{default:i(()=>[t(E,null,{default:i(()=>[s[9]||(s[9]=o("h2",{class:"text-h5 mb-4"},"正在关注",-1)),t(je,{"user-id":a.user.id,"show-all":!1},null,8,["user-id"])]),_:1})]),_:1}),t(V,{value:"timeline"},{default:i(()=>[t(rt,{side:"end",align:"start",class:"mt-4"},{default:i(()=>[(r(!0),y(T,null,I(a.timeline.events,l=>(r(),p(at,{key:l.id,size:"small","dot-color":"primary"},{opposite:i(()=>[u(n(new Date(l.created_at).toLocaleString()),1)]),icon:i(()=>[t(ne,{image:a.VITE_APP_S3_BUCKET+"/user/"+a.user.images},null,8,["image"])]),default:i(()=>{var K,W,Z,H,G,J,Q,X,Y,ee,te,se;return[o("div",_t,[o("div",ft,[o("h3",pt,n(l.actor.display_name)+" "+n(((K=a.eventTypes[l.type])==null?void 0:K.text)||"进行了操作"),1),t(v,{size:"x-small",color:((W=a.eventTypes[l.type])==null?void 0:W.color)||"primary",class:"ml-2"},{default:i(()=>{var d;return[u(n(((d=a.eventTypes[l.type])==null?void 0:d.label)||l.type),1)]}),_:2},1032,["color"])]),s[14]||(s[14]=u()),(Z=a.eventTypes[l.type])!=null&&Z.isProject?(r(),p($,{key:0,to:`/app/link/project?id=${(H=l.target)==null?void 0:H.id}`,class:"text-decoration-none"},{default:i(()=>{var d;return[u(n((d=l.event_data)==null?void 0:d.project_title),1)]}),_:2},1032,["to"])):B("",!0),s[15]||(s[15]=o("div",{class:"mb-2"},null,-1)),(G=a.eventTypes[l.type])!=null&&G.isProject&&!["project_rename","project_commit"].includes(l.type)?(r(),p(x,{key:1,class:"mb-3 project-event",to:`/app/link/project?id=${(J=l.target)==null?void 0:J.id}`},{default:i(()=>[t(k,null,{default:i(()=>{var d,c;return[o("div",ht,[t(j,{icon:"mdi-source-repository",color:"primary",class:"mr-2"}),o("span",yt,n(((d=l.event_data)==null?void 0:d.project_name)||"未命名项目"),1),o("div",gt,n((c=l.event_data)==null?void 0:c.project_description),1)])]}),_:2},1024)]),_:2},1032,["to"])):["project_rename","project_commit","project_info_update"].includes(l.type)?(r(),y(T,{key:2},[l.type==="project_rename"?(r(),p(x,{key:0,class:"rename-card mb-3",to:`/app/link/project?id=${(Q=l.target)==null?void 0:Q.id}`},{default:i(()=>[t(k,null,{default:i(()=>{var d;return[o("div",vt,[t(j,{icon:"mdi-rename-box",color:"warning",class:"mr-2"}),o("span",bt,n((d=l.event_data)==null?void 0:d.project_title),1)]),o("div",xt,[o("div",wt,[s[10]||(s[10]=o("span",{class:"text-medium-emphasis"},"从",-1)),t(v,{size:"small",class:"mx-2",color:"surface-variant"},{default:i(()=>{var c;return[u(n((c=l.event_data)==null?void 0:c.old_name),1)]}),_:2},1024)]),o("div",Ct,[s[11]||(s[11]=o("span",{class:"text-medium-emphasis"},"到",-1)),t(v,{size:"small",class:"mx-2",color:"warning"},{default:i(()=>{var c;return[u(n((c=l.event_data)==null?void 0:c.new_name),1)]}),_:2},1024)])]),o("div",jt,[t(v,{size:"x-small",class:"mr-1"},{default:i(()=>{var c;return[u(n((c=l.event_data)==null?void 0:c.project_type),1)]}),_:2},1024),t(v,{size:"x-small"},{default:i(()=>{var c;return[u(n((c=l.event_data)==null?void 0:c.project_state),1)]}),_:2},1024)])]}),_:2},1024)]),_:2},1032,["to"])):l.type==="project_commit"?(r(),p(x,{key:1,class:"commit-card mb-3",to:`/app/link/project?id=${(X=l.target)==null?void 0:X.id}`},{default:i(()=>[t(k,null,{default:i(()=>{var d,c,h;return[o("div",kt,[t(j,{icon:"mdi-source-commit",color:"info",class:"mr-2"}),o("span",Tt,"分支: "+n((d=l.event_data)==null?void 0:d.branch),1)]),o("div",Vt,n((c=l.event_data)==null?void 0:c.commit_message),1),o("div",St," 提交ID: "+n((h=l.event_data)==null?void 0:h.commit_id.substring(0,7)),1)]}),_:2},1024)]),_:2},1032,["to"])):l.type==="project_info_update"?(r(),p(x,{key:2,class:"info-update-card mb-3",to:`/app/link/project?id=${(Y=l.target)==null?void 0:Y.id}`},{default:i(()=>[t(k,null,{default:i(()=>{var d,c;return[o("div",Pt,[t(j,{icon:"mdi-file-document-edit",color:"info",class:"mr-2"}),o("span",Dt,n((d=l.event_data)==null?void 0:d.project_title),1)]),o("div",It,[(r(!0),y(T,null,I((c=l.event_data)==null?void 0:c.updated_fields,h=>{var ie,le;return r(),y("div",{key:h,class:"update-item mb-2"},[o("div",zt,[t(v,{size:"x-small",color:"info",class:"mr-2"},{default:i(()=>[u(n(_.getFieldDisplayName(h)),1)]),_:2},1024)]),o("div",Lt,[o("div",Ut,[s[12]||(s[12]=o("span",{class:"text-medium-emphasis"},"从：",-1)),o("span",Bt,n((ie=l.event_data)==null?void 0:ie.old_values[h]),1)]),o("div",Et,[s[13]||(s[13]=o("span",{class:"text-medium-emphasis"},"到：",-1)),o("span",Ft,n((le=l.event_data)==null?void 0:le.new_values[h]),1)])])])}),128))]),o("div",Nt,[t(v,{size:"x-small",class:"mr-1"},{default:i(()=>{var h;return[u(n((h=l.event_data)==null?void 0:h.project_type),1)]}),_:2},1024),t(v,{size:"x-small"},{default:i(()=>{var h;return[u(n((h=l.event_data)==null?void 0:h.project_state),1)]}),_:2},1024)])]}),_:2},1024)]),_:2},1032,["to"])):B("",!0)],64)):(r(),y("div",Rt,[l.type==="user_profile_update"?(r(),y("div",Mt," 更新了："+n(_.getUpdatedFields((ee=l.event_data)==null?void 0:ee.updated_fields)),1)):((te=l.target)==null?void 0:te.type)==="project"?(r(),y("div",At,[o("span",null,n(((se=a.eventTypes[l.type])==null?void 0:se.text)||"操作了"),1),t($,{to:`/app/link/project?id=${l.target.id}`,class:"text-decoration-none ml-1"},{default:i(()=>{var d;return[u(n(((d=l.event_data)==null?void 0:d.project_name)||l.target.title||`项目 #${l.target.id}`),1)]}),_:2},1032,["to"])])):(r(),y("div",qt,n(_.getTargetContent(l.target,l.type)),1))]))])]}),_:2},1024))),128))]),_:1}),o("div",Ot,[_.hasMoreEvents?(r(),p(F,{key:0,loading:a.isLoadingMore,variant:"tonal",onClick:_.loadMoreEvents},{default:i(()=>s[16]||(s[16]=[u(" 加载更多 ")])),_:1},8,["loading","onClick"])):a.timeline.events.length>0?(r(),y("div",$t," 没有更多内容了 ")):B("",!0)])]),_:1})]),_:1},8,["modelValue"])]),_:1})}const ps=N(dt,[["render",Kt],["__scopeId","data-v-f917cc67"]]);export{ps as default};
