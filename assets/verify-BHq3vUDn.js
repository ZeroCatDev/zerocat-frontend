import{b2 as k,r as i,e as w,a0 as C,ag as B,a as N,o as V,h as t,P as l,i as f,X as T,Z as E,ap as M,b3 as g,k as U,N as _,W as b,U as F}from"./index-D7aCJH6V.js";import{V as x,a as h}from"./VRow-DqalAxKy.js";import{V as R}from"./VForm-rC5p4sa1.js";import{V as q}from"./VTextField-B9DcoZwL.js";import{V as S}from"./VAlert-CNNbSTEt.js";/* empty css              */import"./VInput-BLC93Oha.js";/* empty css                   */import"./VField-DrdAaG3U.js";const Z={class:"auth-wrapper d-flex align-center justify-center pa-4"},G={__name:"verify",setup(j){const d=k(),u=i(""),r=i(""),o=i(!1),m=i(""),v=i("success"),c={required:a=>!!a||"æ­¤å­—æ®µä¸ºå¿…å¡«é¡¹",email:a=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a)||"è¯·è¾“å…¥æœ‰æ•ˆçš„é‚®ç®±åœ°å€",length:a=>(a==null?void 0:a.length)===6||"éªŒè¯ç å¿…é¡»æ˜¯6ä½æ•°å­—"};w(()=>{const a=d.query.email,e=d.query.token;a&&(u.value=a),e&&(r.value=e),a&&e&&y()});const y=async()=>{var a,e;if(!o.value){if(!u.value||!r.value){n("è¯·è¾“å…¥é‚®ç®±å’ŒéªŒè¯ç ","error");return}if(r.value.length!==6){n("éªŒè¯ç å¿…é¡»æ˜¯6ä½æ•°å­—","error");return}o.value=!0,m.value="";try{const s=await C.post("/account/verify-email",{email:u.value,token:r.value});s.data.state==="success"?n(s.data.message||"é‚®ç®±éªŒè¯æˆåŠŸï¼","success"):n(s.data.message||"é‚®ç®±éªŒè¯å¤±è´¥ï¼","error")}catch(s){n(((e=(a=s.response)==null?void 0:a.data)==null?void 0:e.message)||"éªŒè¯å¤±è´¥ï¼Œè¯·é‡è¯•","error")}finally{o.value=!1}}},n=(a,e="success")=>{m.value=a,v.value=e};return(a,e)=>{const s=B("v-cardtext");return V(),N("div",Z,[t(F,{class:"auth-card pa-4 pt-7","max-width":"448",border:"",rounded:"lg"},{default:l(()=>[t(x,null,{default:l(()=>[t(h,{cols:"12"},{default:l(()=>[t(s,null,{default:l(()=>e[2]||(e[2]=[f("h5",{class:"text-h5 font-weight-semibold mb-1"}," æ¬¢è¿Žæ¥åˆ°ZeroCatï¼ ðŸ‘‹ðŸ» ",-1),f("p",{class:"mb-0"},"éªŒè¯ä½ çš„é‚®ç®±",-1)])),_:1,__:[2]})]),_:1})]),_:1}),t(s,null,{default:l(()=>[t(x,null,{default:l(()=>[t(h,{cols:"12"},{default:l(()=>[t(R,{onSubmit:M(y,["prevent"])},{default:l(()=>[t(q,{modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=p=>u.value=p),label:"é‚®ç®±åœ°å€",type:"email",required:"",rules:[c.required,c.email],placeholder:"è¯·è¾“å…¥é‚®ç®±åœ°å€",variant:"outlined",disabled:g(d).query.email},null,8,["modelValue","rules","disabled"]),t(q,{modelValue:r.value,"onUpdate:modelValue":e[1]||(e[1]=p=>r.value=p),label:"éªŒè¯ç ",type:"text",required:"",rules:[c.required,c.length],maxlength:"6",placeholder:"è¯·è¾“å…¥6ä½éªŒè¯ç ",variant:"outlined",disabled:g(d).query.token},null,8,["modelValue","rules","disabled"]),t(U,{type:"submit",loading:o.value,disabled:o.value,color:"primary",size:"large"},{default:l(()=>[_(b(o.value?"éªŒè¯ä¸­...":"éªŒè¯"),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1})]),_:1}),e[3]||(e[3]=f("br",null,null,-1)),m.value?(V(),T(S,{key:0,type:v.value,variant:"tonal"},{default:l(()=>[_(b(m.value),1)]),_:1},8,["type"])):E("",!0)]),_:1,__:[3]})])}}};export{G as default};
