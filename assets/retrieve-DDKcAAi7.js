import{_ as f}from"./LoadingDialog-CmfDUARJ.js";import{_ as x,H as d,G as _,J as v,r as y,o as w,e as V,L as i,a as t,w as e,Z as C,N as l,O as k,S as R}from"./index-aJtoyxvm.js";import"https://static.geetest.com/v4/gt4.js";import{i as m,g as p,r as b}from"./useRecaptcha-D4VPpSaq.js";import{V as c,a as r}from"./VRow-CezgLdW5.js";import{V as B}from"./VForm-CKgMtX2L.js";import{V as N}from"./VCard-DznyS40J.js";import"./VDialog-BAHtFo__.js";/* empty css              */const z={components:{LoadingDialog:f},data(){return{BASE_API:"https://zerocat-api.houlangs.com",email:"",tryinguser:{},loading:!1,initRecaptcha:m,getResponse:p,resetCaptcha:b,emailRules:[s=>s?!0:"必须填写邮箱",s=>/.+@.+\..+/.test(s)?!0:"不符合格式"],usernameRules:[s=>s?!0:"必须填写用户名"]}},created(){d.islogin.value==!0&&this.$router.push("/"),m("recaptcha-div","popup")},setup(){_({title:"找回密码"})},methods:{async login(){if(this.loading=!0,this.tryinguser=await v({url:"/account/repw",method:"post",data:{captcha:p(),un:this.email}}),this.tryinguser.message!="OK"){this.loading=!1,this.$toast.add({severity:"info",summary:"info",detail:this.tryinguser.msg||this.tryinguser.message,life:3e3});return}this.loading=!1,d.setuser(this.tryinguser.token),console.log(this.tryinguser),(this.tryinguser.msg||this.tryinguser.message=="OK")&&this.$router.push("/")},addtoast(s){this.$toast.add({severity:"info",summary:"info",detail:s,life:3e3})}}},F={class:"auth-wrapper d-flex align-center justify-center pa-4"};function L(s,a,O,$,o,g){const n=y("v-cardtext"),h=f;return w(),V(R,null,[i("div",F,[t(N,{class:"auth-card pa-4 pt-7","max-width":"448",border:""},{default:e(()=>[t(c,null,{default:e(()=>[t(r,{cols:"12"},{default:e(()=>[t(n,null,{default:e(()=>a[2]||(a[2]=[i("h5",{class:"text-h5 font-weight-semibold mb-1"}," 欢迎来到ZeroCatNext！ 👋🏻 ",-1),i("p",{class:"mb-0"},"找回密码",-1)])),_:1})]),_:1})]),_:1}),t(n,null,{default:e(()=>[t(B,null,{default:e(()=>[t(c,null,{default:e(()=>[t(r,{cols:"12"},{default:e(()=>[t(C,{label:"邮箱",type:"text",modelValue:o.email,"onUpdate:modelValue":a[0]||(a[0]=u=>o.email=u),variant:"outlined",rules:o.emailRules},null,8,["modelValue","rules"])]),_:1}),t(r,{cols:"9"},{default:e(()=>a[3]||(a[3]=[i("div",{id:"recaptcha-div"},null,-1)])),_:1}),t(r,{cols:"3"},{default:e(()=>[t(l,{onClick:a[1]||(a[1]=u=>o.resetCaptcha()),variant:"text"},{default:e(()=>a[4]||(a[4]=[k("刷新")])),_:1})]),_:1}),t(r,{cols:"12"},{default:e(()=>[t(l,{class:"text-none",color:"primary",rounded:"xl",text:"找回密码",variant:"flat",size:"large",onClick:g.login,"append-icon":"mdi-arrow-right"},null,8,["onClick"])]),_:1}),t(r,{cols:"12"},{default:e(()=>[t(l,{class:"text-none",color:"white",rounded:"xl",text:"登录",variant:"text",size:"large","append-icon":"mdi-arrow-right",to:"/account/login"}),t(l,{class:"text-none",color:"white",rounded:"xl",text:"注册",variant:"text",size:"large","append-icon":"mdi-arrow-right",to:"/account/register"})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),t(h,{show:o.loading,text:"正在发送邮件"},null,8,["show"])],64)}const j=x(z,[["render",L]]);export{j as default};
