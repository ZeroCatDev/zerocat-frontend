import"https://static.geetest.com/v4/gt4.js";import{_ as c,aa as l,c as i,o as a,$ as n,Y as r,N as d,L as h,i as p}from"./index-C3KDjNI3.js";const u={props:{recaptchaId:{type:String,required:!0},product:{type:String,default:"popup"},showNormal:{type:Boolean,default:!0}},data(){return{captchaObj:null,bindCaptchaObj:null,geeId:""}},async mounted(){this.geeId=await l("captcha.GEE_CAPTCHA_ID"),console.log(this.geeId),this.showNormal&&this.initRecaptcha()},watch:{showNormal(e){e&&this.initRecaptcha()}},methods:{initRecaptcha(){initGeetest4({captchaId:this.geeId,product:this.product},e=>{this.captchaObj=e,window.gt4=e,e.appendTo(`#${this.recaptchaId}`),e.onReady(()=>{console.log("Challenge Ready")}).onSuccess(()=>{console.log("Challenge Success")}).onError(()=>{console.log("Challenge Error")})})},initBindRecaptcha(){initGeetest4({captchaId:this.geeId,product:"bind",mask:{outside:!0,bgColor:"#0000004d"}},e=>{this.bindCaptchaObj=e,e.onReady(()=>{console.log("Bind Challenge Ready")}).onSuccess(()=>{console.log("Bind Challenge Success"),this.$emit("bindVerified",this.getBindResponse())}).onError(()=>{console.log("Bind Challenge Error"),this.$emit("bindError")}).onClose(()=>{console.log("Bind Challenge Closed"),this.$emit("bindClose")})})},resetCaptcha(){this.captchaObj?this.captchaObj.reset():this.initRecaptcha()},getResponse(){var e;return(e=this.captchaObj)==null?void 0:e.getValidate()},getBindResponse(){var e;return(e=this.bindCaptchaObj)==null?void 0:e.getValidate()},showBindCaptcha(){this.bindCaptchaObj?this.bindCaptchaObj.showBox():this.initBindRecaptcha()}}},g=["id"];function C(e,o,t,m,_,s){return a(),i("div",null,[t.showNormal?(a(),i("div",{key:0,id:t.recaptchaId},null,8,g)):n("",!0),t.showNormal?(a(),r(p,{key:1,onClick:s.resetCaptcha,variant:"text"},{default:d(()=>o[0]||(o[0]=[h("刷新")])),_:1,__:[0]},8,["onClick"])):n("",!0)])}const f=c(u,[["render",C]]);export{f as _};
