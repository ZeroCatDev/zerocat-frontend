import{_ as E,c as T,o as B,f as l,e as t,N as s,n as A,W as y,aU as L,a9 as w,L as a,X as r,aW as O,T as N,Q as I,R as d,O as V,a3 as S,S as C,Y as R,$ as W,i as U,a4 as F,aS as H,a1 as M,aa as P,M as Q}from"./index-DmjUHmS9.js";import"https://static.geetest.com/v4/gt4.js";const X={name:"ExtensionDetail",setup(){Q({title:"扩展详情 - ZeroCat"})},data(){return{loading:!1,extension:null,s3BucketUrl:""}},async created(){this.s3BucketUrl=await P("s3.staticurl"),await this.fetchExtensionDetail()},methods:{async fetchExtensionDetail(){var m;this.loading=!0;try{const e=this.$route.params.id,h=await M.get(`/extensions/marketplace/${e}`);((m=h.data)==null?void 0:m.status)==="success"&&(this.extension=h.data.data)}catch(e){console.error("Failed to fetch extension detail:",e)}finally{this.loading=!1}},formatDate(m){return m?new Date(m).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"N/A"}}},Y={class:"extension-hero"},Z={class:"info-item mb-4"},q={class:"info-value"},G={class:"info-item mb-4"},J={class:"info-value"},K={class:"info-item mb-4"},$={class:"info-value"},ee={class:"info-item mb-4"},te={class:"info-value"},se={class:"info-item mb-4"},oe={class:"info-value"},le={class:"info-item mb-4"},ie={class:"info-value"},ae={class:"info-item mb-4"},ne={class:"info-value"},re={class:"action-buttons"};function de(m,e,h,ce,i,j){return B(),T("div",null,[l("div",Y,[e[1]||(e[1]=l("div",{class:"hero-background"},[l("div",{class:"glow-effect glow-1"}),l("div",{class:"glow-effect glow-2"}),l("div",{class:"glow-effect glow-3"})],-1)),t(N,{class:"hero-content"},{default:s(()=>{var o,n,_,p,v;return[t(A,{src:i.s3BucketUrl+"/material/asset/"+((o=i.extension)==null?void 0:o.image)+".png"},null,8,["src"]),t(y,{class:"info-card",title:(_=(n=i.extension)==null?void 0:n.project)==null?void 0:_.title,subtitle:(v=(p=i.extension)==null?void 0:p.project)==null?void 0:v.description},{default:s(()=>{var x,g,b;return[t(L,{"prepend-avatar":i.s3BucketUrl+"/user/"+((b=(g=(x=i.extension)==null?void 0:x.project)==null?void 0:g.author)==null?void 0:b.avatar)||""},{default:s(()=>[t(w,null,{default:s(()=>{var c,u,f,k,D,z;return[a(r(((f=(u=(c=i.extension)==null?void 0:c.project)==null?void 0:u.author)==null?void 0:f.display_name)||((z=(D=(k=i.extension)==null?void 0:k.project)==null?void 0:D.author)==null?void 0:z.username)||"未知开发者"),1)]}),_:1}),t(O,null,{default:s(()=>{var c,u,f;return[a(r(((f=(u=(c=i.extension)==null?void 0:c.project)==null?void 0:u.author)==null?void 0:f.username)||"未知开发者"),1)]}),_:1})]),_:1},8,["prepend-avatar"])]}),_:1},8,["title","subtitle"])]}),_:1})]),t(N,{class:"main-content"},{default:s(()=>[t(I,null,{default:s(()=>[t(d,{cols:"12",lg:"8"},{default:s(()=>[t(y,{class:"info-card mb-6",elevation:"8"},{default:s(()=>[t(w,{class:"text-h5 font-weight-bold pa-6"},{default:s(()=>[t(V,{class:"mr-3",color:"primary"},{default:s(()=>e[2]||(e[2]=[a("mdi-information",-1)])),_:1,__:[2]}),e[3]||(e[3]=a(" 扩展信息 ",-1))]),_:1,__:[3]}),t(S,{class:"pa-6"},{default:s(()=>[t(I,null,{default:s(()=>[t(d,{cols:"12",md:"6"},{default:s(()=>{var o;return[l("div",Z,[e[4]||(e[4]=l("div",{class:"info-label"},"扩展ID",-1)),l("div",q,r(((o=i.extension)==null?void 0:o.id)||"N/A"),1)])]}),_:1}),t(d,{cols:"12",md:"6"},{default:s(()=>{var o,n;return[l("div",G,[e[5]||(e[5]=l("div",{class:"info-label"},"项目ID",-1)),l("div",J,r(((n=(o=i.extension)==null?void 0:o.project)==null?void 0:n.id)||"N/A"),1)])]}),_:1}),t(d,{cols:"12",md:"6"},{default:s(()=>[l("div",K,[e[6]||(e[6]=l("div",{class:"info-label"},"分支",-1)),l("div",$,[t(C,{color:"primary",variant:"outlined",size:"small"},{default:s(()=>{var o;return[a(r(((o=i.extension)==null?void 0:o.branch)||"main"),1)]}),_:1})])])]),_:1}),t(d,{cols:"12",md:"6"},{default:s(()=>[l("div",ee,[e[7]||(e[7]=l("div",{class:"info-label"},"提交",-1)),l("div",te,[t(C,{color:"success",variant:"outlined",size:"small"},{default:s(()=>{var o;return[a(r(((o=i.extension)==null?void 0:o.commit)||"latest"),1)]}),_:1})])])]),_:1}),t(d,{cols:"12",md:"6"},{default:s(()=>{var o;return[l("div",se,[e[8]||(e[8]=l("div",{class:"info-label"},"创建时间",-1)),l("div",oe,r(j.formatDate((o=i.extension)==null?void 0:o.created_at)),1)])]}),_:1}),t(d,{cols:"12",md:"6"},{default:s(()=>{var o;return[l("div",le,[e[9]||(e[9]=l("div",{class:"info-label"},"更新时间",-1)),l("div",ie,r(j.formatDate((o=i.extension)==null?void 0:o.updated_at)),1)])]}),_:1}),t(d,{cols:"12",md:"6"},{default:s(()=>{var o;return[l("div",ae,[e[10]||(e[10]=l("div",{class:"info-label"},"Scratch兼容性",-1)),l("div",ne,[t(C,{color:(o=i.extension)!=null&&o.scratchCompatible?"orange":"grey",variant:"outlined",size:"small","prepend-icon":"mdi-puzzle"},{default:s(()=>{var n;return[a(r((n=i.extension)!=null&&n.scratchCompatible?"兼容原版Scratch":"不兼容原版Scratch"),1)]}),_:1},8,["color"])])])]}),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(d,{cols:"12",lg:"4"},{default:s(()=>[t(y,{class:"action-card mb-6",elevation:"8"},{default:s(()=>[t(w,{class:"text-h6 font-weight-bold pa-6"},{default:s(()=>[t(V,{class:"mr-3",color:"primary"},{default:s(()=>e[11]||(e[11]=[a("mdi-cog",-1)])),_:1,__:[11]}),e[12]||(e[12]=a(" 操作 ",-1))]),_:1,__:[12]}),t(S,{class:"pa-6"},{default:s(()=>{var o,n,_,p,v,x,g,b,c,u,f;return[l("div",re,[t(U,{color:"primary",size:"large",block:"",class:"mb-4",to:`/${(_=(n=(o=i.extension)==null?void 0:o.project)==null?void 0:n.author)==null?void 0:_.username}/${(v=(p=i.extension)==null?void 0:p.project)==null?void 0:v.name}`},{default:s(()=>[t(V,{start:""},{default:s(()=>e[13]||(e[13]=[a("mdi-open-in-new",-1)])),_:1,__:[13]}),e[14]||(e[14]=a(" 查看项目 ",-1))]),_:1,__:[14]},8,["to"]),((x=i.extension)==null?void 0:x.sample_project)!=null?(B(),R(U,{key:0,color:"success",size:"large",block:"",variant:"outlined",to:`/${(c=(b=(g=i.extension)==null?void 0:g.sample_project)==null?void 0:b.author)==null?void 0:c.username}/${(f=(u=i.extension)==null?void 0:u.sample_project)==null?void 0:f.name}`},{default:s(()=>[t(V,{start:""},{default:s(()=>e[15]||(e[15]=[a("mdi-eye",-1)])),_:1,__:[15]}),e[16]||(e[16]=a(" 查看示例项目 ",-1))]),_:1,__:[16]},8,["to"])):W("",!0)])]}),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(H,{modelValue:i.loading,"onUpdate:modelValue":e[0]||(e[0]=o=>i.loading=o),class:"align-center justify-center"},{default:s(()=>[t(F,{indeterminate:"",size:"64",color:"primary"})]),_:1},8,["modelValue"])])}const me=E(X,[["render",de],["__scopeId","data-v-55e1401c"]]);export{me as default};
