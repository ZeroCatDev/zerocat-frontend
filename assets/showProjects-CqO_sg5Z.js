import{c as n}from"./projectService-DEl_bEPR.js";import{a as p}from"./user-CE4SJyLi.js";import{_}from"./43-lazyload-CBkwrR6M.js";import{_ as m,c as d,o as u,w as a,e as f,M as g,N as I,a as e,K as i,aa as V,ao as y,ap as j,H as h,O as l,aq as x}from"./index-BqSjh5I7.js";import{a as A,V as P}from"./VRow-DJ6_IBUA.js";const C={props:{projectIds:{type:Array,required:!0}},data(){return{projects:[],authorIds:[],authors:{},VITE_APP_S3_BUCKET:"https://zerocat-bitiful.houlangs.com"}},watch:{projectIds:{handler(){this.fetchProjects()},immediate:!0,deep:!0}},methods:{async fetchProjects(){const t=await n(this.projectIds);this.projects=t.map(r=>({...r,author:{display_name:"加载中..."}})),this.updateAuthorIds()},updateAuthorIds(){this.authorIds=[...new Set(this.projects.map(t=>t.authorid))],this.fetchAuthors()},async fetchAuthors(){const t=await p(this.authorIds),r={};t.forEach(o=>{r[o.id]=o}),this.authors=r,this.updateProjectAuthors()},updateProjectAuthors(){this.projects=this.projects.map(t=>({...t,author:this.authors[t.authorid]||{display_name:"未知用户"}}))}}};function w(t,r,o,b,c,B){return u(),d(P,null,{default:a(()=>[(u(!0),f(g,null,I(c.projects,s=>(u(),d(A,{key:s.id,cols:"12",xs:"12",sm:"6",md:"4",lg:"3",xl:"2",xxl:"2"},{default:a(()=>[e(i,{rounded:"lg",border:""},{default:a(()=>[e(i,{to:`/${s.author.username}/${s.name}`,style:{"aspect-ratio":"4/3"},rounded:"lg"},{default:a(()=>[e(V,{src:c.VITE_APP_S3_BUCKET+"/scratch_slt/"+s.id,class:"align-end","lazy-src":_,height:"100%",gradient:"to bottom, rgba(0,0,0,.1), rgba(0,0,0,.5)",cover:""},{default:a(()=>[e(y,null,{default:a(()=>[e(j,null,{default:a(()=>[h(l(s.title||"未缓存"),1)]),_:2},1024),e(x,null,{default:a(()=>[h(l(s.description||""),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["src"])]),_:2},1032,["to"])]),_:2},1024)]),_:2},1024))),128))]),_:1})}const K=m(C,[["render",w]]);export{K as _};
