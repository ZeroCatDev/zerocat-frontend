import{b as _}from"./Comment-MP31GHgd.js";import{_ as x}from"./proxylicense-DUUqscAp.js";import{_ as g}from"./ProxyShowProjects-CB3sdiGh.js";import{_ as b}from"./ProxyShowUsers-roYKXL3l.js";import{X as m,_ as C,T as P,o as S,N as e,M as d,h as t,R as j,ap as v,aq as h,K as r,Y as U,ad as I,ae as p,S as a,O as l,k as T,U as L,q as k,r as z}from"./index-BoardjOA.js";import{a as D,V as u}from"./VChip-Dy0NAZz2.js";import{V as N}from"./VContainer-DvmY3th9.js";import"./VForm-qIz-yzsX.js";import"./VInput-BSMIx3P2.js";import"./VTextarea-CQxw7NTr.js";/* empty css                   */import"./VDialog-Bygrtth4.js";import"./43-lazyload-CBkwrR6M.js";import"./VRow-DnCu-HME.js";/* empty css              */function B(i){return m.get(`https://scratch.192325.xyz/studios/${i}`)}function M(i,s,n){return m.get(`https://scratch.192325.xyz/studios/${i}/projects?&offset=${s*16-16}&limit=${n}`)}function q(i,s,n){return m.get(`https://scratch.192325.xyz/studios/${i}/curators?&offset=${s*16-16}&limit=${n}`)}function W(i,s,n){return m.get(`https://scratch.192325.xyz/studios/${i}/managers?&offset=${s*16-16}&limit=${n}`)}const Z={components:{Comment:_,ProxyShowUsers:b,ProxyShowProjects:g},data(){return{tab:z(null),UserCardLoading:!0,ProjectsLoading:!0,userid:this.$route.params.id,studioinfo:{id:1,title:"加载中",host:1,description:"加载中",visibility:"visible",public:!0,open_to_all:!0,comments_allowed:!0,image:"",history:{created:"2000-01-01T00:00:00.000Z",modified:"2000-01-01T00:00:00.000Z"},stats:{comments:0,followers:0,managers:0,projects:0}},curators:[],curatorspage:0,curatorscanload:!0,managers:[],managerspage:0,managerscanload:!0,usetime:0,projects:[],curPage:1,limit:18,scratch_proxy:"https://scratch.192325.xyz"}},async created(){await this.fetchStudioInfo(),await this.onPageChange(1,!1)},methods:{async fetchStudioInfo(){try{const i=await B(this.$route.params.id);this.studioinfo=i.data}catch(i){console.log(i)}finally{this.UserCardLoading=!1}},async onPageChange(i,s){s&&(this.projects=[]),this.usetime=Date.now(),this.ProjectsLoading=!0;try{const n=await M(this.$route.params.id,i,this.limit);this.projects=this.projects.concat(n.data)}catch(n){console.log(n)}finally{this.ProjectsLoading=!1,this.usetime=Date.now()-this.usetime}this.curPage=i},async onCuratorsPageChange(i){try{const s=await q(this.$route.params.id,i,this.limit);s.data.length===0&&(this.curatorscanload=!1),this.curators=this.curators.concat(s.data)}catch(s){console.log(s)}this.curatorspage=i},async onManagersPageChange(i){try{const s=await W(this.$route.params.id,i,this.limit);s.data.length===0&&(this.managerscanload=!1),this.managers=this.managers.concat(s.data)}catch(s){console.log(s)}this.managerspage=i}}},A={class:"mb-2"},G={class:"font-weight-black"};function K(i,s,n,O,o,R){const f=b,y=g,V=x,w=_;return S(),P(N,null,{default:e(()=>[d("div",A,[t(j,{class:"mx-auto mb-4",disabled:o.UserCardLoading,loading:o.UserCardLoading},{prepend:e(()=>[t(L,{class:"mb-2"},{default:e(()=>[t(k,{alt:o.studioinfo.username,src:o.studioinfo.image},null,8,["alt","src"])]),_:1})]),title:e(()=>[d("span",G,a(o.studioinfo.title),1)]),loader:e(({isActive:c})=>[t(T,{active:c,height:"4",indeterminate:""},null,8,["active"])]),subtitle:e(()=>[t(D,{column:""},{default:e(()=>[t(u,null,{default:e(()=>[t(l,{icon:"mdi-account-circle",start:""}),r(" ID:"+a(o.studioinfo.id),1)]),_:1}),t(u,null,{default:e(()=>[t(l,{icon:"mdi-clock",start:""}),r(" "+a(o.studioinfo.history.created)+"创建 ",1)]),_:1}),t(u,null,{default:e(()=>[t(l,{icon:"mdi-clock",start:""}),r(" "+a(o.studioinfo.history.modified)+"更新",1)]),_:1}),t(u,null,{default:e(()=>[t(l,{icon:"mdi-earth",start:""}),r(" "+a(o.studioinfo.public==!0?"公开":"私密"),1)]),_:1}),t(u,null,{default:e(()=>[t(l,{icon:"mdi-earth",start:""}),r(" "+a(o.studioinfo.open_to_all==!0?"对所有人开放":"需要邀请"),1)]),_:1}),t(u,null,{default:e(()=>[t(l,{icon:"mdi-earth",start:""}),r(" "+a(o.studioinfo.comments_allowed==!0?"Scratch官网允许评论":"Scratch官网不允许评论"),1)]),_:1}),t(u,null,{default:e(()=>[t(l,{icon:"mdi-earth",start:""}),r(" Scratch官网"+a(o.studioinfo.stats.comments)+"评论",1)]),_:1}),t(u,null,{default:e(()=>[t(l,{icon:"mdi-earth",start:""}),r(" "+a(o.studioinfo.stats.followers)+"被关注",1)]),_:1}),t(u,null,{default:e(()=>[t(l,{icon:"mdi-earth",start:""}),r(" "+a(o.studioinfo.stats.managers)+"成员",1)]),_:1}),t(u,null,{default:e(()=>[t(l,{icon:"mdi-earth",start:""}),r(" "+a(o.studioinfo.stats.projects)+"项目",1)]),_:1})]),_:1})]),default:e(()=>[t(v,{modelValue:o.tab,"onUpdate:modelValue":s[0]||(s[0]=c=>o.tab=c)},{default:e(()=>[t(h,{value:"description"},{default:e(()=>s[2]||(s[2]=[r("简介")])),_:1}),t(h,{value:"members"},{default:e(()=>s[3]||(s[3]=[r("成员")])),_:1})]),_:1},8,["modelValue"]),t(U,null,{default:e(()=>[t(I,{modelValue:o.tab,"onUpdate:modelValue":s[1]||(s[1]=c=>o.tab=c)},{default:e(()=>[t(p,{value:"description"},{default:e(()=>[d("pre",null,a(o.studioinfo.description),1)]),_:1}),t(p,{value:"members"},{default:e(()=>[t(f,{title:"管理员",subtitle:"用户列表",url:`/studios/${o.studioinfo.id}/managers?`,autoload:!0},null,8,["url"]),s[4]||(s[4]=d("br",null,null,-1)),t(f,{title:"成员",subtitle:"用户列表",url:`/studios/${o.studioinfo.id}/curators?`,autoload:!0},null,8,["url"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["disabled","loading"]),t(y,{url:`/studios/${o.studioinfo.id}/projects?`,autoload:!0,title:"项目",subtitle:"项目列表",showUserInfo:!0},null,8,["url"]),t(V,{url:"https://scratch.mit.edu/studios/"+o.studioinfo.id},null,8,["url"])]),t(w,{url:"scratchmitedustudio-"+o.studioinfo.id,name:"Scratch官网工作室"},null,8,["url"])]),_:1})}const nt=C(Z,[["render",K]]);export{nt as default};
