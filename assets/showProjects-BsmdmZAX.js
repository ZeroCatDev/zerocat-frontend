import{_ as y,J as l,o,c as n,w as a,e as i,R as p,S as m,a as r,P as _,O as I,a0 as g,a1 as V,L as c,T as h,a2 as x,a4 as C,M as k,a3 as w}from"./index-B_Zn9zmn.js";import{_ as A}from"./43-lazyload-CBkwrR6M.js";import{a as j,V as b}from"./VRow-TU0Y5Sn0.js";const P={props:{projectIds:{type:Array,required:!0},actions:{type:Array}},data(){return{projects:[],authorIds:[],authors:{}}},watch:{projectIds:{handler(){this.fetchProjects()},immediate:!0,deep:!0}},methods:{async fetchProjects(){const e=await l({url:"/project/batch",method:"post",data:{projectIds:this.projectIds}}),d=new Map(e.data.data.map(t=>[t.id,t]));this.projects=this.projectIds.map(t=>({...d.get(t),author:{display_name:"加载中..."}})),this.updateAuthorIds()},updateAuthorIds(){this.authorIds=[...new Set(this.projects.map(e=>e.authorid))],this.fetchAuthors()},async fetchAuthors(){const e=await l({url:"/user/batch",method:"post",data:{userIds:this.authorIds}}),d={};e.data.data.forEach(t=>{d[t.id]=t}),this.authors=d,this.updateProjectAuthors()},updateProjectAuthors(){this.projects=this.projects.map(e=>({...e,author:this.authors[e.authorid]||{display_name:"未知用户"}}))}}};function B(e,d,t,S,f,$){return o(),n(b,null,{default:a(()=>[(o(!0),i(p,null,m(f.projects,s=>(o(),n(j,{key:s.id,cols:"12",xs:"12",sm:"6",md:"4",lg:"3",xl:"2",xxl:"2"},{default:a(()=>[r(_,{rounded:"lg",border:""},{default:a(()=>[r(_,{to:`/${s.author.username}/${s.id}`,style:{"aspect-ratio":"4/3"},rounded:"lg"},{default:a(()=>[r(I,{src:"https://s4-1.wuyuan.1r.ink/scratch_slt/"+s.id,class:"align-end","lazy-src":A,height:"100%",gradient:"to bottom, rgba(0,0,0,.1), rgba(0,0,0,.5)",cover:""},{default:a(()=>[r(g,null,{default:a(()=>[r(V,null,{default:a(()=>[c(h(s.title||"未缓存"),1)]),_:2},1024),r(x,null,{default:a(()=>[c(h(s.description||""),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["src"])]),_:2},1032,["to"]),t.actions?(o(),n(C,{key:0},{default:a(()=>[(o(!0),i(p,null,m(t.actions,u=>(o(),i("div",{key:u.name},[r(k,{onClick:v=>u.function(s.id,s)},{default:a(()=>[c(h(u.name),1)]),_:2},1032,["onClick"])]))),128))]),_:2},1024)):w("",!0)]),_:2},1024)]),_:2},1024))),128))]),_:1})}const E=y(P,[["render",B]]);export{E as _};
