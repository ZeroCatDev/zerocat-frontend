import{_ as d}from"./showProjects-CtYkS68S.js";import{_ as j,J as V,o as r,e as C,a as o,af as _,w as s,K as n,Y as u,L as a,T as m,c as i,a7 as P,M as y,R as I}from"./index-DBsnBLVi.js";import{a as w,V as k}from"./VRow-BkmNXmBv.js";import{V as p}from"./VChip-BWdMa_Cr.js";import{V as T}from"./VPagination-DoAovQh5.js";const x={components:{showProjects:d},props:{url:{type:String,required:!0},actions:{type:Array}},data(){return{projectIds:[],page:1,limit:16,totalPage:1,totalCount:0,loading:!1,loadTime:0}},computed:{hasTotalCount(){return this.totalCount>0}},methods:{async fetchProjects(){this.loading=!0;const c=performance.now();try{const t=(await V.get(`${this.url}&curr=${this.page}&limit=${this.limit}`)).data;t.totalCount?(this.projectIds=t.projects,this.totalCount=t.totalCount,this.totalPage=Math.ceil(this.totalCount/this.limit)):this.projectIds=[...this.projectIds,...t.projects]}catch(t){console.error("Failed to fetch projects:",t)}finally{this.loading=!1,this.loadTime=performance.now()-c}},loadMore(){this.page++,this.fetchProjects()}},watch:{url:{handler(){this.page=1,this.fetchProjects()},immediate:!0},page:{handler(){this.fetchProjects()}}}},B={class:"mt-2 text-medium-emphasis"};function M(c,t,h,N,e,l){const f=d;return r(),C(I,null,[o(_,{indeterminate:"",color:"primary",active:e.loading,height:"4"},null,8,["active"]),o(k,null,{default:s(()=>[o(w,{cols:"12"},{default:s(()=>[n("p",B,[o(p,null,{default:s(()=>[o(u,{icon:"mdi-timer",start:""}),a(" 加载耗时: "+m(e.loadTime)+" ms ",1)]),_:1}),e.totalCount?(r(),i(p,{key:0},{default:s(()=>[o(u,{icon:"mdi-counter",start:""}),a(" 总作品数量: "+m(e.totalCount),1)]),_:1})):P("",!0)])]),_:1})]),_:1}),o(f,{projectIds:e.projectIds,actions:h.actions},null,8,["projectIds","actions"]),t[2]||(t[2]=n("br",null,null,-1)),l.hasTotalCount?(r(),i(T,{key:0,modelValue:e.page,"onUpdate:modelValue":t[0]||(t[0]=g=>e.page=g),length:e.totalPage,onInput:l.fetchProjects,rounded:"circle"},null,8,["modelValue","length","onInput"])):(r(),i(y,{key:1,onClick:l.loadMore,color:"primary"},{default:s(()=>t[1]||(t[1]=[a("继续加载")])),_:1},8,["onClick"])),t[3]||(t[3]=a()),t[4]||(t[4]=n("br",null,null,-1))],64)}const S=j(x,[["render",M]]);export{S as P};
