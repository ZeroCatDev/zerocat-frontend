import{a5 as ze,_ as K,aZ as qe,c as F,o as k,e as i,M as s,ae as L,L as c,O as A,a8 as N,aK as He,aI as je,Q as ge,R as x,aG as U,aC as Ot,i as S,Y as R,N as de,a9 as ft,f as m,ah as ke,F as ve,W as Xe,X as E,ai as Y,aj as z,$ as q,T as P,S as re,ak as G,aE as Dn,m as Pn,aa as ye,aJ as ce,aF as pe,x as _n,b6 as Nt,r as we,b7 as Cn,w as Tn,b8 as $e,b as mt,a4 as it,U as gt,a0 as st,a1 as ee,a2 as te,a3 as ne,Z as Rt,b9 as et,ba as Sn,bb as Lt,af as fe,bc as Ie,bd as Mn,be as An,bf as Fe,n as ht,D as En,a_ as xn,b0 as Vn,j as In,al as Fn,am as Bn,V as On,q as X,bg as vt,a6 as Nn}from"./index-DqTFJ56J.js";import{V as Rn}from"./index-X2QuGpIN.js";import{V as Dt}from"./VDataTable-BS9zS8Fo.js";import{_ as Ut}from"./OAuthManager-Dk_b_l7D.js";import{_ as Wt}from"./EmailManager-1Q7IPeLA.js";import{C as Ln,V as Un}from"./VSheet-CLrA5QOr.js";import{u as Wn,a as Yn,b as zn,c as qn,g as Hn}from"./accountService-fQ_kKeV9.js";import{V as jn}from"./VFileInput-DY0mWOxw.js";import{_ as Yt,r as Pt}from"./RegionSelector-BlJYE0mT.js";import{_ as zt}from"./ProjectSelector-COI2wXFX.js";import{V as Xn}from"./VTextarea-DCEsvZBe.js";import{a as Gn,_ as Jn}from"./UserFollowers-BEj5_Z2j.js";import{_ as Qn}from"./UserBlocked-6MznKp9l.js";import"https://static.geetest.com/v4/gt4.js";import"./VTable-DgaFoqcJ.js";import"./filter-DxbJNipU.js";function Kn(t,e){const r={};return e&&(r["X-Sudo-Token"]=e),ze({url:"/accounttoken/create",method:"post",data:t,headers:r})}function Zn(){return ze({url:"/accounttoken/list",method:"get"})}function $n(t){return ze({url:`/accounttoken/delete/${t}`,method:"delete"})}function er(t){return ze({url:`/accounttoken/revoke/${t}`,method:"post"})}const tr={name:"TokenManager",data(){return{loading:!1,creating:!1,tokens:[],createFormValid:!1,createForm:{name:"",expires_in:86400},showNewTokenDialog:!1,newToken:"",confirmDialog:{show:!1,title:"",message:"",color:"primary",confirmText:"确认",callback:null},expirationOptions:[{label:"1小时",value:3600},{label:"24小时",value:86400},{label:"7天",value:604800},{label:"30天",value:2592e3},{label:"90天",value:7776e3},{label:"永不过期",value:-1}],nameRules:[t=>!!t||"令牌名称不能为空",t=>t.length<=50||"令牌名称不能超过50个字符",t=>t.length>=2||"令牌名称至少2个字符"]}},setup(){return{sudoManager:qe()}},async mounted(){await this.loadTokens()},methods:{async loadTokens(){this.loading=!0;try{const t=await Zn();this.tokens=t.data.data||[]}catch(t){this.$emit("error",t)}finally{this.loading=!1}},async createToken(){this.creating=!0;try{const t=await this.sudoManager.requireSudo({title:"创建令牌",subtitle:"创建个人访问令牌是一个敏感操作，需要验证您的身份。",persistent:!0}),e=await Kn(this.createForm,t);this.newToken=e.data.data.token,this.showNewTokenDialog=!0,this.createForm.name="",this.createForm.expires_in=86400,await this.loadTokens(),this.$emit("token-created",e)}catch(t){t.type!=="cancel"&&this.$emit("error",t)}finally{this.creating=!1}},async deleteToken(t){this.confirmDialog={show:!0,title:"删除令牌",message:"确定要删除这个令牌吗？此操作不可撤销。",color:"error",confirmText:"删除",callback:async()=>{try{await $n(t),await this.loadTokens(),this.$emit("token-deleted",{id:t})}catch(e){this.$emit("error",e)}}}},async revokeToken(t){this.confirmDialog={show:!0,title:"吊销令牌",message:"确定要吊销这个令牌吗？吊销后令牌将无法使用。",color:"warning",confirmText:"吊销",callback:async()=>{try{await er(t),await this.loadTokens(),this.$emit("token-revoked",{id:t})}catch(e){this.$emit("error",e)}}}},copyToken(){navigator.clipboard.writeText(this.newToken).then(()=>{this.$toast.add({severity:"success",summary:"复制成功",detail:"令牌已复制到剪贴板",life:3e3})})},formatDate(t){return t?new Date(t).toLocaleString("zh-CN"):""},isExpired(t){return t.is_revoked||!t.expires_at?!1:new Date(t.expires_at)<new Date},handleConfirmDialogCancel(){this.confirmDialog.show=!1,this.confirmDialog.callback=null},async handleConfirmDialogConfirm(){this.confirmDialog.loading=!0;try{this.confirmDialog.callback&&await this.confirmDialog.callback()}finally{this.confirmDialog.show=!1,this.confirmDialog.callback=null,this.confirmDialog.loading=!1}}}},nr={key:0,class:"text-center pa-4"},rr={key:1,class:"text-center pa-4"},ar={key:2},or={class:"d-flex flex-column"},ir={key:0},sr={key:1},lr={key:0,class:"text-grey"},ur={class:"mt-4"},dr={class:"text-h6"};function cr(t,e,r,a,n,o){return k(),F("div",null,[i(R,{class:"mb-4",border:""},{default:s(()=>[i(L,{class:"d-flex align-center"},{default:s(()=>[i(A,{class:"mr-2"},{default:s(()=>[...e[6]||(e[6]=[c("mdi-key-plus",-1)])]),_:1}),e[7]||(e[7]=c(" 创建新令牌 ",-1))]),_:1}),i(N,null,{default:s(()=>[i(He,{modelValue:n.createFormValid,"onUpdate:modelValue":e[2]||(e[2]=l=>n.createFormValid=l),onSubmit:je(o.createToken,["prevent"])},{default:s(()=>[i(ge,null,{default:s(()=>[i(x,{cols:"12",md:"6"},{default:s(()=>[i(U,{modelValue:n.createForm.name,"onUpdate:modelValue":e[0]||(e[0]=l=>n.createForm.name=l),rules:n.nameRules,counter:50,density:"comfortable",label:"令牌名称",placeholder:"例如：我的API令牌",required:"",variant:"outlined"},null,8,["modelValue","rules"])]),_:1}),i(x,{cols:"12",md:"6"},{default:s(()=>[i(Ot,{modelValue:n.createForm.expires_in,"onUpdate:modelValue":e[1]||(e[1]=l=>n.createForm.expires_in=l),items:n.expirationOptions,density:"comfortable","item-title":"label","item-value":"value",label:"过期时间",variant:"outlined"},null,8,["modelValue","items"])]),_:1}),i(x,{cols:"12"},{default:s(()=>[i(S,{disabled:!n.createFormValid||n.creating,loading:n.creating,color:"primary",type:"submit"},{default:s(()=>[i(A,{class:"mr-2"},{default:s(()=>[...e[8]||(e[8]=[c("mdi-key-plus",-1)])]),_:1}),e[9]||(e[9]=c(" 创建令牌 ",-1))]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue","onSubmit"])]),_:1})]),_:1}),i(R,{border:""},{default:s(()=>[i(L,{class:"d-flex align-center"},{default:s(()=>[i(A,{class:"mr-2"},{default:s(()=>[...e[10]||(e[10]=[c("mdi-key",-1)])]),_:1}),e[11]||(e[11]=c(" 我的令牌 ",-1)),i(de),i(S,{loading:n.loading,icon:"mdi-refresh",variant:"text",onClick:o.loadTokens},null,8,["loading","onClick"])]),_:1}),i(N,null,{default:s(()=>[n.loading?(k(),F("div",nr,[i(ft,{indeterminate:""})])):n.tokens.length===0?(k(),F("div",rr,[i(A,{size:"64",color:"grey"},{default:s(()=>[...e[12]||(e[12]=[c("mdi-key-off",-1)])]),_:1}),e[13]||(e[13]=m("p",{class:"text-grey mt-2"},"暂无令牌",-1))])):(k(),F("div",ar,[i(ke,null,{default:s(()=>[(k(!0),F(ve,null,Xe(n.tokens,l=>(k(),E(Y,{key:l.id,class:"mb-2"},{prepend:s(()=>[i(A,{color:l.is_revoked?"error":"success",icon:l.is_revoked?"mdi-key-off":"mdi-key"},null,8,["color","icon"])]),append:s(()=>[i(Dn,null,{activator:s(({props:u})=>[i(S,Pn({icon:"mdi-dots-vertical",variant:"text"},{ref_for:!0},u),null,16)]),default:s(()=>[i(ke,null,{default:s(()=>[l.is_revoked?q("",!0):(k(),E(Y,{key:0,onClick:u=>o.revokeToken(l.id)},{prepend:s(()=>[i(A,null,{default:s(()=>[...e[16]||(e[16]=[c("mdi-key-off",-1)])]),_:1})]),default:s(()=>[i(z,null,{default:s(()=>[...e[17]||(e[17]=[c("吊销令牌",-1)])]),_:1})]),_:1},8,["onClick"])),i(Y,{onClick:u=>o.deleteToken(l.id),color:"error"},{prepend:s(()=>[i(A,null,{default:s(()=>[...e[18]||(e[18]=[c("mdi-delete",-1)])]),_:1})]),default:s(()=>[i(z,null,{default:s(()=>[...e[19]||(e[19]=[c("删除令牌",-1)])]),_:1})]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024)]),default:s(()=>[i(z,null,{default:s(()=>[c(P(l.name)+" ",1),l.is_revoked?(k(),E(re,{key:0,color:"error",size:"small",class:"ml-2"},{default:s(()=>[...e[14]||(e[14]=[c(" 已吊销 ",-1)])]),_:1})):o.isExpired(l)?(k(),E(re,{key:1,color:"warning",size:"small",class:"ml-2"},{default:s(()=>[...e[15]||(e[15]=[c(" 已过期 ",-1)])]),_:1})):q("",!0)]),_:2},1024),i(G,null,{default:s(()=>[m("div",or,[m("span",null,"创建时间："+P(o.formatDate(l.created_at)),1),l.expires_at?(k(),F("span",ir," 过期时间："+P(o.formatDate(l.expires_at)),1)):q("",!0),l.last_used_at?(k(),F("span",sr,[c(" 最后使用："+P(o.formatDate(l.last_used_at))+" ",1),l.last_used_ip?(k(),F("span",lr," ("+P(l.last_used_ip)+") ",1)):q("",!0)])):q("",!0)])]),_:2},1024)]),_:2},1024))),128))]),_:1})]))]),_:1})]),_:1}),i(pe,{modelValue:n.showNewTokenDialog,"onUpdate:modelValue":e[4]||(e[4]=l=>n.showNewTokenDialog=l),"max-width":"600"},{default:s(()=>[i(R,null,{default:s(()=>[i(L,{class:"d-flex align-center"},{default:s(()=>[i(A,{class:"mr-2",color:"success"},{default:s(()=>[...e[20]||(e[20]=[c("mdi-check-circle",-1)])]),_:1}),e[21]||(e[21]=c(" 令牌创建成功 ",-1))]),_:1}),i(N,null,{default:s(()=>[i(ye,{type:"warning",variant:"tonal",class:"mb-4"},{default:s(()=>[...e[22]||(e[22]=[m("strong",null,"重要提示：",-1),c("令牌只会显示一次，请立即复制并妥善保存！ ",-1)])]),_:1}),i(U,{"model-value":n.newToken,density:"comfortable",label:"新令牌",readonly:"",variant:"outlined"},{append:s(()=>[i(S,{icon:"mdi-content-copy",variant:"text",onClick:o.copyToken},null,8,["onClick"])]),_:1},8,["model-value"]),m("div",ur,[e[25]||(e[25]=m("h4",null,"使用方式：",-1)),i(Rn,{class:"mt-2"},{default:s(()=>[e[23]||(e[23]=m("div",null,"Authorization Header:",-1)),m("div",null,"Authorization: Bearer "+P(n.newToken),1),e[24]||(e[24]=m("div",{class:"mt-2"},"或 Query Parameter:",-1)),m("div",null,"?token="+P(n.newToken),1)]),_:1})])]),_:1}),i(ce,null,{default:s(()=>[i(de),i(S,{color:"primary",onClick:e[3]||(e[3]=l=>n.showNewTokenDialog=!1)},{default:s(()=>[...e[26]||(e[26]=[c(" 确定 ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),i(pe,{modelValue:n.confirmDialog.show,"onUpdate:modelValue":e[5]||(e[5]=l=>n.confirmDialog.show=l),"max-width":"400"},{default:s(()=>[i(R,null,{default:s(()=>[i(L,{class:"d-flex align-center"},{default:s(()=>[i(A,{color:n.confirmDialog.color,class:"mr-2"},{default:s(()=>[...e[27]||(e[27]=[c("mdi-alert",-1)])]),_:1},8,["color"]),m("span",dr,P(n.confirmDialog.title),1)]),_:1}),i(N,null,{default:s(()=>[m("p",null,P(n.confirmDialog.message),1)]),_:1}),i(ce,null,{default:s(()=>[i(de),i(S,{variant:"text",onClick:o.handleConfirmDialogCancel},{default:s(()=>[...e[28]||(e[28]=[c(" 取消 ",-1)])]),_:1},8,["onClick"]),i(S,{color:n.confirmDialog.color,loading:n.confirmDialog.loading,onClick:o.handleConfirmDialogConfirm},{default:s(()=>[c(P(n.confirmDialog.confirmText),1)]),_:1},8,["color","loading","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}const qt=K(tr,[["render",cr],["__scopeId","data-v-71af54e0"]]),fr={name:"NotificationSettingsDialog",props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(t,{emit:e}){const r=_n({get:()=>t.modelValue,set:h=>e("update:modelValue",h)}),a=Nt(),n=we(!1),o=we(!1),l=Cn({browser:"Unknown",os:"Unknown"}),u=we([]),d=we(null),f=()=>{switch(a.pushStatus.permission){case"granted":return"success";case"denied":return"error";default:return"info"}},g=()=>{switch(a.pushStatus.permission){case"granted":return"通知权限已授予，您可以接收推送通知";case"denied":return"通知权限被拒绝，请在浏览器设置中手动开启";default:return"需要您的授权才能发送推送通知"}},_=h=>{if(!h)return"mdi-cellphone";const{browser:C,os:b}=h;return b!=null&&b.includes("Android")||b!=null&&b.includes("iOS")?"mdi-cellphone":b!=null&&b.includes("Windows")||b!=null&&b.includes("Mac")||b!=null&&b.includes("Linux")?"mdi-laptop":"mdi-web"},y=h=>h?new Date(h).toLocaleString():"未知",w=async()=>{n.value=!0;try{const h=await $e.getServerSubscriptions();u.value=h.subscriptions||[],a.pushStatus.subscription&&(d.value=u.value.find(C=>C.endpoint===a.pushStatus.subscription.endpoint))}catch(h){console.error("加载订阅列表失败:",h),et("加载设备列表失败","error")}finally{n.value=!1}},p=async h=>{try{await $e.unregisterWithServer({endpoint:h.endpoint}),await w(),et("设备已移除","success")}catch(C){console.error("移除订阅失败:",C),et("移除设备失败","error")}};return Tn(r,async h=>{if(h){await a.loadPushStatus(),await w(),await a.loadUnreadCount();const C=$e.getDeviceInfo();Object.assign(l,C)}}),mt(()=>{a.loadPushStatus()}),{dialog:r,showCleanupDialog:o,subscriptionsLoading:n,deviceInfo:l,subscriptions:u,subscriptionInfo:d,getPermissionAlertType:f,getPermissionText:g,getDeviceIcon:_,formatDate:y,loadSubscriptions:w,removeSubscription:p,...a}}},mr={key:0,class:"text-center py-4"},gr={class:"d-flex align-center justify-space-between mb-4"},hr={class:"text-body-2 text-grey"},yr={key:0,class:"text-center py-4"},wr={key:1,class:"text-center py-4"},pr={class:"d-flex align-center justify-space-between"},br={class:"text-body-2 text-grey"};function kr(t,e,r,a,n,o){return k(),E(pe,{modelValue:a.dialog,"onUpdate:modelValue":e[2]||(e[2]=l=>a.dialog=l),"max-width":"800px",scrollable:""},{default:s(()=>[i(R,null,{default:s(()=>[i(L,{class:"d-flex align-center justify-space-between"},{default:s(()=>[m("div",null,[i(A,{start:""},{default:s(()=>[...e[3]||(e[3]=[c("mdi-bell-cog",-1)])]),_:1}),e[4]||(e[4]=c(" 通知设置 ",-1))]),i(S,{icon:"",variant:"text",onClick:e[0]||(e[0]=l=>a.dialog=!1)},{default:s(()=>[i(A,null,{default:s(()=>[...e[5]||(e[5]=[c("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),i(it),i(N,null,{default:s(()=>[i(gt,null,{default:s(()=>[i(ge,null,{default:s(()=>[i(x,{cols:"12"},{default:s(()=>[i(R,{variant:"outlined"},{default:s(()=>[i(L,{class:"text-h6"},{default:s(()=>[i(A,{start:""},{default:s(()=>[...e[6]||(e[6]=[c("mdi-web",-1)])]),_:1}),e[7]||(e[7]=c(" 浏览器推送通知 ",-1))]),_:1}),i(N,null,{default:s(()=>[t.pushStatus.supported?(k(),F(ve,{key:1},[i(ye,{type:a.getPermissionAlertType(),text:a.getPermissionText(),class:"mb-4"},null,8,["type","text"]),m("div",gr,[m("div",null,[e[10]||(e[10]=m("div",{class:"text-subtitle-1"},"推送通知状态",-1)),m("div",hr,P(t.pushStatus.subscribed?"已启用":"未启用"),1)]),i(S,{color:t.pushStatus.subscribed?"error":"primary",loading:t.pushLoading,disabled:t.pushStatus.permission==="denied",onClick:t.togglePushNotification},{default:s(()=>[c(P(t.pushStatus.subscribed?"关闭推送":"开启推送"),1)]),_:1},8,["color","loading","disabled","onClick"])]),t.pushStatus.subscribed?(k(),E(st,{key:0,variant:"accordion"},{default:s(()=>[i(ee,null,{default:s(()=>[i(te,null,{default:s(()=>[i(A,{start:""},{default:s(()=>[...e[11]||(e[11]=[c("mdi-information",-1)])]),_:1}),e[12]||(e[12]=c(" 设备信息 ",-1))]),_:1}),i(ne,null,{default:s(()=>[i(ke,{density:"compact"},{default:s(()=>[i(Y,null,{default:s(()=>[i(z,null,{default:s(()=>[...e[13]||(e[13]=[c("浏览器",-1)])]),_:1}),i(G,null,{default:s(()=>[c(P(a.deviceInfo.browser),1)]),_:1})]),_:1}),i(Y,null,{default:s(()=>[i(z,null,{default:s(()=>[...e[14]||(e[14]=[c("操作系统",-1)])]),_:1}),i(G,null,{default:s(()=>[c(P(a.deviceInfo.os),1)]),_:1})]),_:1}),i(Y,null,{default:s(()=>[i(z,null,{default:s(()=>[...e[15]||(e[15]=[c("订阅时间",-1)])]),_:1}),i(G,null,{default:s(()=>{var l;return[c(P(a.formatDate((l=a.subscriptionInfo)==null?void 0:l.created_at)),1)]}),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):q("",!0)],64)):(k(),F("div",mr,[i(A,{color:"warning",size:"large"},{default:s(()=>[...e[8]||(e[8]=[c("mdi-alert-circle",-1)])]),_:1}),e[9]||(e[9]=m("div",{class:"text-body-2 mt-2"},"您的浏览器不支持推送通知功能",-1))]))]),_:1})]),_:1})]),_:1}),t.pushStatus.supported?(k(),E(x,{key:0,cols:"12"},{default:s(()=>[i(R,{variant:"outlined"},{default:s(()=>[i(L,{class:"text-h6"},{default:s(()=>[i(A,{start:""},{default:s(()=>[...e[16]||(e[16]=[c("mdi-devices",-1)])]),_:1}),e[17]||(e[17]=c(" 已注册的设备 ",-1)),i(S,{icon:"mdi-refresh",size:"small",variant:"text",loading:a.subscriptionsLoading,onClick:a.loadSubscriptions,class:"ml-2"},null,8,["loading","onClick"])]),_:1}),i(N,null,{default:s(()=>[a.subscriptionsLoading?(k(),F("div",yr,[i(ft,{indeterminate:""})])):a.subscriptions.length===0?(k(),F("div",wr,[i(A,{color:"grey",size:"large"},{default:s(()=>[...e[18]||(e[18]=[c("mdi-cellphone-off",-1)])]),_:1}),e[19]||(e[19]=m("div",{class:"text-body-2 text-grey mt-2"},"暂无已注册的设备",-1))])):(k(),E(ke,{key:2},{default:s(()=>[(k(!0),F(ve,null,Xe(a.subscriptions,l=>(k(),E(Y,{key:l.id},{prepend:s(()=>[i(Rt,{color:"primary"},{default:s(()=>[i(A,null,{default:s(()=>[c(P(a.getDeviceIcon(l.device_info)),1)]),_:2},1024)]),_:2},1024)]),append:s(()=>[i(S,{icon:"mdi-delete",size:"small",color:"error",variant:"text",onClick:u=>a.removeSubscription(l)},null,8,["onClick"])]),default:s(()=>[i(z,null,{default:s(()=>{var u,d;return[c(P(((u=l.device_info)==null?void 0:u.browser)||"未知浏览器")+" ("+P(((d=l.device_info)==null?void 0:d.os)||"未知系统")+") ",1)]}),_:2},1024),i(G,null,{default:s(()=>[c(" 注册时间: "+P(a.formatDate(l.created_at))+" ",1),e[20]||(e[20]=m("br",null,null,-1)),c(" 最后使用: "+P(a.formatDate(l.last_used_at)),1)]),_:2},1024)]),_:2},1024))),128))]),_:1}))]),_:1})]),_:1})]),_:1})):q("",!0),i(x,{cols:"12"},{default:s(()=>[i(R,{variant:"outlined"},{default:s(()=>[i(L,{class:"text-h6"},{default:s(()=>[i(A,{start:""},{default:s(()=>[...e[21]||(e[21]=[c("mdi-history",-1)])]),_:1}),e[22]||(e[22]=c(" 通知管理 ",-1))]),_:1}),i(N,null,{default:s(()=>[m("div",pr,[m("div",null,[e[23]||(e[23]=m("div",{class:"text-subtitle-1"},"未读通知",-1)),m("div",br,P(t.unreadCount)+" 条未读",1)]),i(S,{color:"primary",disabled:t.unreadCount===0,onClick:t.markAllAsRead},{default:s(()=>[...e[24]||(e[24]=[c(" 全部标记为已读 ",-1)])]),_:1},8,["disabled","onClick"])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),i(it),i(ce,null,{default:s(()=>[i(de),i(S,{color:"primary",onClick:e[1]||(e[1]=l=>a.dialog=!1)},{default:s(()=>[...e[25]||(e[25]=[c("关闭",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}const Ht=K(fr,[["render",kr],["__scopeId","data-v-b483371a"]]),vr={name:"NotificationSettingsCard",components:{NotificationsCard:Sn,NotificationSettingsDialog:Ht},setup(){const t=we(!1),e=Nt(),r=()=>{t.value=!0},a=async()=>{await e.loadUnreadCount(),await e.loadPushStatus()};return mt(async()=>{await e.loadPushStatus(),await e.loadUnreadCount()}),{showSettingsDialog:t,openSettings:r,refreshNotifications:a,...e}}};function Dr(t,e,r,a,n,o){const l=Ht;return k(),E(gt,null,{default:s(()=>[i(ge,null,{default:s(()=>[i(x,{cols:"12",md:"6"},{default:s(()=>[i(R,null,{default:s(()=>[i(L,null,{default:s(()=>[i(A,{start:""},{default:s(()=>[...e[1]||(e[1]=[c("mdi-bell",-1)])]),_:1}),e[2]||(e[2]=c(" 通知概览 ",-1))]),_:1}),i(N,null,{default:s(()=>[i(ke,null,{default:s(()=>[i(Y,null,{prepend:s(()=>[i(A,{color:"primary"},{default:s(()=>[...e[3]||(e[3]=[c("mdi-email",-1)])]),_:1})]),default:s(()=>[i(z,null,{default:s(()=>[...e[4]||(e[4]=[c("未读通知",-1)])]),_:1}),i(G,null,{default:s(()=>[c(P(t.unreadCount)+" 条",1)]),_:1})]),_:1}),i(Y,null,{prepend:s(()=>[i(A,{color:t.pushStatus.subscribed?"success":"grey"},{default:s(()=>[...e[5]||(e[5]=[c(" mdi-web ",-1)])]),_:1},8,["color"])]),default:s(()=>[i(z,null,{default:s(()=>[...e[6]||(e[6]=[c("浏览器推送",-1)])]),_:1}),i(G,null,{default:s(()=>[c(P(t.pushStatus.subscribed?"已开启":"未开启"),1)]),_:1})]),_:1}),i(Y,null,{prepend:s(()=>[i(A,{color:t.pushStatus.permission==="granted"?"success":"warning"},{default:s(()=>[...e[7]||(e[7]=[c(" mdi-shield-check ",-1)])]),_:1},8,["color"])]),default:s(()=>[i(z,null,{default:s(()=>[...e[8]||(e[8]=[c("通知权限",-1)])]),_:1}),i(G,null,{default:s(()=>[c(P(t.getPermissionText(t.pushStatus.permission)),1)]),_:1})]),_:1})]),_:1})]),_:1}),i(ce,null,{default:s(()=>[i(S,{color:"primary",to:"/app/notifications","prepend-icon":"mdi-bell"},{default:s(()=>[...e[9]||(e[9]=[c(" 查看所有通知 ",-1)])]),_:1})]),_:1})]),_:1})]),_:1}),i(x,{cols:"12",md:"6"},{default:s(()=>[i(R,null,{default:s(()=>[i(L,null,{default:s(()=>[i(A,{start:""},{default:s(()=>[...e[10]||(e[10]=[c("mdi-cog",-1)])]),_:1}),e[11]||(e[11]=c(" 快速操作 ",-1))]),_:1}),i(N,null,{default:s(()=>[i(ke,null,{default:s(()=>[i(Y,{onClick:t.togglePushNotification,disabled:t.pushLoading},{prepend:s(()=>[t.pushLoading?(k(),E(ft,{key:0,indeterminate:"",size:"24"})):(k(),E(A,{key:1,color:t.pushStatus.subscribed?"success":"primary"},{default:s(()=>[c(P(t.pushStatus.subscribed?"mdi-bell-off":"mdi-bell"),1)]),_:1},8,["color"]))]),default:s(()=>[i(z,null,{default:s(()=>[c(P(t.pushStatus.subscribed?"关闭浏览器推送":"开启浏览器推送"),1)]),_:1}),i(G,null,{default:s(()=>[c(P(t.pushStatus.subscribed?"停止接收推送通知":"开始接收推送通知"),1)]),_:1})]),_:1},8,["onClick","disabled"]),i(Y,{onClick:a.openSettings},{prepend:s(()=>[i(A,{color:"primary"},{default:s(()=>[...e[12]||(e[12]=[c("mdi-cog",-1)])]),_:1})]),default:s(()=>[i(z,null,{default:s(()=>[...e[13]||(e[13]=[c("高级设置",-1)])]),_:1}),i(G,null,{default:s(()=>[...e[14]||(e[14]=[c("管理设备和详细设置",-1)])]),_:1})]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),i(l,{modelValue:a.showSettingsDialog,"onUpdate:modelValue":e[0]||(e[0]=u=>a.showSettingsDialog=u)},null,8,["modelValue"])]),_:1})}const jt=K(vr,[["render",Dr],["__scopeId","data-v-78fa0014"]]),Xt=6048e5,Pr=864e5,Be=43200,_t=1440,Ct=Symbol.for("constructDateFrom");function se(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&Ct in t?t[Ct](e):t instanceof Date?new t.constructor(e):new Date(e)}function O(t,e){return se(e||t,t)}let _r={};function Ae(){return _r}function me(t,e){var u,d,f,g;const r=Ae(),a=(e==null?void 0:e.weekStartsOn)??((d=(u=e==null?void 0:e.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??r.weekStartsOn??((g=(f=r.locale)==null?void 0:f.options)==null?void 0:g.weekStartsOn)??0,n=O(t,e==null?void 0:e.in),o=n.getDay(),l=(o<a?7:0)+o-a;return n.setDate(n.getDate()-l),n.setHours(0,0,0,0),n}function Le(t,e){return me(t,{...e,weekStartsOn:1})}function Gt(t,e){const r=O(t,e==null?void 0:e.in),a=r.getFullYear(),n=se(r,0);n.setFullYear(a+1,0,4),n.setHours(0,0,0,0);const o=Le(n),l=se(r,0);l.setFullYear(a,0,4),l.setHours(0,0,0,0);const u=Le(l);return r.getTime()>=o.getTime()?a+1:r.getTime()>=u.getTime()?a:a-1}function Ue(t){const e=O(t),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+t-+r}function Ee(t,...e){const r=se.bind(null,t||e.find(a=>typeof a=="object"));return e.map(r)}function Tt(t,e){const r=O(t,e==null?void 0:e.in);return r.setHours(0,0,0,0),r}function Cr(t,e,r){const[a,n]=Ee(r==null?void 0:r.in,t,e),o=Tt(a),l=Tt(n),u=+o-Ue(o),d=+l-Ue(l);return Math.round((u-d)/Pr)}function Tr(t,e){const r=Gt(t,e),a=se(t,0);return a.setFullYear(r,0,4),a.setHours(0,0,0,0),Le(a)}function Re(t,e){const r=+O(t)-+O(e);return r<0?-1:r>0?1:r}function Sr(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function Mr(t){return!(!Sr(t)&&typeof t!="number"||isNaN(+O(t)))}function Ar(t,e,r){const[a,n]=Ee(r==null?void 0:r.in,t,e),o=a.getFullYear()-n.getFullYear(),l=a.getMonth()-n.getMonth();return o*12+l}function Er(t){return e=>{const a=(t?Math[t]:Math.trunc)(e);return a===0?0:a}}function xr(t,e){return+O(t)-+O(e)}function Vr(t,e){const r=O(t,e==null?void 0:e.in);return r.setHours(23,59,59,999),r}function Ir(t,e){const r=O(t,e==null?void 0:e.in),a=r.getMonth();return r.setFullYear(r.getFullYear(),a+1,0),r.setHours(23,59,59,999),r}function Fr(t,e){const r=O(t,e==null?void 0:e.in);return+Vr(r,e)==+Ir(r,e)}function Br(t,e,r){const[a,n,o]=Ee(r==null?void 0:r.in,t,t,e),l=Re(n,o),u=Math.abs(Ar(n,o));if(u<1)return 0;n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-l*u);let d=Re(n,o)===-l;Fr(a)&&u===1&&Re(a,o)===1&&(d=!1);const f=l*(u-+d);return f===0?0:f}function Or(t,e,r){const a=xr(t,e)/1e3;return Er(r==null?void 0:r.roundingMethod)(a)}function Nr(t,e){const r=O(t,e==null?void 0:e.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}const Rr={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Lr=(t,e,r)=>{let a;const n=Rr[t];return typeof n=="string"?a=n:e===1?a=n.one:a=n.other.replace("{{count}}",e.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+a:a+" ago":a};function be(t){return(e={})=>{const r=e.width?String(e.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const Ur={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Wr={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Yr={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},zr={date:be({formats:Ur,defaultWidth:"full"}),time:be({formats:Wr,defaultWidth:"full"}),dateTime:be({formats:Yr,defaultWidth:"full"})},qr={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Hr=(t,e,r,a)=>qr[t];function J(t){return(e,r)=>{const a=r!=null&&r.context?String(r.context):"standalone";let n;if(a==="formatting"&&t.formattingValues){const l=t.defaultFormattingWidth||t.defaultWidth,u=r!=null&&r.width?String(r.width):l;n=t.formattingValues[u]||t.formattingValues[l]}else{const l=t.defaultWidth,u=r!=null&&r.width?String(r.width):t.defaultWidth;n=t.values[u]||t.values[l]}const o=t.argumentCallback?t.argumentCallback(e):e;return n[o]}}const jr={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Xr={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Gr={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Jr={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Qr={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Kr={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Zr=(t,e)=>{const r=Number(t),a=r%100;if(a>20||a<10)switch(a%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},$r={ordinalNumber:Zr,era:J({values:jr,defaultWidth:"wide"}),quarter:J({values:Xr,defaultWidth:"wide",argumentCallback:t=>t-1}),month:J({values:Gr,defaultWidth:"wide"}),day:J({values:Jr,defaultWidth:"wide"}),dayPeriod:J({values:Qr,defaultWidth:"wide",formattingValues:Kr,defaultFormattingWidth:"wide"})};function Q(t){return(e,r={})=>{const a=r.width,n=a&&t.matchPatterns[a]||t.matchPatterns[t.defaultMatchWidth],o=e.match(n);if(!o)return null;const l=o[0],u=a&&t.parsePatterns[a]||t.parsePatterns[t.defaultParseWidth],d=Array.isArray(u)?ta(u,_=>_.test(l)):ea(u,_=>_.test(l));let f;f=t.valueCallback?t.valueCallback(d):d,f=r.valueCallback?r.valueCallback(f):f;const g=e.slice(l.length);return{value:f,rest:g}}}function ea(t,e){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return r}function ta(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return r}function Jt(t){return(e,r={})=>{const a=e.match(t.matchPattern);if(!a)return null;const n=a[0],o=e.match(t.parsePattern);if(!o)return null;let l=t.valueCallback?t.valueCallback(o[0]):o[0];l=r.valueCallback?r.valueCallback(l):l;const u=e.slice(n.length);return{value:l,rest:u}}}const na=/^(\d+)(th|st|nd|rd)?/i,ra=/\d+/i,aa={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},oa={any:[/^b/i,/^(a|c)/i]},ia={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},sa={any:[/1/i,/2/i,/3/i,/4/i]},la={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},ua={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},da={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},ca={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},fa={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},ma={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},ga={ordinalNumber:Jt({matchPattern:na,parsePattern:ra,valueCallback:t=>parseInt(t,10)}),era:Q({matchPatterns:aa,defaultMatchWidth:"wide",parsePatterns:oa,defaultParseWidth:"any"}),quarter:Q({matchPatterns:ia,defaultMatchWidth:"wide",parsePatterns:sa,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Q({matchPatterns:la,defaultMatchWidth:"wide",parsePatterns:ua,defaultParseWidth:"any"}),day:Q({matchPatterns:da,defaultMatchWidth:"wide",parsePatterns:ca,defaultParseWidth:"any"}),dayPeriod:Q({matchPatterns:fa,defaultMatchWidth:"any",parsePatterns:ma,defaultParseWidth:"any"})},Qt={code:"en-US",formatDistance:Lr,formatLong:zr,formatRelative:Hr,localize:$r,match:ga,options:{weekStartsOn:0,firstWeekContainsDate:1}};function ha(t,e){const r=O(t,e==null?void 0:e.in);return Cr(r,Nr(r))+1}function ya(t,e){const r=O(t,e==null?void 0:e.in),a=+Le(r)-+Tr(r);return Math.round(a/Xt)+1}function Kt(t,e){var g,_,y,w;const r=O(t,e==null?void 0:e.in),a=r.getFullYear(),n=Ae(),o=(e==null?void 0:e.firstWeekContainsDate)??((_=(g=e==null?void 0:e.locale)==null?void 0:g.options)==null?void 0:_.firstWeekContainsDate)??n.firstWeekContainsDate??((w=(y=n.locale)==null?void 0:y.options)==null?void 0:w.firstWeekContainsDate)??1,l=se((e==null?void 0:e.in)||t,0);l.setFullYear(a+1,0,o),l.setHours(0,0,0,0);const u=me(l,e),d=se((e==null?void 0:e.in)||t,0);d.setFullYear(a,0,o),d.setHours(0,0,0,0);const f=me(d,e);return+r>=+u?a+1:+r>=+f?a:a-1}function wa(t,e){var u,d,f,g;const r=Ae(),a=(e==null?void 0:e.firstWeekContainsDate)??((d=(u=e==null?void 0:e.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??r.firstWeekContainsDate??((g=(f=r.locale)==null?void 0:f.options)==null?void 0:g.firstWeekContainsDate)??1,n=Kt(t,e),o=se((e==null?void 0:e.in)||t,0);return o.setFullYear(n,0,a),o.setHours(0,0,0,0),me(o,e)}function pa(t,e){const r=O(t,e==null?void 0:e.in),a=+me(r,e)-+wa(r,e);return Math.round(a/Xt)+1}function M(t,e){const r=t<0?"-":"",a=Math.abs(t).toString().padStart(e,"0");return r+a}const oe={y(t,e){const r=t.getFullYear(),a=r>0?r:1-r;return M(e==="yy"?a%100:a,e.length)},M(t,e){const r=t.getMonth();return e==="M"?String(r+1):M(r+1,2)},d(t,e){return M(t.getDate(),e.length)},a(t,e){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,e){return M(t.getHours()%12||12,e.length)},H(t,e){return M(t.getHours(),e.length)},m(t,e){return M(t.getMinutes(),e.length)},s(t,e){return M(t.getSeconds(),e.length)},S(t,e){const r=e.length,a=t.getMilliseconds(),n=Math.trunc(a*Math.pow(10,r-3));return M(n,e.length)}},he={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},St={G:function(t,e,r){const a=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(a,{width:"abbreviated"});case"GGGGG":return r.era(a,{width:"narrow"});case"GGGG":default:return r.era(a,{width:"wide"})}},y:function(t,e,r){if(e==="yo"){const a=t.getFullYear(),n=a>0?a:1-a;return r.ordinalNumber(n,{unit:"year"})}return oe.y(t,e)},Y:function(t,e,r,a){const n=Kt(t,a),o=n>0?n:1-n;if(e==="YY"){const l=o%100;return M(l,2)}return e==="Yo"?r.ordinalNumber(o,{unit:"year"}):M(o,e.length)},R:function(t,e){const r=Gt(t);return M(r,e.length)},u:function(t,e){const r=t.getFullYear();return M(r,e.length)},Q:function(t,e,r){const a=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(a);case"QQ":return M(a,2);case"Qo":return r.ordinalNumber(a,{unit:"quarter"});case"QQQ":return r.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(a,{width:"wide",context:"formatting"})}},q:function(t,e,r){const a=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(a);case"qq":return M(a,2);case"qo":return r.ordinalNumber(a,{unit:"quarter"});case"qqq":return r.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(a,{width:"wide",context:"standalone"})}},M:function(t,e,r){const a=t.getMonth();switch(e){case"M":case"MM":return oe.M(t,e);case"Mo":return r.ordinalNumber(a+1,{unit:"month"});case"MMM":return r.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(a,{width:"wide",context:"formatting"})}},L:function(t,e,r){const a=t.getMonth();switch(e){case"L":return String(a+1);case"LL":return M(a+1,2);case"Lo":return r.ordinalNumber(a+1,{unit:"month"});case"LLL":return r.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(a,{width:"wide",context:"standalone"})}},w:function(t,e,r,a){const n=pa(t,a);return e==="wo"?r.ordinalNumber(n,{unit:"week"}):M(n,e.length)},I:function(t,e,r){const a=ya(t);return e==="Io"?r.ordinalNumber(a,{unit:"week"}):M(a,e.length)},d:function(t,e,r){return e==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):oe.d(t,e)},D:function(t,e,r){const a=ha(t);return e==="Do"?r.ordinalNumber(a,{unit:"dayOfYear"}):M(a,e.length)},E:function(t,e,r){const a=t.getDay();switch(e){case"E":case"EE":case"EEE":return r.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(a,{width:"short",context:"formatting"});case"EEEE":default:return r.day(a,{width:"wide",context:"formatting"})}},e:function(t,e,r,a){const n=t.getDay(),o=(n-a.weekStartsOn+8)%7||7;switch(e){case"e":return String(o);case"ee":return M(o,2);case"eo":return r.ordinalNumber(o,{unit:"day"});case"eee":return r.day(n,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(n,{width:"short",context:"formatting"});case"eeee":default:return r.day(n,{width:"wide",context:"formatting"})}},c:function(t,e,r,a){const n=t.getDay(),o=(n-a.weekStartsOn+8)%7||7;switch(e){case"c":return String(o);case"cc":return M(o,e.length);case"co":return r.ordinalNumber(o,{unit:"day"});case"ccc":return r.day(n,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(n,{width:"narrow",context:"standalone"});case"cccccc":return r.day(n,{width:"short",context:"standalone"});case"cccc":default:return r.day(n,{width:"wide",context:"standalone"})}},i:function(t,e,r){const a=t.getDay(),n=a===0?7:a;switch(e){case"i":return String(n);case"ii":return M(n,e.length);case"io":return r.ordinalNumber(n,{unit:"day"});case"iii":return r.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(a,{width:"short",context:"formatting"});case"iiii":default:return r.day(a,{width:"wide",context:"formatting"})}},a:function(t,e,r){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(t,e,r){const a=t.getHours();let n;switch(a===12?n=he.noon:a===0?n=he.midnight:n=a/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(t,e,r){const a=t.getHours();let n;switch(a>=17?n=he.evening:a>=12?n=he.afternoon:a>=4?n=he.morning:n=he.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(t,e,r){if(e==="ho"){let a=t.getHours()%12;return a===0&&(a=12),r.ordinalNumber(a,{unit:"hour"})}return oe.h(t,e)},H:function(t,e,r){return e==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):oe.H(t,e)},K:function(t,e,r){const a=t.getHours()%12;return e==="Ko"?r.ordinalNumber(a,{unit:"hour"}):M(a,e.length)},k:function(t,e,r){let a=t.getHours();return a===0&&(a=24),e==="ko"?r.ordinalNumber(a,{unit:"hour"}):M(a,e.length)},m:function(t,e,r){return e==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):oe.m(t,e)},s:function(t,e,r){return e==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):oe.s(t,e)},S:function(t,e){return oe.S(t,e)},X:function(t,e,r){const a=t.getTimezoneOffset();if(a===0)return"Z";switch(e){case"X":return At(a);case"XXXX":case"XX":return ue(a);case"XXXXX":case"XXX":default:return ue(a,":")}},x:function(t,e,r){const a=t.getTimezoneOffset();switch(e){case"x":return At(a);case"xxxx":case"xx":return ue(a);case"xxxxx":case"xxx":default:return ue(a,":")}},O:function(t,e,r){const a=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Mt(a,":");case"OOOO":default:return"GMT"+ue(a,":")}},z:function(t,e,r){const a=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Mt(a,":");case"zzzz":default:return"GMT"+ue(a,":")}},t:function(t,e,r){const a=Math.trunc(+t/1e3);return M(a,e.length)},T:function(t,e,r){return M(+t,e.length)}};function Mt(t,e=""){const r=t>0?"-":"+",a=Math.abs(t),n=Math.trunc(a/60),o=a%60;return o===0?r+String(n):r+String(n)+e+M(o,2)}function At(t,e){return t%60===0?(t>0?"-":"+")+M(Math.abs(t)/60,2):ue(t,e)}function ue(t,e=""){const r=t>0?"-":"+",a=Math.abs(t),n=M(Math.trunc(a/60),2),o=M(a%60,2);return r+n+e+o}const Et=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},Zt=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},ba=(t,e)=>{const r=t.match(/(P+)(p+)?/)||[],a=r[1],n=r[2];if(!n)return Et(t,e);let o;switch(a){case"P":o=e.dateTime({width:"short"});break;case"PP":o=e.dateTime({width:"medium"});break;case"PPP":o=e.dateTime({width:"long"});break;case"PPPP":default:o=e.dateTime({width:"full"});break}return o.replace("{{date}}",Et(a,e)).replace("{{time}}",Zt(n,e))},ka={p:Zt,P:ba},va=/^D+$/,Da=/^Y+$/,Pa=["D","DD","YY","YYYY"];function _a(t){return va.test(t)}function Ca(t){return Da.test(t)}function Ta(t,e,r){const a=Sa(t,e,r);if(console.warn(a),Pa.includes(t))throw new RangeError(a)}function Sa(t,e,r){const a=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${a} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Ma=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Aa=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Ea=/^'([^]*?)'?$/,xa=/''/g,Va=/[a-zA-Z]/;function xt(t,e,r){var g,_,y,w;const a=Ae(),n=a.locale??Qt,o=a.firstWeekContainsDate??((_=(g=a.locale)==null?void 0:g.options)==null?void 0:_.firstWeekContainsDate)??1,l=a.weekStartsOn??((w=(y=a.locale)==null?void 0:y.options)==null?void 0:w.weekStartsOn)??0,u=O(t,r==null?void 0:r.in);if(!Mr(u))throw new RangeError("Invalid time value");let d=e.match(Aa).map(p=>{const h=p[0];if(h==="p"||h==="P"){const C=ka[h];return C(p,n.formatLong)}return p}).join("").match(Ma).map(p=>{if(p==="''")return{isToken:!1,value:"'"};const h=p[0];if(h==="'")return{isToken:!1,value:Ia(p)};if(St[h])return{isToken:!0,value:p};if(h.match(Va))throw new RangeError("Format string contains an unescaped latin alphabet character `"+h+"`");return{isToken:!1,value:p}});n.localize.preprocessor&&(d=n.localize.preprocessor(u,d));const f={firstWeekContainsDate:o,weekStartsOn:l,locale:n};return d.map(p=>{if(!p.isToken)return p.value;const h=p.value;(Ca(h)||_a(h))&&Ta(h,e,String(t));const C=St[h[0]];return C(u,h,n.localize,f)}).join("")}function Ia(t){const e=t.match(Ea);return e?e[1].replace(xa,"'"):t}function Fa(t,e,r){const a=Ae(),n=(r==null?void 0:r.locale)??a.locale??Qt,o=2520,l=Re(t,e);if(isNaN(l))throw new RangeError("Invalid time value");const u=Object.assign({},r,{addSuffix:r==null?void 0:r.addSuffix,comparison:l}),[d,f]=Ee(r==null?void 0:r.in,...l>0?[e,t]:[t,e]),g=Or(f,d),_=(Ue(f)-Ue(d))/1e3,y=Math.round((g-_)/60);let w;if(y<2)return r!=null&&r.includeSeconds?g<5?n.formatDistance("lessThanXSeconds",5,u):g<10?n.formatDistance("lessThanXSeconds",10,u):g<20?n.formatDistance("lessThanXSeconds",20,u):g<40?n.formatDistance("halfAMinute",0,u):g<60?n.formatDistance("lessThanXMinutes",1,u):n.formatDistance("xMinutes",1,u):y===0?n.formatDistance("lessThanXMinutes",1,u):n.formatDistance("xMinutes",y,u);if(y<45)return n.formatDistance("xMinutes",y,u);if(y<90)return n.formatDistance("aboutXHours",1,u);if(y<_t){const p=Math.round(y/60);return n.formatDistance("aboutXHours",p,u)}else{if(y<o)return n.formatDistance("xDays",1,u);if(y<Be){const p=Math.round(y/_t);return n.formatDistance("xDays",p,u)}else if(y<Be*2)return w=Math.round(y/Be),n.formatDistance("aboutXMonths",w,u)}if(w=Br(f,d),w<12){const p=Math.round(y/Be);return n.formatDistance("xMonths",p,u)}else{const p=w%12,h=Math.trunc(w/12);return p<3?n.formatDistance("aboutXYears",h,u):p<9?n.formatDistance("overXYears",h,u):n.formatDistance("almostXYears",h+1,u)}}function Ba(t,e,r){const[a,n]=Ee(r==null?void 0:r.in,t,e);return+me(a,r)==+me(n,r)}const Oa={lessThanXSeconds:{one:"不到 1 秒",other:"不到 {{count}} 秒"},xSeconds:{one:"1 秒",other:"{{count}} 秒"},halfAMinute:"半分钟",lessThanXMinutes:{one:"不到 1 分钟",other:"不到 {{count}} 分钟"},xMinutes:{one:"1 分钟",other:"{{count}} 分钟"},xHours:{one:"1 小时",other:"{{count}} 小时"},aboutXHours:{one:"大约 1 小时",other:"大约 {{count}} 小时"},xDays:{one:"1 天",other:"{{count}} 天"},aboutXWeeks:{one:"大约 1 个星期",other:"大约 {{count}} 个星期"},xWeeks:{one:"1 个星期",other:"{{count}} 个星期"},aboutXMonths:{one:"大约 1 个月",other:"大约 {{count}} 个月"},xMonths:{one:"1 个月",other:"{{count}} 个月"},aboutXYears:{one:"大约 1 年",other:"大约 {{count}} 年"},xYears:{one:"1 年",other:"{{count}} 年"},overXYears:{one:"超过 1 年",other:"超过 {{count}} 年"},almostXYears:{one:"将近 1 年",other:"将近 {{count}} 年"}},Na=(t,e,r)=>{let a;const n=Oa[t];return typeof n=="string"?a=n:e===1?a=n.one:a=n.other.replace("{{count}}",String(e)),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?a+"内":a+"前":a},Ra={full:"y'年'M'月'd'日' EEEE",long:"y'年'M'月'd'日'",medium:"yyyy-MM-dd",short:"yy-MM-dd"},La={full:"zzzz a h:mm:ss",long:"z a h:mm:ss",medium:"a h:mm:ss",short:"a h:mm"},Ua={full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},Wa={date:be({formats:Ra,defaultWidth:"full"}),time:be({formats:La,defaultWidth:"full"}),dateTime:be({formats:Ua,defaultWidth:"full"})};function Vt(t,e,r){const a="eeee p";return Ba(t,e,r)?a:t.getTime()>e.getTime()?"'下个'"+a:"'上个'"+a}const Ya={lastWeek:Vt,yesterday:"'昨天' p",today:"'今天' p",tomorrow:"'明天' p",nextWeek:Vt,other:"PP p"},za=(t,e,r,a)=>{const n=Ya[t];return typeof n=="function"?n(e,r,a):n},qa={narrow:["前","公元"],abbreviated:["前","公元"],wide:["公元前","公元"]},Ha={narrow:["1","2","3","4"],abbreviated:["第一季","第二季","第三季","第四季"],wide:["第一季度","第二季度","第三季度","第四季度"]},ja={narrow:["一","二","三","四","五","六","七","八","九","十","十一","十二"],abbreviated:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],wide:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]},Xa={narrow:["日","一","二","三","四","五","六"],short:["日","一","二","三","四","五","六"],abbreviated:["周日","周一","周二","周三","周四","周五","周六"],wide:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"]},Ga={narrow:{am:"上",pm:"下",midnight:"凌晨",noon:"午",morning:"早",afternoon:"下午",evening:"晚",night:"夜"},abbreviated:{am:"上午",pm:"下午",midnight:"凌晨",noon:"中午",morning:"早晨",afternoon:"中午",evening:"晚上",night:"夜间"},wide:{am:"上午",pm:"下午",midnight:"凌晨",noon:"中午",morning:"早晨",afternoon:"中午",evening:"晚上",night:"夜间"}},Ja={narrow:{am:"上",pm:"下",midnight:"凌晨",noon:"午",morning:"早",afternoon:"下午",evening:"晚",night:"夜"},abbreviated:{am:"上午",pm:"下午",midnight:"凌晨",noon:"中午",morning:"早晨",afternoon:"中午",evening:"晚上",night:"夜间"},wide:{am:"上午",pm:"下午",midnight:"凌晨",noon:"中午",morning:"早晨",afternoon:"中午",evening:"晚上",night:"夜间"}},Qa=(t,e)=>{const r=Number(t);switch(e==null?void 0:e.unit){case"date":return r.toString()+"日";case"hour":return r.toString()+"时";case"minute":return r.toString()+"分";case"second":return r.toString()+"秒";default:return"第 "+r.toString()}},Ka={ordinalNumber:Qa,era:J({values:qa,defaultWidth:"wide"}),quarter:J({values:Ha,defaultWidth:"wide",argumentCallback:t=>t-1}),month:J({values:ja,defaultWidth:"wide"}),day:J({values:Xa,defaultWidth:"wide"}),dayPeriod:J({values:Ga,defaultWidth:"wide",formattingValues:Ja,defaultFormattingWidth:"wide"})},Za=/^(第\s*)?\d+(日|时|分|秒)?/i,$a=/\d+/i,eo={narrow:/^(前)/i,abbreviated:/^(前)/i,wide:/^(公元前|公元)/i},to={any:[/^(前)/i,/^(公元)/i]},no={narrow:/^[1234]/i,abbreviated:/^第[一二三四]刻/i,wide:/^第[一二三四]刻钟/i},ro={any:[/(1|一)/i,/(2|二)/i,/(3|三)/i,/(4|四)/i]},ao={narrow:/^(一|二|三|四|五|六|七|八|九|十[二一])/i,abbreviated:/^(一|二|三|四|五|六|七|八|九|十[二一]|\d|1[12])月/i,wide:/^(一|二|三|四|五|六|七|八|九|十[二一])月/i},oo={narrow:[/^一/i,/^二/i,/^三/i,/^四/i,/^五/i,/^六/i,/^七/i,/^八/i,/^九/i,/^十(?!(一|二))/i,/^十一/i,/^十二/i],any:[/^一|1/i,/^二|2/i,/^三|3/i,/^四|4/i,/^五|5/i,/^六|6/i,/^七|7/i,/^八|8/i,/^九|9/i,/^十(?!(一|二))|10/i,/^十一|11/i,/^十二|12/i]},io={narrow:/^[一二三四五六日]/i,short:/^[一二三四五六日]/i,abbreviated:/^周[一二三四五六日]/i,wide:/^星期[一二三四五六日]/i},so={any:[/日/i,/一/i,/二/i,/三/i,/四/i,/五/i,/六/i]},lo={any:/^(上午?|下午?|午夜|[中正]午|早上?|下午|晚上?|凌晨|)/i},uo={any:{am:/^上午?/i,pm:/^下午?/i,midnight:/^午夜/i,noon:/^[中正]午/i,morning:/^早上/i,afternoon:/^下午/i,evening:/^晚上?/i,night:/^凌晨/i}},co={ordinalNumber:Jt({matchPattern:Za,parsePattern:$a,valueCallback:t=>parseInt(t,10)}),era:Q({matchPatterns:eo,defaultMatchWidth:"wide",parsePatterns:to,defaultParseWidth:"any"}),quarter:Q({matchPatterns:no,defaultMatchWidth:"wide",parsePatterns:ro,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Q({matchPatterns:ao,defaultMatchWidth:"wide",parsePatterns:oo,defaultParseWidth:"any"}),day:Q({matchPatterns:io,defaultMatchWidth:"wide",parsePatterns:so,defaultParseWidth:"any"}),dayPeriod:Q({matchPatterns:lo,defaultMatchWidth:"any",parsePatterns:uo,defaultParseWidth:"any"})},fo={code:"zh-CN",formatDistance:Na,formatLong:Wa,formatRelative:za,localize:Ka,match:co,options:{weekStartsOn:1,firstWeekContainsDate:4}};var xe={},mo=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},$t={},W={};let yt;const go=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];W.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};W.getSymbolTotalCodewords=function(e){return go[e]};W.getBCHDigit=function(t){let e=0;for(;t!==0;)e++,t>>>=1;return e};W.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');yt=e};W.isKanjiModeEnabled=function(){return typeof yt<"u"};W.toSJIS=function(e){return yt(e)};var Ge={};(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+r)}}t.isValid=function(a){return a&&typeof a.bit<"u"&&a.bit>=0&&a.bit<4},t.from=function(a,n){if(t.isValid(a))return a;try{return e(a)}catch{return n}}})(Ge);function en(){this.buffer=[],this.length=0}en.prototype={get:function(t){const e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)===1},put:function(t,e){for(let r=0;r<e;r++)this.putBit((t>>>e-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var ho=en;function Ve(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}Ve.prototype.set=function(t,e,r,a){const n=t*this.size+e;this.data[n]=r,a&&(this.reservedBit[n]=!0)};Ve.prototype.get=function(t,e){return this.data[t*this.size+e]};Ve.prototype.xor=function(t,e,r){this.data[t*this.size+e]^=r};Ve.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]};var yo=Ve,tn={};(function(t){const e=W.getSymbolSize;t.getRowColCoords=function(a){if(a===1)return[];const n=Math.floor(a/7)+2,o=e(a),l=o===145?26:Math.ceil((o-13)/(2*n-2))*2,u=[o-7];for(let d=1;d<n-1;d++)u[d]=u[d-1]-l;return u.push(6),u.reverse()},t.getPositions=function(a){const n=[],o=t.getRowColCoords(a),l=o.length;for(let u=0;u<l;u++)for(let d=0;d<l;d++)u===0&&d===0||u===0&&d===l-1||u===l-1&&d===0||n.push([o[u],o[d]]);return n}})(tn);var nn={};const wo=W.getSymbolSize,It=7;nn.getPositions=function(e){const r=wo(e);return[[0,0],[r-It,0],[0,r-It]]};var rn={};(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(n){return n!=null&&n!==""&&!isNaN(n)&&n>=0&&n<=7},t.from=function(n){return t.isValid(n)?parseInt(n,10):void 0},t.getPenaltyN1=function(n){const o=n.size;let l=0,u=0,d=0,f=null,g=null;for(let _=0;_<o;_++){u=d=0,f=g=null;for(let y=0;y<o;y++){let w=n.get(_,y);w===f?u++:(u>=5&&(l+=e.N1+(u-5)),f=w,u=1),w=n.get(y,_),w===g?d++:(d>=5&&(l+=e.N1+(d-5)),g=w,d=1)}u>=5&&(l+=e.N1+(u-5)),d>=5&&(l+=e.N1+(d-5))}return l},t.getPenaltyN2=function(n){const o=n.size;let l=0;for(let u=0;u<o-1;u++)for(let d=0;d<o-1;d++){const f=n.get(u,d)+n.get(u,d+1)+n.get(u+1,d)+n.get(u+1,d+1);(f===4||f===0)&&l++}return l*e.N2},t.getPenaltyN3=function(n){const o=n.size;let l=0,u=0,d=0;for(let f=0;f<o;f++){u=d=0;for(let g=0;g<o;g++)u=u<<1&2047|n.get(f,g),g>=10&&(u===1488||u===93)&&l++,d=d<<1&2047|n.get(g,f),g>=10&&(d===1488||d===93)&&l++}return l*e.N3},t.getPenaltyN4=function(n){let o=0;const l=n.data.length;for(let d=0;d<l;d++)o+=n.data[d];return Math.abs(Math.ceil(o*100/l/5)-10)*e.N4};function r(a,n,o){switch(a){case t.Patterns.PATTERN000:return(n+o)%2===0;case t.Patterns.PATTERN001:return n%2===0;case t.Patterns.PATTERN010:return o%3===0;case t.Patterns.PATTERN011:return(n+o)%3===0;case t.Patterns.PATTERN100:return(Math.floor(n/2)+Math.floor(o/3))%2===0;case t.Patterns.PATTERN101:return n*o%2+n*o%3===0;case t.Patterns.PATTERN110:return(n*o%2+n*o%3)%2===0;case t.Patterns.PATTERN111:return(n*o%3+(n+o)%2)%2===0;default:throw new Error("bad maskPattern:"+a)}}t.applyMask=function(n,o){const l=o.size;for(let u=0;u<l;u++)for(let d=0;d<l;d++)o.isReserved(d,u)||o.xor(d,u,r(n,d,u))},t.getBestMask=function(n,o){const l=Object.keys(t.Patterns).length;let u=0,d=1/0;for(let f=0;f<l;f++){o(f),t.applyMask(f,n);const g=t.getPenaltyN1(n)+t.getPenaltyN2(n)+t.getPenaltyN3(n)+t.getPenaltyN4(n);t.applyMask(f,n),g<d&&(d=g,u=f)}return u}})(rn);var Je={};const ie=Ge,Oe=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],Ne=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];Je.getBlocksCount=function(e,r){switch(r){case ie.L:return Oe[(e-1)*4+0];case ie.M:return Oe[(e-1)*4+1];case ie.Q:return Oe[(e-1)*4+2];case ie.H:return Oe[(e-1)*4+3];default:return}};Je.getTotalCodewordsCount=function(e,r){switch(r){case ie.L:return Ne[(e-1)*4+0];case ie.M:return Ne[(e-1)*4+1];case ie.Q:return Ne[(e-1)*4+2];case ie.H:return Ne[(e-1)*4+3];default:return}};var an={},Qe={};const Se=new Uint8Array(512),We=new Uint8Array(256);(function(){let e=1;for(let r=0;r<255;r++)Se[r]=e,We[e]=r,e<<=1,e&256&&(e^=285);for(let r=255;r<512;r++)Se[r]=Se[r-255]})();Qe.log=function(e){if(e<1)throw new Error("log("+e+")");return We[e]};Qe.exp=function(e){return Se[e]};Qe.mul=function(e,r){return e===0||r===0?0:Se[We[e]+We[r]]};(function(t){const e=Qe;t.mul=function(a,n){const o=new Uint8Array(a.length+n.length-1);for(let l=0;l<a.length;l++)for(let u=0;u<n.length;u++)o[l+u]^=e.mul(a[l],n[u]);return o},t.mod=function(a,n){let o=new Uint8Array(a);for(;o.length-n.length>=0;){const l=o[0];for(let d=0;d<n.length;d++)o[d]^=e.mul(n[d],l);let u=0;for(;u<o.length&&o[u]===0;)u++;o=o.slice(u)}return o},t.generateECPolynomial=function(a){let n=new Uint8Array([1]);for(let o=0;o<a;o++)n=t.mul(n,new Uint8Array([1,e.exp(o)]));return n}})(an);const on=an;function wt(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}wt.prototype.initialize=function(e){this.degree=e,this.genPoly=on.generateECPolynomial(this.degree)};wt.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const r=new Uint8Array(e.length+this.degree);r.set(e);const a=on.mod(r,this.genPoly),n=this.degree-a.length;if(n>0){const o=new Uint8Array(this.degree);return o.set(a,n),o}return a};var po=wt,sn={},le={},pt={};pt.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var Z={};const ln="[0-9]+",bo="[A-Z $%*+\\-./:]+";let Me="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";Me=Me.replace(/u/g,"\\u");const ko="(?:(?![A-Z0-9 $%*+\\-./:]|"+Me+`)(?:.|[\r
]))+`;Z.KANJI=new RegExp(Me,"g");Z.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");Z.BYTE=new RegExp(ko,"g");Z.NUMERIC=new RegExp(ln,"g");Z.ALPHANUMERIC=new RegExp(bo,"g");const vo=new RegExp("^"+Me+"$"),Do=new RegExp("^"+ln+"$"),Po=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Z.testKanji=function(e){return vo.test(e)};Z.testNumeric=function(e){return Do.test(e)};Z.testAlphanumeric=function(e){return Po.test(e)};(function(t){const e=pt,r=Z;t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(o,l){if(!o.ccBits)throw new Error("Invalid mode: "+o);if(!e.isValid(l))throw new Error("Invalid version: "+l);return l>=1&&l<10?o.ccBits[0]:l<27?o.ccBits[1]:o.ccBits[2]},t.getBestModeForData=function(o){return r.testNumeric(o)?t.NUMERIC:r.testAlphanumeric(o)?t.ALPHANUMERIC:r.testKanji(o)?t.KANJI:t.BYTE},t.toString=function(o){if(o&&o.id)return o.id;throw new Error("Invalid mode")},t.isValid=function(o){return o&&o.bit&&o.ccBits};function a(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+n)}}t.from=function(o,l){if(t.isValid(o))return o;try{return a(o)}catch{return l}}})(le);(function(t){const e=W,r=Je,a=Ge,n=le,o=pt,l=7973,u=e.getBCHDigit(l);function d(y,w,p){for(let h=1;h<=40;h++)if(w<=t.getCapacity(h,p,y))return h}function f(y,w){return n.getCharCountIndicator(y,w)+4}function g(y,w){let p=0;return y.forEach(function(h){const C=f(h.mode,w);p+=C+h.getBitsLength()}),p}function _(y,w){for(let p=1;p<=40;p++)if(g(y,p)<=t.getCapacity(p,w,n.MIXED))return p}t.from=function(w,p){return o.isValid(w)?parseInt(w,10):p},t.getCapacity=function(w,p,h){if(!o.isValid(w))throw new Error("Invalid QR Code version");typeof h>"u"&&(h=n.BYTE);const C=e.getSymbolTotalCodewords(w),b=r.getTotalCodewordsCount(w,p),T=(C-b)*8;if(h===n.MIXED)return T;const D=T-f(h,w);switch(h){case n.NUMERIC:return Math.floor(D/10*3);case n.ALPHANUMERIC:return Math.floor(D/11*2);case n.KANJI:return Math.floor(D/13);case n.BYTE:default:return Math.floor(D/8)}},t.getBestVersionForData=function(w,p){let h;const C=a.from(p,a.M);if(Array.isArray(w)){if(w.length>1)return _(w,C);if(w.length===0)return 1;h=w[0]}else h=w;return d(h.mode,h.getLength(),C)},t.getEncodedBits=function(w){if(!o.isValid(w)||w<7)throw new Error("Invalid QR Code version");let p=w<<12;for(;e.getBCHDigit(p)-u>=0;)p^=l<<e.getBCHDigit(p)-u;return w<<12|p}})(sn);var un={};const lt=W,dn=1335,_o=21522,Ft=lt.getBCHDigit(dn);un.getEncodedBits=function(e,r){const a=e.bit<<3|r;let n=a<<10;for(;lt.getBCHDigit(n)-Ft>=0;)n^=dn<<lt.getBCHDigit(n)-Ft;return(a<<10|n)^_o};var cn={};const Co=le;function De(t){this.mode=Co.NUMERIC,this.data=t.toString()}De.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};De.prototype.getLength=function(){return this.data.length};De.prototype.getBitsLength=function(){return De.getBitsLength(this.data.length)};De.prototype.write=function(e){let r,a,n;for(r=0;r+3<=this.data.length;r+=3)a=this.data.substr(r,3),n=parseInt(a,10),e.put(n,10);const o=this.data.length-r;o>0&&(a=this.data.substr(r),n=parseInt(a,10),e.put(n,o*3+1))};var To=De;const So=le,tt=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Pe(t){this.mode=So.ALPHANUMERIC,this.data=t}Pe.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};Pe.prototype.getLength=function(){return this.data.length};Pe.prototype.getBitsLength=function(){return Pe.getBitsLength(this.data.length)};Pe.prototype.write=function(e){let r;for(r=0;r+2<=this.data.length;r+=2){let a=tt.indexOf(this.data[r])*45;a+=tt.indexOf(this.data[r+1]),e.put(a,11)}this.data.length%2&&e.put(tt.indexOf(this.data[r]),6)};var Mo=Pe;const Ao=le;function _e(t){this.mode=Ao.BYTE,typeof t=="string"?this.data=new TextEncoder().encode(t):this.data=new Uint8Array(t)}_e.getBitsLength=function(e){return e*8};_e.prototype.getLength=function(){return this.data.length};_e.prototype.getBitsLength=function(){return _e.getBitsLength(this.data.length)};_e.prototype.write=function(t){for(let e=0,r=this.data.length;e<r;e++)t.put(this.data[e],8)};var Eo=_e;const xo=le,Vo=W;function Ce(t){this.mode=xo.KANJI,this.data=t}Ce.getBitsLength=function(e){return e*13};Ce.prototype.getLength=function(){return this.data.length};Ce.prototype.getBitsLength=function(){return Ce.getBitsLength(this.data.length)};Ce.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let r=Vo.toSJIS(this.data[e]);if(r>=33088&&r<=40956)r-=33088;else if(r>=57408&&r<=60351)r-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);r=(r>>>8&255)*192+(r&255),t.put(r,13)}};var Io=Ce,fn={exports:{}};(function(t){var e={single_source_shortest_paths:function(r,a,n){var o={},l={};l[a]=0;var u=e.PriorityQueue.make();u.push(a,0);for(var d,f,g,_,y,w,p,h,C;!u.empty();){d=u.pop(),f=d.value,_=d.cost,y=r[f]||{};for(g in y)y.hasOwnProperty(g)&&(w=y[g],p=_+w,h=l[g],C=typeof l[g]>"u",(C||h>p)&&(l[g]=p,u.push(g,p),o[g]=f))}if(typeof n<"u"&&typeof l[n]>"u"){var b=["Could not find a path from ",a," to ",n,"."].join("");throw new Error(b)}return o},extract_shortest_path_from_predecessor_list:function(r,a){for(var n=[],o=a;o;)n.push(o),r[o],o=r[o];return n.reverse(),n},find_path:function(r,a,n){var o=e.single_source_shortest_paths(r,a,n);return e.extract_shortest_path_from_predecessor_list(o,n)},PriorityQueue:{make:function(r){var a=e.PriorityQueue,n={},o;r=r||{};for(o in a)a.hasOwnProperty(o)&&(n[o]=a[o]);return n.queue=[],n.sorter=r.sorter||a.default_sorter,n},default_sorter:function(r,a){return r.cost-a.cost},push:function(r,a){var n={value:r,cost:a};this.queue.push(n),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=e})(fn);var Fo=fn.exports;(function(t){const e=le,r=To,a=Mo,n=Eo,o=Io,l=Z,u=W,d=Fo;function f(b){return unescape(encodeURIComponent(b)).length}function g(b,T,D){const v=[];let V;for(;(V=b.exec(D))!==null;)v.push({data:V[0],index:V.index,mode:T,length:V[0].length});return v}function _(b){const T=g(l.NUMERIC,e.NUMERIC,b),D=g(l.ALPHANUMERIC,e.ALPHANUMERIC,b);let v,V;return u.isKanjiModeEnabled()?(v=g(l.BYTE,e.BYTE,b),V=g(l.KANJI,e.KANJI,b)):(v=g(l.BYTE_KANJI,e.BYTE,b),V=[]),T.concat(D,v,V).sort(function(B,H){return B.index-H.index}).map(function(B){return{data:B.data,mode:B.mode,length:B.length}})}function y(b,T){switch(T){case e.NUMERIC:return r.getBitsLength(b);case e.ALPHANUMERIC:return a.getBitsLength(b);case e.KANJI:return o.getBitsLength(b);case e.BYTE:return n.getBitsLength(b)}}function w(b){return b.reduce(function(T,D){const v=T.length-1>=0?T[T.length-1]:null;return v&&v.mode===D.mode?(T[T.length-1].data+=D.data,T):(T.push(D),T)},[])}function p(b){const T=[];for(let D=0;D<b.length;D++){const v=b[D];switch(v.mode){case e.NUMERIC:T.push([v,{data:v.data,mode:e.ALPHANUMERIC,length:v.length},{data:v.data,mode:e.BYTE,length:v.length}]);break;case e.ALPHANUMERIC:T.push([v,{data:v.data,mode:e.BYTE,length:v.length}]);break;case e.KANJI:T.push([v,{data:v.data,mode:e.BYTE,length:f(v.data)}]);break;case e.BYTE:T.push([{data:v.data,mode:e.BYTE,length:f(v.data)}])}}return T}function h(b,T){const D={},v={start:{}};let V=["start"];for(let I=0;I<b.length;I++){const B=b[I],H=[];for(let ae=0;ae<B.length;ae++){const j=B[ae],Te=""+I+ae;H.push(Te),D[Te]={node:j,lastCount:0},v[Te]={};for(let Ze=0;Ze<V.length;Ze++){const $=V[Ze];D[$]&&D[$].node.mode===j.mode?(v[$][Te]=y(D[$].lastCount+j.length,j.mode)-y(D[$].lastCount,j.mode),D[$].lastCount+=j.length):(D[$]&&(D[$].lastCount=j.length),v[$][Te]=y(j.length,j.mode)+4+e.getCharCountIndicator(j.mode,T))}}V=H}for(let I=0;I<V.length;I++)v[V[I]].end=0;return{map:v,table:D}}function C(b,T){let D;const v=e.getBestModeForData(b);if(D=e.from(T,v),D!==e.BYTE&&D.bit<v.bit)throw new Error('"'+b+'" cannot be encoded with mode '+e.toString(D)+`.
 Suggested mode is: `+e.toString(v));switch(D===e.KANJI&&!u.isKanjiModeEnabled()&&(D=e.BYTE),D){case e.NUMERIC:return new r(b);case e.ALPHANUMERIC:return new a(b);case e.KANJI:return new o(b);case e.BYTE:return new n(b)}}t.fromArray=function(T){return T.reduce(function(D,v){return typeof v=="string"?D.push(C(v,null)):v.data&&D.push(C(v.data,v.mode)),D},[])},t.fromString=function(T,D){const v=_(T,u.isKanjiModeEnabled()),V=p(v),I=h(V,D),B=d.find_path(I.map,"start","end"),H=[];for(let ae=1;ae<B.length-1;ae++)H.push(I.table[B[ae]].node);return t.fromArray(w(H))},t.rawSplit=function(T){return t.fromArray(_(T,u.isKanjiModeEnabled()))}})(cn);const Ke=W,nt=Ge,Bo=ho,Oo=yo,No=tn,Ro=nn,ut=rn,dt=Je,Lo=po,Ye=sn,Uo=un,Wo=le,rt=cn;function Yo(t,e){const r=t.size,a=Ro.getPositions(e);for(let n=0;n<a.length;n++){const o=a[n][0],l=a[n][1];for(let u=-1;u<=7;u++)if(!(o+u<=-1||r<=o+u))for(let d=-1;d<=7;d++)l+d<=-1||r<=l+d||(u>=0&&u<=6&&(d===0||d===6)||d>=0&&d<=6&&(u===0||u===6)||u>=2&&u<=4&&d>=2&&d<=4?t.set(o+u,l+d,!0,!0):t.set(o+u,l+d,!1,!0))}}function zo(t){const e=t.size;for(let r=8;r<e-8;r++){const a=r%2===0;t.set(r,6,a,!0),t.set(6,r,a,!0)}}function qo(t,e){const r=No.getPositions(e);for(let a=0;a<r.length;a++){const n=r[a][0],o=r[a][1];for(let l=-2;l<=2;l++)for(let u=-2;u<=2;u++)l===-2||l===2||u===-2||u===2||l===0&&u===0?t.set(n+l,o+u,!0,!0):t.set(n+l,o+u,!1,!0)}}function Ho(t,e){const r=t.size,a=Ye.getEncodedBits(e);let n,o,l;for(let u=0;u<18;u++)n=Math.floor(u/3),o=u%3+r-8-3,l=(a>>u&1)===1,t.set(n,o,l,!0),t.set(o,n,l,!0)}function at(t,e,r){const a=t.size,n=Uo.getEncodedBits(e,r);let o,l;for(o=0;o<15;o++)l=(n>>o&1)===1,o<6?t.set(o,8,l,!0):o<8?t.set(o+1,8,l,!0):t.set(a-15+o,8,l,!0),o<8?t.set(8,a-o-1,l,!0):o<9?t.set(8,15-o-1+1,l,!0):t.set(8,15-o-1,l,!0);t.set(a-8,8,1,!0)}function jo(t,e){const r=t.size;let a=-1,n=r-1,o=7,l=0;for(let u=r-1;u>0;u-=2)for(u===6&&u--;;){for(let d=0;d<2;d++)if(!t.isReserved(n,u-d)){let f=!1;l<e.length&&(f=(e[l]>>>o&1)===1),t.set(n,u-d,f),o--,o===-1&&(l++,o=7)}if(n+=a,n<0||r<=n){n-=a,a=-a;break}}}function Xo(t,e,r){const a=new Bo;r.forEach(function(d){a.put(d.mode.bit,4),a.put(d.getLength(),Wo.getCharCountIndicator(d.mode,t)),d.write(a)});const n=Ke.getSymbolTotalCodewords(t),o=dt.getTotalCodewordsCount(t,e),l=(n-o)*8;for(a.getLengthInBits()+4<=l&&a.put(0,4);a.getLengthInBits()%8!==0;)a.putBit(0);const u=(l-a.getLengthInBits())/8;for(let d=0;d<u;d++)a.put(d%2?17:236,8);return Go(a,t,e)}function Go(t,e,r){const a=Ke.getSymbolTotalCodewords(e),n=dt.getTotalCodewordsCount(e,r),o=a-n,l=dt.getBlocksCount(e,r),u=a%l,d=l-u,f=Math.floor(a/l),g=Math.floor(o/l),_=g+1,y=f-g,w=new Lo(y);let p=0;const h=new Array(l),C=new Array(l);let b=0;const T=new Uint8Array(t.buffer);for(let B=0;B<l;B++){const H=B<d?g:_;h[B]=T.slice(p,p+H),C[B]=w.encode(h[B]),p+=H,b=Math.max(b,H)}const D=new Uint8Array(a);let v=0,V,I;for(V=0;V<b;V++)for(I=0;I<l;I++)V<h[I].length&&(D[v++]=h[I][V]);for(V=0;V<y;V++)for(I=0;I<l;I++)D[v++]=C[I][V];return D}function Jo(t,e,r,a){let n;if(Array.isArray(t))n=rt.fromArray(t);else if(typeof t=="string"){let f=e;if(!f){const g=rt.rawSplit(t);f=Ye.getBestVersionForData(g,r)}n=rt.fromString(t,f||40)}else throw new Error("Invalid data");const o=Ye.getBestVersionForData(n,r);if(!o)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=o;else if(e<o)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+o+`.
`);const l=Xo(e,r,n),u=Ke.getSymbolSize(e),d=new Oo(u);return Yo(d,e),zo(d),qo(d,e),at(d,r,0),e>=7&&Ho(d,e),jo(d,l),isNaN(a)&&(a=ut.getBestMask(d,at.bind(null,d,r))),ut.applyMask(a,d),at(d,r,a),{modules:d,version:e,errorCorrectionLevel:r,maskPattern:a,segments:n}}$t.create=function(e,r){if(typeof e>"u"||e==="")throw new Error("No input text");let a=nt.M,n,o;return typeof r<"u"&&(a=nt.from(r.errorCorrectionLevel,nt.M),n=Ye.from(r.version),o=ut.from(r.maskPattern),r.toSJISFunc&&Ke.setToSJISFunction(r.toSJISFunc)),Jo(e,n,a,o)};var mn={},bt={};(function(t){function e(r){if(typeof r=="number"&&(r=r.toString()),typeof r!="string")throw new Error("Color should be defined as hex string");let a=r.slice().replace("#","").split("");if(a.length<3||a.length===5||a.length>8)throw new Error("Invalid hex color: "+r);(a.length===3||a.length===4)&&(a=Array.prototype.concat.apply([],a.map(function(o){return[o,o]}))),a.length===6&&a.push("F","F");const n=parseInt(a.join(""),16);return{r:n>>24&255,g:n>>16&255,b:n>>8&255,a:n&255,hex:"#"+a.slice(0,6).join("")}}t.getOptions=function(a){a||(a={}),a.color||(a.color={});const n=typeof a.margin>"u"||a.margin===null||a.margin<0?4:a.margin,o=a.width&&a.width>=21?a.width:void 0,l=a.scale||4;return{width:o,scale:o?4:l,margin:n,color:{dark:e(a.color.dark||"#000000ff"),light:e(a.color.light||"#ffffffff")},type:a.type,rendererOpts:a.rendererOpts||{}}},t.getScale=function(a,n){return n.width&&n.width>=a+n.margin*2?n.width/(a+n.margin*2):n.scale},t.getImageWidth=function(a,n){const o=t.getScale(a,n);return Math.floor((a+n.margin*2)*o)},t.qrToImageData=function(a,n,o){const l=n.modules.size,u=n.modules.data,d=t.getScale(l,o),f=Math.floor((l+o.margin*2)*d),g=o.margin*d,_=[o.color.light,o.color.dark];for(let y=0;y<f;y++)for(let w=0;w<f;w++){let p=(y*f+w)*4,h=o.color.light;if(y>=g&&w>=g&&y<f-g&&w<f-g){const C=Math.floor((y-g)/d),b=Math.floor((w-g)/d);h=_[u[C*l+b]?1:0]}a[p++]=h.r,a[p++]=h.g,a[p++]=h.b,a[p]=h.a}}})(bt);(function(t){const e=bt;function r(n,o,l){n.clearRect(0,0,o.width,o.height),o.style||(o.style={}),o.height=l,o.width=l,o.style.height=l+"px",o.style.width=l+"px"}function a(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(o,l,u){let d=u,f=l;typeof d>"u"&&(!l||!l.getContext)&&(d=l,l=void 0),l||(f=a()),d=e.getOptions(d);const g=e.getImageWidth(o.modules.size,d),_=f.getContext("2d"),y=_.createImageData(g,g);return e.qrToImageData(y.data,o,d),r(_,f,g),_.putImageData(y,0,0),f},t.renderToDataURL=function(o,l,u){let d=u;typeof d>"u"&&(!l||!l.getContext)&&(d=l,l=void 0),d||(d={});const f=t.render(o,l,d),g=d.type||"image/png",_=d.rendererOpts||{};return f.toDataURL(g,_.quality)}})(mn);var gn={};const Qo=bt;function Bt(t,e){const r=t.a/255,a=e+'="'+t.hex+'"';return r<1?a+" "+e+'-opacity="'+r.toFixed(2).slice(1)+'"':a}function ot(t,e,r){let a=t+e;return typeof r<"u"&&(a+=" "+r),a}function Ko(t,e,r){let a="",n=0,o=!1,l=0;for(let u=0;u<t.length;u++){const d=Math.floor(u%e),f=Math.floor(u/e);!d&&!o&&(o=!0),t[u]?(l++,u>0&&d>0&&t[u-1]||(a+=o?ot("M",d+r,.5+f+r):ot("m",n,0),n=0,o=!1),d+1<e&&t[u+1]||(a+=ot("h",l),l=0)):n++}return a}gn.render=function(e,r,a){const n=Qo.getOptions(r),o=e.modules.size,l=e.modules.data,u=o+n.margin*2,d=n.color.light.a?"<path "+Bt(n.color.light,"fill")+' d="M0 0h'+u+"v"+u+'H0z"/>':"",f="<path "+Bt(n.color.dark,"stroke")+' d="'+Ko(l,o,n.margin)+'"/>',g='viewBox="0 0 '+u+" "+u+'"',y='<svg xmlns="http://www.w3.org/2000/svg" '+(n.width?'width="'+n.width+'" height="'+n.width+'" ':"")+g+' shape-rendering="crispEdges">'+d+f+`</svg>
`;return typeof a=="function"&&a(null,y),y};const Zo=mo,ct=$t,hn=mn,$o=gn;function kt(t,e,r,a,n){const o=[].slice.call(arguments,1),l=o.length,u=typeof o[l-1]=="function";if(!u&&!Zo())throw new Error("Callback required as last argument");if(u){if(l<2)throw new Error("Too few arguments provided");l===2?(n=r,r=e,e=a=void 0):l===3&&(e.getContext&&typeof n>"u"?(n=a,a=void 0):(n=a,a=r,r=e,e=void 0))}else{if(l<1)throw new Error("Too few arguments provided");return l===1?(r=e,e=a=void 0):l===2&&!e.getContext&&(a=r,r=e,e=void 0),new Promise(function(d,f){try{const g=ct.create(r,a);d(t(g,e,a))}catch(g){f(g)}})}try{const d=ct.create(r,a);n(null,t(d,e,a))}catch(d){n(d)}}xe.create=ct.create;xe.toCanvas=kt.bind(null,hn.render);xe.toDataURL=kt.bind(null,hn.renderToDataURL);xe.toString=kt.bind(null,function(t,e,r){return $o.render(t,r)});const ei={name:"SecurityManager",components:{TotpDialog:Lt},data(){return{twoFA:{enabled:!1,qr:"",token:""},twoFALoading:!1,twoFAError:"",showTotpDialog:!1,passkeyLoading:!1,passkeySupported:!!window.PublicKeyCredential,activeTokens:[],isLoadingTokens:!1,isLoggingOutAll:!1,loadingTokenId:null,isPerformingAction:!1,showConfirmDialog:!1,confirmDialogTitle:"",confirmDialogText:"",confirmedAction:null,showOsRemovalDialog:!1,defaultOsPanel:[],tokenHeaders:[{title:"创建时间",key:"created_at",sortable:!0},{title:"设备信息",key:"device_info",sortable:!1},{title:"IP地址",key:"ip_address",sortable:!0},{title:"IP属地",key:"ip_location",sortable:!0},{title:"操作",key:"actions",sortable:!1}],passkeys:[],passkeyHeaders:[{title:"Credential ID",key:"credential_id"},{title:"Transports",key:"transports"},{title:"Counter",key:"counter"},{title:"注册时间",key:"registered_at"},{title:"操作",key:"actions",sortable:!1}],isLoadingPasskeys:!1,deletingId:null}},setup(){return{sudoManager:qe()}},mounted(){this.loadData(),this.loadTwoFAStatus(),this.loadPasskeys(),this.defaultOsPanel=[this.mapOsToPanel(this.detectOs())].filter(t=>t!==null)},methods:{async loadTwoFAStatus(){var t;try{const e=await Fe.getStatus();e.status==="success"&&(this.twoFA.enabled=!!((t=e.data)!=null&&t.enabled))}catch{}},async handleTwoFASetup(){this.twoFALoading=!0;try{const t=await this.sudoManager.requireSudo({title:"启用 2FA",subtitle:"为保障账户安全，请验证您的身份",persistent:!0}),e=await Fe.setup(t);if(e.status==="success"){const{otpauth_url:r}=e.data;this.twoFA.qr=await xe.toDataURL(r)}else this.$toast.add({severity:"error",summary:"错误",detail:e.message,life:3e3})}catch(t){(t==null?void 0:t.type)!=="cancel"&&this.$toast.add({severity:"error",summary:"错误",detail:t.message,life:3e3})}finally{this.twoFALoading=!1}},async activateTwoFA(){if(this.twoFA.token){this.twoFALoading=!0;try{const t=await this.sudoManager.requireSudo({title:"启用 2FA",subtitle:"为保障账户安全，请再次验证您的身份",persistent:!0}),e=await Fe.activate(this.twoFA.token,t);e.status==="success"?(this.twoFA.qr="",this.twoFA.token="",this.twoFA.enabled=!0,this.$toast.add({severity:"success",summary:"成功",detail:"2FA 已启用",life:3e3})):this.$toast.add({severity:"error",summary:"错误",detail:e.message,life:3e3})}catch(t){(t==null?void 0:t.type)!=="cancel"&&this.$toast.add({severity:"error",summary:"错误",detail:t.message,life:3e3})}finally{this.twoFALoading=!1}}},async handleTotpConfirm(t){t&&(this.twoFAError="",this.twoFA.token=t,await this.activateTwoFA())},async disableTwoFA(){this.twoFALoading=!0;try{const t=await this.sudoManager.requireSudo({title:"禁用 2FA",subtitle:"这是敏感操作，请验证您的身份",persistent:!0}),e=await Fe.disable(t);e.status==="success"?(this.twoFA.enabled=!1,this.$toast.add({severity:"success",summary:"成功",detail:"2FA 已禁用",life:3e3})):this.$toast.add({severity:"error",summary:"错误",detail:e.message,life:3e3})}catch(t){(t==null?void 0:t.type)!=="cancel"&&this.$toast.add({severity:"error",summary:"错误",detail:t.message,life:3e3})}finally{this.twoFALoading=!1}},async registerPasskey(){this.passkeyLoading=!0;try{const t=await this.sudoManager.requireSudo({title:"注册 Passkey",subtitle:"为保障账户安全，请验证您的身份",persistent:!0}),e=await Ie.beginRegistration(t);if(e.status!=="success"){this.$toast.add({severity:"error",summary:"错误",detail:e.message,life:3e3});return}const r=Mn(e.data),a=await navigator.credentials.create(r),n=An(a),o=await Ie.finishRegistration(n,t);o.status==="success"?(this.$toast.add({severity:"success",summary:"成功",detail:"Passkey 已注册",life:3e3}),await this.loadPasskeys()):this.$toast.add({severity:"error",summary:"错误",detail:o.message,life:3e3})}catch(t){(t==null?void 0:t.type)!=="cancel"&&this.$toast.add({severity:"error",summary:"错误",detail:t.message,life:3e3})}finally{this.passkeyLoading=!1}},async loadPasskeys(){this.isLoadingPasskeys=!0;try{const t=await Ie.list();(t==null?void 0:t.status)==="success"&&Array.isArray(t.data)?this.passkeys=t.data:this.passkeys=[]}catch(t){this.$toast.add({severity:"error",summary:"错误",detail:t.message||"加载 Passkey 失败",life:3e3})}finally{this.isLoadingPasskeys=!1}},truncateId(t){return t?t.length<=16?t:`${t.slice(0,8)}...${t.slice(-6)}`:"-"},formatRegisteredAt(t){if(!t)return"-";try{const e=typeof t=="number"?new Date(t*1e3):new Date(t);return xt(e,"yyyy-MM-dd HH:mm:ss")}catch{return"-"}},async confirmDeletePasskey(t){this.confirmDialogTitle="确认删除 Passkey",this.confirmDialogText="删除后该凭据将无法用于登录。确定要继续吗？",this.confirmedAction=()=>this.deletePasskey(t),this.showConfirmDialog=!0},async deletePasskey(t){if(t){this.deletingId=t;try{const e=await this.sudoManager.requireSudo({title:"删除 Passkey",subtitle:"为保障账户安全，请验证您的身份",persistent:!0}),r=await Ie.deleteCredential(t,e);(r==null?void 0:r.status)==="success"?(this.$toast.add({severity:"success",summary:"成功",detail:"Passkey 已删除",life:3e3}),await this.loadPasskeys(),this.defaultOsPanel=[this.mapOsToPanel(this.detectOs())].filter(a=>a!==null),this.showOsRemovalDialog=!0):this.$toast.add({severity:"error",summary:"错误",detail:(r==null?void 0:r.message)||"删除失败",life:3e3})}catch(e){(e==null?void 0:e.type)!=="cancel"&&this.$toast.add({severity:"error",summary:"错误",detail:e.message||"删除失败",life:3e3})}finally{this.deletingId=null}}},detectOs(){const t=navigator.userAgent||navigator.vendor||window&&window.opera||"";return/windows/i.test(t)?"windows":/macintosh|mac os x/i.test(t)?"macos":/iphone|ipad|ipod/i.test(t)?"ios":/android/i.test(t)?"android":"other"},mapOsToPanel(t){switch(t){case"windows":return 0;case"macos":return 1;case"ios":return 2;case"android":return 3;default:return null}},async loadData(){await this.loadActiveTokens()},async loadActiveTokens(){this.isLoadingTokens=!0;try{this.activeTokens=await fe.getActiveTokens()}catch(t){console.error("获取会话列表失败:",t),this.$toast.add({severity:"error",summary:"错误",detail:"获取会话列表失败",life:3e3})}finally{this.isLoadingTokens=!1}},getActivityColor(t){return t?t<5?"info":t<20?"primary":t<50?"success":"purple":"grey"},formatIpLocation(t){if(!t)return"-";let e=t;if(typeof t=="string")try{e=JSON.parse(t)}catch{return t}return e.address||"-"},formatDate(t){if(!t)return"-";const e=new Date(t),a=Fa(e,new Date,{addSuffix:!0,locale:fo}),n=xt(e,"yyyy-MM-dd HH:mm:ss");return`${a} (${n})`},async handleRevokeToken(t){this.loadingTokenId=t,this.isPerformingAction=!0;try{await fe.revokeToken(t)?(this.$toast.add({severity:"success",summary:"成功",detail:"会话已成功结束",life:3e3}),await this.loadActiveTokens()):this.$toast.add({severity:"error",summary:"错误",detail:"会话结束失败",life:3e3})}catch(e){console.error("会话结束失败:",e),this.$toast.add({severity:"error",summary:"错误",detail:"会话结束失败",life:3e3})}finally{this.loadingTokenId=null,this.isPerformingAction=!1}},confirmLogoutAll(){this.confirmDialogTitle="确认退出所有会话",this.confirmDialogText="这将使所有会话立即失效，包括当前会话。您需要重新登录才能继续使用。确定要执行此操作吗？",this.confirmedAction=this.logoutAllSessions,this.showConfirmDialog=!0},async logoutAllSessions(){this.isLoggingOutAll=!0;try{await fe.logoutAllDevices()?(this.$toast.add({severity:"success",summary:"成功",detail:"已成功退出所有会话",life:3e3}),this.$router.push("/app/account/login")):this.$toast.add({severity:"error",summary:"错误",detail:"退出所有会话失败",life:3e3})}catch(t){console.error("退出所有会话失败:",t),this.$toast.add({severity:"error",summary:"错误",detail:"退出所有会话失败",life:3e3})}finally{this.isLoggingOutAll=!1}},executeConfirmedAction(){typeof this.confirmedAction=="function"&&this.confirmedAction(),this.showConfirmDialog=!1}}},ti={class:"d-flex flex-wrap align-center ga-3"},ni={class:"mt-4 d-flex ga-3"},ri={key:0,class:"mt-4"},ai={class:"d-flex justify-center mt-3"},oi={class:"text-caption"},ii={class:"d-flex ga-1 flex-wrap"},si={class:"mb-6"},li={class:"d-flex align-center"},ui={key:0},di={key:1},ci={class:"d-flex gap-4 mt-6"};function fi(t,e,r,a,n,o){const l=Lt;return k(),F(ve,null,[m("div",null,[i(R,{class:"mb-6",border:""},{default:s(()=>[i(L,{class:"text-h6"},{default:s(()=>[...e[11]||(e[11]=[c("账户安全",-1)])]),_:1}),i(N,null,{default:s(()=>[m("div",ti,[i(re,{color:n.twoFA.enabled?"success":"warning",variant:"tonal","prepend-icon":"mdi-shield-key"},{default:s(()=>[c(" 2FA："+P(n.twoFA.enabled?"已启用":"未启用"),1)]),_:1},8,["color"]),i(re,{color:n.passkeySupported?"primary":"grey",variant:"tonal","prepend-icon":"mdi-fingerprint"},{default:s(()=>[c(" Passkey："+P(n.passkeySupported?"受支持":"不支持"),1)]),_:1},8,["color"])]),m("div",ni,[n.twoFA.enabled?q("",!0):(k(),E(S,{key:0,color:"primary",variant:"flat",onClick:o.handleTwoFASetup,loading:n.twoFALoading},{default:s(()=>[...e[12]||(e[12]=[c(" 启用 2FA ",-1)])]),_:1},8,["onClick","loading"])),n.twoFA.enabled?(k(),E(S,{key:1,color:"error",variant:"text",onClick:o.disableTwoFA,loading:n.twoFALoading},{default:s(()=>[...e[13]||(e[13]=[c(" 禁用 2FA ",-1)])]),_:1},8,["onClick","loading"])):q("",!0),i(S,{color:"secondary",variant:"tonal",disabled:!n.passkeySupported,onClick:o.registerPasskey,loading:n.passkeyLoading},{default:s(()=>[...e[14]||(e[14]=[c(" 注册 Passkey ",-1)])]),_:1},8,["disabled","onClick","loading"]),i(S,{color:"secondary",variant:"tonal",onClick:e[0]||(e[0]=u=>n.showOsRemovalDialog=!0)},{default:s(()=>[...e[15]||(e[15]=[c(" 如何删除 Passkey ",-1)])]),_:1})]),n.twoFA.qr?(k(),F("div",ri,[i(ht,{src:n.twoFA.qr,"max-width":"220",class:"mx-auto"},null,8,["src"]),e[17]||(e[17]=m("div",{class:"text-caption text-center mt-2"},"使用认证器App扫描二维码，然后点击下方按钮输入验证码完成启用",-1)),m("div",ai,[i(S,{color:"primary",variant:"flat",onClick:e[1]||(e[1]=u=>n.showTotpDialog=!0),loading:n.twoFALoading},{default:s(()=>[...e[16]||(e[16]=[c("输入验证码并完成",-1)])]),_:1},8,["loading"])])])):q("",!0),i(it,{class:"my-6"}),m("div",null,[e[19]||(e[19]=m("h4",{class:"text-h6 mb-3"},"已注册的 Passkey",-1)),!n.isLoadingPasskeys&&n.passkeys.length===0?(k(),E(ye,{key:0,type:"info",variant:"tonal",text:"还没有注册任何 Passkey"})):(k(),E(Dt,{key:1,headers:n.passkeyHeaders,items:n.passkeys,loading:n.isLoadingPasskeys,class:"elevation-1 rounded-lg","loading-text":"加载 Passkey 列表...","no-data-text":"没有找到 Passkey"},{"item.credential_id":s(({item:u})=>[m("code",oi,P(o.truncateId(u.credential_id)),1)]),"item.transports":s(({item:u})=>[m("div",ii,[(k(!0),F(ve,null,Xe(u.transports||[],d=>(k(),E(re,{key:d,size:"small",variant:"tonal",color:"primary",text:d},null,8,["text"]))),128))])]),"item.counter":s(({item:u})=>[c(P(u.counter??0),1)]),"item.registered_at":s(({item:u})=>[c(P(o.formatRegisteredAt(u.registered_at)),1)]),"item.actions":s(({item:u})=>[i(S,{color:"error",variant:"text",size:"small",loading:n.deletingId===u.credential_id,onClick:d=>o.confirmDeletePasskey(u.credential_id)},{default:s(()=>[...e[18]||(e[18]=[c(" 删除 ",-1)])]),_:1},8,["loading","onClick"])]),_:1},8,["headers","items","loading"]))])]),_:1})]),_:1}),m("div",si,[e[22]||(e[22]=m("h4",{class:"text-h6 mb-3"},"登录设备",-1)),n.activeTokens.length===0&&!n.isLoadingTokens?(k(),E(ye,{key:0,class:"mb-3",text:"没有活跃的会话",type:"info"})):(k(),E(Dt,{key:1,headers:n.tokenHeaders,items:n.activeTokens,loading:n.isLoadingTokens,class:"elevation-1 rounded-lg","loading-text":"加载会话列表...","no-data-text":"没有找到活跃会话"},{"item.created_at":s(({item:u})=>[c(P(o.formatDate(u.created_at)),1)]),"item.device_info":s(({item:u})=>{var d,f;return[m("div",li,[c(P(((d=u.device_info)==null?void 0:d.os)||"未知")+" ("+P(((f=u.device_info)==null?void 0:f.browser)||"未知")+") ",1),u.is_current?(k(),E(re,{key:0,color:"success",size:"small",text:"当前"})):q("",!0)])]}),"item.ip_address":s(({item:u})=>[c(P(u.ip_address),1)]),"item.ip_location":s(({item:u})=>[u.ip_location?(k(),F("span",ui,P(o.formatIpLocation(u.ip_location)),1)):(k(),F("span",di,"-"))]),"item.activity_count":s(({item:u})=>[i(re,{color:o.getActivityColor(u.activity_count),text:t.getActivityText(u.activity_count),size:"small"},null,8,["color","text"])]),"item.actions":s(({item:u})=>[i(S,{disabled:n.isLoadingTokens||n.isPerformingAction,loading:n.loadingTokenId===u.id,color:"error",size:"small",variant:"text",onClick:d=>o.handleRevokeToken(u.id)},{default:s(()=>[i(A,null,{default:s(()=>[...e[20]||(e[20]=[c("mdi-logout",-1)])]),_:1}),e[21]||(e[21]=c(" 结束会话 ",-1))]),_:1},8,["disabled","loading","onClick"])]),_:1},8,["headers","items","loading"]))]),m("div",ci,[i(S,{disabled:n.isPerformingAction||n.isLoadingTokens,loading:n.isLoggingOutAll,color:"error","prepend-icon":"mdi-logout-variant",onClick:o.confirmLogoutAll},{default:s(()=>[...e[23]||(e[23]=[c(" 退出所有会话 ",-1)])]),_:1},8,["disabled","loading","onClick"])]),i(pe,{modelValue:n.showConfirmDialog,"onUpdate:modelValue":e[3]||(e[3]=u=>n.showConfirmDialog=u),"max-width":"500"},{default:s(()=>[i(R,null,{default:s(()=>[i(L,{class:"text-h5"},{default:s(()=>[c(P(n.confirmDialogTitle),1)]),_:1}),i(N,null,{default:s(()=>[c(P(n.confirmDialogText),1)]),_:1}),i(ce,null,{default:s(()=>[i(de),i(S,{color:"primary",variant:"text",onClick:e[2]||(e[2]=u=>n.showConfirmDialog=!1)},{default:s(()=>[...e[24]||(e[24]=[c("取消",-1)])]),_:1}),i(S,{color:"error",variant:"flat",onClick:o.executeConfirmedAction},{default:s(()=>[...e[25]||(e[25]=[c("确认",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),i(pe,{modelValue:n.showOsRemovalDialog,"onUpdate:modelValue":e[6]||(e[6]=u=>n.showOsRemovalDialog=u),"max-width":"720"},{default:s(()=>[i(R,null,{default:s(()=>[i(L,{class:"text-h6"},{default:s(()=>[...e[26]||(e[26]=[c("同时在本机移除 Passkey（可选）",-1)])]),_:1}),i(N,null,{default:s(()=>[e[35]||(e[35]=m("div",{class:"mb-3"},"您已从账户中删除该 Passkey。为了确保本机不再保留该凭据，请按您的设备系统到设置中删除本地 Passkey：",-1)),i(st,{multiple:"",modelValue:n.defaultOsPanel,"onUpdate:modelValue":e[4]||(e[4]=u=>n.defaultOsPanel=u)},{default:s(()=>[i(ee,null,{default:s(()=>[i(te,{"prepend-icon":"mdi-microsoft-windows"},{default:s(()=>[...e[27]||(e[27]=[c("Windows 10/11",-1)])]),_:1}),i(ne,null,{default:s(()=>[...e[28]||(e[28]=[m("ul",null,[m("li",null,"打开 设置 → 账户 → 登录选项 → Passkeys"),m("li",null,"或 控制面板 → 凭据管理器 → Web 凭据，找到相关网站的 WebAuthn 凭据并删除"),m("li",null,[c("Chrome 浏览器：在地址栏输入 "),m("a",{href:"chrome://settings/passkeys",target:"_blank",rel:"noopener"},"chrome://settings/passkeys")])],-1)])]),_:1})]),_:1}),i(ee,null,{default:s(()=>[i(te,{"prepend-icon":"mdi-apple"},{default:s(()=>[...e[29]||(e[29]=[c("macOS",-1)])]),_:1}),i(ne,null,{default:s(()=>[...e[30]||(e[30]=[m("ul",null,[m("li",null,"系统设置 → 密码 → 找到对应网站条目 → 删除 Passkey"),m("li",null,"或 Safari → 偏好设置 → 密码")],-1)])]),_:1})]),_:1}),i(ee,null,{default:s(()=>[i(te,{"prepend-icon":"mdi-apple-ios"},{default:s(()=>[...e[31]||(e[31]=[c("iOS / iPadOS",-1)])]),_:1}),i(ne,null,{default:s(()=>[...e[32]||(e[32]=[m("ul",null,[m("li",null,"设置 → 密码 → 搜索对应网站 → 删除 Passkey")],-1)])]),_:1})]),_:1}),i(ee,null,{default:s(()=>[i(te,{"prepend-icon":"mdi-android"},{default:s(()=>[...e[33]||(e[33]=[c("Android",-1)])]),_:1}),i(ne,null,{default:s(()=>[...e[34]||(e[34]=[m("ul",null,[m("li",null,"设置 → Google → 密码管理器 → Passkeys"),m("li",null,[c("或 Chrome 浏览器地址栏输入 "),m("a",{href:"chrome://settings/passkeys",target:"_blank",rel:"noopener"},"chrome://settings/passkeys")])],-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"]),i(ye,{class:"mt-4",type:"info",variant:"tonal",text:"若在其它设备也注册过该 Passkey，请在那些设备上重复上述步骤。"})]),_:1}),i(ce,null,{default:s(()=>[i(de),i(S,{color:"primary",variant:"flat",onClick:e[5]||(e[5]=u=>n.showOsRemovalDialog=!1)},{default:s(()=>[...e[36]||(e[36]=[c("我已了解",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),i(l,{modelValue:n.showTotpDialog,"onUpdate:modelValue":e[7]||(e[7]=u=>n.showTotpDialog=u),title:"输入 TOTP 验证码",subtitle:"请在认证器中查看 6 位验证码",loading:n.twoFALoading,"error-message":n.twoFAError,onConfirm:o.handleTotpConfirm},null,8,["modelValue","loading","error-message","onConfirm"]),i(pe,{modelValue:n.showOsRemovalDialog,"onUpdate:modelValue":e[10]||(e[10]=u=>n.showOsRemovalDialog=u),"max-width":"720"},{default:s(()=>[i(R,null,{default:s(()=>[i(L,{class:"text-h6"},{default:s(()=>[...e[37]||(e[37]=[c("同时在本机移除 Passkey（可选）",-1)])]),_:1}),i(N,null,{default:s(()=>[e[46]||(e[46]=m("div",{class:"mb-3"},"您已从账户中删除该 Passkey。为了确保本机不再保留该凭据，请按您的设备系统到设置中删除本地 Passkey：",-1)),i(st,{multiple:"",modelValue:n.defaultOsPanel,"onUpdate:modelValue":e[8]||(e[8]=u=>n.defaultOsPanel=u)},{default:s(()=>[i(ee,null,{default:s(()=>[i(te,{"prepend-icon":"mdi-microsoft-windows"},{default:s(()=>[...e[38]||(e[38]=[c("Windows 10/11",-1)])]),_:1}),i(ne,null,{default:s(()=>[...e[39]||(e[39]=[m("ul",null,[m("li",null,"打开 设置 → 账户 → 登录选项 → Passkeys"),m("li",null,"或 控制面板 → 凭据管理器 → Web 凭据，找到相关网站的 WebAuthn 凭据并删除"),m("li",null,[c("Edge 浏览器：在地址栏输入 "),m("a",{href:"edge://settings/passkeys",target:"_blank",rel:"noopener"},"edge://settings/passkeys")])],-1)])]),_:1})]),_:1}),i(ee,null,{default:s(()=>[i(te,{"prepend-icon":"mdi-apple"},{default:s(()=>[...e[40]||(e[40]=[c("macOS",-1)])]),_:1}),i(ne,null,{default:s(()=>[...e[41]||(e[41]=[m("ul",null,[m("li",null,"系统设置 → 密码 → 找到对应网站条目 → 删除 Passkey"),m("li",null,"或 Safari → 偏好设置 → 密码")],-1)])]),_:1})]),_:1}),i(ee,null,{default:s(()=>[i(te,{"prepend-icon":"mdi-apple-ios"},{default:s(()=>[...e[42]||(e[42]=[c("iOS / iPadOS",-1)])]),_:1}),i(ne,null,{default:s(()=>[...e[43]||(e[43]=[m("ul",null,[m("li",null,"设置 → 密码 → 搜索对应网站 → 删除 Passkey")],-1)])]),_:1})]),_:1}),i(ee,null,{default:s(()=>[i(te,{"prepend-icon":"mdi-android"},{default:s(()=>[...e[44]||(e[44]=[c("Android",-1)])]),_:1}),i(ne,null,{default:s(()=>[...e[45]||(e[45]=[m("ul",null,[m("li",null,"设置 → Google → 密码管理器 → Passkeys"),m("li",null,[c("或 Chrome 浏览器地址栏输入 "),m("a",{href:"chrome://settings/passkeys",target:"_blank",rel:"noopener"},"chrome://settings/passkeys")])],-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"]),i(ye,{class:"mt-4",type:"info",variant:"tonal",text:"若在其它设备也注册过该 Passkey，请在那些设备上重复上述步骤。"})]),_:1}),i(ce,null,{default:s(()=>[i(de),i(S,{color:"primary",variant:"flat",onClick:e[9]||(e[9]=u=>n.showOsRemovalDialog=!1)},{default:s(()=>[...e[47]||(e[47]=[c("我已了解",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}const yn=K(ei,[["render",fi]]),mi={name:"AvatarEditor",props:{userData:{type:Object,required:!0},s3BucketUrl:{type:String,required:!0}},data(){return{loading:!1,avatarFile:null,previewImage:null,localuser:fe}},methods:{onFileChange(t){const e=t.target.files?t.target.files[0]:null;e instanceof File&&e.type.startsWith("image/")?new Ln(e,{quality:.8,maxWidth:500,maxHeight:500,success:r=>{this.previewImage=URL.createObjectURL(r),this.avatarFile=r},error:r=>{console.error("图片压缩出错：",r.message),this.$emit("error",{message:"图片压缩出错："+r.message})}}):e&&this.$emit("error",{message:"请选择有效的图片文件"})},async uploadAvatar(){if(this.avatarFile){this.loading=!0;try{const t=new FormData;t.append("zcfile",this.avatarFile);const e=await Wn("",t);this.$emit("avatar-updated",e),this.avatarFile=null}catch(t){this.$emit("error",t)}finally{this.loading=!1}}}}},gi={class:"d-flex align-center justify-center fill-height"};function hi(t,e,r,a,n,o){return k(),E(ge,null,{default:s(()=>[i(x,{cols:"12",md:"6"},{default:s(()=>[i(jn,{rules:[l=>!l||!l.length||l[0].size<2e6||"头像大小不能超过2MB"],accept:"image/*",density:"comfortable",label:"上传头像",placeholder:"选择图片上传","prepend-icon":"mdi-camera","show-size":"",variant:"outlined",onChange:o.onFileChange},null,8,["rules","onChange"]),e[0]||(e[0]=m("div",{class:"text-caption text-medium-emphasis"},"图片将被自动压缩",-1))]),_:1}),i(x,{class:"d-flex align-center justify-center",cols:"12",md:"6"},{default:s(()=>[i(Un,{class:En(["rounded-lg overflow-hidden","elevation-2"]),height:"150",width:"150"},{default:s(()=>[i(ht,{src:n.previewImage||n.localuser.getUserAvatar(),class:"bg-grey-lighten-3",cover:"",height:"150",width:"150"},{placeholder:s(()=>[m("div",gi,[i(A,{color:"grey-darken-1",icon:"mdi-image",size:"64"})])]),_:1},8,["src"])]),_:1})]),_:1}),i(x,{cols:"12"},{default:s(()=>[i(S,{disabled:!n.avatarFile,loading:n.loading,class:"px-6",color:"primary","prepend-icon":"mdi-cloud-upload",size:"large",onClick:o.uploadAvatar},{default:s(()=>[...e[1]||(e[1]=[c(" 上传头像 ",-1)])]),_:1},8,["disabled","loading","onClick"])]),_:1})]),_:1})}const wn=K(mi,[["render",hi]]),yi={name:"PasswordEditor",data(){return{loading:!1,valid:!1,oldPassword:"",newPassword:"",confirmPassword:"",passwordRules:[t=>!!t||"请输入新密码",t=>/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[$@$!%*?&\.])[A-Za-z\d$@$!%*?&\.]{8,}/.test(t)||"密码必须由数字、大小写字母和特殊字符组成，且长度至少为8位"]}},setup(){return{sudoManager:qe()}},methods:{async changePassword(){if(this.valid){this.loading=!0;try{const t=await this.sudoManager.requireSudo({title:"修改密码",subtitle:"这是一个重要操作，需要验证您的身份。",persistent:!0}),e=await Yn({oldpw:this.oldPassword,newpw:this.newPassword},t);this.$emit("password-updated",e),this.oldPassword="",this.newPassword="",this.confirmPassword=""}catch(t){t.type!=="cancel"&&this.$emit("error",t)}finally{this.loading=!1}}}}};function wi(t,e,r,a,n,o){return k(),E(He,{modelValue:n.valid,"onUpdate:modelValue":e[3]||(e[3]=l=>n.valid=l),onSubmit:je(o.changePassword,["prevent"])},{default:s(()=>[i(ge,null,{default:s(()=>[i(x,{cols:"12",md:"8"},{default:s(()=>[i(U,{modelValue:n.oldPassword,"onUpdate:modelValue":e[0]||(e[0]=l=>n.oldPassword=l),rules:[l=>!!l||"请输入当前密码"],density:"comfortable",label:"当前密码",required:"",type:"password",variant:"outlined"},null,8,["modelValue","rules"])]),_:1}),i(x,{cols:"12",md:"8"},{default:s(()=>[i(U,{modelValue:n.newPassword,"onUpdate:modelValue":e[1]||(e[1]=l=>n.newPassword=l),rules:n.passwordRules,density:"comfortable",label:"新密码",required:"",type:"password",variant:"outlined"},null,8,["modelValue","rules"]),e[4]||(e[4]=m("div",{class:"text-caption text-medium-emphasis"}," 密码必须由数字、大小写字母和特殊字符组成，且长度至少为8位 ",-1))]),_:1}),i(x,{cols:"12",md:"8"},{default:s(()=>[i(U,{modelValue:n.confirmPassword,"onUpdate:modelValue":e[2]||(e[2]=l=>n.confirmPassword=l),rules:[l=>!!l||"请确认新密码",l=>l===n.newPassword||"两次输入的密码不一致"],density:"comfortable",label:"确认新密码",required:"",type:"password",variant:"outlined"},null,8,["modelValue","rules"])]),_:1}),i(x,{cols:"12"},{default:s(()=>[i(S,{disabled:!n.valid,loading:n.loading,class:"px-6",color:"primary","prepend-icon":"mdi-lock-reset",size:"large",onClick:o.changePassword},{default:s(()=>[...e[5]||(e[5]=[c(" 更新密码 ",-1)])]),_:1},8,["disabled","loading","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue","onSubmit"])}const pn=K(yi,[["render",wi]]),pi={name:"UsernameEditor",props:{userData:{type:Object,required:!0}},data(){return{loading:!1,valid:!1,username:this.userData.username||"",usernameRules:[t=>!!t||"用户名是必填项"]}},watch:{userData:{handler(t){this.username=t.username||""},immediate:!0}},setup(){return{sudoManager:qe()}},methods:{async changeUsername(){if(this.valid){this.loading=!0;try{const t=await this.sudoManager.requireSudo({title:"修改用户名",subtitle:"修改用户名是一个敏感操作，需要验证您的身份。",persistent:!0}),e=await zn({username:this.username},t);this.$emit("username-updated",e)}catch(t){t.type!=="cancel"&&this.$emit("error",t)}finally{this.loading=!1}}}}};function bi(t,e,r,a,n,o){return k(),E(He,{modelValue:n.valid,"onUpdate:modelValue":e[1]||(e[1]=l=>n.valid=l),onSubmit:je(o.changeUsername,["prevent"])},{default:s(()=>[i(ge,null,{default:s(()=>[i(x,{cols:"12",md:"8"},{default:s(()=>[i(U,{modelValue:n.username,"onUpdate:modelValue":e[0]||(e[0]=l=>n.username=l),counter:10,rules:n.usernameRules,density:"comfortable",label:"用户名",required:"",variant:"outlined"},null,8,["modelValue","rules"]),e[2]||(e[2]=m("div",{class:"text-caption text-medium-emphasis"},"用户名只能包含小写字母",-1))]),_:1}),i(x,{cols:"12"},{default:s(()=>[i(S,{disabled:!n.valid,loading:n.loading,class:"px-6",color:"primary","prepend-icon":"mdi-check",size:"large",onClick:o.changeUsername},{default:s(()=>[...e[3]||(e[3]=[c(" 保存用户名 ",-1)])]),_:1},8,["disabled","loading","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue","onSubmit"])}const bn=K(pi,[["render",bi]]),ki={name:"ProfileEditor",components:{RegionSelector:Yt,ProjectSelector:zt},props:{userData:{type:Object,required:!0}},data(){return{loading:!1,valid:!1,showRegionDialog:!1,profileData:{display_name:this.userData.display_name||"",motto:this.userData.motto||"",bio:this.userData.bio||"",location:this.userData.location||"",region:this.userData.region?{value:this.userData.region,text:Pt[this.userData.region]||""}:null,url:this.userData.url||"",birthday:this.userData.birthday||"",featured_projects:this.userData.featured_projects||""},selectedGender:{state:"未知",abbr:"3"},genderOptions:[{state:"男",abbr:"0"},{state:"女",abbr:"1"},{state:"猫娘",abbr:"2"},{state:"未知",abbr:"3"}],nameRules:[t=>!!t||"名称是必填项",t=>t&&t.length<=20||"名称不能超过20个字符"],locationRules:[t=>!t||t.length<=100||"地址不能超过100个字符"],regionRules:[t=>!t||t.length<=100||"区域不能超过100个字符"],urlRules:[t=>!t||t.length<=255||"URL不能超过255个字符",t=>!t||/^https?:\/\/.*/.test(t)||"URL必须以http://或https://开头"],birthdayRules:[t=>!t||/^\d{4}-\d{2}-\d{2}$/.test(t)||"生日格式必须为YYYY-MM-DD"],projectIdRules:[t=>!t||/^\d+$/.test(t)||"项目ID必须是数字"]}},computed:{},watch:{userData:{handler(t){this.profileData={display_name:t.display_name||"",motto:t.motto||"",bio:t.bio||"",location:t.location||"",region:t.region?{value:t.region,text:Pt[t.region]||""}:null,url:t.url||"",birthday:t.birthday?this.formatDateForInput(t.birthday):"",featured_projects:t.featured_projects||""},this.selectedGender=this.genderOptions.find(e=>e.abbr==t.sex)||this.genderOptions[3]},immediate:!0,deep:!0}},methods:{formatDateForInput(t){return t?new Date(t).toISOString().split("T")[0]:""},selectRegion(t){this.profileData.region=t,this.showRegionDialog=!1},clearRegion(){this.profileData.region=null,this.showRegionDialog=!1},async updateProfile(){var t;if(this.valid){this.loading=!0;try{const e=await qn({display_name:this.profileData.display_name,motto:this.profileData.motto,bio:this.profileData.bio,location:this.profileData.location,region:((t=this.profileData.region)==null?void 0:t.value)||"",sex:this.selectedGender.abbr,url:this.profileData.url,birthday:this.profileData.birthday,featured_projects:this.profileData.featured_projects||void 0});this.$emit("profile-updated",e)}catch(e){this.$emit("error",e)}finally{this.loading=!1}}}}};function vi(t,e,r,a,n,o){const l=zt,u=Yt;return k(),E(He,{modelValue:n.valid,"onUpdate:modelValue":e[12]||(e[12]=d=>n.valid=d),onSubmit:je(o.updateProfile,["prevent"])},{default:s(()=>[i(ge,null,{default:s(()=>[i(x,{cols:"12",md:"6"},{default:s(()=>[i(U,{modelValue:n.profileData.display_name,"onUpdate:modelValue":e[0]||(e[0]=d=>n.profileData.display_name=d),counter:20,rules:n.nameRules,density:"comfortable",label:"显示名称",required:"",variant:"outlined"},null,8,["modelValue","rules"])]),_:1}),i(x,{cols:"12",md:"6"},{default:s(()=>[i(Ot,{modelValue:n.selectedGender,"onUpdate:modelValue":e[1]||(e[1]=d=>n.selectedGender=d),items:n.genderOptions,density:"comfortable","item-title":"state","item-value":"abbr",label:"性别","persistent-hint":"","return-object":"",variant:"outlined"},null,8,["modelValue","items"])]),_:1}),i(x,{cols:"12",md:"6"},{default:s(()=>[i(U,{modelValue:n.profileData.location,"onUpdate:modelValue":e[2]||(e[2]=d=>n.profileData.location=d),counter:100,rules:n.locationRules,density:"comfortable",label:"地点",variant:"outlined"},null,8,["modelValue","rules"])]),_:1}),i(x,{cols:"12",md:"6"},{default:s(()=>{var d;return[i(U,{"model-value":((d=n.profileData.region)==null?void 0:d.text)||"",rules:n.regionRules,density:"comfortable",hint:"点击选择您所在的区域",label:"区域","persistent-hint":"",readonly:"",variant:"outlined",onClick:e[4]||(e[4]=f=>n.showRegionDialog=!0)},{append:s(()=>[i(S,{icon:"mdi-map-marker",variant:"text",onClick:e[3]||(e[3]=f=>n.showRegionDialog=!0)})]),_:1},8,["model-value","rules"])]}),_:1}),i(x,{cols:"12",md:"6"},{default:s(()=>[i(U,{modelValue:n.profileData.url,"onUpdate:modelValue":e[5]||(e[5]=d=>n.profileData.url=d),counter:255,rules:n.urlRules,density:"comfortable",label:"个人网站",variant:"outlined"},null,8,["modelValue","rules"])]),_:1}),i(x,{cols:"12",md:"6"},{default:s(()=>[i(U,{modelValue:n.profileData.birthday,"onUpdate:modelValue":e[6]||(e[6]=d=>n.profileData.birthday=d),rules:n.birthdayRules,density:"comfortable",label:"生日",type:"date",variant:"outlined"},null,8,["modelValue","rules"])]),_:1}),i(x,{cols:"12"},{default:s(()=>[i(U,{modelValue:n.profileData.motto,"onUpdate:modelValue":e[7]||(e[7]=d=>n.profileData.motto=d),counter:500,density:"comfortable",label:"一行简介",variant:"outlined"},null,8,["modelValue"])]),_:1}),i(x,{cols:"12"},{default:s(()=>[i(Xn,{modelValue:n.profileData.bio,"onUpdate:modelValue":e[8]||(e[8]=d=>n.profileData.bio=d),counter:2e3,"auto-grow":"",hint:"支持Markdown格式",label:"详细介绍","persistent-hint":"",rows:"3",variant:"outlined"},null,8,["modelValue"])]),_:1}),i(x,{cols:"12",md:"6"},{default:s(()=>[i(l,{modelValue:n.profileData.featured_projects,"onUpdate:modelValue":e[9]||(e[9]=d=>n.profileData.featured_projects=d),multiple:!1,author:"me"},null,8,["modelValue"]),i(U,{disabled:"",modelValue:n.profileData.featured_projects,"onUpdate:modelValue":e[10]||(e[10]=d=>n.profileData.featured_projects=d),rules:n.projectIdRules,density:"comfortable",hint:"输入您的项目ID",label:"精选项目ID","persistent-hint":"",type:"number",variant:"outlined"},null,8,["modelValue","rules"])]),_:1}),i(x,{cols:"12"},{default:s(()=>[i(S,{disabled:!n.valid,loading:n.loading,class:"px-6",color:"primary","prepend-icon":"mdi-content-save",size:"large",onClick:o.updateProfile},{default:s(()=>[...e[13]||(e[13]=[c(" 保存资料 ",-1)])]),_:1},8,["disabled","loading","onClick"])]),_:1})]),_:1}),i(u,{modelValue:n.showRegionDialog,"onUpdate:modelValue":e[11]||(e[11]=d=>n.showRegionDialog=d),"selected-region":n.profileData.region,onClear:o.clearRegion,onSelect:o.selectRegion},null,8,["modelValue","selected-region","onClear","onSelect"])]),_:1},8,["modelValue","onSubmit"])}const kn=K(ki,[["render",vi],["__scopeId","data-v-ebeb993e"]]),Di={name:"UserCard",props:{userData:{type:Object,required:!0},loading:{type:Boolean,default:!1},s3BucketUrl:{type:String,required:!0}},data(){return{localuser:fe}}},Pi={class:"text-body-2 text-medium-emphasis",style:{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}};function _i(t,e,r,a,n,o){return k(),E(R,{loading:r.loading,border:"",class:"mb-4",hover:"",variant:"elevated"},{prepend:s(()=>[i(Rt,{class:"ma-3",size:"64"},{default:s(()=>[i(ht,{alt:r.userData.display_name,src:n.localuser.getUserAvatar(r.userData.avatar),cover:""},null,8,["alt","src"])]),_:1})]),loader:s(({isActive:l})=>[i(In,{active:l,color:"primary",height:"4",indeterminate:""},null,8,["active"])]),default:s(()=>[i(xn,null,{default:s(()=>[i(L,{class:"font-weight-bold text-h5"},{default:s(()=>[c(P(r.userData.display_name||"加载中..."),1)]),_:1}),i(Vn,{class:"mt-2"},{default:s(()=>[i(re,{class:"mr-2",size:"small"},{default:s(()=>[i(A,{icon:"mdi-account-circle",size:"small",start:""}),c(" ID: "+P(r.userData.id||"—"),1)]),_:1}),i(re,{size:"small"},{default:s(()=>[i(A,{icon:"mdi-tag",size:"small",start:""}),e[0]||(e[0]=c(" 创作者 ",-1))]),_:1})]),_:1})]),_:1}),r.userData.bio?(k(),E(N,{key:0},{default:s(()=>[m("div",Pi,P(r.userData.bio),1)]),_:1})):q("",!0)]),_:1},8,["loading"])}const vn=K(Di,[["render",_i]]),Ci={components:{EmailManager:Wt,OAuthManager:Ut,SecurityManager:yn,UserCard:vn,ProfileEditor:kn,UsernameEditor:bn,PasswordEditor:pn,AvatarEditor:wn,UserFollowing:Jn,UserFollowers:Gn,UserBlocked:Qn,TokenManager:qt,NotificationSettingsCard:jt},data(){return{userCardLoading:!1,localuser:fe,userInfo:{},tab:"userInfo",tabItems:[{title:"用户信息",value:"userInfo",icon:"mdi-account-circle"},{title:"账户",value:"username",icon:"mdi-cog"},{title:"密码",value:"password",icon:"mdi-lock"},{title:"头像",value:"avatar",icon:"mdi-image"},{title:"邮箱",value:"email",icon:"mdi-email"},{title:"OAuth",value:"oauth",icon:"mdi-link-variant"},{title:"安全",value:"security",icon:"mdi-security"},{title:"关系",value:"relationships",icon:"mdi-account-group",to:"/app/account/relationships"},{title:"通知",value:"notifications",icon:"mdi-bell"},{title:"令牌",value:"tokens",icon:"mdi-key"},{title:"开发者",value:"developer",icon:"mdi-account-group",to:"/app/account/developer"}],loading:!1,error:null,s3BucketUrl:""}},setup(){Nn({title:"账户设置"});const t=we(null);return mt(async()=>{t.value=vt("s3.staticurl")}),{s3BucketUrl:t}},async mounted(){this.s3BucketUrl=vt("s3.staticurl")},async created(){await this.getUserById()},methods:{async getUserById(){this.userCardLoading=!0;try{const t=await Hn(fe.user.value.id);this.userInfo=t.data.data}catch(t){this.handleError(t)}finally{this.userCardLoading=!1}},handleProfileUpdate(t){this.showToast(t.data.status||"info","修改个人信息",t.data.message),this.getUserById()},handleUsernameUpdate(t){this.showToast(t.data.status||"info","修改用户名",t.data.message),this.getUserById()},handlePasswordUpdate(t){this.showToast(t.data.status||"info","修改密码",t.data.message)},handleAvatarUpdate(t){this.showToast(t.data.status||"info","修改头像",t.data.message),this.getUserById()},handleTokenCreated(t){this.showToast(t.data.status||"success","创建令牌",t.data.message||"令牌创建成功")},handleTokenDeleted(t){this.showToast("success","删除令牌","令牌删除成功")},handleTokenRevoked(t){this.showToast("success","吊销令牌","令牌吊销成功")},handleError(t){this.showToast("error","错误",t.message)},showToast(t,e,r){this.$toast.add({severity:t,summary:e,detail:r,life:3e3})}}};function Ti(t,e,r,a,n,o){const l=vn,u=kn,d=bn,f=pn,g=wn,_=Wt,y=Ut,w=yn,p=jt,h=qt;return k(),E(gt,{class:"pa-4",fluid:""},{default:s(()=>[i(l,{loading:n.userCardLoading,s3BucketUrl:a.s3BucketUrl,userData:n.userInfo},null,8,["loading","s3BucketUrl","userData"]),i(R,{border:"",hover:""},{default:s(()=>[i(Fn,{modelValue:n.tab,"onUpdate:modelValue":e[0]||(e[0]=C=>n.tab=C),"bg-color":"primary"},{default:s(()=>[(k(!0),F(ve,null,Xe(n.tabItems,C=>(k(),E(Bn,{key:C.value,"prepend-icon":C.icon,text:C.title,to:C.to,value:C.value,onClick:b=>n.tab=C.value},null,8,["prepend-icon","text","to","value","onClick"]))),128))]),_:1},8,["modelValue"]),i(N,{class:"pa-4"},{default:s(()=>[i(On,{modelValue:n.tab,"onUpdate:modelValue":e[1]||(e[1]=C=>n.tab=C)},{default:s(()=>[i(X,{value:"userInfo"},{default:s(()=>[e[2]||(e[2]=m("h3",{class:"text-h5 mb-4"},"个人资料",-1)),i(u,{userData:n.userInfo,onError:o.handleError,onProfileUpdated:o.handleProfileUpdate},null,8,["userData","onError","onProfileUpdated"])]),_:1}),i(X,{value:"username"},{default:s(()=>[e[3]||(e[3]=m("h3",{class:"text-h5 mb-4"},"修改用户名",-1)),i(d,{userData:n.userInfo,onError:o.handleError,onUsernameUpdated:o.handleUsernameUpdate},null,8,["userData","onError","onUsernameUpdated"])]),_:1}),i(X,{value:"password"},{default:s(()=>[e[4]||(e[4]=m("h3",{class:"text-h5 mb-4"},"修改密码",-1)),i(f,{onError:o.handleError,onPasswordUpdated:o.handlePasswordUpdate},null,8,["onError","onPasswordUpdated"])]),_:1}),i(X,{value:"avatar"},{default:s(()=>[e[5]||(e[5]=m("h3",{class:"text-h5 mb-4"},"更新头像",-1)),i(g,{s3BucketUrl:a.s3BucketUrl,userData:n.userInfo,onError:o.handleError,onAvatarUpdated:o.handleAvatarUpdate},null,8,["s3BucketUrl","userData","onError","onAvatarUpdated"])]),_:1}),i(X,{value:"email"},{default:s(()=>[e[6]||(e[6]=m("h3",{class:"text-h5 mb-4"},"邮箱管理",-1)),i(_,{ref:"emailManager"},null,512)]),_:1}),i(X,{value:"oauth"},{default:s(()=>[e[7]||(e[7]=m("h3",{class:"text-h5 mb-4"},"第三方账号关联",-1)),i(y)]),_:1}),i(X,{value:"security"},{default:s(()=>[e[8]||(e[8]=m("h3",{class:"text-h5 mb-4"},"安全管理",-1)),i(w)]),_:1}),i(X,{value:"relationships"}),i(X,{value:"notifications"},{default:s(()=>[e[9]||(e[9]=m("h3",{class:"text-h5 mb-4"},"通知设置",-1)),i(p)]),_:1}),i(X,{value:"tokens"},{default:s(()=>[e[10]||(e[10]=m("h3",{class:"text-h5 mb-4"},"API令牌管理",-1)),i(h,{onError:o.handleError,onTokenCreated:o.handleTokenCreated,onTokenDeleted:o.handleTokenDeleted,onTokenRevoked:o.handleTokenRevoked},null,8,["onError","onTokenCreated","onTokenDeleted","onTokenRevoked"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})}const zi=K(Ci,[["render",Ti],["__scopeId","data-v-3afe3273"]]);export{zi as default};
