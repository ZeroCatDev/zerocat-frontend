import{o as v}from"./openEdit-AJJkPSPH.js";import{_ as V,ac as y,Y as C,o as h,N as o,f as l,e as n,L as r,X as u,W as p,aE as d,i as f,aB as k,aC as g,T as w,a1 as B,ab as a,ak as j,M as b}from"./index-DI76moR_.js";import{V as x}from"./VCheckbox-Cq2JUEC2.js";import"https://static.geetest.com/v4/gt4.js";import"./VCheckboxBtn-B8dmKHWV.js";import"./VSelectionControl-Cz3PfTMn.js";const N={data(){return{project:{},author:{},openEditor:v,localuser:a,checktext:"",checkknow:!0,checklicense:!0,checkname:!1,textRules:[s=>s?!0:"记得输入内容哦~",s=>s==="我保证会好好对待分叉的作品"?!0:"输的不太对~"],forkprojectinfo:{name:""}}},async created(){a.isLogin.value===!1&&this.$router.push("/app/account/login"),this.fetchProjectAndAuthorDetails()},setup(){b({title:"分叉"})},methods:{async fetchProjectAndAuthorDetails(){const s=this.$route.params.username,e=this.$route.params.projectname;this.project=await j(s,e),this.projectid=this.project.id,this.forkprojectinfo.name=this.project.name,verifyname(),b({title:"分叉"+this.project.title}),this.author=this.project.author},async verifyname(){j(a.user.value.username,this.forkprojectinfo.name).then(s=>{console.log(s),s.id===0&&(this.checkname=!0)})},async forkproject(s){await B({url:"/project/fork",method:"post",data:{projectid:s,branch:this.project.default_branch,name:this.forkprojectinfo.name}}).then(e=>{console.log(e.data),this.$toast.add({severity:e.data.status,summary:e.data.message,detail:e.data.message,life:3e3}),e.data.status=="success"&&this.$router.push(`/${a.user.value.username}/${this.forkprojectinfo.name}`)}).catch(e=>{console.log(e),this.$toast.add({severity:"error",summary:"错误",detail:e,life:3e3})})}}},A={class:"d-flex justify-space-between"},U={class:"text-h4"},L=["textContent"],Z=["textContent"];function D(s,e,F,P,t,m){const c=y("v-text");return h(),C(w,{class:"pa-md-12"},{default:o(()=>[l("div",A,[l("h1",U,[e[6]||(e[6]=r("Fork ",-1)),l("span",{textContent:u(t.project.title)},null,8,L)])]),e[22]||(e[22]=l("br",null,null,-1)),n(p,{border:"",hover:""},{title:o(()=>[r(u(t.project.title),1)]),subtitle:o(()=>[r(" 作者"+u(t.author.display_name)+"，发布于："+u(t.project.time)+"，"+u(t.project.view_count)+"次浏览 ",1)]),text:o(()=>[r(u(t.project.description),1)]),_:1}),e[23]||(e[23]=l("br",null,null,-1)),n(p,{border:"",hover:""},{title:o(()=>e[7]||(e[7]=[r(" 你正在分叉一个项目",-1)])),subtitle:o(()=>e[8]||(e[8]=[r("等等，确认点事",-1)])),text:o(()=>[e[9]||(e[9]=r(" 你正在分叉 ",-1)),l("span",{textContent:u(t.project.title)},null,8,Z),e[10]||(e[10]=r(" ，这将会从此项目的生产环境创建一个一模一样的项目，新的项目将拥有一样的名称，简介与源代码内容。分叉是一个技术概念，不代表作者对你有任何授权。 ",-1)),e[11]||(e[11]=l("br",null,null,-1)),e[12]||(e[12]=r("分叉设立的目的是为了让社区中的作品得到更好的发展，请不要滥用分叉，更不能直接抄袭。 ",-1))]),default:o(()=>[n(d,null,{default:o(()=>[n(x,{modelValue:t.checkknow,"onUpdate:modelValue":e[0]||(e[0]=i=>t.checkknow=i),label:"我已了解并确认"},null,8,["modelValue"])]),_:1})]),_:1}),e[24]||(e[24]=l("br",null,null,-1)),n(p,{border:"",hover:""},{title:o(()=>[r(u(t.project.license),1)]),subtitle:o(()=>[r(" 你需要遵守："+u(t.project.license)+"许可证。 ",1)]),text:o(()=>[n(f,{href:"https://choosealicense.com/licenses/"+t.project.license,target:"_blank",variant:"outlined"},{default:o(()=>e[13]||(e[13]=[r("了解此许可证 ",-1)])),_:1,__:[13]},8,["href"]),e[14]||(e[14]=l("br",null,null,-1)),e[15]||(e[15]=l("br",null,null,-1)),e[16]||(e[16]=r(" 开源许可证授予您某些权利，前提是您必须遵守相关许可证条款。如未明确标示许可证（显示为NULL），则默认作品受专有版权保护。在分发该作品之前，您需联系作者并获得授权。 ",-1)),e[17]||(e[17]=l("br",null,null,-1)),e[18]||(e[18]=r(" 用户在ZeroCat上分发该作品，并不意味着其拥有该作品的所有权。作品的分叉仅为技术行为，不等同于获得作者的法律授权。",-1)),e[19]||(e[19]=l("br",null,null,-1)),e[20]||(e[20]=r(" ZeroCat对用户上传、分发或使用的任何作品不承担任何法律责任。ZeroCat仅提供技术支持和托管服务，用户对所上传、分发及使用的作品负责，若因作品内容引发任何法律纠纷或损失，ZeroCat不承担任何责任。 ",-1))]),default:o(()=>[n(d,null,{default:o(()=>[n(x,{modelValue:t.checklicense,"onUpdate:modelValue":e[1]||(e[1]=i=>t.checklicense=i),label:"我已了解并确认"},null,8,["modelValue"])]),_:1})]),_:1}),e[25]||(e[25]=l("br",null,null,-1)),n(c,null,{default:o(()=>e[21]||(e[21]=[r("如果您已了解以上内容，请在下方的输入框中输入",-1)])),_:1,__:[21]}),e[26]||(e[26]=l("br",null,null,-1)),e[27]||(e[27]=l("br",null,null,-1)),n(k,{modelValue:t.checktext,"onUpdate:modelValue":e[2]||(e[2]=i=>t.checktext=i),rules:t.textRules,clearable:"",hint:"请准确输入上方的话",label:"我保证会好好对待分叉的作品",required:"",type:"input",variant:"outlined"},null,8,["modelValue","rules"]),n(k,{modelValue:t.forkprojectinfo.name,"onUpdate:modelValue":e[3]||(e[3]=i=>t.forkprojectinfo.name=i),color:t.checkname?"success":"error",label:"分叉后项目名称",variant:"outlined",onKeyup:e[4]||(e[4]=g(i=>m.verifyname(),["enter"]))},null,8,["modelValue","color"]),e[28]||(e[28]=l("br",null,null,-1)),n(f,{disabled:!t.checkknow||!t.checklicense||!t.checktext,"append-icon":"mdi-arrow-right",class:"text-none",color:"primary",rounded:"xl",size:"large",text:"Fork",variant:"flat",onClick:e[5]||(e[5]=i=>m.forkproject(t.project.id))},null,8,["disabled"])]),_:1,__:[22,23,24,25,26,27,28]})}const z=V(N,[["render",D]]);export{z as default};
