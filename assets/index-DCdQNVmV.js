import{_ as Y,ab as F,c as q,o as p,f as v,e as o,Y as M,a5 as Ce,N as u,i as P,L as g,O as A,S as B,X as O,$ as me,W as Q,a9 as ee,a3 as G,aE as fe,aA as he,R as y,D as We,n as _e,Q as J,aB as x,aD as te,aF as ne,ad as Ue,F as ge,U as be,ae as Ye,aN as Ee,aP as Fe,j as Ie,Z as qe,ah as Ae,ai as Re,V as je,q as S,T as Le,aa as ae,M as Ne,r as Be,b as Xe}from"./index-DLVtWvMv.js";import{V as He}from"./VDataTable-DgfYm21J.js";import{V as $}from"./VSpacer-BapvIcN2.js";import{_ as ye}from"./OAuthManager-Dr8nfQC7.js";import{_ as we}from"./EmailManager-AstfZlpb.js";import{C as Qe}from"./compressor.esm-C46f8uP2.js";import{u as Ge,a as Je,b as Ze,c as Ke,g as $e}from"./accountService-BIl6hhP3.js";import{V as et}from"./VFileInput-BS7oyDEH.js";import{V as tt}from"./VSheet-CbWEkE2W.js";import{V as nt}from"./VSelect--WxGXyyx.js";import{V as at}from"./VTextarea-CQflRzMk.js";import{a as rt,_ as st}from"./UserFollowers-2-ptN9jp.js";import{_ as ot}from"./UserBlocked-hC3RZ8X7.js";import"./VCheckboxBtn-lJiscd3a.js";import"./VSelectionControl-CTonzeVV.js";import"./VTable-Bj9VbkHM.js";import"./filter-DEmIA30P.js";import"./oauth_providers-BTwCArWd.js";const pe=6048e5,it=864e5,L=43200,re=1440,se=Symbol.for("constructDateFrom");function C(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&se in t?t[se](e):t instanceof Date?new t.constructor(e):new Date(e)}function w(t,e){return C(e||t,t)}let ut={};function R(){return ut}function U(t,e){var c,l,f,h;const n=R(),r=(e==null?void 0:e.weekStartsOn)??((l=(c=e==null?void 0:e.locale)==null?void 0:c.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((h=(f=n.locale)==null?void 0:f.options)==null?void 0:h.weekStartsOn)??0,a=w(t,e==null?void 0:e.in),i=a.getDay(),s=(i<r?7:0)+i-r;return a.setDate(a.getDate()-s),a.setHours(0,0,0,0),a}function X(t,e){return U(t,{...e,weekStartsOn:1})}function ve(t,e){const n=w(t,e==null?void 0:e.in),r=n.getFullYear(),a=C(n,0);a.setFullYear(r+1,0,4),a.setHours(0,0,0,0);const i=X(a),s=C(n,0);s.setFullYear(r,0,4),s.setHours(0,0,0,0);const c=X(s);return n.getTime()>=i.getTime()?r+1:n.getTime()>=c.getTime()?r:r-1}function H(t){const e=w(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function j(t,...e){const n=C.bind(null,t||e.find(r=>typeof r=="object"));return e.map(n)}function oe(t,e){const n=w(t,e==null?void 0:e.in);return n.setHours(0,0,0,0),n}function ct(t,e,n){const[r,a]=j(n==null?void 0:n.in,t,e),i=oe(r),s=oe(a),c=+i-H(i),l=+s-H(s);return Math.round((c-l)/it)}function lt(t,e){const n=ve(t,e),r=C(t,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),X(r)}function N(t,e){const n=+w(t)-+w(e);return n<0?-1:n>0?1:n}function dt(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function mt(t){return!(!dt(t)&&typeof t!="number"||isNaN(+w(t)))}function ft(t,e,n){const[r,a]=j(n==null?void 0:n.in,t,e),i=r.getFullYear()-a.getFullYear(),s=r.getMonth()-a.getMonth();return i*12+s}function ht(t){return e=>{const r=(t?Math[t]:Math.trunc)(e);return r===0?0:r}}function _t(t,e){return+w(t)-+w(e)}function gt(t,e){const n=w(t,e==null?void 0:e.in);return n.setHours(23,59,59,999),n}function bt(t,e){const n=w(t,e==null?void 0:e.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function yt(t,e){const n=w(t,e==null?void 0:e.in);return+gt(n,e)==+bt(n,e)}function wt(t,e,n){const[r,a,i]=j(n==null?void 0:n.in,t,t,e),s=N(a,i),c=Math.abs(ft(a,i));if(c<1)return 0;a.getMonth()===1&&a.getDate()>27&&a.setDate(30),a.setMonth(a.getMonth()-s*c);let l=N(a,i)===-s;yt(r)&&c===1&&N(r,i)===1&&(l=!1);const f=s*(c-+l);return f===0?0:f}function pt(t,e,n){const r=_t(t,e)/1e3;return ht(n==null?void 0:n.roundingMethod)(r)}function vt(t,e){const n=w(t,e==null?void 0:e.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const Dt={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},kt=(t,e,n)=>{let r;const a=Dt[t];return typeof a=="string"?r=a:e===1?r=a.one:r=a.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function I(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const xt={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Pt={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Mt={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Ot={date:I({formats:xt,defaultWidth:"full"}),time:I({formats:Pt,defaultWidth:"full"}),dateTime:I({formats:Mt,defaultWidth:"full"})},Vt={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Tt=(t,e,n,r)=>Vt[t];function V(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let a;if(r==="formatting"&&t.formattingValues){const s=t.defaultFormattingWidth||t.defaultWidth,c=n!=null&&n.width?String(n.width):s;a=t.formattingValues[c]||t.formattingValues[s]}else{const s=t.defaultWidth,c=n!=null&&n.width?String(n.width):t.defaultWidth;a=t.values[c]||t.values[s]}const i=t.argumentCallback?t.argumentCallback(e):e;return a[i]}}const St={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},zt={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Ct={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Wt={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Ut={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Yt={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Et=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Ft={ordinalNumber:Et,era:V({values:St,defaultWidth:"wide"}),quarter:V({values:zt,defaultWidth:"wide",argumentCallback:t=>t-1}),month:V({values:Ct,defaultWidth:"wide"}),day:V({values:Wt,defaultWidth:"wide"}),dayPeriod:V({values:Ut,defaultWidth:"wide",formattingValues:Yt,defaultFormattingWidth:"wide"})};function T(t){return(e,n={})=>{const r=n.width,a=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],i=e.match(a);if(!i)return null;const s=i[0],c=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(c)?qt(c,k=>k.test(s)):It(c,k=>k.test(s));let f;f=t.valueCallback?t.valueCallback(l):l,f=n.valueCallback?n.valueCallback(f):f;const h=e.slice(s.length);return{value:f,rest:h}}}function It(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function qt(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function De(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const a=r[0],i=e.match(t.parsePattern);if(!i)return null;let s=t.valueCallback?t.valueCallback(i[0]):i[0];s=n.valueCallback?n.valueCallback(s):s;const c=e.slice(a.length);return{value:s,rest:c}}}const At=/^(\d+)(th|st|nd|rd)?/i,Rt=/\d+/i,jt={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Lt={any:[/^b/i,/^(a|c)/i]},Nt={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Bt={any:[/1/i,/2/i,/3/i,/4/i]},Xt={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Ht={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Qt={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Gt={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Jt={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Zt={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Kt={ordinalNumber:De({matchPattern:At,parsePattern:Rt,valueCallback:t=>parseInt(t,10)}),era:T({matchPatterns:jt,defaultMatchWidth:"wide",parsePatterns:Lt,defaultParseWidth:"any"}),quarter:T({matchPatterns:Nt,defaultMatchWidth:"wide",parsePatterns:Bt,defaultParseWidth:"any",valueCallback:t=>t+1}),month:T({matchPatterns:Xt,defaultMatchWidth:"wide",parsePatterns:Ht,defaultParseWidth:"any"}),day:T({matchPatterns:Qt,defaultMatchWidth:"wide",parsePatterns:Gt,defaultParseWidth:"any"}),dayPeriod:T({matchPatterns:Jt,defaultMatchWidth:"any",parsePatterns:Zt,defaultParseWidth:"any"})},ke={code:"en-US",formatDistance:kt,formatLong:Ot,formatRelative:Tt,localize:Ft,match:Kt,options:{weekStartsOn:0,firstWeekContainsDate:1}};function $t(t,e){const n=w(t,e==null?void 0:e.in);return ct(n,vt(n))+1}function en(t,e){const n=w(t,e==null?void 0:e.in),r=+X(n)-+lt(n);return Math.round(r/pe)+1}function xe(t,e){var h,k,_,D;const n=w(t,e==null?void 0:e.in),r=n.getFullYear(),a=R(),i=(e==null?void 0:e.firstWeekContainsDate)??((k=(h=e==null?void 0:e.locale)==null?void 0:h.options)==null?void 0:k.firstWeekContainsDate)??a.firstWeekContainsDate??((D=(_=a.locale)==null?void 0:_.options)==null?void 0:D.firstWeekContainsDate)??1,s=C((e==null?void 0:e.in)||t,0);s.setFullYear(r+1,0,i),s.setHours(0,0,0,0);const c=U(s,e),l=C((e==null?void 0:e.in)||t,0);l.setFullYear(r,0,i),l.setHours(0,0,0,0);const f=U(l,e);return+n>=+c?r+1:+n>=+f?r:r-1}function tn(t,e){var c,l,f,h;const n=R(),r=(e==null?void 0:e.firstWeekContainsDate)??((l=(c=e==null?void 0:e.locale)==null?void 0:c.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((h=(f=n.locale)==null?void 0:f.options)==null?void 0:h.firstWeekContainsDate)??1,a=xe(t,e),i=C((e==null?void 0:e.in)||t,0);return i.setFullYear(a,0,r),i.setHours(0,0,0,0),U(i,e)}function nn(t,e){const n=w(t,e==null?void 0:e.in),r=+U(n,e)-+tn(n,e);return Math.round(r/pe)+1}function m(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const z={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return m(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):m(n+1,2)},d(t,e){return m(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return m(t.getHours()%12||12,e.length)},H(t,e){return m(t.getHours(),e.length)},m(t,e){return m(t.getMinutes(),e.length)},s(t,e){return m(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),a=Math.trunc(r*Math.pow(10,n-3));return m(a,e.length)}},E={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},ie={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),a=r>0?r:1-r;return n.ordinalNumber(a,{unit:"year"})}return z.y(t,e)},Y:function(t,e,n,r){const a=xe(t,r),i=a>0?a:1-a;if(e==="YY"){const s=i%100;return m(s,2)}return e==="Yo"?n.ordinalNumber(i,{unit:"year"}):m(i,e.length)},R:function(t,e){const n=ve(t);return m(n,e.length)},u:function(t,e){const n=t.getFullYear();return m(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return m(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return m(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return z.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return m(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const a=nn(t,r);return e==="wo"?n.ordinalNumber(a,{unit:"week"}):m(a,e.length)},I:function(t,e,n){const r=en(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):m(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):z.d(t,e)},D:function(t,e,n){const r=$t(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):m(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const a=t.getDay(),i=(a-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return m(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const a=t.getDay(),i=(a-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return m(i,e.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),a=r===0?7:r;switch(e){case"i":return String(a);case"ii":return m(a,e.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const a=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let a;switch(r===12?a=E.noon:r===0?a=E.midnight:a=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let a;switch(r>=17?a=E.evening:r>=12?a=E.afternoon:r>=4?a=E.morning:a=E.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return z.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):z.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):m(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):m(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):z.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):z.s(t,e)},S:function(t,e){return z.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return ce(r);case"XXXX":case"XX":return W(r);case"XXXXX":case"XXX":default:return W(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return ce(r);case"xxxx":case"xx":return W(r);case"xxxxx":case"xxx":default:return W(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+ue(r,":");case"OOOO":default:return"GMT"+W(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+ue(r,":");case"zzzz":default:return"GMT"+W(r,":")}},t:function(t,e,n){const r=Math.trunc(+t/1e3);return m(r,e.length)},T:function(t,e,n){return m(+t,e.length)}};function ue(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),a=Math.trunc(r/60),i=r%60;return i===0?n+String(a):n+String(a)+e+m(i,2)}function ce(t,e){return t%60===0?(t>0?"-":"+")+m(Math.abs(t)/60,2):W(t,e)}function W(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),a=m(Math.trunc(r/60),2),i=m(r%60,2);return n+a+e+i}const le=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},Pe=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},an=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],a=n[2];if(!a)return le(t,e);let i;switch(r){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",le(r,e)).replace("{{time}}",Pe(a,e))},rn={p:Pe,P:an},sn=/^D+$/,on=/^Y+$/,un=["D","DD","YY","YYYY"];function cn(t){return sn.test(t)}function ln(t){return on.test(t)}function dn(t,e,n){const r=mn(t,e,n);if(console.warn(r),un.includes(t))throw new RangeError(r)}function mn(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const fn=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,hn=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,_n=/^'([^]*?)'?$/,gn=/''/g,bn=/[a-zA-Z]/;function yn(t,e,n){var h,k,_,D;const r=R(),a=r.locale??ke,i=r.firstWeekContainsDate??((k=(h=r.locale)==null?void 0:h.options)==null?void 0:k.firstWeekContainsDate)??1,s=r.weekStartsOn??((D=(_=r.locale)==null?void 0:_.options)==null?void 0:D.weekStartsOn)??0,c=w(t,n==null?void 0:n.in);if(!mt(c))throw new RangeError("Invalid time value");let l=e.match(hn).map(d=>{const b=d[0];if(b==="p"||b==="P"){const Z=rn[b];return Z(d,a.formatLong)}return d}).join("").match(fn).map(d=>{if(d==="''")return{isToken:!1,value:"'"};const b=d[0];if(b==="'")return{isToken:!1,value:wn(d)};if(ie[b])return{isToken:!0,value:d};if(b.match(bn))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:d}});a.localize.preprocessor&&(l=a.localize.preprocessor(c,l));const f={firstWeekContainsDate:i,weekStartsOn:s,locale:a};return l.map(d=>{if(!d.isToken)return d.value;const b=d.value;(ln(b)||cn(b))&&dn(b,e,String(t));const Z=ie[b[0]];return Z(c,b,a.localize,f)}).join("")}function wn(t){const e=t.match(_n);return e?e[1].replace(gn,"'"):t}function pn(t,e,n){const r=R(),a=(n==null?void 0:n.locale)??r.locale??ke,i=2520,s=N(t,e);if(isNaN(s))throw new RangeError("Invalid time value");const c=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:s}),[l,f]=j(n==null?void 0:n.in,...s>0?[e,t]:[t,e]),h=pt(f,l),k=(H(f)-H(l))/1e3,_=Math.round((h-k)/60);let D;if(_<2)return n!=null&&n.includeSeconds?h<5?a.formatDistance("lessThanXSeconds",5,c):h<10?a.formatDistance("lessThanXSeconds",10,c):h<20?a.formatDistance("lessThanXSeconds",20,c):h<40?a.formatDistance("halfAMinute",0,c):h<60?a.formatDistance("lessThanXMinutes",1,c):a.formatDistance("xMinutes",1,c):_===0?a.formatDistance("lessThanXMinutes",1,c):a.formatDistance("xMinutes",_,c);if(_<45)return a.formatDistance("xMinutes",_,c);if(_<90)return a.formatDistance("aboutXHours",1,c);if(_<re){const d=Math.round(_/60);return a.formatDistance("aboutXHours",d,c)}else{if(_<i)return a.formatDistance("xDays",1,c);if(_<L){const d=Math.round(_/re);return a.formatDistance("xDays",d,c)}else if(_<L*2)return D=Math.round(_/L),a.formatDistance("aboutXMonths",D,c)}if(D=wt(f,l),D<12){const d=Math.round(_/L);return a.formatDistance("xMonths",d,c)}else{const d=D%12,b=Math.trunc(D/12);return d<3?a.formatDistance("aboutXYears",b,c):d<9?a.formatDistance("overXYears",b,c):a.formatDistance("almostXYears",b+1,c)}}function vn(t,e,n){const[r,a]=j(n==null?void 0:n.in,t,e);return+U(r,n)==+U(a,n)}const Dn={lessThanXSeconds:{one:"不到 1 秒",other:"不到 {{count}} 秒"},xSeconds:{one:"1 秒",other:"{{count}} 秒"},halfAMinute:"半分钟",lessThanXMinutes:{one:"不到 1 分钟",other:"不到 {{count}} 分钟"},xMinutes:{one:"1 分钟",other:"{{count}} 分钟"},xHours:{one:"1 小时",other:"{{count}} 小时"},aboutXHours:{one:"大约 1 小时",other:"大约 {{count}} 小时"},xDays:{one:"1 天",other:"{{count}} 天"},aboutXWeeks:{one:"大约 1 个星期",other:"大约 {{count}} 个星期"},xWeeks:{one:"1 个星期",other:"{{count}} 个星期"},aboutXMonths:{one:"大约 1 个月",other:"大约 {{count}} 个月"},xMonths:{one:"1 个月",other:"{{count}} 个月"},aboutXYears:{one:"大约 1 年",other:"大约 {{count}} 年"},xYears:{one:"1 年",other:"{{count}} 年"},overXYears:{one:"超过 1 年",other:"超过 {{count}} 年"},almostXYears:{one:"将近 1 年",other:"将近 {{count}} 年"}},kn=(t,e,n)=>{let r;const a=Dn[t];return typeof a=="string"?r=a:e===1?r=a.one:r=a.other.replace("{{count}}",String(e)),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?r+"内":r+"前":r},xn={full:"y'年'M'月'd'日' EEEE",long:"y'年'M'月'd'日'",medium:"yyyy-MM-dd",short:"yy-MM-dd"},Pn={full:"zzzz a h:mm:ss",long:"z a h:mm:ss",medium:"a h:mm:ss",short:"a h:mm"},Mn={full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},On={date:I({formats:xn,defaultWidth:"full"}),time:I({formats:Pn,defaultWidth:"full"}),dateTime:I({formats:Mn,defaultWidth:"full"})};function de(t,e,n){const r="eeee p";return vn(t,e,n)?r:t.getTime()>e.getTime()?"'下个'"+r:"'上个'"+r}const Vn={lastWeek:de,yesterday:"'昨天' p",today:"'今天' p",tomorrow:"'明天' p",nextWeek:de,other:"PP p"},Tn=(t,e,n,r)=>{const a=Vn[t];return typeof a=="function"?a(e,n,r):a},Sn={narrow:["前","公元"],abbreviated:["前","公元"],wide:["公元前","公元"]},zn={narrow:["1","2","3","4"],abbreviated:["第一季","第二季","第三季","第四季"],wide:["第一季度","第二季度","第三季度","第四季度"]},Cn={narrow:["一","二","三","四","五","六","七","八","九","十","十一","十二"],abbreviated:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],wide:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]},Wn={narrow:["日","一","二","三","四","五","六"],short:["日","一","二","三","四","五","六"],abbreviated:["周日","周一","周二","周三","周四","周五","周六"],wide:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"]},Un={narrow:{am:"上",pm:"下",midnight:"凌晨",noon:"午",morning:"早",afternoon:"下午",evening:"晚",night:"夜"},abbreviated:{am:"上午",pm:"下午",midnight:"凌晨",noon:"中午",morning:"早晨",afternoon:"中午",evening:"晚上",night:"夜间"},wide:{am:"上午",pm:"下午",midnight:"凌晨",noon:"中午",morning:"早晨",afternoon:"中午",evening:"晚上",night:"夜间"}},Yn={narrow:{am:"上",pm:"下",midnight:"凌晨",noon:"午",morning:"早",afternoon:"下午",evening:"晚",night:"夜"},abbreviated:{am:"上午",pm:"下午",midnight:"凌晨",noon:"中午",morning:"早晨",afternoon:"中午",evening:"晚上",night:"夜间"},wide:{am:"上午",pm:"下午",midnight:"凌晨",noon:"中午",morning:"早晨",afternoon:"中午",evening:"晚上",night:"夜间"}},En=(t,e)=>{const n=Number(t);switch(e==null?void 0:e.unit){case"date":return n.toString()+"日";case"hour":return n.toString()+"时";case"minute":return n.toString()+"分";case"second":return n.toString()+"秒";default:return"第 "+n.toString()}},Fn={ordinalNumber:En,era:V({values:Sn,defaultWidth:"wide"}),quarter:V({values:zn,defaultWidth:"wide",argumentCallback:t=>t-1}),month:V({values:Cn,defaultWidth:"wide"}),day:V({values:Wn,defaultWidth:"wide"}),dayPeriod:V({values:Un,defaultWidth:"wide",formattingValues:Yn,defaultFormattingWidth:"wide"})},In=/^(第\s*)?\d+(日|时|分|秒)?/i,qn=/\d+/i,An={narrow:/^(前)/i,abbreviated:/^(前)/i,wide:/^(公元前|公元)/i},Rn={any:[/^(前)/i,/^(公元)/i]},jn={narrow:/^[1234]/i,abbreviated:/^第[一二三四]刻/i,wide:/^第[一二三四]刻钟/i},Ln={any:[/(1|一)/i,/(2|二)/i,/(3|三)/i,/(4|四)/i]},Nn={narrow:/^(一|二|三|四|五|六|七|八|九|十[二一])/i,abbreviated:/^(一|二|三|四|五|六|七|八|九|十[二一]|\d|1[12])月/i,wide:/^(一|二|三|四|五|六|七|八|九|十[二一])月/i},Bn={narrow:[/^一/i,/^二/i,/^三/i,/^四/i,/^五/i,/^六/i,/^七/i,/^八/i,/^九/i,/^十(?!(一|二))/i,/^十一/i,/^十二/i],any:[/^一|1/i,/^二|2/i,/^三|3/i,/^四|4/i,/^五|5/i,/^六|6/i,/^七|7/i,/^八|8/i,/^九|9/i,/^十(?!(一|二))|10/i,/^十一|11/i,/^十二|12/i]},Xn={narrow:/^[一二三四五六日]/i,short:/^[一二三四五六日]/i,abbreviated:/^周[一二三四五六日]/i,wide:/^星期[一二三四五六日]/i},Hn={any:[/日/i,/一/i,/二/i,/三/i,/四/i,/五/i,/六/i]},Qn={any:/^(上午?|下午?|午夜|[中正]午|早上?|下午|晚上?|凌晨|)/i},Gn={any:{am:/^上午?/i,pm:/^下午?/i,midnight:/^午夜/i,noon:/^[中正]午/i,morning:/^早上/i,afternoon:/^下午/i,evening:/^晚上?/i,night:/^凌晨/i}},Jn={ordinalNumber:De({matchPattern:In,parsePattern:qn,valueCallback:t=>parseInt(t,10)}),era:T({matchPatterns:An,defaultMatchWidth:"wide",parsePatterns:Rn,defaultParseWidth:"any"}),quarter:T({matchPatterns:jn,defaultMatchWidth:"wide",parsePatterns:Ln,defaultParseWidth:"any",valueCallback:t=>t+1}),month:T({matchPatterns:Nn,defaultMatchWidth:"wide",parsePatterns:Bn,defaultParseWidth:"any"}),day:T({matchPatterns:Xn,defaultMatchWidth:"wide",parsePatterns:Hn,defaultParseWidth:"any"}),dayPeriod:T({matchPatterns:Qn,defaultMatchWidth:"any",parsePatterns:Gn,defaultParseWidth:"any"})},Zn={code:"zh-CN",formatDistance:kn,formatLong:On,formatRelative:Tn,localize:Fn,match:Jn,options:{weekStartsOn:1,firstWeekContainsDate:4}},Kn={name:"SecurityManager",data(){return{activeTokens:[],isLoadingTokens:!1,isLoggingOutAll:!1,loadingTokenId:null,isPerformingAction:!1,showConfirmDialog:!1,confirmDialogTitle:"",confirmDialogText:"",confirmedAction:null,tokenHeaders:[{title:"创建时间",key:"created_at",sortable:!0},{title:"设备信息",key:"device_info",sortable:!1},{title:"IP地址",key:"ip_address",sortable:!0},{title:"IP属地",key:"ip_location",sortable:!0},{title:"操作",key:"actions",sortable:!1}]}},mounted(){this.loadData()},methods:{async loadData(){await this.loadActiveTokens()},async loadActiveTokens(){this.isLoadingTokens=!0;try{this.activeTokens=await F.getActiveTokens()}catch(t){console.error("获取会话列表失败:",t),this.$toast.add({severity:"error",summary:"错误",detail:"获取会话列表失败",life:3e3})}finally{this.isLoadingTokens=!1}},getActivityColor(t){return t?t<5?"info":t<20?"primary":t<50?"success":"purple":"grey"},formatIpLocation(t){if(!t)return"-";let e=t;if(typeof t=="string")try{e=JSON.parse(t)}catch{return t}return e.address||"-"},formatDate(t){if(!t)return"-";const e=new Date(t),r=pn(e,new Date,{addSuffix:!0,locale:Zn}),a=yn(e,"yyyy-MM-dd HH:mm:ss");return`${r} (${a})`},async handleRevokeToken(t){this.loadingTokenId=t,this.isPerformingAction=!0;try{await F.revokeToken(t)?(this.$toast.add({severity:"success",summary:"成功",detail:"会话已成功结束",life:3e3}),await this.loadActiveTokens()):this.$toast.add({severity:"error",summary:"错误",detail:"会话结束失败",life:3e3})}catch(e){console.error("会话结束失败:",e),this.$toast.add({severity:"error",summary:"错误",detail:"会话结束失败",life:3e3})}finally{this.loadingTokenId=null,this.isPerformingAction=!1}},confirmLogoutAll(){this.confirmDialogTitle="确认退出所有会话",this.confirmDialogText="这将使所有会话立即失效，包括当前会话。您需要重新登录才能继续使用。确定要执行此操作吗？",this.confirmedAction=this.logoutAllSessions,this.showConfirmDialog=!0},async logoutAllSessions(){this.isLoggingOutAll=!0;try{await F.logoutAllDevices()?(this.$toast.add({severity:"success",summary:"成功",detail:"已成功退出所有会话",life:3e3}),this.$router.push("/app/account/login")):this.$toast.add({severity:"error",summary:"错误",detail:"退出所有会话失败",life:3e3})}catch(t){console.error("退出所有会话失败:",t),this.$toast.add({severity:"error",summary:"错误",detail:"退出所有会话失败",life:3e3})}finally{this.isLoggingOutAll=!1}},executeConfirmedAction(){typeof this.confirmedAction=="function"&&this.confirmedAction(),this.showConfirmDialog=!1}}},$n={class:"mb-6"},ea={class:"d-flex align-center"},ta={key:0},na={key:1},aa={class:"d-flex gap-4 mt-6"};function ra(t,e,n,r,a,i){return p(),q("div",null,[v("div",$n,[e[4]||(e[4]=v("h4",{class:"text-h6 mb-3"},"登录设备",-1)),a.activeTokens.length===0&&!a.isLoadingTokens?(p(),M(Ce,{key:0,type:"info",text:"没有活跃的会话",class:"mb-3"})):(p(),M(He,{key:1,headers:a.tokenHeaders,items:a.activeTokens,loading:a.isLoadingTokens,"loading-text":"加载会话列表...","no-data-text":"没有找到活跃会话",class:"elevation-1 rounded-lg"},{"item.created_at":u(({item:s})=>[g(O(i.formatDate(s.created_at)),1)]),"item.device_info":u(({item:s})=>{var c,l;return[v("div",ea,[g(O(((c=s.device_info)==null?void 0:c.os)||"未知")+" ("+O(((l=s.device_info)==null?void 0:l.browser)||"未知")+") ",1),s.is_current?(p(),M(B,{key:0,color:"success",size:"small",text:"当前"})):me("",!0)])]}),"item.ip_address":u(({item:s})=>[g(O(s.ip_address),1)]),"item.ip_location":u(({item:s})=>[s.ip_location?(p(),q("span",ta,O(i.formatIpLocation(s.ip_location)),1)):(p(),q("span",na,"-"))]),"item.activity_count":u(({item:s})=>[o(B,{color:i.getActivityColor(s.activity_count),size:"small",text:t.getActivityText(s.activity_count)},null,8,["color","text"])]),"item.actions":u(({item:s})=>[o(P,{onClick:c=>i.handleRevokeToken(s.id),size:"small",color:"error",variant:"text",loading:a.loadingTokenId===s.id,disabled:a.isLoadingTokens||a.isPerformingAction},{default:u(()=>[o(A,null,{default:u(()=>e[2]||(e[2]=[g("mdi-logout")])),_:1,__:[2]}),e[3]||(e[3]=g(" 结束会话 "))]),_:2,__:[3]},1032,["onClick","loading","disabled"])]),_:1},8,["headers","items","loading"]))]),v("div",aa,[o(P,{color:"error","prepend-icon":"mdi-logout-variant",onClick:i.confirmLogoutAll,loading:a.isLoggingOutAll,disabled:a.isPerformingAction||a.isLoadingTokens},{default:u(()=>e[5]||(e[5]=[g(" 退出所有会话 ")])),_:1,__:[5]},8,["onClick","loading","disabled"])]),o(he,{modelValue:a.showConfirmDialog,"onUpdate:modelValue":e[1]||(e[1]=s=>a.showConfirmDialog=s),"max-width":"500"},{default:u(()=>[o(Q,null,{default:u(()=>[o(ee,{class:"text-h5"},{default:u(()=>[g(O(a.confirmDialogTitle),1)]),_:1}),o(G,null,{default:u(()=>[g(O(a.confirmDialogText),1)]),_:1}),o(fe,null,{default:u(()=>[o($),o(P,{color:"primary",variant:"text",onClick:e[0]||(e[0]=s=>a.showConfirmDialog=!1)},{default:u(()=>e[6]||(e[6]=[g("取消")])),_:1,__:[6]}),o(P,{color:"error",variant:"flat",onClick:i.executeConfirmedAction},{default:u(()=>e[7]||(e[7]=[g("确认")])),_:1,__:[7]},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}const Me=Y(Kn,[["render",ra]]),sa={name:"AvatarEditor",props:{userData:{type:Object,required:!0},s3BucketUrl:{type:String,required:!0}},data(){return{loading:!1,avatarFile:null,previewImage:null}},methods:{onFileChange(t){const e=t.target.files?t.target.files[0]:null;e instanceof File&&e.type.startsWith("image/")?new Qe(e,{quality:.8,maxWidth:500,maxHeight:500,success:n=>{this.previewImage=URL.createObjectURL(n),this.avatarFile=n},error:n=>{console.error("图片压缩出错：",n.message),this.$emit("error",{message:"图片压缩出错："+n.message})}}):e&&this.$emit("error",{message:"请选择有效的图片文件"})},async uploadAvatar(){if(this.avatarFile){this.loading=!0;try{const t=new FormData;t.append("zcfile",this.avatarFile);const e=await Ge("",t);this.$emit("avatar-updated",e),this.avatarFile=null}catch(t){this.$emit("error",t)}finally{this.loading=!1}}}}},oa={class:"d-flex align-center justify-center fill-height"};function ia(t,e,n,r,a,i){return p(),M(J,null,{default:u(()=>[o(y,{cols:"12",md:"6"},{default:u(()=>[o(et,{label:"上传头像",accept:"image/*",onChange:i.onFileChange,placeholder:"选择图片上传","prepend-icon":"mdi-camera",variant:"outlined",density:"comfortable","show-size":"",rules:[s=>!s||!s.length||s[0].size<2e6||"头像大小不能超过2MB"]},null,8,["onChange","rules"]),e[0]||(e[0]=v("div",{class:"text-caption text-medium-emphasis"},"图片将被自动压缩",-1))]),_:1,__:[0]}),o(y,{cols:"12",md:"6",class:"d-flex align-center justify-center"},{default:u(()=>[o(tt,{class:We(["rounded-lg overflow-hidden","elevation-2"]),width:"150",height:"150"},{default:u(()=>[o(_e,{src:a.previewImage||n.s3BucketUrl+"/user/"+n.userData.avatar,height:"150",width:"150",cover:"",class:"bg-grey-lighten-3"},{placeholder:u(()=>[v("div",oa,[o(A,{icon:"mdi-image",size:"64",color:"grey-darken-1"})])]),_:1},8,["src"])]),_:1})]),_:1}),o(y,{cols:"12"},{default:u(()=>[o(P,{onClick:i.uploadAvatar,disabled:!a.avatarFile,color:"primary",size:"large","prepend-icon":"mdi-cloud-upload",class:"px-6",loading:a.loading},{default:u(()=>e[1]||(e[1]=[g(" 上传头像 ")])),_:1,__:[1]},8,["onClick","disabled","loading"])]),_:1})]),_:1})}const Oe=Y(sa,[["render",ia]]),ua={name:"PasswordEditor",data(){return{loading:!1,valid:!1,oldPassword:"",newPassword:"",confirmPassword:"",passwordRules:[t=>!!t||"请输入新密码",t=>/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[$@$!%*?&\.])[A-Za-z\d$@$!%*?&\.]{8,}/.test(t)||"密码必须由数字、大小写字母和特殊字符组成，且长度至少为8位"]}},methods:{async changePassword(){if(this.valid){this.loading=!0;try{const t=await Je({oldpw:this.oldPassword,newpw:this.newPassword});this.$emit("password-updated",t),this.oldPassword="",this.newPassword="",this.confirmPassword=""}catch(t){this.$emit("error",t)}finally{this.loading=!1}}}}};function ca(t,e,n,r,a,i){return p(),M(ne,{modelValue:a.valid,"onUpdate:modelValue":e[3]||(e[3]=s=>a.valid=s),onSubmit:te(i.changePassword,["prevent"])},{default:u(()=>[o(J,null,{default:u(()=>[o(y,{cols:"12",md:"8"},{default:u(()=>[o(x,{modelValue:a.oldPassword,"onUpdate:modelValue":e[0]||(e[0]=s=>a.oldPassword=s),label:"当前密码",variant:"outlined",density:"comfortable",type:"password",rules:[s=>!!s||"请输入当前密码"],required:""},null,8,["modelValue","rules"])]),_:1}),o(y,{cols:"12",md:"8"},{default:u(()=>[o(x,{modelValue:a.newPassword,"onUpdate:modelValue":e[1]||(e[1]=s=>a.newPassword=s),rules:a.passwordRules,label:"新密码",variant:"outlined",density:"comfortable",type:"password",required:""},null,8,["modelValue","rules"]),e[4]||(e[4]=v("div",{class:"text-caption text-medium-emphasis"}," 密码必须由数字、大小写字母和特殊字符组成，且长度至少为8位 ",-1))]),_:1,__:[4]}),o(y,{cols:"12",md:"8"},{default:u(()=>[o(x,{modelValue:a.confirmPassword,"onUpdate:modelValue":e[2]||(e[2]=s=>a.confirmPassword=s),rules:[s=>!!s||"请确认新密码",s=>s===a.newPassword||"两次输入的密码不一致"],label:"确认新密码",variant:"outlined",density:"comfortable",type:"password",required:""},null,8,["modelValue","rules"])]),_:1}),o(y,{cols:"12"},{default:u(()=>[o(P,{onClick:i.changePassword,disabled:!a.valid,color:"primary",size:"large","prepend-icon":"mdi-lock-reset",class:"px-6",loading:a.loading},{default:u(()=>e[5]||(e[5]=[g(" 更新密码 ")])),_:1,__:[5]},8,["onClick","disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue","onSubmit"])}const Ve=Y(ua,[["render",ca]]),la={name:"UsernameEditor",props:{userData:{type:Object,required:!0}},data(){return{loading:!1,valid:!1,username:this.userData.username||"",usernameRules:[t=>!!t||"用户名是必填项",t=>t&&t.length<=10||"用户名不能超过10个字符",t=>/^[a-z]+$/.test(t)||"用户名只能包含小写字母"]}},watch:{userData:{handler(t){this.username=t.username||""},immediate:!0}},methods:{async changeUsername(){if(this.valid){this.loading=!0;try{const t=await Ze({username:this.username});this.$emit("username-updated",t)}catch(t){this.$emit("error",t)}finally{this.loading=!1}}}}};function da(t,e,n,r,a,i){return p(),M(ne,{modelValue:a.valid,"onUpdate:modelValue":e[1]||(e[1]=s=>a.valid=s),onSubmit:te(i.changeUsername,["prevent"])},{default:u(()=>[o(J,null,{default:u(()=>[o(y,{cols:"12",md:"8"},{default:u(()=>[o(x,{modelValue:a.username,"onUpdate:modelValue":e[0]||(e[0]=s=>a.username=s),counter:10,rules:a.usernameRules,label:"用户名",variant:"outlined",density:"comfortable",required:""},null,8,["modelValue","rules"]),e[2]||(e[2]=v("div",{class:"text-caption text-medium-emphasis"},"用户名只能包含小写字母",-1))]),_:1,__:[2]}),o(y,{cols:"12"},{default:u(()=>[o(P,{onClick:i.changeUsername,disabled:!a.valid,color:"primary",size:"large","prepend-icon":"mdi-check",class:"px-6",loading:a.loading},{default:u(()=>e[3]||(e[3]=[g(" 保存用户名 ")])),_:1,__:[3]},8,["onClick","disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue","onSubmit"])}const Te=Y(la,[["render",da]]),ma="阿拉伯联合酋长国",fa="阿根廷",ha="奥地利",_a="澳大利亚 (au_act)",ga="澳大利亚 (au_nsw)",ba="澳大利亚 (au_nt)",ya="澳大利亚 (au_qld_brisbane)",wa="澳大利亚 (au_qld_cairns)",pa="澳大利亚 (au_qld)",va="澳大利亚 (au_sa)",Da="澳大利亚 (au_tas_north)",ka="澳大利亚 (au_tas_south)",xa="澳大利亚 (au_tas)",Pa="澳大利亚 (au_vic_melbourne)",Ma="澳大利亚 (au_vic)",Oa="澳大利亚 (au_wa)",Va="澳大利亚",Ta="比利时 (be_fr)",Sa="比利时 (be_nl)",za="保加利亚 (bg_bg)",Ca="保加利亚 (bg_en)",Wa="巴西",Ua="巴西 (br_sp)",Ya="巴西 (br_spcapital)",Ea="加拿大 (ca_ab)",Fa="加拿大 (ca_bc)",Ia="加拿大 (ca_mb)",qa="加拿大 (ca_nb)",Aa="加拿大 (ca_nl)",Ra="加拿大 (ca_ns)",ja="加拿大 (ca_nt)",La="加拿大 (ca_nu)",Na="加拿大 (ca_on)",Ba="加拿大 (ca_pe)",Xa="加拿大 (ca_qc)",Ha="加拿大 (ca_sk)",Qa="加拿大 (ca_yt)",Ga="加拿大",Ja="瑞士 (ch_ag)",Za="瑞士 (ch_ai)",Ka="瑞士 (ch_ar)",$a="瑞士 (ch_be)",er="瑞士 (ch_bl)",tr="瑞士 (ch_bs)",nr="瑞士 (ch_fr)",ar="瑞士 (ch_ge)",rr="瑞士 (ch_gl)",sr="瑞士 (ch_gr)",or="瑞士 (ch_ju)",ir="瑞士 (ch_lu)",ur="瑞士 (ch_ne)",cr="瑞士 (ch_nw)",lr="瑞士 (ch_ow)",dr="瑞士 (ch_sg)",mr="瑞士 (ch_sh)",fr="瑞士 (ch_so)",hr="瑞士 (ch_sz)",_r="瑞士 (ch_tg)",gr="瑞士 (ch_ti)",br="瑞士 (ch_ur)",yr="瑞士 (ch_vd)",wr="瑞士 (ch_vs)",pr="瑞士 (ch_zg)",vr="瑞士 (ch_zh)",Dr="瑞士",kr="智利",xr="哥伦比亚",Pr="哥斯达黎加",Mr="捷克共和国",Or="德国 (de_bb)",Vr="德国 (de_be)",Tr="德国 (de_bw)",Sr="德国 (de_by_augsburg)",zr="德国 (de_by_cath)",Cr="德国 (de_by)",Wr="德国 (de_hb)",Ur="德国 (de_he)",Yr="德国 (de_hh)",Er="德国 (de_mv)",Fr="德国 (de_ni)",Ir="德国 (de_nw)",qr="德国 (de_rp)",Ar="德国 (de_sh)",Rr="德国 (de_sl)",jr="德国 (de_sn_sorbian)",Lr="德国 (de_sn)",Nr="德国 (de_st)",Br="德国 (de_th_cath)",Xr="德国 (de_th)",Hr="德国",Qr="丹麦",Gr="爱沙尼亚",Jr="希腊",Zr="西班牙 (es_an)",Kr="西班牙 (es_ar)",$r="西班牙 (es_ce)",es="西班牙 (es_cl)",ts="西班牙 (es_cm)",ns="西班牙 (es_cn)",as="西班牙 (es_ct)",rs="西班牙 (es_ex)",ss="西班牙 (es_ga)",os="西班牙 (es_ib)",is="西班牙 (es_lo)",us="西班牙 (es_m)",cs="西班牙 (es_mu)",ls="西班牙 (es_na)",ds="西班牙 (es_o)",ms="西班牙 (es_pv)",fs="西班牙 (es_v)",hs="西班牙 (es_vc)",_s="西班牙",gs="芬兰",bs="法国 (fr_a)",ys="法国 (fr_m)",ws="法国",ps="英国 (gb_con)",vs="英国 (gb_eaw)",Ds="英国 (gb_eng)",ks="英国 (gb_gsy)",xs="英国 (gb_iom)",Ps="英国 (gb_jsy)",Ms="英国 (gb_nir)",Os="英国 (gb_sct)",Vs="英国 (gb_wls)",Ts="英国",Ss="格鲁吉亚",zs="根西岛",Cs="加纳",Ws="克罗地亚",Us="匈牙利",Ys="印度尼西亚",Es="爱尔兰",Fs="马恩岛",Is="印度 (in_gj)",qs="印度 (in_mh)",As="印度 (in_rj)",Rs="印度 (in_tn)",js="印度 (in_ka)",Ls="冰岛",Ns="意大利 (it_bl)",Bs="意大利 (it_fi)",Xs="意大利 (it_ge)",Hs="意大利 (it_pd)",Qs="意大利 (it_rm)",Gs="意大利 (it_ro)",Js="意大利 (it_to)",Zs="意大利 (it_tv)",Ks="意大利 (it_ve)",$s="意大利 (it_vi)",eo="意大利 (it_vr)",to="意大利",no="泽西岛",ao="日本",ro="肯尼亚",so="韩国",oo="哈萨克斯坦",io="列支敦士登",uo="立陶宛",co="卢森堡",lo="拉脱维亚",mo="摩洛哥",fo="马耳他 (mt_en)",ho="马耳他 (mt_mt)",_o="墨西哥 (mx_pue)",go="墨西哥",bo="马来西亚",yo="尼日利亚",wo="荷兰",po="挪威",vo="新西兰 (nz_ak)",Do="新西兰 (nz_ca)",ko="新西兰 (nz_ch)",xo="新西兰 (nz_hb)",Po="新西兰 (nz_mb)",Mo="新西兰 (nz_ne)",Oo="新西兰 (nz_nl)",Vo="新西兰 (nz_ot)",To="新西兰 (nz_sc)",So="新西兰 (nz_sl)",zo="新西兰 (nz_ta)",Co="新西兰 (nz_we)",Wo="新西兰 (nz_wl)",Uo="新西兰",Yo="秘鲁",Eo="菲律宾",Fo="波兰",Io="葡萄牙 (pt_li)",qo="葡萄牙 (pt_po)",Ao="葡萄牙",Ro="罗马尼亚",jo="塞尔维亚 (rs_cyrl)",Lo="塞尔维亚 (rs_la)",No="俄罗斯联邦",Bo="瑞典",Xo="沙特阿拉伯",Ho="新加坡",Qo="斯洛文尼亚",Go="斯洛伐克",Jo="泰国",Zo="突尼斯",Ko="土耳其",$o="乌克兰",ei="美国 (us_ak)",ti="美国 (us_al)",ni="美国 (us_ar)",ai="美国 (us_az)",ri="美国 (us_ca)",si="美国 (us_co)",oi="美国 (us_ct)",ii="美国 (us_dc)",ui="美国 (us_de)",ci="美国 (us_fl)",li="美国 (us_ga)",di="美国 (us_gu)",mi="美国 (us_hi)",fi="美国 (us_ia)",hi="美国 (us_id)",_i="美国 (us_il)",gi="美国 (us_in)",bi="美国 (us_ks)",yi="美国 (us_ky)",wi="美国 (us_la)",pi="美国 (us_ma)",vi="美国 (us_md)",Di="美国 (us_me)",ki="美国 (us_mi)",xi="美国 (us_mn)",Pi="美国 (us_mo)",Mi="美国 (us_ms)",Oi="美国 (us_mt)",Vi="美国 (us_nc)",Ti="美国 (us_nd)",Si="美国 (us_ne)",zi="美国 (us_nh)",Ci="美国 (us_nj)",Wi="美国 (us_nm)",Ui="美国 (us_nv)",Yi="美国 (us_ny)",Ei="美国 (us_oh)",Fi="美国 (us_ok)",Ii="美国 (us_or)",qi="美国 (us_pa)",Ai="美国 (us_pr)",Ri="美国 (us_ri)",ji="美国 (us_sc)",Li="美国 (us_sd)",Ni="美国 (us_tn)",Bi="美国 (us_tx)",Xi="美国 (us_ut)",Hi="美国 (us_va)",Qi="美国 (us_vi)",Gi="美国 (us_vt)",Ji="美国 (us_wa)",Zi="美国 (us_wi)",Ki="美国 (us_wv)",$i="美国 (us_wy)",eu="美国",tu="委内瑞拉",nu="美属维尔京群岛",au="南非",ru="中国",su="中国（大陆） (zh_cn)",ou="中国（台湾） (zh_tw)",iu="中国（香港） (zh_hk)",uu="中国（澳门） (zh_mo)",K={ae:ma,ar:fa,at:ha,au_act:_a,au_nsw:ga,au_nt:ba,au_qld_brisbane:ya,au_qld_cairns:wa,au_qld:pa,au_sa:va,au_tas_north:Da,au_tas_south:ka,au_tas:xa,au_vic_melbourne:Pa,au_vic:Ma,au_wa:Oa,au:Va,be_fr:Ta,be_nl:Sa,bg_bg:za,bg_en:Ca,br:Wa,br_sp:Ua,br_spcapital:Ya,ca_ab:Ea,ca_bc:Fa,ca_mb:Ia,ca_nb:qa,ca_nl:Aa,ca_ns:Ra,ca_nt:ja,ca_nu:La,ca_on:Na,ca_pe:Ba,ca_qc:Xa,ca_sk:Ha,ca_yt:Qa,ca:Ga,ch_ag:Ja,ch_ai:Za,ch_ar:Ka,ch_be:$a,ch_bl:er,ch_bs:tr,ch_fr:nr,ch_ge:ar,ch_gl:rr,ch_gr:sr,ch_ju:or,ch_lu:ir,ch_ne:ur,ch_nw:cr,ch_ow:lr,ch_sg:dr,ch_sh:mr,ch_so:fr,ch_sz:hr,ch_tg:_r,ch_ti:gr,ch_ur:br,ch_vd:yr,ch_vs:wr,ch_zg:pr,ch_zh:vr,ch:Dr,cl:kr,co:xr,cr:Pr,cz:Mr,de_bb:Or,de_be:Vr,de_bw:Tr,de_by_augsburg:Sr,de_by_cath:zr,de_by:Cr,de_hb:Wr,de_he:Ur,de_hh:Yr,de_mv:Er,de_ni:Fr,de_nw:Ir,de_rp:qr,de_sh:Ar,de_sl:Rr,de_sn_sorbian:jr,de_sn:Lr,de_st:Nr,de_th_cath:Br,de_th:Xr,de:Hr,dk:Qr,ee:Gr,el:Jr,es_an:Zr,es_ar:Kr,es_ce:$r,es_cl:es,es_cm:ts,es_cn:ns,es_ct:as,es_ex:rs,es_ga:ss,es_ib:os,es_lo:is,es_m:us,es_mu:cs,es_na:ls,es_o:ds,es_pv:ms,es_v:fs,es_vc:hs,es:_s,fi:gs,fr_a:bs,fr_m:ys,fr:ws,gb_con:ps,gb_eaw:vs,gb_eng:Ds,gb_gsy:ks,gb_iom:xs,gb_jsy:Ps,gb_nir:Ms,gb_sct:Os,gb_wls:Vs,gb:Ts,ge:Ss,gg:zs,gh:Cs,hr:Ws,hu:Us,id:Ys,ie:Es,im:Fs,in:"印度",in_gj:Is,in_mh:qs,in_rj:As,in_tn:Rs,in_ka:js,is:Ls,it_bl:Ns,it_fi:Bs,it_ge:Xs,it_pd:Hs,it_rm:Qs,it_ro:Gs,it_to:Js,it_tv:Zs,it_ve:Ks,it_vi:$s,it_vr:eo,it:to,je:no,jp:ao,ke:ro,kr:so,kz:oo,li:io,lt:uo,lu:co,lv:lo,ma:mo,mt_en:fo,mt_mt:ho,mx_pue:_o,mx:go,my:bo,ng:yo,nl:wo,no:po,nz_ak:vo,nz_ca:Do,nz_ch:ko,nz_hb:xo,nz_mb:Po,nz_ne:Mo,nz_nl:Oo,nz_ot:Vo,nz_sc:To,nz_sl:So,nz_ta:zo,nz_we:Co,nz_wl:Wo,nz:Uo,pe:Yo,ph:Eo,pl:Fo,pt_li:Io,pt_po:qo,pt:Ao,ro:Ro,rs_cyrl:jo,rs_la:Lo,ru:No,se:Bo,sa:Xo,sg:Ho,si:Qo,sk:Go,th:Jo,tn:Zo,tr:Ko,ua:$o,us_ak:ei,us_al:ti,us_ar:ni,us_az:ai,us_ca:ri,us_co:si,us_ct:oi,us_dc:ii,us_de:ui,us_fl:ci,us_ga:li,us_gu:di,us_hi:mi,us_ia:fi,us_id:hi,us_il:_i,us_in:gi,us_ks:bi,us_ky:yi,us_la:wi,us_ma:pi,us_md:vi,us_me:Di,us_mi:ki,us_mn:xi,us_mo:Pi,us_ms:Mi,us_mt:Oi,us_nc:Vi,us_nd:Ti,us_ne:Si,us_nh:zi,us_nj:Ci,us_nm:Wi,us_nv:Ui,us_ny:Yi,us_oh:Ei,us_ok:Fi,us_or:Ii,us_pa:qi,us_pr:Ai,us_ri:Ri,us_sc:ji,us_sd:Li,us_tn:Ni,us_tx:Bi,us_ut:Xi,us_va:Hi,us_vi:Qi,us_vt:Gi,us_wa:Ji,us_wi:Zi,us_wv:Ki,us_wy:$i,us:eu,ve:tu,vi:nu,za:au,zh:ru,zh_cn:su,zh_tw:ou,zh_hk:iu,zh_mo:uu},cu={name:"ProfileEditor",props:{userData:{type:Object,required:!0}},data(){return{loading:!1,valid:!1,showRegionDialog:!1,regionSearch:"",profileData:{display_name:this.userData.display_name||"",motto:this.userData.motto||"",bio:this.userData.bio||"",location:this.userData.location||"",region:this.userData.region?{value:this.userData.region,text:K[this.userData.region]||""}:null,url:this.userData.url||"",birthday:this.userData.birthday||"",featured_projects:this.userData.featured_projects||""},regionOptions:Object.entries(K).map(([t,e])=>({value:t,text:e})),selectedGender:{state:"未知",abbr:"3"},genderOptions:[{state:"男",abbr:"0"},{state:"女",abbr:"1"},{state:"猫娘",abbr:"2"},{state:"未知",abbr:"3"}],nameRules:[t=>!!t||"名称是必填项",t=>t&&t.length<=20||"名称不能超过20个字符"],locationRules:[t=>!t||t.length<=100||"地址不能超过100个字符"],regionRules:[t=>!t||t.length<=100||"区域不能超过100个字符"],urlRules:[t=>!t||t.length<=255||"URL不能超过255个字符",t=>!t||/^https?:\/\/.*/.test(t)||"URL必须以http://或https://开头"],birthdayRules:[t=>!t||/^\d{4}-\d{2}-\d{2}$/.test(t)||"生日格式必须为YYYY-MM-DD"],projectIdRules:[t=>!t||/^\d+$/.test(t)||"项目ID必须是数字"]}},computed:{filteredRegions(){if(!this.regionSearch)return this.regionOptions;const t=this.regionSearch.toLowerCase();return this.regionOptions.filter(e=>e.text.toLowerCase().includes(t)||e.value.toLowerCase().includes(t))}},watch:{userData:{handler(t){this.profileData={display_name:t.display_name||"",motto:t.motto||"",bio:t.bio||"",location:t.location||"",region:t.region?{value:t.region,text:K[t.region]||""}:null,url:t.url||"",birthday:t.birthday?this.formatDateForInput(t.birthday):"",featured_projects:t.featured_projects||""},this.selectedGender=this.genderOptions.find(e=>e.abbr==t.sex)||this.genderOptions[3]},immediate:!0,deep:!0}},methods:{formatDateForInput(t){return t?new Date(t).toISOString().split("T")[0]:""},selectRegion(t){this.profileData.region=t,this.showRegionDialog=!1},clearRegion(){this.profileData.region=null,this.showRegionDialog=!1},async updateProfile(){var t;if(this.valid){this.loading=!0;try{const e=await Ke({display_name:this.profileData.display_name,motto:this.profileData.motto,bio:this.profileData.bio,location:this.profileData.location,region:((t=this.profileData.region)==null?void 0:t.value)||"",sex:this.selectedGender.abbr,url:this.profileData.url,birthday:this.profileData.birthday,featured_projects:this.profileData.featured_projects||void 0});this.$emit("profile-updated",e)}catch(e){this.$emit("error",e)}finally{this.loading=!1}}}}};function lu(t,e,n,r,a,i){return p(),M(ne,{modelValue:a.valid,"onUpdate:modelValue":e[14]||(e[14]=s=>a.valid=s),onSubmit:te(i.updateProfile,["prevent"])},{default:u(()=>[o(J,null,{default:u(()=>[o(y,{cols:"12",md:"6"},{default:u(()=>[o(x,{modelValue:a.profileData.display_name,"onUpdate:modelValue":e[0]||(e[0]=s=>a.profileData.display_name=s),counter:20,label:"显示名称",variant:"outlined",density:"comfortable",required:"",rules:a.nameRules},null,8,["modelValue","rules"])]),_:1}),o(y,{cols:"12",md:"6"},{default:u(()=>[o(nt,{modelValue:a.selectedGender,"onUpdate:modelValue":e[1]||(e[1]=s=>a.selectedGender=s),items:a.genderOptions,"item-title":"state","item-value":"abbr",label:"性别",variant:"outlined",density:"comfortable","persistent-hint":"","return-object":""},null,8,["modelValue","items"])]),_:1}),o(y,{cols:"12",md:"6"},{default:u(()=>[o(x,{modelValue:a.profileData.location,"onUpdate:modelValue":e[2]||(e[2]=s=>a.profileData.location=s),counter:100,label:"地点",variant:"outlined",density:"comfortable",rules:a.locationRules},null,8,["modelValue","rules"])]),_:1}),o(y,{cols:"12",md:"6"},{default:u(()=>{var s;return[o(x,{"model-value":((s=a.profileData.region)==null?void 0:s.text)||"",label:"区域",variant:"outlined",density:"comfortable",readonly:"",rules:a.regionRules,"persistent-hint":"",hint:"点击选择您所在的区域",onClick:e[4]||(e[4]=c=>a.showRegionDialog=!0)},{append:u(()=>[o(P,{variant:"text",icon:"mdi-map-marker",onClick:e[3]||(e[3]=c=>a.showRegionDialog=!0)})]),_:1},8,["model-value","rules"])]}),_:1}),o(y,{cols:"12",md:"6"},{default:u(()=>[o(x,{modelValue:a.profileData.url,"onUpdate:modelValue":e[5]||(e[5]=s=>a.profileData.url=s),counter:255,label:"个人网站",variant:"outlined",density:"comfortable",rules:a.urlRules},null,8,["modelValue","rules"])]),_:1}),o(y,{cols:"12",md:"6"},{default:u(()=>[o(x,{modelValue:a.profileData.birthday,"onUpdate:modelValue":e[6]||(e[6]=s=>a.profileData.birthday=s),label:"生日",type:"date",variant:"outlined",density:"comfortable",rules:a.birthdayRules},null,8,["modelValue","rules"])]),_:1}),o(y,{cols:"12"},{default:u(()=>[o(x,{modelValue:a.profileData.motto,"onUpdate:modelValue":e[7]||(e[7]=s=>a.profileData.motto=s),counter:500,label:"一行简介",variant:"outlined",density:"comfortable"},null,8,["modelValue"])]),_:1}),o(y,{cols:"12"},{default:u(()=>[o(at,{label:"详细介绍",modelValue:a.profileData.bio,"onUpdate:modelValue":e[8]||(e[8]=s=>a.profileData.bio=s),counter:2e3,variant:"outlined","auto-grow":"",rows:"3",hint:"支持Markdown格式","persistent-hint":""},null,8,["modelValue"])]),_:1}),o(y,{cols:"12",md:"6"},{default:u(()=>[o(x,{modelValue:a.profileData.featured_projects,"onUpdate:modelValue":e[9]||(e[9]=s=>a.profileData.featured_projects=s),label:"精选项目ID",variant:"outlined",density:"comfortable",type:"number",hint:"输入您的项目ID","persistent-hint":"",rules:a.projectIdRules},null,8,["modelValue","rules"])]),_:1}),o(y,{cols:"12"},{default:u(()=>[o(P,{onClick:i.updateProfile,disabled:!a.valid,color:"primary",size:"large","prepend-icon":"mdi-content-save",class:"px-6",loading:a.loading},{default:u(()=>e[15]||(e[15]=[g(" 保存资料 ")])),_:1,__:[15]},8,["onClick","disabled","loading"])]),_:1})]),_:1}),o(he,{modelValue:a.showRegionDialog,"onUpdate:modelValue":e[13]||(e[13]=s=>a.showRegionDialog=s),"max-width":"600"},{default:u(()=>[o(Q,null,{default:u(()=>[o(ee,{class:"text-h5 pa-4"},{default:u(()=>[e[16]||(e[16]=g(" 选择区域 ")),o($),o(P,{icon:"mdi-close",variant:"text",onClick:e[10]||(e[10]=s=>a.showRegionDialog=!1)})]),_:1,__:[16]}),o(G,{class:"pa-4"},{default:u(()=>[o(x,{modelValue:a.regionSearch,"onUpdate:modelValue":e[11]||(e[11]=s=>a.regionSearch=s),label:"搜索区域",variant:"outlined",density:"comfortable","prepend-inner-icon":"mdi-magnify",clearable:"","hide-details":"",class:"mb-4"},null,8,["modelValue"]),o(Ue,{lines:"two",class:"region-list"},{default:u(()=>[(p(!0),q(ge,null,be(i.filteredRegions,s=>(p(),M(Ye,{key:s.value,title:s.text,subtitle:s.value,onClick:c=>i.selectRegion(s)},{prepend:u(()=>{var c;return[o(A,{color:((c=a.profileData.region)==null?void 0:c.value)===s.value?"primary":void 0},{default:u(()=>{var l;return[g(O(((l=a.profileData.region)==null?void 0:l.value)===s.value?"mdi-check-circle":"mdi-earth"),1)]}),_:2},1032,["color"])]}),_:2},1032,["title","subtitle","onClick"]))),128))]),_:1})]),_:1}),o(fe,{class:"pa-4"},{default:u(()=>[o($),o(P,{variant:"text",onClick:i.clearRegion},{default:u(()=>e[17]||(e[17]=[g(" 清除选择 ")])),_:1,__:[17]},8,["onClick"]),o(P,{color:"primary",onClick:e[12]||(e[12]=s=>a.showRegionDialog=!1)},{default:u(()=>e[18]||(e[18]=[g(" 确定 ")])),_:1,__:[18]})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["modelValue","onSubmit"])}const Se=Y(cu,[["render",lu],["__scopeId","data-v-24343570"]]),du={name:"UserCard",props:{userData:{type:Object,required:!0},loading:{type:Boolean,default:!1},s3BucketUrl:{type:String,required:!0}}},mu={class:"text-body-2 text-medium-emphasis",style:{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}};function fu(t,e,n,r,a,i){return p(),M(Q,{hover:"",border:"",variant:"elevated",loading:n.loading,class:"mb-4"},{prepend:u(()=>[o(qe,{class:"ma-3",size:"64"},{default:u(()=>[o(_e,{alt:n.userData.display_name,src:n.s3BucketUrl+"/user/"+n.userData.avatar,cover:""},null,8,["alt","src"])]),_:1})]),loader:u(({isActive:s})=>[o(Ie,{active:s,height:"4",indeterminate:"",color:"primary"},null,8,["active"])]),default:u(()=>[o(Ee,null,{default:u(()=>[o(ee,{class:"font-weight-bold text-h5"},{default:u(()=>[g(O(n.userData.display_name||"加载中..."),1)]),_:1}),o(Fe,{class:"mt-2"},{default:u(()=>[o(B,{class:"mr-2",size:"small"},{default:u(()=>[o(A,{icon:"mdi-account-circle",start:"",size:"small"}),g(" ID: "+O(n.userData.id||"—"),1)]),_:1}),o(B,{size:"small"},{default:u(()=>[o(A,{icon:"mdi-tag",start:"",size:"small"}),e[0]||(e[0]=g(" 创作者 "))]),_:1,__:[0]})]),_:1})]),_:1}),n.userData.bio?(p(),M(G,{key:0},{default:u(()=>[v("div",mu,O(n.userData.bio),1)]),_:1})):me("",!0)]),_:1},8,["loading"])}const ze=Y(du,[["render",fu]]),hu={components:{EmailManager:we,OAuthManager:ye,SecurityManager:Me,UserCard:ze,ProfileEditor:Se,UsernameEditor:Te,PasswordEditor:Ve,AvatarEditor:Oe,UserFollowing:st,UserFollowers:rt,UserBlocked:ot},data(){return{userCardLoading:!1,localuser:F,userInfo:{},tab:"userInfo",tabItems:[{title:"用户信息",value:"userInfo",icon:"mdi-account-circle"},{title:"账户",value:"username",icon:"mdi-cog"},{title:"密码",value:"password",icon:"mdi-lock"},{title:"头像",value:"avatar",icon:"mdi-image"},{title:"邮箱",value:"email",icon:"mdi-email"},{title:"OAuth",value:"oauth",icon:"mdi-link-variant"},{title:"安全",value:"security",icon:"mdi-security"},{title:"关系",value:"relationships",icon:"mdi-account-group",to:"/app/account/relationships"},{title:"开发者",value:"developer",icon:"mdi-account-group",to:"/app/account/developer"}],loading:!1,error:null,s3BucketUrl:""}},setup(){Ne({title:"账户设置"});const t=Be(null);return Xe(async()=>{t.value=await ae("s3.staticurl")}),{s3BucketUrl:t}},async mounted(){this.s3BucketUrl=await ae("s3.staticurl")},async created(){F.isLogin.value?await this.getUserById():this.$router.push("/app/account/login")},methods:{async getUserById(){this.userCardLoading=!0;try{const t=await $e(F.user.value.id);this.userInfo=t.data.data}catch(t){this.handleError(t)}finally{this.userCardLoading=!1}},handleProfileUpdate(t){this.showToast(t.data.status||"info","修改个人信息",t.data.message),this.getUserById()},handleUsernameUpdate(t){this.showToast(t.data.status||"info","修改用户名",t.data.message),this.getUserById()},handlePasswordUpdate(t){this.showToast(t.data.status||"info","修改密码",t.data.message)},handleAvatarUpdate(t){this.showToast(t.data.status||"info","修改头像",t.data.message),this.getUserById()},handleError(t){this.showToast("error","错误",t.message)},showToast(t,e,n){this.$toast.add({severity:t,summary:e,detail:n,life:3e3})}}};function _u(t,e,n,r,a,i){const s=ze,c=Se,l=Te,f=Ve,h=Oe,k=we,_=ye,D=Me;return p(),M(Le,{fluid:"",class:"pa-4"},{default:u(()=>[o(s,{userData:a.userInfo,loading:a.userCardLoading,s3BucketUrl:r.s3BucketUrl},null,8,["userData","loading","s3BucketUrl"]),o(Q,{hover:"",border:""},{default:u(()=>[o(Ae,{modelValue:a.tab,"onUpdate:modelValue":e[0]||(e[0]=d=>a.tab=d),"bg-color":"primary"},{default:u(()=>[(p(!0),q(ge,null,be(a.tabItems,d=>(p(),M(Re,{key:d.value,text:d.title,value:d.value,onClick:b=>a.tab=d.value,"prepend-icon":d.icon,to:d.to},null,8,["text","value","onClick","prepend-icon","to"]))),128))]),_:1},8,["modelValue"]),o(G,{class:"pa-4"},{default:u(()=>[o(je,{modelValue:a.tab,"onUpdate:modelValue":e[1]||(e[1]=d=>a.tab=d)},{default:u(()=>[o(S,{value:"userInfo"},{default:u(()=>[e[2]||(e[2]=v("h3",{class:"text-h5 mb-4"},"个人资料",-1)),o(c,{userData:a.userInfo,onProfileUpdated:i.handleProfileUpdate,onError:i.handleError},null,8,["userData","onProfileUpdated","onError"])]),_:1,__:[2]}),o(S,{value:"username"},{default:u(()=>[e[3]||(e[3]=v("h3",{class:"text-h5 mb-4"},"修改用户名",-1)),o(l,{userData:a.userInfo,onUsernameUpdated:i.handleUsernameUpdate,onError:i.handleError},null,8,["userData","onUsernameUpdated","onError"])]),_:1,__:[3]}),o(S,{value:"password"},{default:u(()=>[e[4]||(e[4]=v("h3",{class:"text-h5 mb-4"},"修改密码",-1)),o(f,{onPasswordUpdated:i.handlePasswordUpdate,onError:i.handleError},null,8,["onPasswordUpdated","onError"])]),_:1,__:[4]}),o(S,{value:"avatar"},{default:u(()=>[e[5]||(e[5]=v("h3",{class:"text-h5 mb-4"},"更新头像",-1)),o(h,{userData:a.userInfo,s3BucketUrl:r.s3BucketUrl,onAvatarUpdated:i.handleAvatarUpdate,onError:i.handleError},null,8,["userData","s3BucketUrl","onAvatarUpdated","onError"])]),_:1,__:[5]}),o(S,{value:"email"},{default:u(()=>[e[6]||(e[6]=v("h3",{class:"text-h5 mb-4"},"邮箱管理",-1)),o(k,{ref:"emailManager"},null,512)]),_:1,__:[6]}),o(S,{value:"oauth"},{default:u(()=>[e[7]||(e[7]=v("h3",{class:"text-h5 mb-4"},"第三方账号关联",-1)),o(_)]),_:1,__:[7]}),o(S,{value:"security"},{default:u(()=>[e[8]||(e[8]=v("h3",{class:"text-h5 mb-4"},"安全管理",-1)),o(D)]),_:1,__:[8]}),o(S,{value:"relationships"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})}const Uu=Y(hu,[["render",_u],["__scopeId","data-v-597f848f"]]);export{Uu as default};
