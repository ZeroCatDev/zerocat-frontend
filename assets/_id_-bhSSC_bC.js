import{_ as g}from"./ProjectQueryView-BNf-xy7D.js";import{_ as V}from"./UserRelationControls-BBYAsz8L.js";import{_ as y,a1 as I,ab as b,Y as l,o as u,N as r,e as s,$ as m,aN as w,a9 as S,L as c,X as n,aP as T,Z as U,n as k,O as E,a3 as p,S as N,a0 as f,f as a,aE as R,W as P,Q as B,R as h,T as j}from"./index-CqDYMkg5.js";import{V as z}from"./VSpacer-BmIOKXlY.js";import"./ProjectCard-BYWSBxv8.js";import"./VTextarea-BMQ0gWum.js";const A={name:"UserInfoCard",components:{UserRelationControls:V},props:{userId:{type:[Number,String],default:null},username:{type:String,default:null}},data(){return{user:{},loading:!0,error:null,localuser:b,VITE_APP_S3_BUCKET:"https://zerocat-bitiful.houlangs.com"}},methods:{getRoleColor(t){return{admin:"error",moderator:"warning",user:"primary"}[t]||"default"},getRoleLabel(t){return{admin:"管理员",moderator:"版主",user:"用户"}[t]||t},async fetchUserInfo(){this.loading=!0;try{let t=this.userId?`/user/id/${this.userId}`:`/user/name/${this.username}`;const o=await I.get(t);if(o.data.status==="success")this.user=o.data.data;else throw new Error(o.data.message)}catch(t){console.error("Error fetching user info:",t),this.error=t.message}finally{this.loading=!1}}},watch:{userId:{handler:"fetchUserInfo",immediate:!0},username:{handler:"fetchUserInfo",immediate:!0}}},L={class:"text-center"},D={class:"text-h6"},K={class:"text-center"},Q={class:"text-h6"},q={class:"text-center"},O={class:"text-h6"};function W(t,o,C,x,e,d){const _=V;return u(),l(P,{class:"user-info-card",border:""},{default:r(()=>{var i;return[s(w,null,{prepend:r(()=>[s(U,{size:"96"},{default:r(()=>[e.user.avatar?(u(),l(k,{key:0,src:e.VITE_APP_S3_BUCKET+"/user/"+e.user.avatar,alt:e.user.display_name},null,8,["src","alt"])):(u(),l(E,{key:1,size:"48",icon:"mdi-account"}))]),_:1})]),default:r(()=>[s(S,null,{default:r(()=>[c(n(e.user.display_name||e.user.username||"加载中..."),1)]),_:1}),s(T,null,{default:r(()=>[c("@"+n(e.user.username||"..."),1)]),_:1})]),_:1}),e.user.bio?(u(),l(p,{key:0,class:"mt-2"},{default:r(()=>[c(n(e.user.bio),1)]),_:1})):m("",!0),s(p,{class:"d-flex gap-2"},{default:r(()=>[e.user.role?(u(),l(N,{key:0,size:"small",color:d.getRoleColor(e.user.role),variant:"flat"},{default:r(()=>[c(n(d.getRoleLabel(e.user.role)),1)]),_:1},8,["color"])):m("",!0)]),_:1}),s(f),s(p,{class:"d-flex justify-space-around py-3"},{default:r(()=>[a("div",L,[a("div",D,n(e.user.project_count||0),1),o[0]||(o[0]=a("div",{class:"text-caption"},"作品",-1))]),s(f,{vertical:""}),a("div",K,[a("div",Q,n(e.user.following_count||0),1),o[1]||(o[1]=a("div",{class:"text-caption"},"关注",-1))]),s(f,{vertical:""}),a("div",q,[a("div",O,n(e.user.followers_count||0),1),o[2]||(o[2]=a("div",{class:"text-caption"},"粉丝",-1))])]),_:1}),e.user.id&&e.user.id!==((i=e.localuser)==null?void 0:i.id)?(u(),l(R,{key:1},{default:r(()=>[s(z),s(_,{"user-id":e.user.id,username:e.user.username,"display-name":e.user.display_name},null,8,["user-id","username","display-name"])]),_:1})):m("",!0)]}),_:1})}const v=y(A,[["render",W],["__scopeId","data-v-148049c2"]]),X={components:{ProjectQueryView:g,UserInfoCard:v}};function Y(t,o,C,x,e,d){const _=v,i=g;return u(),l(j,null,{default:r(()=>[s(B,null,{default:r(()=>[s(h,{cols:"12",md:"4",lg:"3"},{default:r(()=>[s(_,{"user-id":t.$route.params.id},null,8,["user-id"])]),_:1}),s(h,{cols:"12",md:"8",lg:"9"},{default:r(()=>[s(i,{type:"author",target:t.$route.params.id},null,8,["target"])]),_:1})]),_:1})]),_:1})}const $=y(X,[["render",Y]]);export{$ as default};
