import{f as ue,p as G,bo as ge,ap as z,i as se,a as d,M as Y,a6 as q,k as ye,bn as Pe,b8 as D,b9 as ce,R as K,at as R,br as Te,bs as be,bh as ne,bt as xe,bg as we,bj as oe,bu as Ie,u as Ce,t as Re,bv as Ae,al as Ve,bw as De,aj as ee,j as Fe,bx as Be,aF as Ee,aq as de,by as Le,bz as Oe,bA as Me,a4 as ve,Y as fe,$ as _e,a0 as He,L as me,P as Ue,bB as qe,aH as ze,H as Ne,au as Ke,bC as $e,av as je,bk as We,bD as Ye,bE as pe,bF as he,bG as Ge,aJ as Je}from"./index-ftuJ4KvT.js";import{V as Xe}from"./VCheckboxBtn-DSl_WQns.js";import{V as Qe}from"./VChip-DJ18Gnr1.js";const Ze=G({renderless:Boolean,...ye()},"VVirtualScrollItem"),et=ue()({name:"VVirtualScrollItem",inheritAttrs:!1,props:Ze(),emits:{"update:height":t=>!0},setup(t,r){let{attrs:n,emit:v,slots:u}=r;const{resizeRef:f,contentRect:m}=ge(void 0,"border");z(()=>{var o;return(o=m.value)==null?void 0:o.height},o=>{o!=null&&v("update:height",o)}),se(()=>{var o,a;return t.renderless?d(Y,null,[(o=u.default)==null?void 0:o.call(u,{itemRef:f})]):d("div",q({ref:f,class:["v-virtual-scroll__item",t.class],style:t.style},n),[(a=u.default)==null?void 0:a.call(u)])})}}),tt=-1,lt=1,ae=100,nt=G({itemHeight:{type:[Number,String],default:null},height:[Number,String]},"virtual");function at(t,r){const n=Pe(),v=D(0);ce(()=>{v.value=parseFloat(t.itemHeight||0)});const u=D(0),f=D(Math.ceil((parseInt(t.height)||n.height.value)/(v.value||16))||1),m=D(0),o=D(0),a=K(),h=K();let I=0;const{resizeRef:F,contentRect:i}=ge();ce(()=>{F.value=a.value});const b=R(()=>{var e;return a.value===document.documentElement?n.height.value:((e=i.value)==null?void 0:e.height)||parseInt(t.height)||0}),M=R(()=>!!(a.value&&h.value&&b.value&&v.value));let P=Array.from({length:r.value.length}),V=Array.from({length:r.value.length});const p=D(0);let k=-1;function B(e){return P[e]||v.value}const _=Te(()=>{const e=performance.now();V[0]=0;const l=r.value.length;for(let c=1;c<=l-1;c++)V[c]=(V[c-1]||0)+B(c-1);p.value=Math.max(p.value,performance.now()-e)},p),E=z(M,e=>{e&&(E(),I=h.value.offsetTop,_.immediate(),A(),~k&&we(()=>{oe&&window.requestAnimationFrame(()=>{Z(k),k=-1})}))});be(()=>{_.clear()});function J(e,l){const c=P[e],g=v.value;v.value=g?Math.min(v.value,l):l,(c!==l||g!==v.value)&&(P[e]=l,_())}function C(e){return e=ne(e,0,r.value.length-1),V[e]||0}function L(e){return ot(V,e)}let N=0,H=0,$=0;z(b,(e,l)=>{l&&(A(),e<l&&requestAnimationFrame(()=>{H=0,A()}))});let j=-1;function X(){if(!a.value||!h.value)return;const e=a.value.scrollTop,l=performance.now();l-$>500?(H=Math.sign(e-N),I=h.value.offsetTop):H=e-N,N=e,$=l,window.clearTimeout(j),j=window.setTimeout(U,500),A()}function U(){!a.value||!h.value||(H=0,$=0,window.clearTimeout(j),A())}let Q=-1;function A(){cancelAnimationFrame(Q),Q=requestAnimationFrame(te)}function te(){if(!a.value||!b.value)return;const e=N-I,l=Math.sign(H),c=Math.max(0,e-ae),g=ne(L(c),0,r.value.length),x=e+b.value+ae,s=ne(L(x)+1,g+1,r.value.length);if((l!==tt||g<u.value)&&(l!==lt||s>f.value)){const y=C(u.value)-C(g),w=C(s)-C(f.value);Math.max(y,w)>ae?(u.value=g,f.value=s):(g<=0&&(u.value=g),s>=r.value.length&&(f.value=s))}m.value=C(u.value),o.value=C(r.value.length)-C(f.value)}function Z(e){const l=C(e);!a.value||e&&!l?k=e:a.value.scrollTop=l}const le=R(()=>r.value.slice(u.value,f.value).map((e,l)=>({raw:e,index:l+u.value,key:xe(e)&&"value"in e?e.value:l+u.value})));return z(r,()=>{P=Array.from({length:r.value.length}),V=Array.from({length:r.value.length}),_.immediate(),A()},{deep:!0}),{calculateVisibleItems:A,containerRef:a,markerRef:h,computedItems:le,paddingTop:m,paddingBottom:o,scrollToIndex:Z,handleScroll:X,handleScrollend:U,handleItemResize:J}}function ot(t,r){let n=t.length-1,v=0,u=0,f=null,m=-1;if(t[n]<r)return n;for(;v<=n;)if(u=v+n>>1,f=t[u],f>r)n=u-1;else if(f<r)m=u,v=u+1;else return f===r?u:v;return m}const ut=G({items:{type:Array,default:()=>[]},renderless:Boolean,...nt(),...ye(),...Fe()},"VVirtualScroll"),st=ue()({name:"VVirtualScroll",props:ut(),setup(t,r){let{slots:n}=r;const v=Ie("VVirtualScroll"),{dimensionStyles:u}=Ce(t),{calculateVisibleItems:f,containerRef:m,markerRef:o,handleScroll:a,handleScrollend:h,handleItemResize:I,scrollToIndex:F,paddingTop:i,paddingBottom:b,computedItems:M}=at(t,Re(t,"items"));return Ae(()=>t.renderless,()=>{function P(){var k,B;const p=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)?"addEventListener":"removeEventListener";m.value===document.documentElement?(document[p]("scroll",a,{passive:!0}),document[p]("scrollend",h)):((k=m.value)==null||k[p]("scroll",a,{passive:!0}),(B=m.value)==null||B[p]("scrollend",h))}Ve(()=>{m.value=De(v.vnode.el,!0),P(!0)}),be(P)}),se(()=>{const P=M.value.map(V=>d(et,{key:V.key,renderless:t.renderless,"onUpdate:height":p=>I(V.index,p)},{default:p=>{var k;return(k=n.default)==null?void 0:k.call(n,{item:V.raw,index:V.index,...p})}}));return t.renderless?d(Y,null,[d("div",{ref:o,class:"v-virtual-scroll__spacer",style:{paddingTop:ee(i.value)}},null),P,d("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:ee(b.value)}},null)]):d("div",{ref:m,class:["v-virtual-scroll",t.class],onScrollPassive:a,onScrollend:h,style:[u.value,t.style]},[d("div",{ref:o,class:"v-virtual-scroll__container",style:{paddingTop:ee(i.value),paddingBottom:ee(b.value)}},[P])])}),{calculateVisibleItems:f,scrollToIndex:F}}});function it(t,r){const n=D(!1);let v;function u(o){cancelAnimationFrame(v),n.value=!0,v=requestAnimationFrame(()=>{v=requestAnimationFrame(()=>{n.value=!1})})}async function f(){await new Promise(o=>requestAnimationFrame(o)),await new Promise(o=>requestAnimationFrame(o)),await new Promise(o=>requestAnimationFrame(o)),await new Promise(o=>{if(n.value){const a=z(n,()=>{a(),o()})}else o()})}async function m(o){var I,F;if(o.key==="Tab"&&((I=r.value)==null||I.focus()),!["PageDown","PageUp","Home","End"].includes(o.key))return;const a=(F=t.value)==null?void 0:F.$el;if(!a)return;(o.key==="Home"||o.key==="End")&&a.scrollTo({top:o.key==="Home"?0:a.scrollHeight,behavior:"smooth"}),await f();const h=a.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(o.key==="PageDown"||o.key==="Home"){const i=a.getBoundingClientRect().top;for(const b of h)if(b.getBoundingClientRect().top>=i){b.focus();break}}else{const i=a.getBoundingClientRect().bottom;for(const b of[...h].reverse())if(b.getBoundingClientRect().bottom<=i){b.focus();break}}}return{onScrollPassive:u,onKeydown:m}}function rt(){const t=D(!1);function r(){t.value=!0}function n(){t.value=!1}return Ve(()=>{document.body.addEventListener("mousedown",r),document.body.addEventListener("mouseup",n)}),Be(()=>{document.body.removeEventListener("mousedown",r),document.body.removeEventListener("mouseup",n)}),{isMousedown:t}}const ct=G({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:Je,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,...Ge({itemChildren:!1})},"Select"),dt=G({...ct(),...je(Ye({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...$e({transition:{component:We}})},"VSelect"),pt=ue()({name:"VSelect",props:dt(),emits:{"update:focused":t=>!0,"update:modelValue":t=>!0,"update:menu":t=>!0},setup(t,r){let{slots:n}=r;const{t:v}=Ee(),u=K(),f=K(),m=K(),o=de(t,"menu"),a=R({get:()=>o.value,set:e=>{var l;o.value&&!e&&((l=f.value)!=null&&l.Î¨openChildren.size)||(o.value=e)}}),{items:h,transformIn:I,transformOut:F}=Le(t),i=de(t,"modelValue",[],e=>I(e===null?[null]:Oe(e)),e=>{const l=F(e);return t.multiple?l:l[0]??null}),b=R(()=>typeof t.counterValue=="function"?t.counterValue(i.value):typeof t.counterValue=="number"?t.counterValue:i.value.length),M=Me(t),{isMousedown:P}=rt(),V=R(()=>i.value.map(e=>e.value)),p=D(!1),k=R(()=>a.value?t.closeText:t.openText);let B="",_;const E=R(()=>t.hideSelected?h.value.filter(e=>!i.value.some(l=>t.valueComparator(l,e))):h.value),J=R(()=>t.hideNoData&&!E.value.length||M.isReadonly.value||M.isDisabled.value),C=R(()=>{var e;return{...t.menuProps,activatorProps:{...((e=t.menuProps)==null?void 0:e.activatorProps)||{},"aria-haspopup":"listbox"}}}),L=K(),N=it(L,u);function H(e){t.openOnClear&&(a.value=!0)}function $(){J.value||(a.value=!a.value)}function j(e){pe(e)&&X(e)}function X(e){var x,s;if(!e.key||M.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(e.key)&&e.preventDefault(),["Enter","ArrowDown"," "].includes(e.key)&&(a.value=!0),["Escape","Tab"].includes(e.key)&&(a.value=!1),e.key==="Home"?(x=L.value)==null||x.focus("first"):e.key==="End"&&((s=L.value)==null||s.focus("last"));const l=1e3;if(!pe(e))return;const c=performance.now();c-_>l&&(B=""),B+=e.key.toLowerCase(),_=c;const g=h.value.find(y=>y.title.toLowerCase().startsWith(B));if(g!==void 0){i.value=[g];const y=E.value.indexOf(g);oe&&window.requestAnimationFrame(()=>{var w;y>=0&&((w=m.value)==null||w.scrollToIndex(y))})}}function U(e){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!e.props.disabled)if(t.multiple){const c=i.value.findIndex(x=>t.valueComparator(x.value,e.value)),g=l??!~c;if(~c){const x=g?[...i.value,e]:[...i.value];x.splice(c,1),i.value=x}else g&&(i.value=[...i.value,e])}else{const c=l!==!1;i.value=c?[e]:[],we(()=>{a.value=!1})}}function Q(e){var l;!((l=L.value)!=null&&l.$el.contains(e.relatedTarget))&&!P.value&&(a.value=!1)}function A(){var e;t.eager&&((e=m.value)==null||e.calculateVisibleItems())}function te(){var e;p.value&&((e=u.value)==null||e.focus())}function Z(e){p.value=!0}function le(e){if(e==null)i.value=[];else if(he(u.value,":autofill")||he(u.value,":-webkit-autofill")){const l=h.value.find(c=>c.title===e);l&&U(l)}else u.value&&(u.value.value="")}return z(a,()=>{if(!t.hideSelected&&a.value&&i.value.length){const e=E.value.findIndex(l=>i.value.some(c=>t.valueComparator(c.value,l.value)));oe&&window.requestAnimationFrame(()=>{var l;e>=0&&((l=m.value)==null||l.scrollToIndex(e))})}}),z(()=>t.items,(e,l)=>{a.value||p.value&&!l.length&&e.length&&(a.value=!0)}),se(()=>{const e=!!(t.chips||n.chip),l=!!(!t.hideNoData||E.value.length||n["prepend-item"]||n["append-item"]||n["no-data"]),c=i.value.length>0,g=ve.filterProps(t),x=c||!p.value&&t.label&&!t.persistentPlaceholder?void 0:t.placeholder;return d(ve,q({ref:u},g,{modelValue:i.value.map(s=>s.props.value).join(", "),"onUpdate:modelValue":le,focused:p.value,"onUpdate:focused":s=>p.value=s,validationValue:i.externalValue,counterValue:b.value,dirty:c,class:["v-select",{"v-select--active-menu":a.value,"v-select--chips":!!t.chips,[`v-select--${t.multiple?"multiple":"single"}`]:!0,"v-select--selected":i.value.length,"v-select--selection-slot":!!n.selection},t.class],style:t.style,inputmode:"none",placeholder:x,"onClick:clear":H,"onMousedown:control":$,onBlur:Q,onKeydown:X,"aria-label":v(k.value),title:v(k.value)}),{...n,default:()=>d(Y,null,[d(_e,q({ref:f,modelValue:a.value,"onUpdate:modelValue":s=>a.value=s,activator:"parent",contentClass:"v-select__content",disabled:J.value,eager:t.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:t.transition,onAfterEnter:A,onAfterLeave:te},C.value),{default:()=>[l&&d(He,q({ref:L,selected:V.value,selectStrategy:t.multiple?"independent":"single-independent",onMousedown:s=>s.preventDefault(),onKeydown:j,onFocusin:Z,tabindex:"-1","aria-live":"polite",color:t.itemColor??t.color},N,t.listProps),{default:()=>{var s,y,w;return[(s=n["prepend-item"])==null?void 0:s.call(n),!E.value.length&&!t.hideNoData&&(((y=n["no-data"])==null?void 0:y.call(n))??d(me,{key:"no-data",title:v(t.noDataText)},null)),d(st,{ref:m,renderless:!0,items:E.value},{default:O=>{var re;let{item:T,index:W,itemRef:S}=O;const ie=q(T.props,{ref:S,key:T.value,onClick:()=>U(T,null)});return((re=n.item)==null?void 0:re.call(n,{item:T,index:W,props:ie}))??d(me,q(ie,{role:"option"}),{prepend:ke=>{let{isSelected:Se}=ke;return d(Y,null,[t.multiple&&!t.hideSelected?d(Xe,{key:T.value,modelValue:Se,ripple:!1,tabindex:"-1"},null):void 0,T.props.prependAvatar&&d(Ue,{image:T.props.prependAvatar},null),T.props.prependIcon&&d(fe,{icon:T.props.prependIcon},null)])}})}}),(w=n["append-item"])==null?void 0:w.call(n)]}})]}),i.value.map((s,y)=>{function w(S){S.stopPropagation(),S.preventDefault(),U(s,!1)}const O={"onClick:close":w,onKeydown(S){S.key!=="Enter"&&S.key!==" "||(S.preventDefault(),S.stopPropagation(),w(S))},onMousedown(S){S.preventDefault(),S.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},T=e?!!n.chip:!!n.selection,W=T?qe(e?n.chip({item:s,index:y,props:O}):n.selection({item:s,index:y})):void 0;if(!(T&&!W))return d("div",{key:s.value,class:"v-select__selection"},[e?n.chip?d(ze,{key:"chip-defaults",defaults:{VChip:{closable:t.closableChips,size:"small",text:s.title}}},{default:()=>[W]}):d(Qe,q({key:"chip",closable:t.closableChips,size:"small",text:s.title,disabled:s.props.disabled},O),null):W??d("span",{class:"v-select__selection-text"},[s.title,t.multiple&&y<i.value.length-1&&d("span",{class:"v-select__selection-comma"},[Ne(",")])])])})]),"append-inner":function(){var O;for(var s=arguments.length,y=new Array(s),w=0;w<s;w++)y[w]=arguments[w];return d(Y,null,[(O=n["append-inner"])==null?void 0:O.call(n,...y),t.menuIcon?d(fe,{class:"v-select__menu-icon",icon:t.menuIcon},null):void 0])}})}),Ke({isFocused:p,menu:a,select:U},u)}});export{pt as V,it as a,st as b,ct as m,rt as u};
