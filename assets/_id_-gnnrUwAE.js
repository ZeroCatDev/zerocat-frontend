import{_ as V}from"./ProjectQueryView-CMCMl5iK.js";import{_ as p}from"./UserRelationControls-BoQA5ssD.js";import{_ as v,a1 as I,aa as b,Y as l,o as u,N as a,e as t,$ as f,aT as w,a9 as k,L as d,X as o,aV as R,Z as U,n as N,O as S,a3 as g,S as j,a0 as h,f as n,aD as T,W as z,Q as A,R as y,T as B}from"./index-ChEdcxRM.js";import{V as D}from"./VSpacer-BWaOZO4t.js";import"./ProjectCard-BHSAsk0O.js";import"./VTextarea-BUw4zsvE.js";import"https://static.geetest.com/v4/gt4.js";const L={name:"UserInfoCard",components:{UserRelationControls:p},props:{userId:{type:[Number,String],default:null},username:{type:String,default:null},user:{type:Object,required:!0}},data(){return{loading:!1,error:null,localuser:b}},methods:{getRoleColor(s){return{admin:"error",moderator:"warning",user:"primary"}[s]||"default"},getRoleLabel(s){return{admin:"管理员",moderator:"版主",user:"用户"}[s]||s},async fetchUserInfo(){this.loading=!0;try{let s=this.userId?`/user/id/${this.userId}`:`/user/name/${this.username}`;const r=await I.get(s);if(r.data.status==="success")this.user=r.data.data;else throw new Error(r.data.message)}catch(s){console.error("Error fetching user info:",s),this.error=s.message}finally{this.loading=!1}}},watch:{userId:{handler:"fetchUserInfo",immediate:!0},username:{handler:"fetchUserInfo",immediate:!0}}},q={class:"text-center"},E={class:"text-h6"},O={class:"text-center"},Q={class:"text-h6"},P={class:"text-center"},W={class:"text-h6"};function X(s,r,e,C,c,_){const m=p;return u(),l(z,{border:"",class:"user-info-card"},{default:a(()=>{var i;return[t(w,null,{prepend:a(()=>[t(U,{size:"96"},{default:a(()=>[e.user.avatar?(u(),l(N,{key:0,alt:e.user.display_name,src:c.localuser.getUserAvatar(e.user.avatar)},null,8,["alt","src"])):(u(),l(S,{key:1,icon:"mdi-account",size:"48"}))]),_:1})]),default:a(()=>[t(k,null,{default:a(()=>[d(o(e.user.display_name||e.user.username||"加载中..."),1)]),_:1}),t(R,null,{default:a(()=>[d("@"+o(e.user.username||"..."),1)]),_:1})]),_:1}),e.user.bio?(u(),l(g,{key:0,class:"mt-2"},{default:a(()=>[d(o(e.user.bio),1)]),_:1})):f("",!0),t(g,{class:"d-flex gap-2"},{default:a(()=>[e.user.role?(u(),l(j,{key:0,color:_.getRoleColor(e.user.role),size:"small",variant:"flat"},{default:a(()=>[d(o(_.getRoleLabel(e.user.role)),1)]),_:1},8,["color"])):f("",!0)]),_:1}),t(h),t(g,{class:"d-flex justify-space-around py-3"},{default:a(()=>[n("div",q,[n("div",E,o(e.user.project_count||0),1),r[0]||(r[0]=n("div",{class:"text-caption"},"作品",-1))]),t(h,{vertical:""}),n("div",O,[n("div",Q,o(e.user.following_count||0),1),r[1]||(r[1]=n("div",{class:"text-caption"},"关注",-1))]),t(h,{vertical:""}),n("div",P,[n("div",W,o(e.user.followers_count||0),1),r[2]||(r[2]=n("div",{class:"text-caption"},"粉丝",-1))])]),_:1}),e.user.id&&e.user.id!==((i=c.localuser)==null?void 0:i.id)?(u(),l(T,{key:1},{default:a(()=>[t(D),t(m,{"display-name":e.user.display_name,"user-id":e.user.id,username:e.user.username},null,8,["display-name","user-id","username"])]),_:1})):f("",!0)]}),_:1})}const x=v(L,[["render",X],["__scopeId","data-v-888bafb0"]]),Y={components:{ProjectQueryView:V,UserInfoCard:x}};function Z(s,r,e,C,c,_){const m=x,i=V;return u(),l(B,null,{default:a(()=>[t(A,null,{default:a(()=>[t(y,{cols:"12",lg:"3",md:"4"},{default:a(()=>[t(m,{"user-id":s.$route.params.id},null,8,["user-id"])]),_:1}),t(y,{cols:"12",lg:"9",md:"8"},{default:a(()=>[t(i,{target:s.$route.params.id,type:"author"},null,8,["target"])]),_:1})]),_:1})]),_:1})}const ee=v(Y,[["render",Z]]);export{ee as default};
