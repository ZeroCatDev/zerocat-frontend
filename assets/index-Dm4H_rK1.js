import{aJ as Ca,p as U,u as be,y as O,w as ht,aK as jt,z as lt,aL as pe,aM as xe,b as Pe,d as Je,f as Ce,h as l,m as z,I as ge,aN as Ia,l as ae,r as he,aO as Fa,aP as Ea,aQ as Ba,aR as ut,B as Wa,ab as H,aS as $t,aT as qe,aU as Le,aV as Aa,a1 as Ua,aW as gt,aX as Ra,F as ue,aY as La,aZ as vt,Q as Ve,O as we,j as G,K as M,an as le,T as Y,a_ as dt,a$ as Ne,b0 as Na,aa as Ha,aj as Ya,_ as ce,ai as ve,a as je,o as E,M as C,U as j,N as b,X as qt,S as yt,av as zt,Z as bt,aq as ja,aD as $a,q as Gt,au as qa,aw as za,k as Ga,W as Xa,as as Qa,R as Ka,at as Ja,V as Za,s as ee,L as en}from"./index-DKqePUrh.js";import{V as tn}from"./VAlert-BWO0ySXb.js";import{V as Dt}from"./VPagination-DsvynPDO.js";import{V as wt}from"./VSelect-TxQAoKSE.js";import{V as pt}from"./VCheckboxBtn-BBpyMeCr.js";import{V as St,m as an,_ as Xt}from"./EmailManager-C11AjLa3.js";import{u as nn,m as rn}from"./filter-CLcLJe6E.js";import{V as on}from"./VSpacer-e-NAsH-v.js";import{V as sn}from"./VDialog-DDRRILQ3.js";import{_ as Qt}from"./OAuthManager-DDmaL1zr.js";import{u as ln,a as un,b as dn,c as cn,g as fn}from"./accountService-DNpWe-lm.js";import{a as R,V as Ze}from"./VRow-MTxZhg05.js";import{V as mn}from"./VFileInput-DmU3fURF.js";import{V as hn}from"./VSheet-BWqVDIER.js";import{V as Me}from"./VTextField-i-JnkifG.js";import{V as xt}from"./VForm-BVXfDvnz.js";import{V as gn}from"./VTextarea-CNLlxTZD.js";import{a as vn,_ as yn}from"./UserFollowers-CI5Z5kAi.js";import{_ as bn}from"./UserBlocked-BWrY1kGZ.js";import{V as wn}from"./VContainer-BXT9mjmi.js";import"./VInput-yqi59OEB.js";import"./VSelectionControl-DIpHOvtW.js";import"./verifyEmail-Din6K3WH.js";/* empty css              *//* empty css                   */import"./VSnackbar-CaMekowO.js";function _t(e,t,a){return Object.keys(e).filter(n=>Ca(n)&&n.endsWith(t)).reduce((n,r)=>(n[r.slice(0,-t.length)]=i=>e[r](i,a(i)),n),{})}const Kt=6048e5,pn=864e5,He=43200,Tt=1440,Ot=Symbol.for("constructDateFrom");function ne(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&Ot in e?e[Ot](t):e instanceof Date?new e.constructor(t):new Date(t)}function V(e,t){return ne(t||e,e)}let xn={};function Ie(){return xn}function de(e,t){var s,u,d,f;const a=Ie(),n=(t==null?void 0:t.weekStartsOn)??((u=(s=t==null?void 0:t.locale)==null?void 0:s.options)==null?void 0:u.weekStartsOn)??a.weekStartsOn??((f=(d=a.locale)==null?void 0:d.options)==null?void 0:f.weekStartsOn)??0,r=V(e,t==null?void 0:t.in),i=r.getDay(),o=(i<n?7:0)+i-n;return r.setDate(r.getDate()-o),r.setHours(0,0,0,0),r}function ze(e,t){return de(e,{...t,weekStartsOn:1})}function Jt(e,t){const a=V(e,t==null?void 0:t.in),n=a.getFullYear(),r=ne(a,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const i=ze(r),o=ne(a,0);o.setFullYear(n,0,4),o.setHours(0,0,0,0);const s=ze(o);return a.getTime()>=i.getTime()?n+1:a.getTime()>=s.getTime()?n:n-1}function Ge(e){const t=V(e),a=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return a.setUTCFullYear(t.getFullYear()),+e-+a}function Fe(e,...t){const a=ne.bind(null,e||t.find(n=>typeof n=="object"));return t.map(a)}function Mt(e,t){const a=V(e,t==null?void 0:t.in);return a.setHours(0,0,0,0),a}function Pn(e,t,a){const[n,r]=Fe(a==null?void 0:a.in,e,t),i=Mt(n),o=Mt(r),s=+i-Ge(i),u=+o-Ge(o);return Math.round((s-u)/pn)}function kn(e,t){const a=Jt(e,t),n=ne(e,0);return n.setFullYear(a,0,4),n.setHours(0,0,0,0),ze(n)}function $e(e,t){const a=+V(e)-+V(t);return a<0?-1:a>0?1:a}function Dn(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function Sn(e){return!(!Dn(e)&&typeof e!="number"||isNaN(+V(e)))}function _n(e,t,a){const[n,r]=Fe(a==null?void 0:a.in,e,t),i=n.getFullYear()-r.getFullYear(),o=n.getMonth()-r.getMonth();return i*12+o}function Tn(e){return t=>{const n=(e?Math[e]:Math.trunc)(t);return n===0?0:n}}function On(e,t){return+V(e)-+V(t)}function Mn(e,t){const a=V(e,t==null?void 0:t.in);return a.setHours(23,59,59,999),a}function Vn(e,t){const a=V(e,t==null?void 0:t.in),n=a.getMonth();return a.setFullYear(a.getFullYear(),n+1,0),a.setHours(23,59,59,999),a}function Cn(e,t){const a=V(e,t==null?void 0:t.in);return+Mn(a,t)==+Vn(a,t)}function In(e,t,a){const[n,r,i]=Fe(a==null?void 0:a.in,e,e,t),o=$e(r,i),s=Math.abs(_n(r,i));if(s<1)return 0;r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-o*s);let u=$e(r,i)===-o;Cn(n)&&s===1&&$e(n,i)===1&&(u=!1);const d=o*(s-+u);return d===0?0:d}function Fn(e,t,a){const n=On(e,t)/1e3;return Tn(a==null?void 0:a.roundingMethod)(n)}function En(e,t){const a=V(e,t==null?void 0:t.in);return a.setFullYear(a.getFullYear(),0,1),a.setHours(0,0,0,0),a}const Bn={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Wn=(e,t,a)=>{let n;const r=Bn[e];return typeof r=="string"?n=r:t===1?n=r.one:n=r.other.replace("{{count}}",t.toString()),a!=null&&a.addSuffix?a.comparison&&a.comparison>0?"in "+n:n+" ago":n};function ye(e){return(t={})=>{const a=t.width?String(t.width):e.defaultWidth;return e.formats[a]||e.formats[e.defaultWidth]}}const An={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Un={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Rn={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Ln={date:ye({formats:An,defaultWidth:"full"}),time:ye({formats:Un,defaultWidth:"full"}),dateTime:ye({formats:Rn,defaultWidth:"full"})},Nn={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Hn=(e,t,a,n)=>Nn[e];function $(e){return(t,a)=>{const n=a!=null&&a.context?String(a.context):"standalone";let r;if(n==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,s=a!=null&&a.width?String(a.width):o;r=e.formattingValues[s]||e.formattingValues[o]}else{const o=e.defaultWidth,s=a!=null&&a.width?String(a.width):e.defaultWidth;r=e.values[s]||e.values[o]}const i=e.argumentCallback?e.argumentCallback(t):t;return r[i]}}const Yn={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},jn={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},$n={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},qn={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},zn={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Gn={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Xn=(e,t)=>{const a=Number(e),n=a%100;if(n>20||n<10)switch(n%10){case 1:return a+"st";case 2:return a+"nd";case 3:return a+"rd"}return a+"th"},Qn={ordinalNumber:Xn,era:$({values:Yn,defaultWidth:"wide"}),quarter:$({values:jn,defaultWidth:"wide",argumentCallback:e=>e-1}),month:$({values:$n,defaultWidth:"wide"}),day:$({values:qn,defaultWidth:"wide"}),dayPeriod:$({values:zn,defaultWidth:"wide",formattingValues:Gn,defaultFormattingWidth:"wide"})};function q(e){return(t,a={})=>{const n=a.width,r=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],i=t.match(r);if(!i)return null;const o=i[0],s=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],u=Array.isArray(s)?Jn(s,m=>m.test(o)):Kn(s,m=>m.test(o));let d;d=e.valueCallback?e.valueCallback(u):u,d=a.valueCallback?a.valueCallback(d):d;const f=t.slice(o.length);return{value:d,rest:f}}}function Kn(e,t){for(const a in e)if(Object.prototype.hasOwnProperty.call(e,a)&&t(e[a]))return a}function Jn(e,t){for(let a=0;a<e.length;a++)if(t(e[a]))return a}function Zt(e){return(t,a={})=>{const n=t.match(e.matchPattern);if(!n)return null;const r=n[0],i=t.match(e.parsePattern);if(!i)return null;let o=e.valueCallback?e.valueCallback(i[0]):i[0];o=a.valueCallback?a.valueCallback(o):o;const s=t.slice(r.length);return{value:o,rest:s}}}const Zn=/^(\d+)(th|st|nd|rd)?/i,er=/\d+/i,tr={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},ar={any:[/^b/i,/^(a|c)/i]},nr={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},rr={any:[/1/i,/2/i,/3/i,/4/i]},ir={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},or={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},sr={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},lr={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},ur={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},dr={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},cr={ordinalNumber:Zt({matchPattern:Zn,parsePattern:er,valueCallback:e=>parseInt(e,10)}),era:q({matchPatterns:tr,defaultMatchWidth:"wide",parsePatterns:ar,defaultParseWidth:"any"}),quarter:q({matchPatterns:nr,defaultMatchWidth:"wide",parsePatterns:rr,defaultParseWidth:"any",valueCallback:e=>e+1}),month:q({matchPatterns:ir,defaultMatchWidth:"wide",parsePatterns:or,defaultParseWidth:"any"}),day:q({matchPatterns:sr,defaultMatchWidth:"wide",parsePatterns:lr,defaultParseWidth:"any"}),dayPeriod:q({matchPatterns:ur,defaultMatchWidth:"any",parsePatterns:dr,defaultParseWidth:"any"})},ea={code:"en-US",formatDistance:Wn,formatLong:Ln,formatRelative:Hn,localize:Qn,match:cr,options:{weekStartsOn:0,firstWeekContainsDate:1}};function fr(e,t){const a=V(e,t==null?void 0:t.in);return Pn(a,En(a))+1}function mr(e,t){const a=V(e,t==null?void 0:t.in),n=+ze(a)-+kn(a);return Math.round(n/Kt)+1}function ta(e,t){var f,m,h,w;const a=V(e,t==null?void 0:t.in),n=a.getFullYear(),r=Ie(),i=(t==null?void 0:t.firstWeekContainsDate)??((m=(f=t==null?void 0:t.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??r.firstWeekContainsDate??((w=(h=r.locale)==null?void 0:h.options)==null?void 0:w.firstWeekContainsDate)??1,o=ne((t==null?void 0:t.in)||e,0);o.setFullYear(n+1,0,i),o.setHours(0,0,0,0);const s=de(o,t),u=ne((t==null?void 0:t.in)||e,0);u.setFullYear(n,0,i),u.setHours(0,0,0,0);const d=de(u,t);return+a>=+s?n+1:+a>=+d?n:n-1}function hr(e,t){var s,u,d,f;const a=Ie(),n=(t==null?void 0:t.firstWeekContainsDate)??((u=(s=t==null?void 0:t.locale)==null?void 0:s.options)==null?void 0:u.firstWeekContainsDate)??a.firstWeekContainsDate??((f=(d=a.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??1,r=ta(e,t),i=ne((t==null?void 0:t.in)||e,0);return i.setFullYear(r,0,n),i.setHours(0,0,0,0),de(i,t)}function gr(e,t){const a=V(e,t==null?void 0:t.in),n=+de(a,t)-+hr(a,t);return Math.round(n/Kt)+1}function D(e,t){const a=e<0?"-":"",n=Math.abs(e).toString().padStart(t,"0");return a+n}const te={y(e,t){const a=e.getFullYear(),n=a>0?a:1-a;return D(t==="yy"?n%100:n,t.length)},M(e,t){const a=e.getMonth();return t==="M"?String(a+1):D(a+1,2)},d(e,t){return D(e.getDate(),t.length)},a(e,t){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return a.toUpperCase();case"aaa":return a;case"aaaaa":return a[0];case"aaaa":default:return a==="am"?"a.m.":"p.m."}},h(e,t){return D(e.getHours()%12||12,t.length)},H(e,t){return D(e.getHours(),t.length)},m(e,t){return D(e.getMinutes(),t.length)},s(e,t){return D(e.getSeconds(),t.length)},S(e,t){const a=t.length,n=e.getMilliseconds(),r=Math.trunc(n*Math.pow(10,a-3));return D(r,t.length)}},me={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Vt={G:function(e,t,a){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return a.era(n,{width:"abbreviated"});case"GGGGG":return a.era(n,{width:"narrow"});case"GGGG":default:return a.era(n,{width:"wide"})}},y:function(e,t,a){if(t==="yo"){const n=e.getFullYear(),r=n>0?n:1-n;return a.ordinalNumber(r,{unit:"year"})}return te.y(e,t)},Y:function(e,t,a,n){const r=ta(e,n),i=r>0?r:1-r;if(t==="YY"){const o=i%100;return D(o,2)}return t==="Yo"?a.ordinalNumber(i,{unit:"year"}):D(i,t.length)},R:function(e,t){const a=Jt(e);return D(a,t.length)},u:function(e,t){const a=e.getFullYear();return D(a,t.length)},Q:function(e,t,a){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return D(n,2);case"Qo":return a.ordinalNumber(n,{unit:"quarter"});case"QQQ":return a.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return a.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return a.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,a){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return D(n,2);case"qo":return a.ordinalNumber(n,{unit:"quarter"});case"qqq":return a.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return a.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return a.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,a){const n=e.getMonth();switch(t){case"M":case"MM":return te.M(e,t);case"Mo":return a.ordinalNumber(n+1,{unit:"month"});case"MMM":return a.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return a.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return a.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,a){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return D(n+1,2);case"Lo":return a.ordinalNumber(n+1,{unit:"month"});case"LLL":return a.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return a.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return a.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,a,n){const r=gr(e,n);return t==="wo"?a.ordinalNumber(r,{unit:"week"}):D(r,t.length)},I:function(e,t,a){const n=mr(e);return t==="Io"?a.ordinalNumber(n,{unit:"week"}):D(n,t.length)},d:function(e,t,a){return t==="do"?a.ordinalNumber(e.getDate(),{unit:"date"}):te.d(e,t)},D:function(e,t,a){const n=fr(e);return t==="Do"?a.ordinalNumber(n,{unit:"dayOfYear"}):D(n,t.length)},E:function(e,t,a){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return a.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return a.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(n,{width:"short",context:"formatting"});case"EEEE":default:return a.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,a,n){const r=e.getDay(),i=(r-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return D(i,2);case"eo":return a.ordinalNumber(i,{unit:"day"});case"eee":return a.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return a.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(r,{width:"short",context:"formatting"});case"eeee":default:return a.day(r,{width:"wide",context:"formatting"})}},c:function(e,t,a,n){const r=e.getDay(),i=(r-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return D(i,t.length);case"co":return a.ordinalNumber(i,{unit:"day"});case"ccc":return a.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return a.day(r,{width:"narrow",context:"standalone"});case"cccccc":return a.day(r,{width:"short",context:"standalone"});case"cccc":default:return a.day(r,{width:"wide",context:"standalone"})}},i:function(e,t,a){const n=e.getDay(),r=n===0?7:n;switch(t){case"i":return String(r);case"ii":return D(r,t.length);case"io":return a.ordinalNumber(r,{unit:"day"});case"iii":return a.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return a.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return a.day(n,{width:"short",context:"formatting"});case"iiii":default:return a.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,a){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return a.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return a.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return a.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return a.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,a){const n=e.getHours();let r;switch(n===12?r=me.noon:n===0?r=me.midnight:r=n/12>=1?"pm":"am",t){case"b":case"bb":return a.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return a.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return a.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return a.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(e,t,a){const n=e.getHours();let r;switch(n>=17?r=me.evening:n>=12?r=me.afternoon:n>=4?r=me.morning:r=me.night,t){case"B":case"BB":case"BBB":return a.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return a.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return a.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(e,t,a){if(t==="ho"){let n=e.getHours()%12;return n===0&&(n=12),a.ordinalNumber(n,{unit:"hour"})}return te.h(e,t)},H:function(e,t,a){return t==="Ho"?a.ordinalNumber(e.getHours(),{unit:"hour"}):te.H(e,t)},K:function(e,t,a){const n=e.getHours()%12;return t==="Ko"?a.ordinalNumber(n,{unit:"hour"}):D(n,t.length)},k:function(e,t,a){let n=e.getHours();return n===0&&(n=24),t==="ko"?a.ordinalNumber(n,{unit:"hour"}):D(n,t.length)},m:function(e,t,a){return t==="mo"?a.ordinalNumber(e.getMinutes(),{unit:"minute"}):te.m(e,t)},s:function(e,t,a){return t==="so"?a.ordinalNumber(e.getSeconds(),{unit:"second"}):te.s(e,t)},S:function(e,t){return te.S(e,t)},X:function(e,t,a){const n=e.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return It(n);case"XXXX":case"XX":return se(n);case"XXXXX":case"XXX":default:return se(n,":")}},x:function(e,t,a){const n=e.getTimezoneOffset();switch(t){case"x":return It(n);case"xxxx":case"xx":return se(n);case"xxxxx":case"xxx":default:return se(n,":")}},O:function(e,t,a){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Ct(n,":");case"OOOO":default:return"GMT"+se(n,":")}},z:function(e,t,a){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Ct(n,":");case"zzzz":default:return"GMT"+se(n,":")}},t:function(e,t,a){const n=Math.trunc(+e/1e3);return D(n,t.length)},T:function(e,t,a){return D(+e,t.length)}};function Ct(e,t=""){const a=e>0?"-":"+",n=Math.abs(e),r=Math.trunc(n/60),i=n%60;return i===0?a+String(r):a+String(r)+t+D(i,2)}function It(e,t){return e%60===0?(e>0?"-":"+")+D(Math.abs(e)/60,2):se(e,t)}function se(e,t=""){const a=e>0?"-":"+",n=Math.abs(e),r=D(Math.trunc(n/60),2),i=D(n%60,2);return a+r+t+i}const Ft=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},aa=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},vr=(e,t)=>{const a=e.match(/(P+)(p+)?/)||[],n=a[1],r=a[2];if(!r)return Ft(e,t);let i;switch(n){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",Ft(n,t)).replace("{{time}}",aa(r,t))},yr={p:aa,P:vr},br=/^D+$/,wr=/^Y+$/,pr=["D","DD","YY","YYYY"];function xr(e){return br.test(e)}function Pr(e){return wr.test(e)}function kr(e,t,a){const n=Dr(e,t,a);if(console.warn(n),pr.includes(e))throw new RangeError(n)}function Dr(e,t,a){const n=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${a}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Sr=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,_r=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Tr=/^'([^]*?)'?$/,Or=/''/g,Mr=/[a-zA-Z]/;function Vr(e,t,a){var f,m,h,w;const n=Ie(),r=n.locale??ea,i=n.firstWeekContainsDate??((m=(f=n.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??1,o=n.weekStartsOn??((w=(h=n.locale)==null?void 0:h.options)==null?void 0:w.weekStartsOn)??0,s=V(e,a==null?void 0:a.in);if(!Sn(s))throw new RangeError("Invalid time value");let u=t.match(_r).map(c=>{const y=c[0];if(y==="p"||y==="P"){const v=yr[y];return v(c,r.formatLong)}return c}).join("").match(Sr).map(c=>{if(c==="''")return{isToken:!1,value:"'"};const y=c[0];if(y==="'")return{isToken:!1,value:Cr(c)};if(Vt[y])return{isToken:!0,value:c};if(y.match(Mr))throw new RangeError("Format string contains an unescaped latin alphabet character `"+y+"`");return{isToken:!1,value:c}});r.localize.preprocessor&&(u=r.localize.preprocessor(s,u));const d={firstWeekContainsDate:i,weekStartsOn:o,locale:r};return u.map(c=>{if(!c.isToken)return c.value;const y=c.value;(Pr(y)||xr(y))&&kr(y,t,String(e));const v=Vt[y[0]];return v(s,y,r.localize,d)}).join("")}function Cr(e){const t=e.match(Tr);return t?t[1].replace(Or,"'"):e}function Ir(e,t,a){const n=Ie(),r=(a==null?void 0:a.locale)??n.locale??ea,i=2520,o=$e(e,t);if(isNaN(o))throw new RangeError("Invalid time value");const s=Object.assign({},a,{addSuffix:a==null?void 0:a.addSuffix,comparison:o}),[u,d]=Fe(a==null?void 0:a.in,...o>0?[t,e]:[e,t]),f=Fn(d,u),m=(Ge(d)-Ge(u))/1e3,h=Math.round((f-m)/60);let w;if(h<2)return a!=null&&a.includeSeconds?f<5?r.formatDistance("lessThanXSeconds",5,s):f<10?r.formatDistance("lessThanXSeconds",10,s):f<20?r.formatDistance("lessThanXSeconds",20,s):f<40?r.formatDistance("halfAMinute",0,s):f<60?r.formatDistance("lessThanXMinutes",1,s):r.formatDistance("xMinutes",1,s):h===0?r.formatDistance("lessThanXMinutes",1,s):r.formatDistance("xMinutes",h,s);if(h<45)return r.formatDistance("xMinutes",h,s);if(h<90)return r.formatDistance("aboutXHours",1,s);if(h<Tt){const c=Math.round(h/60);return r.formatDistance("aboutXHours",c,s)}else{if(h<i)return r.formatDistance("xDays",1,s);if(h<He){const c=Math.round(h/Tt);return r.formatDistance("xDays",c,s)}else if(h<He*2)return w=Math.round(h/He),r.formatDistance("aboutXMonths",w,s)}if(w=In(d,u),w<12){const c=Math.round(h/He);return r.formatDistance("xMonths",c,s)}else{const c=w%12,y=Math.trunc(w/12);return c<3?r.formatDistance("aboutXYears",y,s):c<9?r.formatDistance("overXYears",y,s):r.formatDistance("almostXYears",y+1,s)}}function Fr(e,t,a){const[n,r]=Fe(a==null?void 0:a.in,e,t);return+de(n,a)==+de(r,a)}const Er={lessThanXSeconds:{one:"不到 1 秒",other:"不到 {{count}} 秒"},xSeconds:{one:"1 秒",other:"{{count}} 秒"},halfAMinute:"半分钟",lessThanXMinutes:{one:"不到 1 分钟",other:"不到 {{count}} 分钟"},xMinutes:{one:"1 分钟",other:"{{count}} 分钟"},xHours:{one:"1 小时",other:"{{count}} 小时"},aboutXHours:{one:"大约 1 小时",other:"大约 {{count}} 小时"},xDays:{one:"1 天",other:"{{count}} 天"},aboutXWeeks:{one:"大约 1 个星期",other:"大约 {{count}} 个星期"},xWeeks:{one:"1 个星期",other:"{{count}} 个星期"},aboutXMonths:{one:"大约 1 个月",other:"大约 {{count}} 个月"},xMonths:{one:"1 个月",other:"{{count}} 个月"},aboutXYears:{one:"大约 1 年",other:"大约 {{count}} 年"},xYears:{one:"1 年",other:"{{count}} 年"},overXYears:{one:"超过 1 年",other:"超过 {{count}} 年"},almostXYears:{one:"将近 1 年",other:"将近 {{count}} 年"}},Br=(e,t,a)=>{let n;const r=Er[e];return typeof r=="string"?n=r:t===1?n=r.one:n=r.other.replace("{{count}}",String(t)),a!=null&&a.addSuffix?a.comparison&&a.comparison>0?n+"内":n+"前":n},Wr={full:"y'年'M'月'd'日' EEEE",long:"y'年'M'月'd'日'",medium:"yyyy-MM-dd",short:"yy-MM-dd"},Ar={full:"zzzz a h:mm:ss",long:"z a h:mm:ss",medium:"a h:mm:ss",short:"a h:mm"},Ur={full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},Rr={date:ye({formats:Wr,defaultWidth:"full"}),time:ye({formats:Ar,defaultWidth:"full"}),dateTime:ye({formats:Ur,defaultWidth:"full"})};function Et(e,t,a){const n="eeee p";return Fr(e,t,a)?n:e.getTime()>t.getTime()?"'下个'"+n:"'上个'"+n}const Lr={lastWeek:Et,yesterday:"'昨天' p",today:"'今天' p",tomorrow:"'明天' p",nextWeek:Et,other:"PP p"},Nr=(e,t,a,n)=>{const r=Lr[e];return typeof r=="function"?r(t,a,n):r},Hr={narrow:["前","公元"],abbreviated:["前","公元"],wide:["公元前","公元"]},Yr={narrow:["1","2","3","4"],abbreviated:["第一季","第二季","第三季","第四季"],wide:["第一季度","第二季度","第三季度","第四季度"]},jr={narrow:["一","二","三","四","五","六","七","八","九","十","十一","十二"],abbreviated:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],wide:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]},$r={narrow:["日","一","二","三","四","五","六"],short:["日","一","二","三","四","五","六"],abbreviated:["周日","周一","周二","周三","周四","周五","周六"],wide:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"]},qr={narrow:{am:"上",pm:"下",midnight:"凌晨",noon:"午",morning:"早",afternoon:"下午",evening:"晚",night:"夜"},abbreviated:{am:"上午",pm:"下午",midnight:"凌晨",noon:"中午",morning:"早晨",afternoon:"中午",evening:"晚上",night:"夜间"},wide:{am:"上午",pm:"下午",midnight:"凌晨",noon:"中午",morning:"早晨",afternoon:"中午",evening:"晚上",night:"夜间"}},zr={narrow:{am:"上",pm:"下",midnight:"凌晨",noon:"午",morning:"早",afternoon:"下午",evening:"晚",night:"夜"},abbreviated:{am:"上午",pm:"下午",midnight:"凌晨",noon:"中午",morning:"早晨",afternoon:"中午",evening:"晚上",night:"夜间"},wide:{am:"上午",pm:"下午",midnight:"凌晨",noon:"中午",morning:"早晨",afternoon:"中午",evening:"晚上",night:"夜间"}},Gr=(e,t)=>{const a=Number(e);switch(t==null?void 0:t.unit){case"date":return a.toString()+"日";case"hour":return a.toString()+"时";case"minute":return a.toString()+"分";case"second":return a.toString()+"秒";default:return"第 "+a.toString()}},Xr={ordinalNumber:Gr,era:$({values:Hr,defaultWidth:"wide"}),quarter:$({values:Yr,defaultWidth:"wide",argumentCallback:e=>e-1}),month:$({values:jr,defaultWidth:"wide"}),day:$({values:$r,defaultWidth:"wide"}),dayPeriod:$({values:qr,defaultWidth:"wide",formattingValues:zr,defaultFormattingWidth:"wide"})},Qr=/^(第\s*)?\d+(日|时|分|秒)?/i,Kr=/\d+/i,Jr={narrow:/^(前)/i,abbreviated:/^(前)/i,wide:/^(公元前|公元)/i},Zr={any:[/^(前)/i,/^(公元)/i]},ei={narrow:/^[1234]/i,abbreviated:/^第[一二三四]刻/i,wide:/^第[一二三四]刻钟/i},ti={any:[/(1|一)/i,/(2|二)/i,/(3|三)/i,/(4|四)/i]},ai={narrow:/^(一|二|三|四|五|六|七|八|九|十[二一])/i,abbreviated:/^(一|二|三|四|五|六|七|八|九|十[二一]|\d|1[12])月/i,wide:/^(一|二|三|四|五|六|七|八|九|十[二一])月/i},ni={narrow:[/^一/i,/^二/i,/^三/i,/^四/i,/^五/i,/^六/i,/^七/i,/^八/i,/^九/i,/^十(?!(一|二))/i,/^十一/i,/^十二/i],any:[/^一|1/i,/^二|2/i,/^三|3/i,/^四|4/i,/^五|5/i,/^六|6/i,/^七|7/i,/^八|8/i,/^九|9/i,/^十(?!(一|二))|10/i,/^十一|11/i,/^十二|12/i]},ri={narrow:/^[一二三四五六日]/i,short:/^[一二三四五六日]/i,abbreviated:/^周[一二三四五六日]/i,wide:/^星期[一二三四五六日]/i},ii={any:[/日/i,/一/i,/二/i,/三/i,/四/i,/五/i,/六/i]},oi={any:/^(上午?|下午?|午夜|[中正]午|早上?|下午|晚上?|凌晨|)/i},si={any:{am:/^上午?/i,pm:/^下午?/i,midnight:/^午夜/i,noon:/^[中正]午/i,morning:/^早上/i,afternoon:/^下午/i,evening:/^晚上?/i,night:/^凌晨/i}},li={ordinalNumber:Zt({matchPattern:Qr,parsePattern:Kr,valueCallback:e=>parseInt(e,10)}),era:q({matchPatterns:Jr,defaultMatchWidth:"wide",parsePatterns:Zr,defaultParseWidth:"any"}),quarter:q({matchPatterns:ei,defaultMatchWidth:"wide",parsePatterns:ti,defaultParseWidth:"any",valueCallback:e=>e+1}),month:q({matchPatterns:ai,defaultMatchWidth:"wide",parsePatterns:ni,defaultParseWidth:"any"}),day:q({matchPatterns:ri,defaultMatchWidth:"wide",parsePatterns:ii,defaultParseWidth:"any"}),dayPeriod:q({matchPatterns:oi,defaultMatchWidth:"any",parsePatterns:si,defaultParseWidth:"any"})},ui={code:"zh-CN",formatDistance:Br,formatLong:Rr,formatRelative:Nr,localize:Xr,match:li,options:{weekStartsOn:1,firstWeekContainsDate:4}},di=U({page:{type:[Number,String],default:1},itemsPerPage:{type:[Number,String],default:10}},"DataTable-paginate"),na=Symbol.for("vuetify:data-table-pagination");function ci(e){const t=be(e,"page",void 0,n=>Number(n??1)),a=be(e,"itemsPerPage",void 0,n=>Number(n??10));return{page:t,itemsPerPage:a}}function fi(e){const{page:t,itemsPerPage:a,itemsLength:n}=e,r=O(()=>a.value===-1?0:a.value*(t.value-1)),i=O(()=>a.value===-1?n.value:Math.min(n.value,r.value+a.value)),o=O(()=>a.value===-1||n.value===0?1:Math.ceil(n.value/a.value));ht([t,o],()=>{t.value>o.value&&(t.value=o.value)});function s(h){a.value=h,t.value=1}function u(){t.value=lt(t.value+1,1,o.value)}function d(){t.value=lt(t.value-1,1,o.value)}function f(h){t.value=lt(h,1,o.value)}const m={page:t,itemsPerPage:a,startIndex:r,stopIndex:i,pageCount:o,itemsLength:n,nextPage:u,prevPage:d,setPage:f,setItemsPerPage:s};return xe(na,m),m}function mi(){const e=pe(na);if(!e)throw new Error("Missing pagination!");return e}function hi(e){const t=jt("usePaginatedItems"),{items:a,startIndex:n,stopIndex:r,itemsPerPage:i}=e,o=O(()=>i.value<=0?a.value:a.value.slice(n.value,r.value));return ht(o,s=>{t.emit("update:currentItems",s)},{immediate:!0}),{paginatedItems:o}}const ra=U({prevIcon:{type:ge,default:"$prev"},nextIcon:{type:ge,default:"$next"},firstIcon:{type:ge,default:"$first"},lastIcon:{type:ge,default:"$last"},itemsPerPageText:{type:String,default:"$vuetify.dataFooter.itemsPerPageText"},pageText:{type:String,default:"$vuetify.dataFooter.pageText"},firstPageLabel:{type:String,default:"$vuetify.dataFooter.firstPage"},prevPageLabel:{type:String,default:"$vuetify.dataFooter.prevPage"},nextPageLabel:{type:String,default:"$vuetify.dataFooter.nextPage"},lastPageLabel:{type:String,default:"$vuetify.dataFooter.lastPage"},itemsPerPageOptions:{type:Array,default:()=>[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}]},showCurrentPage:Boolean},"VDataTableFooter"),Bt=Pe()({name:"VDataTableFooter",props:ra(),setup(e,t){let{slots:a}=t;const{t:n}=Je(),{page:r,pageCount:i,startIndex:o,stopIndex:s,itemsLength:u,itemsPerPage:d,setItemsPerPage:f}=mi(),m=O(()=>e.itemsPerPageOptions.map(h=>typeof h=="number"?{value:h,title:h===-1?n("$vuetify.dataFooter.itemsPerPageAll"):String(h)}:{...h,title:isNaN(Number(h.title))?n(h.title):h.title}));return Ce(()=>{var w;const h=Dt.filterProps(e);return l("div",{class:"v-data-table-footer"},[(w=a.prepend)==null?void 0:w.call(a),l("div",{class:"v-data-table-footer__items-per-page"},[l("span",null,[n(e.itemsPerPageText)]),l(wt,{items:m.value,modelValue:d.value,"onUpdate:modelValue":c=>f(Number(c)),density:"compact",variant:"outlined","hide-details":!0},null)]),l("div",{class:"v-data-table-footer__info"},[l("div",null,[n(e.pageText,u.value?o.value+1:0,s.value,u.value)])]),l("div",{class:"v-data-table-footer__pagination"},[l(Dt,z({modelValue:r.value,"onUpdate:modelValue":c=>r.value=c,density:"comfortable","first-aria-label":e.firstPageLabel,"last-aria-label":e.lastPageLabel,length:i.value,"next-aria-label":e.nextPageLabel,"previous-aria-label":e.prevPageLabel,rounded:!0,"show-first-last-page":!0,"total-visible":e.showCurrentPage?1:0,variant:"plain"},h),null)])])}),{}}}),Xe=Ia({align:{type:String,default:"start"},fixed:Boolean,fixedOffset:[Number,String],height:[Number,String],lastFixed:Boolean,noPadding:Boolean,tag:String,width:[Number,String],maxWidth:[Number,String],nowrap:Boolean},(e,t)=>{let{slots:a}=t;const n=e.tag??"td";return l(n,{class:["v-data-table__td",{"v-data-table-column--fixed":e.fixed,"v-data-table-column--last-fixed":e.lastFixed,"v-data-table-column--no-padding":e.noPadding,"v-data-table-column--nowrap":e.nowrap},`v-data-table-column--align-${e.align}`],style:{height:ae(e.height),width:ae(e.width),maxWidth:ae(e.maxWidth),left:ae(e.fixedOffset||null)}},{default:()=>{var r;return[(r=a.default)==null?void 0:r.call(a)]}})}),gi=U({headers:Array},"DataTable-header"),ia=Symbol.for("vuetify:data-table-headers"),oa={title:"",sortable:!1},vi={...oa,width:48};function yi(){const t=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).map(a=>({element:a,priority:0}));return{enqueue:(a,n)=>{let r=!1;for(let i=0;i<t.length;i++)if(t[i].priority>n){t.splice(i,0,{element:a,priority:n}),r=!0;break}r||t.push({element:a,priority:n})},size:()=>t.length,count:()=>{let a=0;if(!t.length)return 0;const n=Math.floor(t[0].priority);for(let r=0;r<t.length;r++)Math.floor(t[r].priority)===n&&(a+=1);return a},dequeue:()=>t.shift()}}function ft(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];if(!e.children)t.push(e);else for(const a of e.children)ft(a,t);return t}function sa(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new Set;for(const a of e)a.key&&t.add(a.key),a.children&&sa(a.children,t);return t}function bi(e){if(e.key){if(e.key==="data-table-group")return oa;if(["data-table-expand","data-table-select"].includes(e.key))return vi}}function Pt(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.children?Math.max(t,...e.children.map(a=>Pt(a,t+1))):t}function wi(e){let t=!1;function a(i){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(i)if(o&&(i.fixed=!0),i.fixed)if(i.children)for(let s=i.children.length-1;s>=0;s--)a(i.children[s],!0);else t?isNaN(Number(i.width))?Ba(`Multiple fixed columns should have a static width (key: ${i.key})`):i.minWidth=Math.max(Number(i.width)||0,Number(i.minWidth)||0):i.lastFixed=!0,t=!0;else if(i.children)for(let s=i.children.length-1;s>=0;s--)a(i.children[s]);else t=!1}for(let i=e.length-1;i>=0;i--)a(e[i]);function n(i){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!i)return o;if(i.children){i.fixedOffset=o;for(const s of i.children)o=n(s,o)}else i.fixed&&(i.fixedOffset=o,o+=parseFloat(i.width||"0")||0);return o}let r=0;for(const i of e)r=n(i,r)}function pi(e,t){const a=[];let n=0;const r=yi(e);for(;r.size()>0;){let o=r.count();const s=[];let u=1;for(;o>0;){const{element:d,priority:f}=r.dequeue(),m=t-n-Pt(d);if(s.push({...d,rowspan:m??1,colspan:d.children?ft(d).length:1}),d.children)for(const h of d.children){const w=f%1+u/Math.pow(10,n+2);r.enqueue(h,n+m+w)}u+=1,o-=1}n+=1,a.push(s)}return{columns:e.map(o=>ft(o)).flat(),headers:a}}function la(e){const t=[];for(const a of e){const n={...bi(a),...a},r=n.key??(typeof n.value=="string"?n.value:null),i=n.value??r??null,o={...n,key:r,value:i,sortable:n.sortable??(n.key!=null||!!n.sort),children:n.children?la(n.children):void 0};t.push(o)}return t}function xi(e,t){const a=he([]),n=he([]),r=he({}),i=he({}),o=he({});Fa(()=>{var y,v,S;const d=(e.headers||Object.keys(e.items[0]??{}).map(g=>({key:g,title:Ea(g)}))).slice(),f=sa(d);(y=t==null?void 0:t.groupBy)!=null&&y.value.length&&!f.has("data-table-group")&&d.unshift({key:"data-table-group",title:"Group"}),(v=t==null?void 0:t.showSelect)!=null&&v.value&&!f.has("data-table-select")&&d.unshift({key:"data-table-select"}),(S=t==null?void 0:t.showExpand)!=null&&S.value&&!f.has("data-table-expand")&&d.push({key:"data-table-expand"});const m=la(d);wi(m);const h=Math.max(...m.map(g=>Pt(g)))+1,w=pi(m,h);a.value=w.headers,n.value=w.columns;const c=w.headers.flat(1);for(const g of c)g.key&&(g.sortable&&(g.sort&&(r.value[g.key]=g.sort),g.sortRaw&&(i.value[g.key]=g.sortRaw)),g.filter&&(o.value[g.key]=g.filter))});const s={headers:a,columns:n,sortFunctions:r,sortRawFunctions:i,filterFunctions:o};return xe(ia,s),s}function et(){const e=pe(ia);if(!e)throw new Error("Missing headers!");return e}const Pi={showSelectAll:!1,allSelected:()=>[],select:e=>{var n;let{items:t,value:a}=e;return new Set(a?[(n=t[0])==null?void 0:n.value]:[])},selectAll:e=>{let{selected:t}=e;return t}},ua={showSelectAll:!0,allSelected:e=>{let{currentPage:t}=e;return t},select:e=>{let{items:t,value:a,selected:n}=e;for(const r of t)a?n.add(r.value):n.delete(r.value);return n},selectAll:e=>{let{value:t,currentPage:a,selected:n}=e;return ua.select({items:a,value:t,selected:n})}},da={showSelectAll:!0,allSelected:e=>{let{allItems:t}=e;return t},select:e=>{let{items:t,value:a,selected:n}=e;for(const r of t)a?n.add(r.value):n.delete(r.value);return n},selectAll:e=>{let{value:t,allItems:a,selected:n}=e;return da.select({items:a,value:t,selected:n})}},ki=U({showSelect:Boolean,selectStrategy:{type:[String,Object],default:"page"},modelValue:{type:Array,default:()=>[]},valueComparator:{type:Function,default:$t}},"DataTable-select"),ca=Symbol.for("vuetify:data-table-selection");function Di(e,t){let{allItems:a,currentPage:n}=t;const r=be(e,"modelValue",e.modelValue,g=>new Set(ut(g).map(P=>{var _;return((_=a.value.find(k=>e.valueComparator(P,k.value)))==null?void 0:_.value)??P})),g=>[...g.values()]),i=O(()=>a.value.filter(g=>g.selectable)),o=O(()=>n.value.filter(g=>g.selectable)),s=O(()=>{if(typeof e.selectStrategy=="object")return e.selectStrategy;switch(e.selectStrategy){case"single":return Pi;case"all":return da;case"page":default:return ua}}),u=Wa(null);function d(g){return ut(g).every(P=>r.value.has(P.value))}function f(g){return ut(g).some(P=>r.value.has(P.value))}function m(g,P){const _=s.value.select({items:g,value:P,selected:new Set(r.value)});r.value=_}function h(g,P,_){const k=[];if(P=P??n.value.findIndex(I=>I.value===g.value),e.selectStrategy!=="single"&&(_!=null&&_.shiftKey)&&u.value!==null){const[I,B]=[u.value,P].sort((x,p)=>x-p);k.push(...n.value.slice(I,B+1))}else k.push(g),u.value=P;m(k,!d([g]))}function w(g){const P=s.value.selectAll({value:g,allItems:i.value,currentPage:o.value,selected:new Set(r.value)});r.value=P}const c=O(()=>r.value.size>0),y=O(()=>{const g=s.value.allSelected({allItems:i.value,currentPage:o.value});return!!g.length&&d(g)}),v=H(()=>s.value.showSelectAll),S={toggleSelect:h,select:m,selectAll:w,isSelected:d,isSomeSelected:f,someSelected:c,allSelected:y,showSelectAll:v,lastSelectedIndex:u,selectStrategy:s};return xe(ca,S),S}function tt(){const e=pe(ca);if(!e)throw new Error("Missing selection!");return e}const Si=U({sortBy:{type:Array,default:()=>[]},customKeySort:Object,multiSort:Boolean,mustSort:Boolean},"DataTable-sort"),fa=Symbol.for("vuetify:data-table-sort");function _i(e){const t=be(e,"sortBy"),a=H(()=>e.mustSort),n=H(()=>e.multiSort);return{sortBy:t,mustSort:a,multiSort:n}}function Ti(e){const{sortBy:t,mustSort:a,multiSort:n,page:r}=e,i=u=>{if(u.key==null)return;let d=t.value.map(m=>({...m}))??[];const f=d.find(m=>m.key===u.key);f?f.order==="desc"?a.value&&d.length===1?f.order="asc":d=d.filter(m=>m.key!==u.key):f.order="desc":n.value?d.push({key:u.key,order:"asc"}):d=[{key:u.key,order:"asc"}],t.value=d,r&&(r.value=1)};function o(u){return!!t.value.find(d=>d.key===u.key)}const s={sortBy:t,toggleSort:i,isSorted:o};return xe(fa,s),s}function ma(){const e=pe(fa);if(!e)throw new Error("Missing sort!");return e}function Oi(e,t,a,n){const r=Je();return{sortedItems:O(()=>{var o,s;return a.value.length?Mi(t.value,a.value,r.current.value,{transform:n==null?void 0:n.transform,sortFunctions:{...e.customKeySort,...(o=n==null?void 0:n.sortFunctions)==null?void 0:o.value},sortRawFunctions:(s=n==null?void 0:n.sortRawFunctions)==null?void 0:s.value}):t.value})}}function Mi(e,t,a,n){const r=new Intl.Collator(a,{sensitivity:"accent",usage:"sort"});return e.map(o=>[o,n!=null&&n.transform?n.transform(o):o]).sort((o,s)=>{var u,d;for(let f=0;f<t.length;f++){let m=!1;const h=t[f].key,w=t[f].order??"asc";if(w===!1)continue;let c=qe(o[1],h),y=qe(s[1],h),v=o[0].raw,S=s[0].raw;if(w==="desc"&&([c,y]=[y,c],[v,S]=[S,v]),(u=n==null?void 0:n.sortRawFunctions)!=null&&u[h]){const g=n.sortRawFunctions[h](v,S);if(g==null)continue;if(m=!0,g)return g}if((d=n==null?void 0:n.sortFunctions)!=null&&d[h]){const g=n.sortFunctions[h](c,y);if(g==null)continue;if(m=!0,g)return g}if(!m){if(c instanceof Date&&y instanceof Date)return c.getTime()-y.getTime();if([c,y]=[c,y].map(g=>g!=null?g.toString().toLocaleLowerCase():g),c!==y)return Le(c)&&Le(y)?0:Le(c)?-1:Le(y)?1:!isNaN(c)&&!isNaN(y)?Number(c)-Number(y):r.compare(c,y)}}return 0}).map(o=>{let[s]=o;return s})}const ha=U({color:String,disableSort:Boolean,fixedHeader:Boolean,multiSort:Boolean,sortAscIcon:{type:ge,default:"$sortAsc"},sortDescIcon:{type:ge,default:"$sortDesc"},headerProps:{type:Object},sticky:Boolean,...vt(),...La()},"VDataTableHeaders"),Wt=Pe()({name:"VDataTableHeaders",props:ha(),setup(e,t){let{slots:a}=t;const{t:n}=Je(),{toggleSort:r,sortBy:i,isSorted:o}=ma(),{someSelected:s,allSelected:u,selectAll:d,showSelectAll:f}=tt(),{columns:m,headers:h}=et(),{loaderClasses:w}=Aa(e);function c(x,p){if(!(!(e.sticky||e.fixedHeader)&&!x.fixed))return{position:"sticky",left:x.fixed?ae(x.fixedOffset):void 0,top:e.sticky||e.fixedHeader?`calc(var(--v-table-header-height) * ${p})`:void 0}}function y(x){const p=i.value.find(F=>F.key===x.key);return p?p.order==="asc"?e.sortAscIcon:e.sortDescIcon:e.sortAscIcon}const{backgroundColorClasses:v,backgroundColorStyles:S}=Ua(()=>e.color),{displayClasses:g,mobile:P}=gt(e),_=O(()=>({headers:h.value,columns:m.value,toggleSort:r,isSorted:o,sortBy:i.value,someSelected:s.value,allSelected:u.value,selectAll:d,getSortIcon:y})),k=O(()=>["v-data-table__th",{"v-data-table__th--sticky":e.sticky||e.fixedHeader},g.value,w.value]),I=x=>{let{column:p,x:F,y:T}=x;const W=p.key==="data-table-select"||p.key==="data-table-expand",L=z(e.headerProps??{},p.headerProps??{});return l(Xe,z({tag:"th",align:p.align,class:[{"v-data-table__th--sortable":p.sortable&&!e.disableSort,"v-data-table__th--sorted":o(p),"v-data-table__th--fixed":p.fixed},...k.value],style:{width:ae(p.width),minWidth:ae(p.minWidth),maxWidth:ae(p.maxWidth),...c(p,T)},colspan:p.colspan,rowspan:p.rowspan,onClick:p.sortable?()=>r(p):void 0,fixed:p.fixed,nowrap:p.nowrap,lastFixed:p.lastFixed,noPadding:W},L),{default:()=>{var Q;const X=`header.${p.key}`,ie={column:p,selectAll:d,isSorted:o,toggleSort:r,sortBy:i.value,someSelected:s.value,allSelected:u.value,getSortIcon:y};return a[X]?a[X](ie):p.key==="data-table-select"?((Q=a["header.data-table-select"])==null?void 0:Q.call(a,ie))??(f.value&&l(pt,{modelValue:u.value,indeterminate:s.value&&!u.value,"onUpdate:modelValue":d},null)):l("div",{class:"v-data-table-header__content"},[l("span",null,[p.title]),p.sortable&&!e.disableSort&&l(we,{key:"icon",class:"v-data-table-header__sort-icon",icon:y(p)},null),e.multiSort&&o(p)&&l("div",{key:"badge",class:["v-data-table-header__sort-badge",...v.value],style:S.value},[i.value.findIndex(K=>K.key===p.key)+1])])}})},B=()=>{const x=z(e.headerProps??{}??{}),p=O(()=>m.value.filter(T=>(T==null?void 0:T.sortable)&&!e.disableSort)),F=O(()=>{if(m.value.find(W=>W.key==="data-table-select")!=null)return u.value?"$checkboxOn":s.value?"$checkboxIndeterminate":"$checkboxOff"});return l(Xe,z({tag:"th",class:[...k.value],colspan:h.value.length+1},x),{default:()=>[l("div",{class:"v-data-table-header__content"},[l(wt,{chips:!0,class:"v-data-table__td-sort-select",clearable:!0,density:"default",items:p.value,label:n("$vuetify.dataTable.sortBy"),multiple:e.multiSort,variant:"underlined","onClick:clear":()=>i.value=[],appendIcon:F.value,"onClick:append":()=>d(!u.value)},{...a,chip:T=>{var W;return l(Ve,{onClick:(W=T.item.raw)!=null&&W.sortable?()=>r(T.item.raw):void 0,onMousedown:L=>{L.preventDefault(),L.stopPropagation()}},{default:()=>[T.item.title,l(we,{class:["v-data-table__td-sort-icon",o(T.item.raw)&&"v-data-table__td-sort-icon-active"],icon:y(T.item.raw),size:"small"},null)]})}})])]})};Ce(()=>P.value?l("tr",null,[l(B,null,null)]):l(ue,null,[a.headers?a.headers(_.value):h.value.map((x,p)=>l("tr",null,[x.map((F,T)=>l(I,{column:F,x:T,y:p},null))])),e.loading&&l("tr",{class:"v-data-table-progress"},[l("th",{colspan:m.value.length},[l(Ra,{name:"v-data-table-progress",absolute:!0,active:!0,color:typeof e.loading=="boolean"?void 0:e.loading,indeterminate:!0},{default:a.loader})])])]))}}),Vi=U({groupBy:{type:Array,default:()=>[]}},"DataTable-group"),ga=Symbol.for("vuetify:data-table-group");function Ci(e){return{groupBy:be(e,"groupBy")}}function Ii(e){const{disableSort:t,groupBy:a,sortBy:n}=e,r=he(new Set),i=O(()=>a.value.map(f=>({...f,order:f.order??!1})).concat(t!=null&&t.value?[]:n.value));function o(f){return r.value.has(f.id)}function s(f){const m=new Set(r.value);o(f)?m.delete(f.id):m.add(f.id),r.value=m}function u(f){function m(h){const w=[];for(const c of h.items)"type"in c&&c.type==="group"?w.push(...m(c)):w.push(c);return[...new Set(w)]}return m({items:f})}const d={sortByWithGroups:i,toggleGroup:s,opened:r,groupBy:a,extractRows:u,isGroupOpen:o};return xe(ga,d),d}function va(){const e=pe(ga);if(!e)throw new Error("Missing group!");return e}function Fi(e,t){if(!e.length)return[];const a=new Map;for(const n of e){const r=qe(n.raw,t);a.has(r)||a.set(r,[]),a.get(r).push(n)}return a}function ya(e,t){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"root";if(!t.length)return[];const r=Fi(e,t[0]),i=[],o=t.slice(1);return r.forEach((s,u)=>{const d=t[0],f=`${n}_${d}_${u}`;i.push({depth:a,id:f,key:d,value:u,items:o.length?ya(s,o,a+1,f):s,type:"group"})}),i}function ba(e,t){const a=[];for(const n of e)"type"in n&&n.type==="group"?(n.value!=null&&a.push(n),(t.has(n.id)||n.value==null)&&a.push(...ba(n.items,t))):a.push(n);return a}function Ei(e,t,a){return{flatItems:O(()=>{if(!t.value.length)return e.value;const r=ya(e.value,t.value.map(i=>i.key));return ba(r,a.value)})}}const Bi=U({item:{type:Object,required:!0}},"VDataTableGroupHeaderRow"),Wi=Pe()({name:"VDataTableGroupHeaderRow",props:Bi(),setup(e,t){let{slots:a}=t;const{isGroupOpen:n,toggleGroup:r,extractRows:i}=va(),{isSelected:o,isSomeSelected:s,select:u}=tt(),{columns:d}=et(),f=O(()=>i([e.item]));return()=>l("tr",{class:"v-data-table-group-header-row",style:{"--v-data-table-group-header-row-depth":e.item.depth}},[d.value.map(m=>{var h,w;if(m.key==="data-table-group"){const c=n(e.item)?"$expand":"$next",y=()=>r(e.item);return((h=a["data-table-group"])==null?void 0:h.call(a,{item:e.item,count:f.value.length,props:{icon:c,onClick:y}}))??l(Xe,{class:"v-data-table-group-header-row__column"},{default:()=>[l(G,{size:"small",variant:"text",icon:c,onClick:y},null),l("span",null,[e.item.value]),l("span",null,[M("("),f.value.length,M(")")])]})}if(m.key==="data-table-select"){const c=o(f.value),y=s(f.value)&&!c,v=S=>u(f.value,S);return((w=a["data-table-select"])==null?void 0:w.call(a,{props:{modelValue:c,indeterminate:y,"onUpdate:modelValue":v}}))??l("td",null,[l(pt,{modelValue:c,indeterminate:y,"onUpdate:modelValue":v},null)])}return l("td",null,null)})])}}),Ai=U({expandOnClick:Boolean,showExpand:Boolean,expanded:{type:Array,default:()=>[]}},"DataTable-expand"),wa=Symbol.for("vuetify:datatable:expanded");function Ui(e){const t=H(()=>e.expandOnClick),a=be(e,"expanded",e.expanded,s=>new Set(s),s=>[...s.values()]);function n(s,u){const d=new Set(a.value);u?d.add(s.value):d.delete(s.value),a.value=d}function r(s){return a.value.has(s.value)}function i(s){n(s,!r(s))}const o={expand:n,expanded:a,expandOnClick:t,isExpanded:r,toggleExpand:i};return xe(wa,o),o}function pa(){const e=pe(wa);if(!e)throw new Error("foo");return e}const Ri=U({index:Number,item:Object,cellProps:[Object,Function],onClick:dt(),onContextmenu:dt(),onDblclick:dt(),...vt()},"VDataTableRow"),Li=Pe()({name:"VDataTableRow",props:Ri(),setup(e,t){let{slots:a}=t;const{displayClasses:n,mobile:r}=gt(e,"v-data-table__tr"),{isSelected:i,toggleSelect:o,someSelected:s,allSelected:u,selectAll:d}=tt(),{isExpanded:f,toggleExpand:m}=pa(),{toggleSort:h,sortBy:w,isSorted:c}=ma(),{columns:y}=et();Ce(()=>l("tr",{class:["v-data-table__tr",{"v-data-table__tr--clickable":!!(e.onClick||e.onContextmenu||e.onDblclick)},n.value],onClick:e.onClick,onContextmenu:e.onContextmenu,onDblclick:e.onDblclick},[e.item&&y.value.map((v,S)=>{const g=e.item,P=`item.${v.key}`,_=`header.${v.key}`,k={index:e.index,item:g.raw,internalItem:g,value:qe(g.columns,v.key),column:v,isSelected:i,toggleSelect:o,isExpanded:f,toggleExpand:m},I={column:v,selectAll:d,isSorted:c,toggleSort:h,sortBy:w.value,someSelected:s.value,allSelected:u.value,getSortIcon:()=>""},B=typeof e.cellProps=="function"?e.cellProps({index:k.index,item:k.item,internalItem:k.internalItem,value:k.value,column:v}):e.cellProps,x=typeof v.cellProps=="function"?v.cellProps({index:k.index,item:k.item,internalItem:k.internalItem,value:k.value}):v.cellProps;return l(Xe,z({align:v.align,class:{"v-data-table__td--expanded-row":v.key==="data-table-expand","v-data-table__td--select-row":v.key==="data-table-select"},fixed:v.fixed,fixedOffset:v.fixedOffset,lastFixed:v.lastFixed,maxWidth:r.value?void 0:v.maxWidth,noPadding:v.key==="data-table-select"||v.key==="data-table-expand",nowrap:v.nowrap,width:r.value?void 0:v.width},B,x),{default:()=>{var F,T,W,L;if(v.key==="data-table-select")return((F=a["item.data-table-select"])==null?void 0:F.call(a,{...k,props:{disabled:!g.selectable,modelValue:i([g]),onClick:le(()=>o(g),["stop"])}}))??l(pt,{disabled:!g.selectable,modelValue:i([g]),onClick:le(X=>o(g,e.index,X),["stop"])},null);if(v.key==="data-table-expand")return((T=a["item.data-table-expand"])==null?void 0:T.call(a,{...k,props:{icon:f(g)?"$collapse":"$expand",size:"small",variant:"text",onClick:le(()=>m(g),["stop"])}}))??l(G,{icon:f(g)?"$collapse":"$expand",size:"small",variant:"text",onClick:le(()=>m(g),["stop"])},null);if(a[P]&&!r.value)return a[P](k);const p=Y(k.value);return r.value?l(ue,null,[l("div",{class:"v-data-table__td-title"},[((W=a[_])==null?void 0:W.call(a,I))??v.title]),l("div",{class:"v-data-table__td-value"},[((L=a[P])==null?void 0:L.call(a,k))??p])]):p}})})]))}}),xa=U({loading:[Boolean,String],loadingText:{type:String,default:"$vuetify.dataIterator.loadingText"},hideNoData:Boolean,items:{type:Array,default:()=>[]},noDataText:{type:String,default:"$vuetify.noDataText"},rowProps:[Object,Function],cellProps:[Object,Function],...vt()},"VDataTableRows"),At=Pe()({name:"VDataTableRows",inheritAttrs:!1,props:xa(),setup(e,t){let{attrs:a,slots:n}=t;const{columns:r}=et(),{expandOnClick:i,toggleExpand:o,isExpanded:s}=pa(),{isSelected:u,toggleSelect:d}=tt(),{toggleGroup:f,isGroupOpen:m}=va(),{t:h}=Je(),{mobile:w}=gt(e);return Ce(()=>{var c,y;return e.loading&&(!e.items.length||n.loading)?l("tr",{class:"v-data-table-rows-loading",key:"loading"},[l("td",{colspan:r.value.length},[((c=n.loading)==null?void 0:c.call(n))??h(e.loadingText)])]):!e.loading&&!e.items.length&&!e.hideNoData?l("tr",{class:"v-data-table-rows-no-data",key:"no-data"},[l("td",{colspan:r.value.length},[((y=n["no-data"])==null?void 0:y.call(n))??h(e.noDataText)])]):l(ue,null,[e.items.map((v,S)=>{var _;if(v.type==="group"){const k={index:S,item:v,columns:r.value,isExpanded:s,toggleExpand:o,isSelected:u,toggleSelect:d,toggleGroup:f,isGroupOpen:m};return n["group-header"]?n["group-header"](k):l(Wi,z({key:`group-header_${v.id}`,item:v},_t(a,":group-header",()=>k)),n)}const g={index:S,item:v.raw,internalItem:v,columns:r.value,isExpanded:s,toggleExpand:o,isSelected:u,toggleSelect:d},P={...g,props:z({key:`item_${v.key??v.index}`,onClick:i.value?()=>{o(v)}:void 0,index:S,item:v,cellProps:e.cellProps,mobile:w.value},_t(a,":row",()=>g),typeof e.rowProps=="function"?e.rowProps({item:g.item,index:g.index,internalItem:g.internalItem}):e.rowProps)};return l(ue,{key:P.props.key},[n.item?n.item(P):l(Li,P.props,n),s(v)&&((_=n["expanded-row"])==null?void 0:_.call(n,g))])})])}),{}}}),Ni=U({items:{type:Array,default:()=>[]},itemValue:{type:[String,Array,Function],default:"id"},itemSelectable:{type:[String,Array,Function],default:null},rowProps:[Object,Function],cellProps:[Object,Function],returnObject:Boolean},"DataTable-items");function Hi(e,t,a,n){const r=e.returnObject?t:Ne(t,e.itemValue),i=Ne(t,e.itemSelectable,!0),o=n.reduce((s,u)=>(u.key!=null&&(s[u.key]=Ne(t,u.value)),s),{});return{type:"item",key:e.returnObject?Ne(t,e.itemValue):r,index:a,value:r,selectable:i,columns:o,raw:t}}function Yi(e,t,a){return t.map((n,r)=>Hi(e,n,r,a))}function ji(e,t){return{items:O(()=>Yi(e,e.items,t.value))}}function $i(e){let{page:t,itemsPerPage:a,sortBy:n,groupBy:r,search:i}=e;const o=jt("VDataTable"),s=()=>({page:t.value,itemsPerPage:a.value,sortBy:n.value,groupBy:r.value,search:i.value});let u=null;ht(s,d=>{$t(u,d)||(u&&u.search!==d.search&&(t.value=1),o.emit("update:options",d),u=d)},{deep:!0,immediate:!0})}const qi=U({...xa(),hideDefaultBody:Boolean,hideDefaultFooter:Boolean,hideDefaultHeader:Boolean,width:[String,Number],search:String,...Ai(),...Vi(),...gi(),...Ni(),...ki(),...Si(),...ha(),...an()},"DataTable"),zi=U({...di(),...qi(),...rn(),...ra()},"VDataTable"),Gi=Pe()({name:"VDataTable",props:zi(),emits:{"update:modelValue":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:groupBy":e=>!0,"update:expanded":e=>!0,"update:currentItems":e=>!0},setup(e,t){let{attrs:a,slots:n}=t;const{groupBy:r}=Ci(e),{sortBy:i,multiSort:o,mustSort:s}=_i(e),{page:u,itemsPerPage:d}=ci(e),{disableSort:f}=Na(e),{columns:m,headers:h,sortFunctions:w,sortRawFunctions:c,filterFunctions:y}=xi(e,{groupBy:r,showSelect:H(()=>e.showSelect),showExpand:H(()=>e.showExpand)}),{items:v}=ji(e,m),S=H(()=>e.search),{filteredItems:g}=nn(e,v,S,{transform:N=>N.columns,customKeyFilter:y}),{toggleSort:P}=Ti({sortBy:i,multiSort:o,mustSort:s,page:u}),{sortByWithGroups:_,opened:k,extractRows:I,isGroupOpen:B,toggleGroup:x}=Ii({groupBy:r,sortBy:i,disableSort:f}),{sortedItems:p}=Oi(e,g,_,{transform:N=>({...N.raw,...N.columns}),sortFunctions:w,sortRawFunctions:c}),{flatItems:F}=Ei(p,r,k),T=O(()=>F.value.length),{startIndex:W,stopIndex:L,pageCount:X,setItemsPerPage:ie}=fi({page:u,itemsPerPage:d,itemsLength:T}),{paginatedItems:Q}=hi({items:F,startIndex:W,stopIndex:L,itemsPerPage:d}),K=O(()=>I(Q.value)),{isSelected:Ee,select:at,selectAll:nt,toggleSelect:rt,someSelected:it,allSelected:ke}=Di(e,{allItems:v,currentPage:K}),{isExpanded:Be,toggleExpand:We}=Ui(e);$i({page:u,itemsPerPage:d,sortBy:i,groupBy:r,search:S}),Ha({VDataTableRows:{hideNoData:H(()=>e.hideNoData),noDataText:H(()=>e.noDataText),loading:H(()=>e.loading),loadingText:H(()=>e.loadingText)}});const A=O(()=>({page:u.value,itemsPerPage:d.value,sortBy:i.value,pageCount:X.value,toggleSort:P,setItemsPerPage:ie,someSelected:it.value,allSelected:ke.value,isSelected:Ee,select:at,selectAll:nt,toggleSelect:rt,isExpanded:Be,toggleExpand:We,isGroupOpen:B,toggleGroup:x,items:K.value.map(N=>N.raw),internalItems:K.value,groupedItems:Q.value,columns:m.value,headers:h.value}));return Ce(()=>{const N=Bt.filterProps(e),Ae=Wt.filterProps(e),Ue=At.filterProps(e),Re=St.filterProps(e);return l(St,z({class:["v-data-table",{"v-data-table--show-select":e.showSelect,"v-data-table--loading":e.loading},e.class],style:e.style},Re,{fixedHeader:e.fixedHeader||e.sticky}),{top:()=>{var J;return(J=n.top)==null?void 0:J.call(n,A.value)},default:()=>{var J,De,ot,Z,Se,_e;return n.default?n.default(A.value):l(ue,null,[(J=n.colgroup)==null?void 0:J.call(n,A.value),!e.hideDefaultHeader&&l("thead",{key:"thead"},[l(Wt,Ae,n)]),(De=n.thead)==null?void 0:De.call(n,A.value),!e.hideDefaultBody&&l("tbody",null,[(ot=n["body.prepend"])==null?void 0:ot.call(n,A.value),n.body?n.body(A.value):l(At,z(a,Ue,{items:Q.value}),n),(Z=n["body.append"])==null?void 0:Z.call(n,A.value)]),(Se=n.tbody)==null?void 0:Se.call(n,A.value),(_e=n.tfoot)==null?void 0:_e.call(n,A.value)])},bottom:()=>n.bottom?n.bottom(A.value):!e.hideDefaultFooter&&l(ue,null,[l(Ya,null,null),l(Bt,N,{prepend:n["footer.prepend"]})])})}),{}}}),Xi={name:"SecurityManager",data(){return{activeTokens:[],isLoadingTokens:!1,isLoggingOutAll:!1,loadingTokenId:null,isPerformingAction:!1,showConfirmDialog:!1,confirmDialogTitle:"",confirmDialogText:"",confirmedAction:null,tokenHeaders:[{title:"创建时间",key:"created_at",sortable:!0},{title:"设备信息",key:"device_info",sortable:!1},{title:"IP地址",key:"ip_address",sortable:!0},{title:"IP属地",key:"ip_location",sortable:!0},{title:"操作",key:"actions",sortable:!1}]}},mounted(){this.loadData()},methods:{async loadData(){await this.loadActiveTokens()},async loadActiveTokens(){this.isLoadingTokens=!0;try{this.activeTokens=await ve.getActiveTokens()}catch(e){console.error("获取会话列表失败:",e),this.$toast.add({severity:"error",summary:"错误",detail:"获取会话列表失败",life:3e3})}finally{this.isLoadingTokens=!1}},getActivityColor(e){return e?e<5?"info":e<20?"primary":e<50?"success":"purple":"grey"},formatIpLocation(e){if(!e)return"-";let t=e;if(typeof e=="string")try{t=JSON.parse(e)}catch{return e}let a="";return t.country&&(a+=t.country),t.region&&(a+=" "+t.region),t.city&&t.city!==t.region&&(a+=" "+t.city),t.isp&&(a+=` (${t.isp})`),a||"-"},formatDate(e){if(!e)return"-";const t=new Date(e),n=Ir(t,new Date,{addSuffix:!0,locale:ui}),r=Vr(t,"yyyy-MM-dd HH:mm:ss");return`${n} (${r})`},async handleRevokeToken(e){this.loadingTokenId=e,this.isPerformingAction=!0;try{await ve.revokeToken(e)?(this.$toast.add({severity:"success",summary:"成功",detail:"会话已成功结束",life:3e3}),await this.loadActiveTokens()):this.$toast.add({severity:"error",summary:"错误",detail:"会话结束失败",life:3e3})}catch(t){console.error("会话结束失败:",t),this.$toast.add({severity:"error",summary:"错误",detail:"会话结束失败",life:3e3})}finally{this.loadingTokenId=null,this.isPerformingAction=!1}},confirmLogoutAll(){this.confirmDialogTitle="确认退出所有会话",this.confirmDialogText="这将使所有会话立即失效，包括当前会话。您需要重新登录才能继续使用。确定要执行此操作吗？",this.confirmedAction=this.logoutAllSessions,this.showConfirmDialog=!0},async logoutAllSessions(){this.isLoggingOutAll=!0;try{await ve.logoutAllDevices()?(this.$toast.add({severity:"success",summary:"成功",detail:"已成功退出所有会话",life:3e3}),this.$router.push("/app/account/login")):this.$toast.add({severity:"error",summary:"错误",detail:"退出所有会话失败",life:3e3})}catch(e){console.error("退出所有会话失败:",e),this.$toast.add({severity:"error",summary:"错误",detail:"退出所有会话失败",life:3e3})}finally{this.isLoggingOutAll=!1}},executeConfirmedAction(){typeof this.confirmedAction=="function"&&this.confirmedAction(),this.showConfirmDialog=!1}}},Qi={class:"mb-6"},Ki={class:"d-flex align-center"},Ji={key:0},Zi={key:1},eo={class:"d-flex gap-4 mt-6"};function to(e,t,a,n,r,i){return E(),je("div",null,[C("div",Qi,[t[4]||(t[4]=C("h4",{class:"text-h6 mb-3"},"登录设备",-1)),r.activeTokens.length===0&&!r.isLoadingTokens?(E(),j(tn,{key:0,type:"info",text:"没有活跃的会话",class:"mb-3"})):(E(),j(Gi,{key:1,headers:r.tokenHeaders,items:r.activeTokens,loading:r.isLoadingTokens,"loading-text":"加载会话列表...","no-data-text":"没有找到活跃会话",class:"elevation-1 rounded-lg"},{"item.created_at":b(({item:o})=>[M(Y(i.formatDate(o.created_at)),1)]),"item.device_info":b(({item:o})=>{var s,u;return[C("div",Ki,[M(Y(((s=o.device_info)==null?void 0:s.os)||"未知")+" ("+Y(((u=o.device_info)==null?void 0:u.browser)||"未知")+") ",1),o.is_current?(E(),j(Ve,{key:0,color:"success",size:"small",text:"当前"})):qt("",!0)])]}),"item.ip_address":b(({item:o})=>[M(Y(o.ip_address),1)]),"item.ip_location":b(({item:o})=>[o.ip_location?(E(),je("span",Ji,Y(i.formatIpLocation(o.ip_location)),1)):(E(),je("span",Zi,"-"))]),"item.activity_count":b(({item:o})=>[l(Ve,{color:i.getActivityColor(o.activity_count),size:"small",text:e.getActivityText(o.activity_count)},null,8,["color","text"])]),"item.actions":b(({item:o})=>[l(G,{onClick:s=>i.handleRevokeToken(o.id),size:"small",color:"error",variant:"text",loading:r.loadingTokenId===o.id,disabled:r.isLoadingTokens||r.isPerformingAction},{default:b(()=>[l(we,null,{default:b(()=>t[2]||(t[2]=[M("mdi-logout")])),_:1}),t[3]||(t[3]=M(" 结束会话 "))]),_:2},1032,["onClick","loading","disabled"])]),_:1},8,["headers","items","loading"]))]),C("div",eo,[l(G,{color:"error","prepend-icon":"mdi-logout-variant",onClick:i.confirmLogoutAll,loading:r.isLoggingOutAll,disabled:r.isPerformingAction||r.isLoadingTokens},{default:b(()=>t[5]||(t[5]=[M(" 退出所有会话 ")])),_:1},8,["onClick","loading","disabled"])]),l(sn,{modelValue:r.showConfirmDialog,"onUpdate:modelValue":t[1]||(t[1]=o=>r.showConfirmDialog=o),"max-width":"500"},{default:b(()=>[l(yt,null,{default:b(()=>[l(zt,{class:"text-h5"},{default:b(()=>[M(Y(r.confirmDialogTitle),1)]),_:1}),l(bt,null,{default:b(()=>[M(Y(r.confirmDialogText),1)]),_:1}),l(ja,null,{default:b(()=>[l(on),l(G,{color:"primary",variant:"text",onClick:t[0]||(t[0]=o=>r.showConfirmDialog=!1)},{default:b(()=>t[6]||(t[6]=[M("取消")])),_:1}),l(G,{color:"error",variant:"flat",onClick:i.executeConfirmedAction},{default:b(()=>t[7]||(t[7]=[M("确认")])),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}const Pa=ce(Xi,[["render",to]]);/*!
 * Compressor.js v1.2.1
 * https://fengyuanchen.github.io/compressorjs
 *
 * Copyright 2018-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2023-02-28T14:09:41.732Z
 */function Ut(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,n)}return a}function Ye(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Ut(Object(a),!0).forEach(function(n){ro(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ut(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function ao(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Rt(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ka(n.key),n)}}function no(e,t,a){return t&&Rt(e.prototype,t),a&&Rt(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function ro(e,t,a){return t=ka(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Qe(){return Qe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Qe.apply(this,arguments)}function io(e,t){if(typeof e!="object"||e===null)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function ka(e){var t=io(e,"string");return typeof t=="symbol"?t:String(t)}var Da={exports:{}};(function(e){typeof window>"u"||function(t){var a=t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype,n=t.Blob&&function(){try{return!!new Blob}catch{return!1}}(),r=n&&t.Uint8Array&&function(){try{return new Blob([new Uint8Array(100)]).size===100}catch{return!1}}(),i=t.BlobBuilder||t.WebKitBlobBuilder||t.MozBlobBuilder||t.MSBlobBuilder,o=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,s=(n||i)&&t.atob&&t.ArrayBuffer&&t.Uint8Array&&function(u){var d,f,m,h,w,c,y,v,S;if(d=u.match(o),!d)throw new Error("invalid data URI");for(f=d[2]?d[1]:"text/plain"+(d[3]||";charset=US-ASCII"),m=!!d[4],h=u.slice(d[0].length),m?w=atob(h):w=decodeURIComponent(h),c=new ArrayBuffer(w.length),y=new Uint8Array(c),v=0;v<w.length;v+=1)y[v]=w.charCodeAt(v);return n?new Blob([r?y:c],{type:f}):(S=new i,S.append(c),S.getBlob(f))};t.HTMLCanvasElement&&!a.toBlob&&(a.mozGetAsFile?a.toBlob=function(u,d,f){var m=this;setTimeout(function(){f&&a.toDataURL&&s?u(s(m.toDataURL(d,f))):u(m.mozGetAsFile("blob",d))})}:a.toDataURL&&s&&(a.msToBlob?a.toBlob=function(u,d,f){var m=this;setTimeout(function(){(d&&d!=="image/png"||f)&&a.toDataURL&&s?u(s(m.toDataURL(d,f))):u(m.msToBlob(d))})}:a.toBlob=function(u,d,f){var m=this;setTimeout(function(){u(s(m.toDataURL(d,f)))})})),e.exports?e.exports=s:t.dataURLtoBlob=s}(window)})(Da);var Lt=Da.exports,oo=function(t){return typeof Blob>"u"?!1:t instanceof Blob||Object.prototype.toString.call(t)==="[object Blob]"},Nt={strict:!0,checkOrientation:!0,retainExif:!1,maxWidth:1/0,maxHeight:1/0,minWidth:0,minHeight:0,width:void 0,height:void 0,resize:"none",quality:.8,mimeType:"auto",convertTypes:["image/png"],convertSize:5e6,beforeDraw:null,drew:null,success:null,error:null},so=typeof window<"u"&&typeof window.document<"u",re=so?window:{},Ke=function(t){return t>0&&t<1/0},lo=Array.prototype.slice;function kt(e){return Array.from?Array.from(e):lo.call(e)}var uo=/^image\/.+$/;function mt(e){return uo.test(e)}function co(e){var t=mt(e)?e.substr(6):"";return t==="jpeg"&&(t="jpg"),".".concat(t)}var Sa=String.fromCharCode;function fo(e,t,a){var n="",r;for(a+=t,r=t;r<a;r+=1)n+=Sa(e.getUint8(r));return n}var mo=re.btoa;function Ht(e,t){for(var a=[],n=8192,r=new Uint8Array(e);r.length>0;)a.push(Sa.apply(null,kt(r.subarray(0,n)))),r=r.subarray(n);return"data:".concat(t,";base64,").concat(mo(a.join("")))}function ho(e){var t=new DataView(e),a;try{var n,r,i;if(t.getUint8(0)===255&&t.getUint8(1)===216)for(var o=t.byteLength,s=2;s+1<o;){if(t.getUint8(s)===255&&t.getUint8(s+1)===225){r=s;break}s+=1}if(r){var u=r+4,d=r+10;if(fo(t,u,4)==="Exif"){var f=t.getUint16(d);if(n=f===18761,(n||f===19789)&&t.getUint16(d+2,n)===42){var m=t.getUint32(d+4,n);m>=8&&(i=d+m)}}}if(i){var h=t.getUint16(i,n),w,c;for(c=0;c<h;c+=1)if(w=i+c*12+2,t.getUint16(w,n)===274){w+=8,a=t.getUint16(w,n),t.setUint16(w,1,n);break}}}catch{a=1}return a}function go(e){var t=0,a=1,n=1;switch(e){case 2:a=-1;break;case 3:t=-180;break;case 4:n=-1;break;case 5:t=90,n=-1;break;case 6:t=90;break;case 7:t=90,a=-1;break;case 8:t=-90;break}return{rotate:t,scaleX:a,scaleY:n}}var vo=/\.\d*(?:0|9){12}\d*$/;function Yt(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return vo.test(e)?Math.round(e*t)/t:e}function Oe(e){var t=e.aspectRatio,a=e.height,n=e.width,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"none",i=Ke(n),o=Ke(a);if(i&&o){var s=a*t;(r==="contain"||r==="none")&&s>n||r==="cover"&&s<n?a=n/t:n=a*t}else i?a=n/t:o&&(n=a*t);return{width:n,height:a}}function yo(e){for(var t=kt(new Uint8Array(e)),a=t.length,n=[],r=0;r+3<a;){var i=t[r],o=t[r+1];if(i===255&&o===218)break;if(i===255&&o===216)r+=2;else{var s=t[r+2]*256+t[r+3],u=r+s+2,d=t.slice(r,u);n.push(d),r=u}}return n.reduce(function(f,m){return m[0]===255&&m[1]===225?f.concat(m):f},[])}function bo(e,t){var a=kt(new Uint8Array(e));if(a[2]!==255||a[3]!==224)return e;var n=a[4]*256+a[5],r=[255,216].concat(t,a.slice(4+n));return new Uint8Array(r)}var wo=re.ArrayBuffer,ct=re.FileReader,oe=re.URL||re.webkitURL,po=/\.\w+$/,xo=re.Compressor,Po=function(){function e(t,a){ao(this,e),this.file=t,this.exif=[],this.image=new Image,this.options=Ye(Ye({},Nt),a),this.aborted=!1,this.result=null,this.init()}return no(e,[{key:"init",value:function(){var a=this,n=this.file,r=this.options;if(!oo(n)){this.fail(new Error("The first argument must be a File or Blob object."));return}var i=n.type;if(!mt(i)){this.fail(new Error("The first argument must be an image File or Blob object."));return}if(!oe||!ct){this.fail(new Error("The current browser does not support image compression."));return}wo||(r.checkOrientation=!1,r.retainExif=!1);var o=i==="image/jpeg",s=o&&r.checkOrientation,u=o&&r.retainExif;if(oe&&!s&&!u)this.load({url:oe.createObjectURL(n)});else{var d=new ct;this.reader=d,d.onload=function(f){var m=f.target,h=m.result,w={},c=1;s&&(c=ho(h),c>1&&Qe(w,go(c))),u&&(a.exif=yo(h)),s||u?!oe||c>1?w.url=Ht(h,i):w.url=oe.createObjectURL(n):w.url=h,a.load(w)},d.onabort=function(){a.fail(new Error("Aborted to read the image with FileReader."))},d.onerror=function(){a.fail(new Error("Failed to read the image with FileReader."))},d.onloadend=function(){a.reader=null},s||u?d.readAsArrayBuffer(n):d.readAsDataURL(n)}}},{key:"load",value:function(a){var n=this,r=this.file,i=this.image;i.onload=function(){n.draw(Ye(Ye({},a),{},{naturalWidth:i.naturalWidth,naturalHeight:i.naturalHeight}))},i.onabort=function(){n.fail(new Error("Aborted to load the image."))},i.onerror=function(){n.fail(new Error("Failed to load the image."))},re.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(re.navigator.userAgent)&&(i.crossOrigin="anonymous"),i.alt=r.name,i.src=a.url}},{key:"draw",value:function(a){var n=this,r=a.naturalWidth,i=a.naturalHeight,o=a.rotate,s=o===void 0?0:o,u=a.scaleX,d=u===void 0?1:u,f=a.scaleY,m=f===void 0?1:f,h=this.file,w=this.image,c=this.options,y=document.createElement("canvas"),v=y.getContext("2d"),S=Math.abs(s)%180===90,g=(c.resize==="contain"||c.resize==="cover")&&Ke(c.width)&&Ke(c.height),P=Math.max(c.maxWidth,0)||1/0,_=Math.max(c.maxHeight,0)||1/0,k=Math.max(c.minWidth,0)||0,I=Math.max(c.minHeight,0)||0,B=r/i,x=c.width,p=c.height;if(S){var F=[_,P];P=F[0],_=F[1];var T=[I,k];k=T[0],I=T[1];var W=[p,x];x=W[0],p=W[1]}g&&(B=x/p);var L=Oe({aspectRatio:B,width:P,height:_},"contain");P=L.width,_=L.height;var X=Oe({aspectRatio:B,width:k,height:I},"cover");if(k=X.width,I=X.height,g){var ie=Oe({aspectRatio:B,width:x,height:p},c.resize);x=ie.width,p=ie.height}else{var Q=Oe({aspectRatio:B,width:x,height:p}),K=Q.width;x=K===void 0?r:K;var Ee=Q.height;p=Ee===void 0?i:Ee}x=Math.floor(Yt(Math.min(Math.max(x,k),P))),p=Math.floor(Yt(Math.min(Math.max(p,I),_)));var at=-x/2,nt=-p/2,rt=x,it=p,ke=[];if(g){var Be=0,We=0,A=r,N=i,Ae=Oe({aspectRatio:B,width:r,height:i},{contain:"cover",cover:"contain"}[c.resize]);A=Ae.width,N=Ae.height,Be=(r-A)/2,We=(i-N)/2,ke.push(Be,We,A,N)}if(ke.push(at,nt,rt,it),S){var Ue=[p,x];x=Ue[0],p=Ue[1]}y.width=x,y.height=p,mt(c.mimeType)||(c.mimeType=h.type);var Re="transparent";h.size>c.convertSize&&c.convertTypes.indexOf(c.mimeType)>=0&&(c.mimeType="image/jpeg");var J=c.mimeType==="image/jpeg";if(J&&(Re="#fff"),v.fillStyle=Re,v.fillRect(0,0,x,p),c.beforeDraw&&c.beforeDraw.call(this,v,y),!this.aborted&&(v.save(),v.translate(x/2,p/2),v.rotate(s*Math.PI/180),v.scale(d,m),v.drawImage.apply(v,[w].concat(ke)),v.restore(),c.drew&&c.drew.call(this,v,y),!this.aborted)){var De=function(Z){if(!n.aborted){var Se=function(Te){return n.done({naturalWidth:r,naturalHeight:i,result:Te})};if(Z&&J&&c.retainExif&&n.exif&&n.exif.length>0){var _e=function(Te){return Se(Lt(Ht(bo(Te,n.exif),c.mimeType)))};if(Z.arrayBuffer)Z.arrayBuffer().then(_e).catch(function(){n.fail(new Error("Failed to read the compressed image with Blob.arrayBuffer()."))});else{var fe=new ct;n.reader=fe,fe.onload=function(st){var Te=st.target;_e(Te.result)},fe.onabort=function(){n.fail(new Error("Aborted to read the compressed image with FileReader."))},fe.onerror=function(){n.fail(new Error("Failed to read the compressed image with FileReader."))},fe.onloadend=function(){n.reader=null},fe.readAsArrayBuffer(Z)}}else Se(Z)}};y.toBlob?y.toBlob(De,c.mimeType,c.quality):De(Lt(y.toDataURL(c.mimeType,c.quality)))}}},{key:"done",value:function(a){var n=a.naturalWidth,r=a.naturalHeight,i=a.result,o=this.file,s=this.image,u=this.options;if(oe&&s.src.indexOf("blob:")===0&&oe.revokeObjectURL(s.src),i)if(u.strict&&!u.retainExif&&i.size>o.size&&u.mimeType===o.type&&!(u.width>n||u.height>r||u.minWidth>n||u.minHeight>r||u.maxWidth<n||u.maxHeight<r))i=o;else{var d=new Date;i.lastModified=d.getTime(),i.lastModifiedDate=d,i.name=o.name,i.name&&i.type!==o.type&&(i.name=i.name.replace(po,co(i.type)))}else i=o;this.result=i,u.success&&u.success.call(this,i)}},{key:"fail",value:function(a){var n=this.options;if(n.error)n.error.call(this,a);else throw a}},{key:"abort",value:function(){this.aborted||(this.aborted=!0,this.reader?this.reader.abort():this.image.complete?this.fail(new Error("The compression process has been aborted.")):(this.image.onload=null,this.image.onabort()))}}],[{key:"noConflict",value:function(){return window.Compressor=xo,e}},{key:"setDefaults",value:function(a){Qe(Nt,a)}}]),e}();const ko={name:"AvatarEditor",props:{userData:{type:Object,required:!0},s3BucketUrl:{type:String,required:!0}},data(){return{loading:!1,avatarFile:null,previewImage:null}},methods:{onFileChange(e){const t=e.target.files?e.target.files[0]:null;t instanceof File&&t.type.startsWith("image/")?new Po(t,{quality:.8,maxWidth:500,maxHeight:500,success:a=>{this.previewImage=URL.createObjectURL(a),this.avatarFile=a},error:a=>{console.error("图片压缩出错：",a.message),this.$emit("error",{message:"图片压缩出错："+a.message})}}):t&&this.$emit("error",{message:"请选择有效的图片文件"})},async uploadAvatar(){if(this.avatarFile){this.loading=!0;try{const e=new FormData;e.append("zcfile",this.avatarFile);const t=await ln("",e);this.$emit("avatar-updated",t),this.avatarFile=null}catch(e){this.$emit("error",e)}finally{this.loading=!1}}}}},Do={class:"d-flex align-center justify-center fill-height"};function So(e,t,a,n,r,i){return E(),j(Ze,null,{default:b(()=>[l(R,{cols:"12",md:"6"},{default:b(()=>[l(mn,{label:"上传头像",accept:"image/*",onChange:i.onFileChange,placeholder:"选择图片上传","prepend-icon":"mdi-camera",variant:"outlined",density:"comfortable","show-size":"",rules:[o=>!o||!o.length||o[0].size<2e6||"头像大小不能超过2MB"]},null,8,["onChange","rules"]),t[0]||(t[0]=C("div",{class:"text-caption text-medium-emphasis"},"图片将被自动压缩",-1))]),_:1}),l(R,{cols:"12",md:"6",class:"d-flex align-center justify-center"},{default:b(()=>[l(hn,{class:$a(["rounded-lg overflow-hidden","elevation-2"]),width:"150",height:"150"},{default:b(()=>[l(Gt,{src:r.previewImage||a.s3BucketUrl+"/user/"+a.userData.images,height:"150",width:"150",cover:"",class:"bg-grey-lighten-3"},{placeholder:b(()=>[C("div",Do,[l(we,{icon:"mdi-image",size:"64",color:"grey-darken-1"})])]),_:1},8,["src"])]),_:1})]),_:1}),l(R,{cols:"12"},{default:b(()=>[l(G,{onClick:i.uploadAvatar,disabled:!r.avatarFile,color:"primary",size:"large","prepend-icon":"mdi-cloud-upload",class:"px-6",loading:r.loading},{default:b(()=>t[1]||(t[1]=[M(" 上传头像 ")])),_:1},8,["onClick","disabled","loading"])]),_:1})]),_:1})}const _a=ce(ko,[["render",So]]),_o={name:"PasswordEditor",data(){return{loading:!1,valid:!1,oldPassword:"",newPassword:"",confirmPassword:"",passwordRules:[e=>!!e||"请输入新密码",e=>/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[$@$!%*?&\.])[A-Za-z\d$@$!%*?&\.]{8,}/.test(e)||"密码必须由数字、大小写字母和特殊字符组成，且长度至少为8位"]}},methods:{async changePassword(){if(this.valid){this.loading=!0;try{const e=await un({oldpw:this.oldPassword,newpw:this.newPassword});this.$emit("password-updated",e),this.oldPassword="",this.newPassword="",this.confirmPassword=""}catch(e){this.$emit("error",e)}finally{this.loading=!1}}}}};function To(e,t,a,n,r,i){return E(),j(xt,{modelValue:r.valid,"onUpdate:modelValue":t[3]||(t[3]=o=>r.valid=o),onSubmit:le(i.changePassword,["prevent"])},{default:b(()=>[l(Ze,null,{default:b(()=>[l(R,{cols:"12",md:"8"},{default:b(()=>[l(Me,{modelValue:r.oldPassword,"onUpdate:modelValue":t[0]||(t[0]=o=>r.oldPassword=o),label:"当前密码",variant:"outlined",density:"comfortable",type:"password",rules:[o=>!!o||"请输入当前密码"],required:""},null,8,["modelValue","rules"])]),_:1}),l(R,{cols:"12",md:"8"},{default:b(()=>[l(Me,{modelValue:r.newPassword,"onUpdate:modelValue":t[1]||(t[1]=o=>r.newPassword=o),rules:r.passwordRules,label:"新密码",variant:"outlined",density:"comfortable",type:"password",required:""},null,8,["modelValue","rules"]),t[4]||(t[4]=C("div",{class:"text-caption text-medium-emphasis"}," 密码必须由数字、大小写字母和特殊字符组成，且长度至少为8位 ",-1))]),_:1}),l(R,{cols:"12",md:"8"},{default:b(()=>[l(Me,{modelValue:r.confirmPassword,"onUpdate:modelValue":t[2]||(t[2]=o=>r.confirmPassword=o),rules:[o=>!!o||"请确认新密码",o=>o===r.newPassword||"两次输入的密码不一致"],label:"确认新密码",variant:"outlined",density:"comfortable",type:"password",required:""},null,8,["modelValue","rules"])]),_:1}),l(R,{cols:"12"},{default:b(()=>[l(G,{onClick:i.changePassword,disabled:!r.valid,color:"primary",size:"large","prepend-icon":"mdi-lock-reset",class:"px-6",loading:r.loading},{default:b(()=>t[5]||(t[5]=[M(" 更新密码 ")])),_:1},8,["onClick","disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue","onSubmit"])}const Ta=ce(_o,[["render",To]]),Oo={name:"UsernameEditor",props:{userData:{type:Object,required:!0}},data(){return{loading:!1,valid:!1,username:this.userData.username||"",usernameRules:[e=>!!e||"用户名是必填项",e=>e&&e.length<=10||"用户名不能超过10个字符",e=>/^[a-z]+$/.test(e)||"用户名只能包含小写字母"]}},watch:{userData:{handler(e){this.username=e.username||""},immediate:!0}},methods:{async changeUsername(){if(this.valid){this.loading=!0;try{const e=await dn({username:this.username});this.$emit("username-updated",e)}catch(e){this.$emit("error",e)}finally{this.loading=!1}}}}};function Mo(e,t,a,n,r,i){return E(),j(xt,{modelValue:r.valid,"onUpdate:modelValue":t[1]||(t[1]=o=>r.valid=o),onSubmit:le(i.changeUsername,["prevent"])},{default:b(()=>[l(Ze,null,{default:b(()=>[l(R,{cols:"12",md:"8"},{default:b(()=>[l(Me,{modelValue:r.username,"onUpdate:modelValue":t[0]||(t[0]=o=>r.username=o),counter:10,rules:r.usernameRules,label:"用户名",variant:"outlined",density:"comfortable",required:""},null,8,["modelValue","rules"]),t[2]||(t[2]=C("div",{class:"text-caption text-medium-emphasis"},"用户名只能包含小写字母",-1))]),_:1}),l(R,{cols:"12"},{default:b(()=>[l(G,{onClick:i.changeUsername,disabled:!r.valid,color:"primary",size:"large","prepend-icon":"mdi-check",class:"px-6",loading:r.loading},{default:b(()=>t[3]||(t[3]=[M(" 保存用户名 ")])),_:1},8,["onClick","disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue","onSubmit"])}const Oa=ce(Oo,[["render",Mo]]),Vo={name:"ProfileEditor",props:{userData:{type:Object,required:!0}},data(){return{loading:!1,valid:!1,profileData:{display_name:this.userData.display_name||"",motto:this.userData.motto||""},selectedGender:{state:"未知",abbr:"3"},genderOptions:[{state:"男",abbr:"0"},{state:"女",abbr:"1"},{state:"猫娘",abbr:"2"},{state:"未知",abbr:"3"}],nameRules:[e=>!!e||"名称是必填项",e=>e&&e.length<=10||"名称不能超过10个字符"]}},watch:{userData:{handler(e){this.profileData.display_name=e.display_name||"",this.profileData.motto=e.motto||"",this.selectedGender=this.genderOptions.find(t=>t.abbr==e.sex)||this.genderOptions[3]},immediate:!0,deep:!0}},methods:{async updateProfile(){if(this.valid){this.loading=!0;try{const e=await cn({display_name:this.profileData.display_name,aboutme:this.profileData.motto,sex:this.selectedGender.abbr});this.$emit("profile-updated",e)}catch(e){this.$emit("error",e)}finally{this.loading=!1}}}}};function Co(e,t,a,n,r,i){return E(),j(xt,{modelValue:r.valid,"onUpdate:modelValue":t[3]||(t[3]=o=>r.valid=o),onSubmit:le(i.updateProfile,["prevent"])},{default:b(()=>[l(Ze,null,{default:b(()=>[l(R,{cols:"12",md:"6"},{default:b(()=>[l(Me,{modelValue:r.profileData.display_name,"onUpdate:modelValue":t[0]||(t[0]=o=>r.profileData.display_name=o),counter:10,label:"显示名称",variant:"outlined",density:"comfortable",required:"",rules:r.nameRules},null,8,["modelValue","rules"])]),_:1}),l(R,{cols:"12",md:"6"},{default:b(()=>[l(wt,{modelValue:r.selectedGender,"onUpdate:modelValue":t[1]||(t[1]=o=>r.selectedGender=o),items:r.genderOptions,"item-title":"state","item-value":"abbr",label:"性别",variant:"outlined",density:"comfortable","persistent-hint":"","return-object":""},null,8,["modelValue","items"])]),_:1}),l(R,{cols:"12"},{default:b(()=>[l(gn,{label:"个人简介",modelValue:r.profileData.motto,"onUpdate:modelValue":t[2]||(t[2]=o=>r.profileData.motto=o),counter:500,variant:"outlined","auto-grow":"",rows:"3"},null,8,["modelValue"])]),_:1}),l(R,{cols:"12"},{default:b(()=>[l(G,{onClick:i.updateProfile,disabled:!r.valid,color:"primary",size:"large","prepend-icon":"mdi-content-save",class:"px-6",loading:r.loading},{default:b(()=>t[4]||(t[4]=[M(" 保存资料 ")])),_:1},8,["onClick","disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue","onSubmit"])}const Ma=ce(Vo,[["render",Co]]),Io={name:"UserCard",props:{userData:{type:Object,required:!0},loading:{type:Boolean,default:!1},s3BucketUrl:{type:String,required:!0}}},Fo={class:"text-body-2 text-medium-emphasis",style:{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}};function Eo(e,t,a,n,r,i){return E(),j(yt,{hover:"",border:"",variant:"elevated",loading:a.loading,class:"mb-4"},{prepend:b(()=>[l(Xa,{class:"ma-3",size:"64"},{default:b(()=>[l(Gt,{alt:a.userData.display_name,src:a.s3BucketUrl+"/user/"+a.userData.images,cover:""},null,8,["alt","src"])]),_:1})]),loader:b(({isActive:o})=>[l(Ga,{active:o,height:"4",indeterminate:"",color:"primary"},null,8,["active"])]),default:b(()=>[l(qa,null,{default:b(()=>[l(zt,{class:"font-weight-bold text-h5"},{default:b(()=>[M(Y(a.userData.display_name||"加载中..."),1)]),_:1}),l(za,{class:"mt-2"},{default:b(()=>[l(Ve,{class:"mr-2",size:"small"},{default:b(()=>[l(we,{icon:"mdi-account-circle",start:"",size:"small"}),M(" ID: "+Y(a.userData.id||"—"),1)]),_:1}),l(Ve,{size:"small"},{default:b(()=>[l(we,{icon:"mdi-tag",start:"",size:"small"}),t[0]||(t[0]=M(" 创作者 "))]),_:1})]),_:1})]),_:1}),a.userData.motto?(E(),j(bt,{key:0},{default:b(()=>[C("div",Fo,Y(a.userData.motto),1)]),_:1})):qt("",!0)]),_:1},8,["loading"])}const Va=ce(Io,[["render",Eo]]),Bo={components:{EmailManager:Xt,OAuthManager:Qt,SecurityManager:Pa,UserCard:Va,ProfileEditor:Ma,UsernameEditor:Oa,PasswordEditor:Ta,AvatarEditor:_a,UserFollowing:yn,UserFollowers:vn,UserBlocked:bn},data(){return{userCardLoading:!1,localuser:ve,userInfo:{},tab:"userInfo",tabItems:[{title:"用户信息",value:"userInfo",icon:"mdi-account-circle"},{title:"账户",value:"username",icon:"mdi-cog"},{title:"密码",value:"password",icon:"mdi-lock"},{title:"头像",value:"avatar",icon:"mdi-image"},{title:"邮箱",value:"email",icon:"mdi-email"},{title:"OAuth",value:"oauth",icon:"mdi-link-variant"},{title:"安全",value:"security",icon:"mdi-security"},{title:"关系",value:"relationships",icon:"mdi-account-group",to:"/app/account/relationships"}],VITE_APP_S3_BUCKET:"https://zerocat-bitiful.houlangs.com"}},setup(){en({title:"账户设置"})},async created(){ve.isLogin.value?await this.getUserById():this.$router.push("/app/account/login")},methods:{async getUserById(){this.userCardLoading=!0;try{const e=await fn(ve.user.value.id);this.userInfo=e.data.data}catch(e){this.handleError(e)}finally{this.userCardLoading=!1}},handleProfileUpdate(e){this.showToast(e.data.status||"info","修改个人信息",e.data.message),this.getUserById()},handleUsernameUpdate(e){this.showToast(e.data.status||"info","修改用户名",e.data.message),this.getUserById()},handlePasswordUpdate(e){this.showToast(e.data.status||"info","修改密码",e.data.message)},handleAvatarUpdate(e){this.showToast(e.data.status||"info","修改头像",e.data.message),this.getUserById()},handleError(e){this.showToast("error","错误",e.message)},showToast(e,t,a){this.$toast.add({severity:e,summary:t,detail:a,life:3e3})}}};function Wo(e,t,a,n,r,i){const o=Va,s=Ma,u=Oa,d=Ta,f=_a,m=Xt,h=Qt,w=Pa;return E(),j(wn,{fluid:"",class:"pa-4"},{default:b(()=>[l(o,{userData:r.userInfo,loading:r.userCardLoading,s3BucketUrl:r.VITE_APP_S3_BUCKET},null,8,["userData","loading","s3BucketUrl"]),l(yt,{hover:"",border:""},{default:b(()=>[l(Qa,{modelValue:r.tab,"onUpdate:modelValue":t[0]||(t[0]=c=>r.tab=c),"bg-color":"primary"},{default:b(()=>[(E(!0),je(ue,null,Ka(r.tabItems,c=>(E(),j(Ja,{key:c.value,text:c.title,value:c.value,onClick:y=>r.tab=c.value,"prepend-icon":c.icon,to:c.to},null,8,["text","value","onClick","prepend-icon","to"]))),128))]),_:1},8,["modelValue"]),l(bt,{class:"pa-4"},{default:b(()=>[l(Za,{modelValue:r.tab,"onUpdate:modelValue":t[1]||(t[1]=c=>r.tab=c)},{default:b(()=>[l(ee,{value:"userInfo"},{default:b(()=>[t[2]||(t[2]=C("h3",{class:"text-h5 mb-4"},"个人资料",-1)),l(s,{userData:r.userInfo,onProfileUpdated:i.handleProfileUpdate,onError:i.handleError},null,8,["userData","onProfileUpdated","onError"])]),_:1}),l(ee,{value:"username"},{default:b(()=>[t[3]||(t[3]=C("h3",{class:"text-h5 mb-4"},"修改用户名",-1)),l(u,{userData:r.userInfo,onUsernameUpdated:i.handleUsernameUpdate,onError:i.handleError},null,8,["userData","onUsernameUpdated","onError"])]),_:1}),l(ee,{value:"password"},{default:b(()=>[t[4]||(t[4]=C("h3",{class:"text-h5 mb-4"},"修改密码",-1)),l(d,{onPasswordUpdated:i.handlePasswordUpdate,onError:i.handleError},null,8,["onPasswordUpdated","onError"])]),_:1}),l(ee,{value:"avatar"},{default:b(()=>[t[5]||(t[5]=C("h3",{class:"text-h5 mb-4"},"更新头像",-1)),l(f,{userData:r.userInfo,s3BucketUrl:r.VITE_APP_S3_BUCKET,onAvatarUpdated:i.handleAvatarUpdate,onError:i.handleError},null,8,["userData","s3BucketUrl","onAvatarUpdated","onError"])]),_:1}),l(ee,{value:"email"},{default:b(()=>[t[6]||(t[6]=C("h3",{class:"text-h5 mb-4"},"邮箱管理",-1)),l(m,{ref:"emailManager"},null,512)]),_:1}),l(ee,{value:"oauth"},{default:b(()=>[t[7]||(t[7]=C("h3",{class:"text-h5 mb-4"},"第三方账号关联",-1)),l(h)]),_:1}),l(ee,{value:"security"},{default:b(()=>[t[8]||(t[8]=C("h3",{class:"text-h5 mb-4"},"安全管理",-1)),l(w)]),_:1}),l(ee,{value:"relationships"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})}const us=ce(Bo,[["render",Wo],["__scopeId","data-v-e9dfc994"]]);export{us as default};
