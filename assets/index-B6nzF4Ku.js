import{a as B,_ as R}from"./Comment-R3Pn2Y1c.js";import{N as L}from"./NewProjectList-C77vpOnd.js";import{_ as V,H as f,J as c,o as a,e as m,a as t,w as e,S as g,T as E,R as C,am as J,O as r,U as n,an as O,aa as Q,N as v,G as S,c as j,L as u,M as T,Q as D,$ as h}from"./index-PIA1IM-F.js";import{V as Z}from"./VDialog-BAzf4hot.js";import{P as F}from"./ProjectRunner-VNhbR_j_.js";import{o as q}from"./openEdit-DBNuVmNU.js";import{a as x,V as z}from"./VRow-jYeD18H_.js";import{V as y,e as N,c as I,d as A}from"./VCard-Dlmo9MGH.js";import{V as d}from"./VChip-BdGfnsIV.js";import{V as K}from"./VContainer-DAI86nA6.js";import"./VForm-Du_1qUW7.js";import"./VTextarea-euX_Gyla.js";import"./VSpacer-DqnycoPz.js";/* empty css              */import"./VExpansionPanels-BesbaC8o.js";const W={components:{NewProjectList:L},name:"addtolist",data(){return{localuser:f,userinfo:f.user,newProjectListDialog:!1,projectLists:[]}},methods:{async getProjectList(){this.projectLists=(await c({url:"/projectlist/check?projectid="+this.$route.params.id,method:"get"})).data},async addProjectToList(i){await c({url:"/projectlist/add",data:{userid:this.userinfo.id,projectid:this.$route.params.id,listid:i},method:"post"}).then(s=>{this.$toast.add({severity:"info",summary:"info",detail:s.message,life:3e3}),this.getProjectList()})},async removeProjectFromList(i){await c({url:"/projectlist/remove",data:{projectid:this.$route.params.id,listid:i},method:"post"}).then(s=>{this.$toast.add({severity:"info",summary:"info",detail:s.message,life:3e3}),this.getProjectList()})}},mounted(){this.getProjectList()}};function X(i,s,w,P,o,p){const _=L;return a(),m(g,null,[t(Q,null,{default:e(()=>[(a(!0),m(g,null,E(o.projectLists,l=>(a(),m("div",{key:l.id},[t(C,{"append-icon":l.include==!0?"mdi-minus-circle":"mdi-plus-circle",active:l.include==!0,color:"primary",onClick:k=>l.include==!0?p.removeProjectFromList(l.id):p.addProjectToList(l.id)},{default:e(()=>[t(J,null,{default:e(()=>[r(n(l.title),1)]),_:2},1024),t(O,null,{default:e(()=>[r(n(l.description),1)]),_:2},1024)]),_:2},1032,["append-icon","active","onClick"])]))),128)),t(C,{onClick:s[0]||(s[0]=l=>o.newProjectListDialog=!0)},{default:e(()=>s[2]||(s[2]=[r("新建列表")])),_:1})]),_:1}),t(Z,{modelValue:o.newProjectListDialog,"onUpdate:modelValue":s[1]||(s[1]=l=>o.newProjectListDialog=l)},{default:e(()=>[t(_,{listid:i.editlistid,close:()=>o.newProjectListDialog=!1,callback:p.getProjectList},null,8,["listid","close","callback"])]),_:1},8,["modelValue"])],64)}const H=V(W,[["render",X]]),Y={components:{NewProjectList:L},name:"addtolist",data(){return{localuser:f,userinfo:f.user,newProjectListDialog:!1,projectLists:"",star:!1}},methods:{getStarStatus(){c({url:`/projectlist/checkstar?projectid=${this.$route.params.id}`,method:"get"}).then(i=>{this.star=i.star})},ToggleStarProject(){this.star==0?c({url:"/projectlist/star",method:"post",data:{projectid:this.$route.params.id}}).then(i=>{this.star=i.star}):c({url:"/projectlist/unstar",method:"post",data:{projectid:this.$route.params.id}}).then(i=>{this.star=i.star})}},mounted(){this.getStarStatus()}};function $(i,s,w,P,o,p){return a(),m(g,null,[t(v,{onClick:s[0]||(s[0]=_=>p.ToggleStarProject()),color:o.star?"yellow":"","prepend-icon":"mdi-star",variant:"tonal"},{default:e(()=>s[1]||(s[1]=[r("Star")])),_:1},8,["color"]),r(n(o.projectLists),1)],64)}const M=V(Y,[["render",$]]),tt={components:{ProjectRunner:F,TimeAgo:B,Comment:R,AddTolist:H,ProjectStar:M},data(){return{project:{id:1,authorid:1,time:"2000-01-01T00:00:00.000Z",view_count:0,like_count:0,type:"text",favo_count:0,title:"加载中",state:"public",description:"加载中",license:"MIT",tags:"",likeid:"",favoid:"",author:{id:1,display_name:"加载中",images:"加载中"}},communityinfo:{stars:""},openEditor:q,localuser:f}},setup(){S({title:"项目"})},async created(){await this.getproject()},methods:{async getproject(){this.project=await c({url:"/project/"+this.$route.params.id,method:"get"}),this.communityinfo=await c({url:"/project/community/"+this.$route.params.id,method:"get"}),this.communityinfo=this.communityinfo.data,console.log(this.communityinfo),S({title:""+this.project.title}),console.log(this.project)}}},et={class:"px-4 d-flex ga-2 mb-2"},ot={class:"px-4 d-flex ga-2 mb-2"},st={class:"px-4 d-flex ga-2 mb-2"},rt={class:"px-4 d-flex ga-2 mb-2"},it={class:"px-4 d-flex ga-2 mb-2"},lt={class:"px-4"};function nt(i,s,w,P,o,p){const _=F,l=B,k=M,U=H,G=R;return a(),j(K,null,{default:e(()=>[t(z,null,{default:e(()=>[t(x,{xs:"12",sm:"12",md:"8",lg:"8",xl:"8",xxl:"8",cols:"12"},{default:e(()=>[t(_,{type:o.project.type,id:o.project.id},null,8,["type","id"])]),_:1}),t(x,{xs:"12",sm:"12",md:"4",lg:"4",xl:"4",xxl:"8",cols:"12"},{default:e(()=>[t(y,{hover:"",border:""},{default:e(()=>[t(N,null,{default:e(()=>[t(I,null,{default:e(()=>[r(n(o.project.title),1)]),_:1}),t(A,null,{default:e(()=>[r(n(o.project.description),1)]),_:1})]),_:1}),u("div",et,[t(d,{pill:""},{default:e(()=>[t(T,{start:""},{default:e(()=>[t(D,{src:"https://s4-1.wuyuan.1r.ink/user/"+o.project.author.images},null,8,["src"])]),_:1}),r(n(o.project.author.display_name),1)]),_:1})]),u("div",ot,[t(d,{pill:"","prepend-icon":"mdi-eye"},{default:e(()=>[r(n(o.project.view_count)+"浏览",1)]),_:1}),t(d,{pill:"","prepend-icon":"mdi-star"},{default:e(()=>[r(n(o.communityinfo.stars)+" Star",1)]),_:1}),t(d,{pill:"","prepend-icon":"mdi-clock"},{default:e(()=>[t(l,{date:o.project.time},null,8,["date"])]),_:1})]),u("div",st,[o.project.state=="public"?(a(),j(d,{key:0,pill:"","prepend-icon":"mdi-xml"},{default:e(()=>s[1]||(s[1]=[r("开源作品")])),_:1})):h("",!0),o.project.state=="private"?(a(),j(d,{key:1,pill:"","prepend-icon":"mdi-xml"},{default:e(()=>s[2]||(s[2]=[r("私密作品")])),_:1})):h("",!0),t(d,{pill:"","prepend-icon":"mdi-application"},{default:e(()=>[r(n(o.project.type),1)]),_:1})]),u("div",rt,[(a(!0),m(g,null,E(o.project.tags,b=>(a(),m("div",null,[t(d,null,{default:e(()=>[r(n(b.name),1)]),_:2},1024)]))),256))]),u("div",it,[t(k),t(v,{onClick:s[0]||(s[0]=b=>o.openEditor(o.project.id,o.project.type)),variant:"text"},{default:e(()=>s[3]||(s[3]=[r("打开创造页")])),_:1}),o.project.authorid!=o.localuser.user.id?(a(),j(v,{key:0,to:"/projects/"+o.project.id+"/fork",variant:"text"},{default:e(()=>s[4]||(s[4]=[r("改编")])),_:1},8,["to"])):h("",!0)]),u("div",lt,[t(y,{hover:"",to:"/user/"+o.project.authorid,border:""},{default:e(()=>[t(N,null,{prepend:e(()=>[t(T,null,{default:e(()=>[t(D,{alt:o.project.author.display_name,src:"https://s4-1.wuyuan.1r.ink/user/"+o.project.author.images},null,8,["alt","src"])]),_:1})]),default:e(()=>[t(I,{class:"text-white"},{default:e(()=>[r(n(o.project.author.display_name),1)]),_:1}),t(A,{class:"text-white"},{default:e(()=>[r(n(o.project.author.motto),1)]),_:1})]),_:1})]),_:1},8,["to"])]),s[5]||(s[5]=u("br",null,null,-1))]),_:1}),s[6]||(s[6]=u("br",null,null,-1)),t(y,{hover:"",border:""},{default:e(()=>[t(U)]),_:1})]),_:1}),t(x,{xxl:"8",xl:"8",lg:"8",md:"8",sm:"12",xs:"12",cols:"12"},{default:e(()=>[t(G,{url:"project-"+i.$route.params.id,name:"项目"},null,8,["url"])]),_:1})]),_:1})]),_:1})}const Vt=V(tt,[["render",nt]]);export{Vt as default};
